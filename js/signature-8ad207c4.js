var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,o=(e,o)=>{for(var n in o||(o={}))t.call(o,n)&&l(e,n,o[n]);if(a)for(var n of a(o))s.call(o,n)&&l(e,n,o[n]);return e};import{p as n,j as i,q as r,d as c,B as u}from"./vant-f142fa12.js";import{_ as d}from"./index-7153c68f.js";import{D as p,bl as v,u as m,g as f,j as b,k as g,l as y,E as k,x as _,o as j,c as h,ap as x,a as O,F as C,b as w,n as S,f as L,e as E,b8 as I,L as q,at as z,aN as D,aM as P}from"./@vue-563ebafd.js";import{S as R}from"./signature_pad-b016ca8d.js";import{I as W}from"./intro.js-10a0758d.js";import{_ as B}from"./plugin-vue_export-helper-893979e1.js";import"./@vant-3579f7e1.js";import"./vue-router-2cd4af54.js";const F={class:"signature"},H={class:"signature-wrapper"},M={key:0,class:"tip-text st-font-24"},N={class:"signature__control van-hairline--top st-bg-white"},U={class:"ctrl-color"},A=["onClick"],G={class:"ctrl-btn"},J=p({name:"Signature"});var K=B(Object.assign(J,{props:{options:{type:Object,default:()=>({})}},emits:["save"],setup(e,{expose:a,emit:t}){const s=e;v((e=>({"49fe0a0f":m(c)})));f((()=>{W().exit()}));const l=b(null),n=b(null),r=b(!0),c=b("#000"),u=g(["#000","#2489f3","#ed521f"]),d=b(.5);y((()=>{p()})),k((()=>{n.value=null})),_((()=>n.value),((e,a)=>{r.value=e._isEmpty}),{deep:!0});const p=()=>{const e={minWidth:d.value,maxWidth:5,penColor:c.value,backgroundColor:"rgb(255, 255, 255)"};n.value=new R(l.value,o(o({},e),s.options)),r.value=n.value.isEmpty(),l.value.width=document.body.clientWidth,l.value.height=document.body.clientHeight/2,n.value.addEventListener("beginStroke",(()=>{r.value=!1}),{once:!1})},z=()=>{const e=n.value.toData();e&&(e.pop(),n.value.fromData(e))},D=()=>{n.value.clear(),P()},P=()=>{if(n.value.isEmpty())t("save",null);else{const e=n.value.toDataURL();t("save",e)}};return a({guide:()=>{W().setOptions({prevLabel:"上一步",nextLabel:"下一步",skipLabel:"跳过",doneLabel:"知道了",showBullets:!1,disableInteraction:!0,exitOnOverlayClick:!1,steps:[{element:document.querySelector("canvas"),title:"签名区域",intro:"您可以在此处手写签名",position:"top"},{element:document.querySelector(".ctrl-color"),title:"手写笔颜色",intro:"您可以切换手写笔颜色",position:"top"},{element:document.querySelector(".ctrl-btn"),title:"操作",intro:"您可以撤销、清空、保存签名",position:"bottom"}]}).start()}}),(e,a)=>{const t=i;return j(),h("div",F,[x("",!0),O("main",H,[m(r)?(j(),h("h2",M,"请在此处签名")):x("",!0),O("canvas",{ref_key:"canvasRef",ref:l},"您的浏览器不支持canvas技术,请升级浏览器!",512)]),O("footer",N,[O("div",U,[(j(!0),h(C,null,w(m(u),(e=>(j(),h("div",{key:e,style:S({"background-color":e}),class:L(["color-btn",{"active-color":e===m(c)}]),onClick:a=>(e=>{n.value.penColor=c.value=e})(e)},null,14,A)))),128))]),O("div",G,[E(t,{icon:"revoke",size:"small",disabled:m(r),onClick:z},{default:I((()=>[q("撤销")])),_:1},8,["disabled"]),E(t,{icon:"cross",size:"small",style:{"margin-left":"12px"},type:"danger",disabled:m(r),onClick:D},{default:I((()=>[q(" 清空 ")])),_:1},8,["disabled"]),E(t,{icon:"success",size:"small",type:"primary",disabled:m(r),style:{"margin-left":"12px"},onClick:P},{default:I((()=>[q(" 保存 ")])),_:1},8,["disabled"])])])])}}}),[["__scopeId","data-v-2f912126"]]);const Q={class:"layout__page"},T=(e=>(D("data-v-0939647c"),e=e(),P(),e))((()=>O("span",{class:"st-margin-right-10"},"签名教程",-1))),V={class:""},X={key:0,class:"preview"},Y=["src"],Z=p({name:"Signature"});var $=B(Object.assign(Z,{setup(e){const a=b(null),t=b(null),s=()=>{t.value.guide()},l=()=>{},o=e=>{if(a.value=e,!a.value)return!1};return(e,n)=>{const i=r,p=d,v=c,f=u;return j(),h("div",Q,[E(p,null,{right:I((()=>[O("div",{class:"guide-icon st-font-12 st-flex-ai",onClick:s},[T,E(i,{name:"info",size:"14"})])])),_:1}),O("div",V,[E(v,{title:"手写签名区域",border:!1}),E(K,{ref_key:"signaturePadRef",ref:t,onSave:o},null,512),(j(),h("div",X,[E(v,{title:"预览签名区域",center:""},z({_:2},[void 0]),1024),m(a)?(j(),h("img",{key:0,class:"sign-img",src:m(a),onClick:l},null,8,Y)):x("",!0)]))]),E(f)])}}}),[["__scopeId","data-v-0939647c"]]);export{$ as default};
