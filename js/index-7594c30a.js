var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;import{n as l,R as n,j as p}from"./vant-182c6d73.js";import{_ as d}from"./index-06373c59.js";import{a as c,_ as f,n as g,Y as u,m,r as h,b as v,ak as b,l as j,al as x,F as y,aN as w,u as P,b7 as _,aI as k,a4 as D,bq as O,ai as S,aj as R,A as z,aK as I,aJ as B}from"./@vue-0da0c2e3.js";import{V as W}from"./vue-drag-resize-4e7eaa09.js";import{p as F,a as H}from"./pdfjs-dist-a8d1ca6a.js";import{_ as C}from"./plugin-vue_export-helper-893979e1.js";import"./@vant-b0725c78.js";import"./vue-router-1cbad9b8.js";import"./@antv-74afab59.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./vue-30760876.js";import"./dommatrix-3a4adfb5.js";import"./web-streams-polyfill-311c6d79.js";import"./object-inspect-af06f273.js";F.exports.GlobalWorkerOptions.workerSrc=H;const A=()=>{const e=c({pdfDoc:"",pdfPages:0,pdfScale:1,pdfWidth:1e3,pdfHeight:1143,canvas_id:"pdf-canvas-"}),l=t=>{u(e.pdfDoc).getPage(t).then((a=>{const s=e.canvas_id+t,i=document.getElementById(s),o=i.getContext("2d"),r=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),n=a.getViewport({scale:e.pdfScale});i.width=n.width*r,i.height=n.height*r,i.style.width="375px",i.style.height="400px",e.pdfWidth=375,e.pdfHeight=400,o.setTransform(r,0,0,r,0,0);const p={canvasContext:o,viewport:n};a.render(p),t<e.pdfPages&&l(t+1)}))};return n=((e,t)=>{for(var a in t||(t={}))i.call(t,a)&&r(e,a,t[a]);if(s)for(var a of s(t))o.call(t,a)&&r(e,a,t[a]);return e})({},f(e)),t(n,a({loadFile:t=>{F.exports.getDocument(t).promise.then((t=>{e.pdfDoc=t,e.pdfPages=e.pdfDoc.numPages,g((()=>{l(1)}))}))}}));var n};const E=e=>(I("data-v-14fec98a"),e=e(),B(),e),L={class:"sign-drag st-bg"},N={class:"contract-document"},V=["id"],q=E((()=>x("h3",null,"Hello World!",-1))),G={class:"control-tools"},J=E((()=>x("div",null,"印章",-1))),K=E((()=>x("div",null,"签名",-1))),T=E((()=>x("div",null,"日期",-1))),Y=m({name:"SignDrag"});var M=C(Object.assign(Y,{setup(e,{expose:t}){const{loadFile:a,pdfPages:s,pdfWidth:i,pdfHeight:o}=A(),r=h(null);h(1),h(0);const g=c({signList:[{signImg:"http://tva1.sinaimg.cn/large/006nwNl2ly1h71g369jdlj308c03c3yk.jpg",name:"模拟签名1",left:0,top:0,width:137,height:73,type:"sign"}],dropData:[],width:0,height:0,top:0,left:0}),{dropData:u,signList:m,top:I,left:B}=f(g),F=()=>{u.value.push(m.value[0])},H=(e,t)=>{g.width=e.width,g.height=e.height,g.top=e.top,g.left=e.left};return t({onPrint:()=>{r.value.print()}}),v((()=>{a("http://storage.xuetangx.com/public_assets/xuetangx/PDF/PlayerAPI_v1.0.6.pdf")})),(e,t)=>{const a=d,r=l,c=n,f=p;return k(),b("div",L,[j(a),x("ul",N,[(k(!0),b(y,null,w(P(s),(a=>(k(),b("li",{key:a,class:"contract-wrapper",style:D({width:P(i)+"px",height:P(o)+"px"}),onDragover:t[2]||(t[2]=O((()=>{}),["prevent"]))},[(k(),b("canvas",{id:"pdf-canvas-"+a,key:a,draggable:"false",style:{zoom:1}},null,8,V)),1==a?(k(),S(P(W),{key:0,"is-active":!0,"parent-limitation":!0,w:80,h:40,x:P(B),y:P(I),z:9999,onResizing:t[0]||(t[0]=t=>H(t,e.item)),onDragging:t[1]||(t[1]=t=>H(t,e.item))},{default:_((()=>[q])),_:1},8,["x","y"])):R("",!0)],36)))),128))]),x("div",G,[j(c,{class:"tools-box",type:"flex",align:"center"},{default:_((()=>[j(r,{span:"12"},{default:_((()=>[j(c,{type:"flex",align:"center",gutter:"20"},{default:_((()=>[j(r,null,{default:_((()=>[J])),_:1}),j(r,{onClick:F},{default:_((()=>[K])),_:1}),j(r,null,{default:_((()=>[T])),_:1})])),_:1})])),_:1}),j(r,{span:"12"},{default:_((()=>[j(f,{size:"small",type:"primary",block:""},{default:_((()=>[z("提交签署")])),_:1})])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-14fec98a"]]);export{M as default};
