var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&r(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&r(e,t,a[t]);return e},n=(e,l)=>a(e,t(l));import{l as c,r as d,a as u,w as f,t as p,S as h,s as m,B as v,H as b,M as y,N as w,D as j,E as k,J as g,I as x,v as C,G as F,P as S,aR as _,aQ as O,F as V,b as A,n as E,u as P,f as R}from"./@vue-52de1c01.js";import{w as L,u as I,v as B,x as U,y as M,z,S as K,A as q,E as D,H,s as J}from"./vant-7136ba84.js";import{t as N,_ as T}from"./index-3157abda.js";import{e as G}from"./lodash-es-c547d601.js";import"./@vant-0004063d.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vue-router-a4543dac.js";import"./vuex-c830e64e.js";import"./@vueuse-feee2333.js";import"./axios-0cd4f164.js";import"./qs-6446231f.js";import"./side-channel-b2edb420.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-8ed24658.js";import"./@antv-8a75d63c.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-319be66c.js";import"./vue3-hash-calendar-68956731.js";import"./hammerjs-ed6f6a9e.js";c({name:"ListTotal"});const Q=c({name:"FilterMenus",components:{},props:{activeColor:{type:String,default:N},filterMenu:{type:Array,default:()=>[{field:"status",label:"状态",value:"",multiple:!1,data:[{label:"不限",value:"-1"},{label:"上架",value:"0"},{label:"下架",value:"1"}]}],validator:e=>G(e)}},emits:["close","confirm"],setup(e,{emit:a}){const t=d(null),l=d([0,1]),s=u({list:[]});f((()=>e.filterMenu),((e,a)=>{e!==a&&(s.list=e,s.list.forEach((e=>{if(e.data&&e.data.length){e.data.forEach((e=>{e.checked=!1}));if(e.hasOwnProperty("canAll")&&e.canAll){const a={label:"全选",value:"all",checked:!1};e.data.unshift(a)}}})))}),{deep:!0,immediate:!0});return n(i({},p(s)),{container:t,activeArr:l,onFinish:({value:e,selectedOptions:a,tabIndex:t},l)=>{const s=l.showAllLevels;l.value=s?a.map((e=>e.value)).join("/"):e},handleClickBtn:()=>{},filterLabelSelect:(e,a,t,l)=>{if("all"===e.value&&(e.checked=!e.checked,e.label=e.checked?"反选":"全选",t.data.forEach((a=>a.checked=e.checked))),"all"!==e.value){e.checked=!e.checked;const a=t.data.filter((e=>"all"!==e.value&&e.checked)).length;t.hasOwnProperty("canAll")&&!0===t.canAll&&(t.data[0].checked=a===t.data.length-1,t.data[0].label=a===t.data.length-1?"反选":"全选")}t.hasOwnProperty("multiple")&&!t.multiple&&("all"!==e.value&&s.list[l].data.forEach((e=>e.checked=!1)),e.checked=!e.checked)},filterReset:()=>{s.list.forEach((e=>{e.type&&"tree"===e.type&&(e.valueShow="",e.value=""),e.data&&e.data.length&&e.data.forEach((e=>{e.checked=!1,"all"===e.value&&(e.label="全选")}))}))},filterConfirm:()=>{const e={};s.list.forEach((a=>{if(a.data&&a.data.length){const t=a.data.reduce(((e,a)=>("all"!==a.value&&a.checked&&e.push(a.value),e)),[]);"tree"===a.type&&""!==a.value&&(e[a.field]=a.value),""!==t.join(",")&&(e[a.field]=t.join(","))}}));const t=0!==Object.keys(e).length;a("confirm",e,t)}})}}),$={ref:"container",class:"filter-menus-wrapper st-bg-white"},W={class:"filter-list"},X={key:0,class:"st-flex-wrap st-padding-box"},Y=["onClick"],Z=(e=>(_("data-v-10473434"),e=e(),O(),e))((()=>b("div",null,null,-1))),ee={class:"filter-button-box st-flex-ai"};var ae=T(Q,[["render",function(e,a,t,l,s,o){const r=L,i=I,n=B,c=h("waves");return m(),v("div",$,[b("div",W,[(m(!0),v(y,null,w(e.list,((t,l)=>(m(),v("div",{key:l,class:"filter-item"},[j(n,{modelValue:e.activeArr,"onUpdate:modelValue":a[1]||(a[1]=a=>e.activeArr=a),border:!1},{default:k((()=>[j(i,{name:l,title:t.label,value:""+(e.activeArr.includes(l)?"收起":"展开")},{default:k((()=>["tree"!==t.type?(m(),v("div",X,[(m(!0),v(y,null,w(t.data,((a,s)=>(m(),v("div",{key:s,class:g([{checked:a.checked},"filter-item-label st-line-16 van-ellipsis"]),onClick:o=>e.filterLabelSelect(a,s,t,l)},x(a.label),11,Y)))),128))])):(m(),C(r,{key:l,ref_for:!0,ref:"cascaderRef",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,"field-names":{text:"label",value:"value",children:"children"},options:t.data,"active-color":e.activeColor,class:"cascader-tree",placeholder:"请选择",onClose:a[0]||(a[0]=a=>e.show=!1),onFinish:a=>e.onFinish(a,t,l)},{title:k((()=>[Z])),_:2},1032,["modelValue","onUpdate:modelValue","options","active-color","onFinish"]))])),_:2},1032,["name","title","value"])])),_:2},1032,["modelValue"])])))),128))]),b("div",ee,[F((m(),v("div",{class:"filter-button-reset st-flex-center st-flex-1",onClick:a[2]||(a[2]=(...a)=>e.filterReset&&e.filterReset(...a))},[S(" 清空 ")])),[[c]]),F((m(),v("div",{class:"filter-button-confirm st-flex-center st-flex-1 st-color-white",onClick:a[3]||(a[3]=(...a)=>e.filterConfirm&&e.filterConfirm(...a))},[S(" 确定 ")])),[[c]])])],512)}],["__scopeId","data-v-10473434"]]);const te=c({name:"SearchFilter",props:{placeholder:{type:String,default:"搜索关键词"},filter:{type:Boolean,default:!1},shape:{type:String,default:"square",validator:e=>["square","round"].includes(e)}},emits:["search","confirm"],setup(e,{emit:a}){const t=u({keyword:"",showFilter:!0,isChecked:!1,dropdownItemRef:null,keywordListRef:null,showKeywordList:!1});f((()=>t.keyword),((e,a)=>{}));return n(i({},p(t)),{onFocus:()=>{t.showKeywordList=!0,t.showFilter=!1},onBlur:()=>{t.showKeywordList=!1,t.showFilter=!0},onSearch:()=>{a("search",t.keyword)},searchConfirm:()=>{},handleFilterConfirm:(e,l)=>{t.dropdownItemRef.toggle(),t.isChecked=l,a("confirm",e)},handleKeywordSearch:e=>{t.keyword=e}})}}),le={class:"search-filter-wrapper st-flex-ai st-bg-white van-hairline--bottom"},se=(e=>(_("data-v-7f600c48"),e=e(),O(),e))((()=>b("div",{class:g("")},"筛选",-1)));var oe=T(te,[["render",function(e,a,t,l,s,o){const r=ae,i=U,n=M,c=z;return m(),v("div",le,[j(c,{modelValue:e.keyword,"onUpdate:modelValue":a[0]||(a[0]=a=>e.keyword=a),modelModifiers:{trim:!0},shape:e.shape,"show-action":!0,class:"search-box st-flex-1",autocomplete:"off",placeholder:e.placeholder,"action-text":"",onBlur:e.onBlur,onFocus:e.onFocus,onSearch:e.onSearch},{action:k((()=>[(m(),C(n,{key:0,"active-color":"#333333","z-index":"999"},{default:k((()=>[j(i,{ref:"dropdownItemRef"},{title:k((()=>[se])),default:k((()=>[j(r,{onConfirm:e.handleFilterConfirm},null,8,["onConfirm"])])),_:1},512)])),_:1}))])),_:1},8,["modelValue","shape","placeholder","onBlur","onFocus","onSearch"])])}],["__scopeId","data-v-7f600c48"]]);const re={class:"page-wrapper"},ie=c({name:"ListDemo"});var ne=T(Object.assign(ie,{setup(e){d(null);A((()=>{return e=this,a=null,t=function*(){yield E()},new Promise(((l,s)=>{var o=e=>{try{i(t.next(e))}catch(a){s(a)}},r=e=>{try{i(t.throw(e))}catch(a){s(a)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,r);i((t=t.apply(e,a)).next())}));var e,a,t})),d(0);const a=d([]),t=d([]);u({status:"-1"});const l=d(!1),s=d(!1),o=d(!1),r=()=>{setTimeout((()=>{o.value&&(t.value=a.value=[],o.value=!1);for(let e=1;e<=10;e++){const l={title:"商品"+e,tag:e%2==0?"上架":"下架",status:e%2==0?"0":"1",price:(2*e).toFixed(2),desc:e%2==0?"我是上架的宝贝":"我是下架的宝贝",thumb:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"};t.value.push(l),a.value.push(l)}l.value=!1,a.value.length>=50&&(s.value=!0)}),1e3)};r();const i=()=>{s.value=!1,l.value=!0,r()},n=e=>{if(""!==e.trim()){const l=new RegExp(e,"gi"),s=t.value.filter((e=>l.test(e.title)));a.value=s}else a.value=t.value},c=e=>{J({message:`筛选参数：${JSON.stringify(e)}`})};return(e,t)=>{const d=oe,u=K,f=q,p=D,h=H;return m(),v("div",re,[j(u,{"offset-top":46,"z-index":99},{default:k((()=>[j(d,{placeholder:"搜索商品",onSearch:n,onConfirm:c})])),_:1}),j(h,{modelValue:P(o),"onUpdate:modelValue":t[1]||(t[1]=e=>R(o)?o.value=e:null),onRefresh:i},{default:k((()=>[j(p,{loading:P(l),"onUpdate:loading":t[0]||(t[0]=e=>R(l)?l.value=e:null),finished:P(s),"finished-text":"没有更多了",onLoad:r},{default:k((()=>[(m(!0),v(y,null,w(P(a),((e,a)=>(m(),C(f,{key:e.title+a,tag:e.tag,price:e.price,desc:e.desc,title:e.title,thumb:e.thumb,class:"st-bg-white"},null,8,["tag","price","desc","title","thumb"])))),128))])),_:1},8,["loading","finished"])])),_:1},8,["modelValue"]),V("",!0)])}}}),[["__scopeId","data-v-9e9c5942"]]);export{ne as default};
