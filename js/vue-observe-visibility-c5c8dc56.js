import{n as t}from"./@vue-0da0c2e3.js";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,r){if(t===r)return!0;if("object"===e(t)){for(var n in t)if(!o(t[n],r[n]))return!1;return!0}return!1}var s=function(){function e(t,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(r,n)}var i,o,s;return i=e,o=[{key:"createObserver",value:function(e,r){var i=this;if(this.observer&&this.destroyObserver(),!this.frozen){var o;if(this.options="function"==typeof(o=e)?{callback:o}:o,this.callback=function(t,e){i.options.callback(t,e),t&&i.options.once&&(i.frozen=!0,i.destroyObserver())},this.callback&&this.options.throttle){var s=(this.options.throttleOptions||{}).leading;this.callback=function(t,e){var r,i,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];if(o=c,!r||a!==i){var f=s.leading;"function"==typeof f&&(f=f(a,i)),r&&a===i||!f||t.apply(void 0,[a].concat(n(o))),i=a,clearTimeout(r),r=setTimeout((function(){t.apply(void 0,[a].concat(n(o))),r=0}),e)}};return a._clear=function(){clearTimeout(r),r=null},a}(this.callback,this.options.throttle,{leading:function(t){return"both"===s||"visible"===s&&t||"hidden"===s&&!t}})}this.oldResult=void 0,this.observer=new IntersectionObserver((function(t){var e=t[0];if(t.length>1){var r=t.find((function(t){return t.isIntersecting}));r&&(e=r)}if(i.callback){var n=e.isIntersecting&&e.intersectionRatio>=i.threshold;if(n===i.oldResult)return;i.oldResult=n,i.callback(n,e)}}),this.options.intersection),t((function(){i.observer&&i.observer.observe(i.el)}))}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&"number"==typeof this.options.intersection.threshold?this.options.intersection.threshold:0}}],o&&r(i.prototype,o),s&&r(i,s),e}();function a(t,e,r){var n=e.value;if(n)if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var i=new s(t,n,r);t._vue_visibilityState=i}}function l(t){var e=t._vue_visibilityState;e&&(e.destroyObserver(),delete t._vue_visibilityState)}var c={beforeMount:a,updated:function(t,e,r){var n=e.value;if(!o(n,e.oldValue)){var i=t._vue_visibilityState;n?i?i.createObserver(n,r):a(t,{value:n},r):l(t)}},unmounted:l};export{c as O};
