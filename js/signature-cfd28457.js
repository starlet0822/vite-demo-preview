var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,o=(e,o)=>{for(var n in o||(o={}))t.call(o,n)&&l(e,n,o[n]);if(a)for(var n of a(o))s.call(o,n)&&l(e,n,o[n]);return e};import{p as n,n as r,l as i,e as c,B as u}from"./vant-e0b5fbdf.js";import{_ as d}from"./index-eb7feec2.js";import{l as p,bl as v,u as m,o as b,r as f,a as g,b as y,V as _,w as k,s as j,B as h,F as x,H as O,M as C,N as w,K as S,J as E,D as L,E as I,P,ay as z,aR as D,aQ as R}from"./@vue-52de1c01.js";import{S as q}from"./signature_pad-b016ca8d.js";import{I as B}from"./intro.js-10a0758d.js";import{_ as W}from"./plugin-vue_export-helper-893979e1.js";import"./@vant-0004063d.js";import"./vue-router-35312974.js";const H={class:"signature"},F={class:"signature-wrapper"},J={key:0,class:"tip-text st-font-24"},K={class:"signature__control van-hairline--top st-bg-white"},M={class:"ctrl-color"},N=["onClick"],Q={class:"ctrl-btn"},U=p({name:"Signature"});var V=W(Object.assign(U,{props:{options:{type:Object,default:()=>({})}},emits:["save"],setup(e,{expose:a,emit:t}){const s=e;v((e=>({"49fe0a0f":m(c)})));b((()=>{B().exit()}));const l=f(null),n=f(null),i=f(!0),c=f("#000"),u=g(["#000","#2489f3","#ed521f"]),d=f(.5);y((()=>{p()})),_((()=>{n.value=null})),k((()=>n.value),((e,a)=>{i.value=e._isEmpty}),{deep:!0});const p=()=>{const e={minWidth:d.value,maxWidth:5,penColor:c.value,backgroundColor:"rgb(255, 255, 255)"};n.value=new q(l.value,o(o({},e),s.options)),i.value=n.value.isEmpty(),l.value.width=document.body.clientWidth,l.value.height=document.body.clientHeight/2,n.value.addEventListener("beginStroke",(()=>{i.value=!1}),{once:!1})},z=()=>{const e=n.value.toData();e&&(e.pop(),n.value.fromData(e))},D=()=>{n.value.clear(),R()},R=()=>{if(n.value.isEmpty())t("save",null);else{const e=n.value.toDataURL();t("save",e)}};return a({guide:()=>{B().setOptions({prevLabel:"上一步",nextLabel:"下一步",skipLabel:"跳过",doneLabel:"知道了",showBullets:!1,disableInteraction:!0,exitOnOverlayClick:!1,steps:[{element:document.querySelector("canvas"),title:"签名区域",intro:"您可以在此处手写签名",position:"top"},{element:document.querySelector(".ctrl-color"),title:"手写笔颜色",intro:"您可以切换手写笔颜色",position:"top"},{element:document.querySelector(".ctrl-btn"),title:"操作",intro:"您可以撤销、清空、保存签名",position:"bottom"}]}).start()}}),(e,a)=>{const t=r;return j(),h("div",H,[x("",!0),O("main",F,[m(i)?(j(),h("h2",J,"请在此处签名")):x("",!0),O("canvas",{ref_key:"canvasRef",ref:l},"您的浏览器不支持canvas技术,请升级浏览器!",512)]),O("footer",K,[O("div",M,[(j(!0),h(C,null,w(m(u),(e=>(j(),h("div",{key:e,style:S({"background-color":e}),class:E(["color-btn",{"active-color":e===m(c)}]),onClick:a=>(e=>{n.value.penColor=c.value=e})(e)},null,14,N)))),128))]),O("div",Q,[L(t,{icon:"revoke",size:"small",disabled:m(i),onClick:z},{default:I((()=>[P("撤销")])),_:1},8,["disabled"]),L(t,{icon:"cross",size:"small",style:{"margin-left":"12px"},type:"danger",disabled:m(i),onClick:D},{default:I((()=>[P(" 清空 ")])),_:1},8,["disabled"]),L(t,{icon:"success",size:"small",type:"primary",disabled:m(i),style:{"margin-left":"12px"},onClick:R},{default:I((()=>[P(" 保存 ")])),_:1},8,["disabled"])])])])}}}),[["__scopeId","data-v-2f912126"]]);const A={class:"layout__page"},G=(e=>(D("data-v-0939647c"),e=e(),R(),e))((()=>O("span",{class:"st-margin-right-10"},"签名教程",-1))),T={class:""},X={key:0,class:"preview"},Y=["src"],Z=p({name:"Signature"});var $=W(Object.assign(Z,{setup(e){const a=f(null),t=f(null),s=()=>{t.value.guide()},l=()=>{},o=e=>{if(a.value=e,!a.value)return!1};return(e,n)=>{const r=i,p=d,v=c,b=u;return j(),h("div",A,[L(p,null,{right:I((()=>[O("div",{class:"guide-icon st-font-12 st-flex-ai",onClick:s},[G,L(r,{name:"info",size:"14"})])])),_:1}),O("div",T,[L(v,{title:"手写签名区域",border:!1}),L(V,{ref_key:"signaturePadRef",ref:t,onSave:o},null,512),(j(),h("div",X,[L(v,{title:"预览签名区域",center:""},z({_:2},[void 0]),1024),m(a)?(j(),h("img",{key:0,class:"sign-img",src:m(a),onClick:l},null,8,Y)):x("",!0)]))]),L(b)])}}}),[["__scopeId","data-v-0939647c"]]);export{$ as default};
