var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;import{n as l,R as n,j as p}from"./vant-f142fa12.js";import{_ as d}from"./index-7153c68f.js";import{k as c,a7 as f,m as g,a5 as u,D as m,j as h,l as v,c as b,e as j,a as x,F as y,b as w,u as P,b8 as _,o as k,n as D,bq as O,ao as S,ap as R,L as z,aN as B,aM as I}from"./@vue-563ebafd.js";import{V as W}from"./vue-drag-resize-fad704b2.js";import{p as F,a as H}from"./pdfjs-dist-a8d1ca6a.js";import{_ as C}from"./plugin-vue_export-helper-893979e1.js";import"./@vant-3579f7e1.js";import"./vue-router-2cd4af54.js";import"./@antv-74afab59.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./vue-eba49924.js";import"./dommatrix-3a4adfb5.js";import"./web-streams-polyfill-311c6d79.js";import"./object-inspect-af06f273.js";F.exports.GlobalWorkerOptions.workerSrc=H;const L=()=>{const e=c({pdfDoc:"",pdfPages:0,pdfScale:1,pdfWidth:1e3,pdfHeight:1143,canvas_id:"pdf-canvas-"}),l=t=>{u(e.pdfDoc).getPage(t).then((a=>{const s=e.canvas_id+t,o=document.getElementById(s),i=o.getContext("2d"),r=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1),n=a.getViewport({scale:e.pdfScale});o.width=n.width*r,o.height=n.height*r,o.style.width="375px",o.style.height="400px",e.pdfWidth=375,e.pdfHeight=400,i.setTransform(r,0,0,r,0,0);const p={canvasContext:i,viewport:n};a.render(p),t<e.pdfPages&&l(t+1)}))};return n=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&r(e,a,t[a]);if(s)for(var a of s(t))i.call(t,a)&&r(e,a,t[a]);return e})({},f(e)),t(n,a({loadFile:t=>{F.exports.getDocument(t).promise.then((t=>{e.pdfDoc=t,e.pdfPages=e.pdfDoc.numPages,g((()=>{l(1)}))}))}}));var n};const E=e=>(B("data-v-14fec98a"),e=e(),I(),e),N={class:"sign-drag st-bg"},V={class:"contract-document"},q=["id"],A=E((()=>x("h3",null,"Hello World!",-1))),G={class:"control-tools"},M=E((()=>x("div",null,"印章",-1))),T=E((()=>x("div",null,"签名",-1))),J=E((()=>x("div",null,"日期",-1))),K=m({name:"SignDrag"});var Q=C(Object.assign(K,{setup(e,{expose:t}){const{loadFile:a,pdfPages:s,pdfWidth:o,pdfHeight:i}=L(),r=h(null);h(1),h(0);const g=c({signList:[{signImg:"http://tva1.sinaimg.cn/large/006nwNl2ly1h71g369jdlj308c03c3yk.jpg",name:"模拟签名1",left:0,top:0,width:137,height:73,type:"sign"}],dropData:[],width:0,height:0,top:0,left:0}),{dropData:u,signList:m,top:B,left:I}=f(g),F=()=>{u.value.push(m.value[0])},H=(e,t)=>{g.width=e.width,g.height=e.height,g.top=e.top,g.left=e.left};return t({onPrint:()=>{r.value.print()}}),v((()=>{a("http://storage.xuetangx.com/public_assets/xuetangx/PDF/PlayerAPI_v1.0.6.pdf")})),(e,t)=>{const a=d,r=l,c=n,f=p;return k(),b("div",N,[j(a),x("ul",V,[(k(!0),b(y,null,w(P(s),(a=>(k(),b("li",{key:a,class:"contract-wrapper",style:D({width:P(o)+"px",height:P(i)+"px"}),onDragover:t[2]||(t[2]=O((()=>{}),["prevent"]))},[(k(),b("canvas",{id:"pdf-canvas-"+a,key:a,draggable:"false",style:{zoom:1}},null,8,q)),1==a?(k(),S(P(W),{key:0,"is-active":!0,"parent-limitation":!0,w:80,h:40,x:P(I),y:P(B),z:9999,onResizing:t[0]||(t[0]=t=>H(t,e.item)),onDragging:t[1]||(t[1]=t=>H(t,e.item))},{default:_((()=>[A])),_:1},8,["x","y"])):R("",!0)],36)))),128))]),x("div",G,[j(c,{class:"tools-box",type:"flex",align:"center"},{default:_((()=>[j(r,{span:"12"},{default:_((()=>[j(c,{type:"flex",align:"center",gutter:"20"},{default:_((()=>[j(r,null,{default:_((()=>[M])),_:1}),j(r,{onClick:F},{default:_((()=>[T])),_:1}),j(r,null,{default:_((()=>[J])),_:1})])),_:1})])),_:1}),j(r,{span:"12"},{default:_((()=>[j(f,{size:"small",type:"primary",block:""},{default:_((()=>[z("提交签署")])),_:1})])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-14fec98a"]]);export{Q as default};
