var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,o=(e,o)=>{for(var n in o||(o={}))t.call(o,n)&&l(e,n,o[n]);if(a)for(var n of a(o))s.call(o,n)&&l(e,n,o[n]);return e};import{n,B as r,i,C as c}from"./vant-78dd0152.js";import{_ as u}from"./index-89ae9d3a.js";import{m as d,bk as p,u as v,r as m,a as f,b,q as g,w as y,aI as j,ak as k,aj as _,al as h,F as O,aN as x,a4 as C,a2 as w,l as S,b7 as I,A as L,aK as E,aJ as q}from"./@vue-0da0c2e3.js";import{S as z}from"./signature_pad-b016ca8d.js";import{I as D}from"./intro.js-10a0758d.js";import{d as P}from"./file-d5e0f662.js";import{_ as R}from"./plugin-vue_export-helper-893979e1.js";import"./@vant-b0725c78.js";import"./vue-router-1cbad9b8.js";const W={class:"signature"},B={class:"signature-wrapper"},A={key:0,class:"tip-text st-font-24"},F={class:"signature__control"},H={class:"ctrl-color"},J=["onClick"],K={class:"ctrl-btn"},N=d({name:"Signature"});var U=R(Object.assign(N,{props:{options:{type:Object,default:()=>({})}},emits:["save"],setup(e,{expose:a,emit:t}){const s=e;p((e=>({f7d8f418:v(c)})));const l=m(null),n=m(null),i=m(!0),c=m("#001330"),u=f(["#001330","#2489f3","#ed521f"]),d=m(.5);b((()=>{E()})),g((()=>{n.value=null})),y((()=>n.value),((e,a)=>{i.value=e._isEmpty}),{deep:!0});const E=()=>{const e={minWidth:d.value,maxWidth:5,penColor:c.value,backgroundColor:"rgb(255, 255, 255)"};n.value=new z(l.value,o(o({},e),s.options)),i.value=n.value.isEmpty(),l.value.width=document.body.clientWidth,l.value.height=document.body.clientHeight/2,n.value.addEventListener("beginStroke",(()=>{i.value=!1}),{once:!1})},q=()=>{const e=n.value.toData();e&&(e.pop(),n.value.fromData(e))},R=()=>{n.value.clear(),N()},N=()=>{if(n.value.isEmpty())t("save",null);else{const e=n.value.toDataURL();P(e,"sign-"+ +Date.now()),t("save",e)}};return a({guide:()=>{D().setOptions({prevLabel:"上一步",nextLabel:"下一步",skipLabel:"跳过",doneLabel:"知道了",showBullets:!1,disableInteraction:!0,exitOnOverlayClick:!1,steps:[{element:document.querySelector("canvas"),title:"签名区域",intro:"您可以在此处手写签名",position:"top"},{element:document.querySelector(".ctrl-color"),title:"手写笔颜色",intro:"您可以切换手写笔颜色",position:"top"},{element:document.querySelector(".ctrl-btn"),title:"操作",intro:"您可以撤销、清空、保存签名",position:"bottom"}]}).start()}}),(e,a)=>{const t=r;return j(),k("div",W,[_("",!0),h("main",B,[v(i)?(j(),k("h2",A,"请在此处签名")):_("",!0),h("canvas",{ref_key:"canvasRef",ref:l},"您的浏览器不支持canvas技术,请升级浏览器!",512)]),h("footer",F,[h("div",H,[(j(!0),k(O,null,x(v(u),(e=>(j(),k("div",{style:C({"background-color":e}),class:w(["color-btn",{"active-color":e===v(c)}]),key:e,onClick:a=>(e=>{n.value.penColor=c.value=e})(e)},null,14,J)))),128))]),h("div",K,[S(t,{icon:"revoke",size:"small",disabled:v(i),onClick:q},{default:I((()=>[L("撤销")])),_:1},8,["disabled"]),S(t,{icon:"cross",size:"small",style:{"margin-left":"12px"},type:"danger",disabled:v(i),onClick:R},{default:I((()=>[L(" 清空 ")])),_:1},8,["disabled"]),S(t,{icon:"success",size:"small",type:"primary",disabled:v(i),style:{"margin-left":"12px"},onClick:N},{default:I((()=>[L(" 保存 ")])),_:1},8,["disabled"])])])])}}}),[["__scopeId","data-v-5bef8e92"]]);const G={class:"signature-wrapper st-bg"},M=(e=>(E("data-v-bfff4876"),e=e(),q(),e))((()=>h("span",{class:"st-margin-right-10"},"签名教程",-1))),Q=d({name:"Signature"});var T=R(Object.assign(Q,{setup(e){m(null);const a=m(null),t=()=>{a.value.guide()},s=e=>{};return(e,l)=>{const o=i,n=u,r=c;return j(),k("div",G,[S(n,null,{right:I((()=>[h("div",{class:"guide-icon st-font-12 st-flex-ai",onClick:t},[M,S(o,{name:"info",size:"14"})])])),_:1}),S(r,{title:"手写签名区域",border:!1}),S(U,{ref_key:"signaturePadRef",ref:a,onSave:s},null,512),_("",!0)])}}}),[["__scopeId","data-v-bfff4876"]]);export{T as default};
