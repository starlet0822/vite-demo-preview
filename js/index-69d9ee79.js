var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,o=(e,o)=>{for(var r in o||(o={}))t.call(o,r)&&l(e,r,o[r]);if(a)for(var r of a(o))s.call(o,r)&&l(e,r,o[r]);return e};import{a0 as r,n as i,x as n,y as c,S as p,E as u,H as d}from"./vant-7136ba84.js";import{_ as m,b as v}from"./index-3157abda.js";import{l as f,c as b,s as j,B as y,D as g,y as h,u as w,r as k,b as _,ay as x,E as O,f as S,H as F,M as C,N as I,G as M,I as P,K as T,v as R,F as E,S as N}from"./@vue-52de1c01.js";import{g as V,_ as q}from"./dict-77dd2887.js";import{_ as z}from"./index-3bc02e96.js";import{d as B}from"./dayjs-f8677b81.js";import"./@vant-0004063d.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vue-router-a4543dac.js";import"./vuex-c830e64e.js";import"./@vueuse-feee2333.js";import"./lodash-es-c547d601.js";import"./axios-0cd4f164.js";import"./qs-6446231f.js";import"./side-channel-b2edb420.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-8ed24658.js";import"./@antv-8a75d63c.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-319be66c.js";import"./vue3-hash-calendar-68956731.js";import"./hammerjs-ed6f6a9e.js";const H={class:"tip-wrapper"},L=f({name:"Tip"});var U=m(Object.assign(L,{props:{description:{type:String,default:""},icon:{type:String,default:"empty",validitor:e=>["404","empty","lock","network"].includes(e)}},setup(e){const a=e,t=new Map([["empty","/vite-vue3-preview/assets/empty.d48a173e.png"],["404","/vite-vue3-preview/assets/404.633f6e34.png"],["lock","/vite-vue3-preview/assets/lock.196962f4.png"],["network","/vite-vue3-preview/assets/network.60e3f254.png"]]),s=new Map([["empty","暂无数据"],["404","404 Not Found"],["lock","抱歉，您无权限访问此页面"],["network","网络异常"]]),l=t[a.icon],o=b((()=>a.description||s.get(a.icon)||"暂无数据"));return(e,a)=>{const t=r;return j(),y("div",H,[g(t,h(e.$attrs,{image:w(l),description:w(o)}),null,16,["image","description"])])}}}),[["__scopeId","data-v-c7a1ec6c"]]);const D={class:"work-order-list"},G={class:"list-wrapper"},K={class:"item-name"},W={class:"item-time"},$={class:"item-user"},A=f({name:"work-order"});var J=m(Object.assign(A,{setup(e){const a=k(1),t=k(20),s=k(0),l=k([]),r=k(!1),i=k(!1),m=k(!1),f=b((()=>l.value.length?"没有更多了":"")),h=k(null),H=k({order:"asc",prop:"createTime"}),L=(e,a)=>{var t;H.value=o(o({},H.value),e),null==(t=h.value)||t.close(),J()},A=()=>{return e=this,n=null,c=function*(){var e;try{m.value&&(l.value=[],m.value=!1);const n=o({pageNo:a.value,pageSize:t.value},H.value),c=yield v.getWorkOrderList(n);if(0===c.code){a.value+=1;const{rows:t,total:o}=null!=(e=c.data)?e:{};s.value=o,l.value=1===a.value?t:l.value.concat(t),l.value.length>=s.value&&(i.value=!0)}}catch(n){}finally{r.value=!1}},new Promise(((a,t)=>{var s=e=>{try{o(c.next(e))}catch(a){t(a)}},l=e=>{try{o(c.throw(e))}catch(a){t(a)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,l);o((c=c.apply(e,n)).next())}));var e,n,c},J=()=>{m.value=!0,i.value=!1,r.value=!0,a.value=1,A()},Q=()=>{};_((()=>{A()}));const X=new Map([["-1","全部"],["0","处理中"],["1","已完结"],["2","被退回"]]),Y=new Map([["0","#2e6cf3"],["1","#ff0000"],["2","#05a081"]]),Z=document.querySelector(".todo-list"),ee=[{type:"CellField",title:"排序方式",value:"asc",name:"order",attrs:{options:[{label:"升序排序",value:"asc"},{label:"倒序排序",value:"desc"}]}},{type:"CellField",title:"排序字段",value:"createTime",name:"prop",attrs:{options:[{label:"发起时间",value:"createTime"},{label:"工单名称",value:"name"}]}}],ae=(B("2003-10-08 08:43").isBefore("2003-10-08 08:43","m"),[{type:"InputField",title:"关键词查询",value:"",name:"name",attrs:{placeholder:"输入搜索关键词"}},{type:"RadioField",title:"工单状态",value:"-1",name:"status",attrs:{options:V(X)}}]);return(e,a)=>{const t=z,s=q,o=n,v=c,b=p,k=u,_=U,V=d,B=N("waves");return j(),y("div",D,[g(t,{border:"",fixed:""},x({_:2},[void 0]),1024),g(b,{"offset-top":0},{default:O((()=>[g(v,{ref_key:"menuRef",ref:h,"close-on-click-outside":!1,"close-on-click-overlay":!1,onClosed:Q},{default:O((()=>[g(o,{title:"排序"},{default:O((()=>[g(s,{"form-items":ee,onConfirm:a[1]||(a[1]=e=>L(e))})])),_:1}),g(o,{ref:"filterRef",title:"筛选",teleport:w(Z)},{default:O((()=>[g(s,{"form-items":ae,onConfirm:a[2]||(a[2]=e=>L(e))})])),_:1},8,["teleport"])])),_:1},512)])),_:1}),g(V,{modelValue:w(m),"onUpdate:modelValue":a[4]||(a[4]=e=>S(m)?m.value=e:null),onRefresh:J},{default:O((()=>[g(k,{loading:w(r),"onUpdate:loading":a[3]||(a[3]=e=>S(r)?r.value=e:null),"immediate-check":!1,finished:w(i),"finished-text":w(f),onLoad:A},{default:O((()=>[F("ul",G,[(j(!0),y(C,null,I(w(l),((e,a)=>M((j(),y("li",{key:e.name+a,class:"list-item"},[F("div",null,[F("p",K,P(e.name),1),F("p",W,"发起时间："+P(e.createTime),1),F("p",$,"处理人员："+P(e.username),1)]),F("div",{class:"item-status",style:T({color:w(Y).get(e.status)})},P(w(X).get(e.status)),5)])),[[B]]))),128))])])),_:1},8,["loading","finished","finished-text"]),w(l).length||w(r)?E("",!0):(j(),R(_,{key:0}))])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-21c66d3a"]]);export{J as default};
