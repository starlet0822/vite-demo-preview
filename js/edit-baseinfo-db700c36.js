import{_ as e}from"./index-3f10a1ee.js";import{h as a,I as l,U as t,d as o,X as r,F as u,k as i,R as s,W as n,o as d,E as m,M as c,Y as p}from"./vant-56d7d53c.js";import{_ as v}from"./index-84560e26.js";import{i as f}from"./index-be365d2b.js";import{_ as h}from"./plugin-vue_export-helper-893979e1.js";import{m as b,a as g,_ as w,aI as x,ak as j,l as V,b7 as y,u as k,f as D,al as q,v as _,ai as U,A as C,ap as S,C as Y}from"./@vue-0da0c2e3.js";import{_ as I}from"./index-d91669f1.js";import{u as z}from"./vue-router-1cbad9b8.js";import"./dayjs-ffcc1c50.js";import{f as M}from"./datetime-1e01657d.js";import"./index-014fd06b.js";import"./@vant-b0725c78.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vuex-fdaeb4c6.js";import"./lodash-es-0ddda1ab.js";import"./axios-0cd4f164.js";import"./qs-efaa5365.js";import"./side-channel-ebdfdc6e.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-af06f273.js";import"./@antv-74afab59.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-4e4fc296.js";import"./vue3-hash-calendar-e234247e.js";import"./hammerjs-ed6f6a9e.js";const F={class:"uploadImg"},R=b({name:"UploadImg"});var A=h(Object.assign(R,{props:{modelValue:{type:Array,default:()=>[]},accept:{type:String,default:"image/*"},capture:{type:String,default:"camera"},maxCount:{type:[Number,String],default:9},previewSize:{type:[Number,String],default:54},showUpload:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(e,{emit:u}){const i=e,s=g({showAction:!1,actions:[{name:"拍照",key:""},{name:"从手机相册选择"}],fileList:i.modelValue}),{showAction:n,actions:d,fileList:m}=w(s),c=e=>{console.log("beforeRead",e);const l=/image\/(png|jpg|jpeg)$/;if(f(e))for(let t=0;t<e.length;t++){const o=e[t];if(!l.test(o.type))return a("请上传 png、jpg、jpeg 格式图片"),!1}else if(!l.test(e.type))return a("请上传 png、jpg、jpeg 格式图片"),!1;return!0},p=e=>{return a=this,l=null,t=function*(){s.showAction=!1,u("update:modelValue",m.value)},new Promise(((e,o)=>{var r=e=>{try{i(t.next(e))}catch(a){o(a)}},u=e=>{try{i(t.throw(e))}catch(a){o(a)}},i=a=>a.done?e(a.value):Promise.resolve(a.value).then(r,u);i((t=t.apply(a,l)).next())}));var a,l,t},v=e=>{console.log("onClickUpload")},h=()=>{console.log(666),m.length>=+i.maxCount?a({message:"最多允许上传 9 张图片"}):s.showAction=!0};return(a,u)=>{const i=l,s=t,d=o,f=r;return x(),j("div",F,[V(s,{modelValue:k(m),"onUpdate:modelValue":u[0]||(u[0]=e=>D(m)?m.value=e:null),class:"uploader-show","max-count":e.maxCount,accept:e.accept,capture:e.capture,multiple:!0,"show-upload":e.showUpload,readonly:!0,"preview-size":e.previewSize,onClickUpload:h},{default:y((()=>[V(i,{src:k("/vite-vue3-preview/assets/ic_camera_add.c730e1ec.png"),width:e.previewSize,height:e.previewSize,round:!1},null,8,["src","width","height"])])),_:1},8,["modelValue","max-count","accept","capture","show-upload","preview-size"]),V(f,{show:k(n),"onUpdate:show":u[3]||(u[3]=e=>D(n)?n.value=e:null),"cancel-text":"取消","close-on-click-action":""},{default:y((()=>[V(s,{ref:"uploader",modelValue:k(m),"onUpdate:modelValue":u[1]||(u[1]=e=>D(m)?m.value=e:null),class:"uploader-hidden","max-count":e.maxCount,accept:e.accept,capture:e.capture,"preview-image":!1,"before-read":c,"after-read":p,onClickUpload:v},{default:y((()=>[V(d,{class:"action-sheet__name",title:"拍照"})])),_:1},8,["modelValue","max-count","accept","capture"]),V(s,{ref:"uploader",modelValue:k(m),"onUpdate:modelValue":u[2]||(u[2]=e=>D(m)?m.value=e:null),class:"uploader-hidden","max-count":e.maxCount,accept:e.accept,multiple:!0,"preview-image":!1,"before-read":c,"after-read":p,onClickUpload:v},{default:y((()=>[V(d,{class:"action-sheet__name",title:"从手机相册选择",border:!1})])),_:1},8,["modelValue","max-count","accept"])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-7f5cb038"]]);const P={class:"layout__page"},H={class:"layout__header"},O={class:"layout__body"},B=b({name:"EditBaseInfo"});var E=h(Object.assign(B,{setup(l){z();const t=g({currentDate:M(new Date,"YYYY-MM-DD").split("-"),columnsType:["year","month","day"],dateFormat:"YYYY-MM-DD",minDate:new Date((new Date).getFullYear()-5,0,1),maxDate:new Date,showDatePicker:!1,dateField:"",userInfo:{name:"",avatar:[],sex:"",location:"",wechatId:"",birthDate:"",jobStartDate:"",email:"",introduction:""},formRules:{name:[{required:!0,message:"请填写姓名"}],avatar:[{required:!1,message:"请上传头像"}],sex:[{required:!1,message:"请选择性别"}],location:[{required:!1,message:"请选择居住城市"}],wechatId:[{required:!1,message:"请填写微信号"}],birthDate:[{required:!0,message:"请选择出生年月"}],jobStartDate:[{required:!0,message:"请选择参加工作时间"}],email:[{required:!1,message:"请填写邮箱"}],introduction:[{required:!0,message:"请填写个人优势"}]}}),{currentDate:o,dateFormat:r,columnsType:f,minDate:h,maxDate:b,showDatePicker:F,userInfo:R,formRules:B}=w(t),E=g({pickerRef:null,pickerValues:[],pickerField:"",itemHeight:44,keyword:"",columns:[],storeColums:[],showPicker:!1,showSearch:!1}),N=[{text:"男",value:"1"},{text:"女",value:"0"}],L=[{text:"北京",value:"BeiJing"},{text:"上海",value:"ShangHai"},{text:"广州",value:"Guangzhou"},{text:"深圳",value:"Shenzhen"},{text:"杭州",value:"Hangzhou"},{text:"宁波",value:"Ningbo"},{text:"温州",value:"Wenzhou"},{text:"绍兴",value:"Shaoxing"},{text:"湖州",value:"Huzhou"}],T=g({sex:N,location:L}),{pickerRef:W,itemHeight:G,pickerValues:J,keyword:X,columns:$,showPicker:K,showSearch:Q}=w(E),Z=e=>{var a;return null==(a=N.find((a=>a.value===e)))?void 0:a.text},ee=e=>{var a;return null==(a=L.find((a=>a.value===e)))?void 0:a.text},ae=({selectedValues:e,selectedOptions:a,selectedIndexes:l})=>{var t;console.log(e,a,l),R.value[E.pickerField]=null==(t=a[0])?void 0:t.value,le()},le=()=>{K.value=!1,Q.value=!1},te=()=>{X.value=""},oe=e=>{if(console.log("filterVal",e),e){const a=new RegExp(e,"gi"),l=E.storeColums.filter((e=>a.test(e.text)));E.columns=l}else E.columns=E.storeColums},re=e=>{t.dateField=e,"jobStartDate"===e&&(f.value=["year","month","day"],r.value="YYYY-MM-DD",h.value=new Date(1996,0,1)),"birthDate"===e&&(f.value=["year","month"],r.value="YYYY-MM",h.value=new Date(1990,0,1)),R.value[t.dateField]?o.value=R.value[e].split("-"):o.value=M(new Date,r.value).split("-"),F.value=!0},ue=e=>{E.keyword="",E.pickerField=e,E.storeColums=$.value=T[e],E.pickerValues=[R.value[e]],Q.value=$.value.length>=5,K.value=!0},ie=e=>{console.log("val",e),R.value[t.dateField]=e},se=e=>{console.log("submit",e),p({message:"保存成功"})},ne=e=>{console.log("failed",e);const[l]=e.errors;a({message:l.message})};return(a,l)=>{const t=I,p=A,g=u,w=i,z=s,M=n,E=v,N=d,L=m,T=c,Q=e,de=Y("waves");return x(),j("div",P,[q("div",H,[V(t)]),q("div",O,[V(M,{autocomplete:!1,"show-error":!1,center:"","show-error-message":!1,onSubmit:se,onFailed:ne},{default:y((()=>{var e,a,t,o,r,u,i,s,n;return[V(g,{name:"avatar",label:"头像",center:"","input-align":"right",autocomplete:"off",required:null==(e=k(B).avatar[0])?void 0:e.required,rules:k(B).avatar},{input:y((()=>[V(p,{modelValue:k(R).avatar,"onUpdate:modelValue":l[0]||(l[0]=e=>k(R).avatar=e),"max-count":"1"},null,8,["modelValue"])])),_:1},8,["required","rules"]),V(g,{modelValue:k(R).name,"onUpdate:modelValue":l[1]||(l[1]=e=>k(R).name=e),modelModifiers:{trim:!0},name:"name",label:"姓名","label-align":"top",placeholder:"请填写",autocomplete:"off",maxlength:"12",required:null==(a=k(B).name[0])?void 0:a.required,rules:k(B).name},null,8,["modelValue","required","rules"]),_(V(g,{"model-value":Z(k(R).sex),name:"sex",label:"性别","label-align":"top",placeholder:"请选择","is-link":"",readonly:"",autocomplete:"off",required:null==(t=k(B).sex[0])?void 0:t.required,rules:k(B).sex,onClick:l[2]||(l[2]=e=>ue("sex"))},null,8,["model-value","required","rules"]),[[de]]),_(V(g,{"model-value":ee(k(R).location),name:"location",label:"居住城市","label-align":"top",placeholder:"请选择","is-link":"",readonly:"",autocomplete:"off",required:null==(o=k(B).location[0])?void 0:o.required,rules:k(B).location,onClick:l[3]||(l[3]=e=>ue("location"))},null,8,["model-value","required","rules"]),[[de]]),_(V(g,{modelValue:k(R).jobStartDate,"onUpdate:modelValue":l[4]||(l[4]=e=>k(R).jobStartDate=e),name:"jobStartDate",label:"参加工作时间","label-align":"top",placeholder:"请选择",autocomplete:"off","is-link":"",readonly:"",required:null==(r=k(B).jobStartDate[0])?void 0:r.required,rules:k(B).jobStartDate,onClick:l[5]||(l[5]=e=>re("jobStartDate"))},null,8,["modelValue","required","rules"]),[[de]]),V(g,{modelValue:k(R).wechatId,"onUpdate:modelValue":l[6]||(l[6]=e=>k(R).wechatId=e),modelModifiers:{trim:!0},name:"wechatId",label:"微信号","label-align":"top",placeholder:"请填写",autocomplete:"off",required:null==(u=k(B).wechatId[0])?void 0:u.required,rules:k(B).wechatId},null,8,["modelValue","required","rules"]),_(V(g,{modelValue:k(R).birthDate,"onUpdate:modelValue":l[7]||(l[7]=e=>k(R).birthDate=e),name:"birthDate",label:"出生年月","label-align":"top",placeholder:"请选择",autocomplete:"off","is-link":"",readonly:"",required:null==(i=k(B).birthDate[0])?void 0:i.required,rules:k(B).birthDate,onClick:l[8]||(l[8]=e=>re("birthDate"))},null,8,["modelValue","required","rules"]),[[de]]),V(g,{modelValue:k(R).email,"onUpdate:modelValue":l[9]||(l[9]=e=>k(R).email=e),modelModifiers:{trim:!0},type:"email",name:"email",label:"邮箱","label-align":"top",placeholder:"请填写",autocomplete:"off",required:null==(s=k(B).email[0])?void 0:s.required,rules:k(B).email},null,8,["modelValue","required","rules"]),V(g,{modelValue:k(R).introduction,"onUpdate:modelValue":l[10]||(l[10]=e=>k(R).introduction=e),modelModifiers:{trim:!0},name:"introduction",label:"个人优势","label-align":"top",placeholder:"请填写",autocomplete:"off",type:"texarea",rows:"3","show-word-limit":"",autosize:"",border:!1,maxlength:200,required:null==(n=k(B).introduction[0])?void 0:n.required,rules:k(B).introduction},null,8,["modelValue","required","rules"]),V(z,{id:"fixed-bottom",class:"submit-btn bottom-button--submit"},{default:y((()=>[_((x(),U(w,{block:"",type:"primary","native-type":"submit"},{default:y((()=>[C("保存")])),_:1})),[[de]])])),_:1})]})),_:1})]),V(N,{show:k(F),"onUpdate:show":l[13]||(l[13]=e=>D(F)?F.value=e:null),position:"bottom"},{default:y((()=>[V(E,{modelValue:k(o),"onUpdate:modelValue":l[11]||(l[11]=e=>D(o)?o.value=e:null),"columns-type":k(f),format:k(r),"min-date":k(h),"max-date":k(b),onConfirm:ie,onCancel:l[12]||(l[12]=e=>F.value=!1)},null,8,["modelValue","columns-type","format","min-date","max-date"])])),_:1},8,["show"]),V(N,{show:k(K),"onUpdate:show":l[16]||(l[16]=e=>D(K)?K.value=e:null),position:"bottom","lazy-render":!1,"close-on-click-overlay":!0,onClickOverlay:te},{default:y((()=>[V(T,{ref_key:"pickerRef",ref:W,modelValue:k(J),"onUpdate:modelValue":l[15]||(l[15]=e=>D(J)?J.value=e:null),class:"picker","show-toolbar":"",columns:k($),"item-height":k(G),onConfirm:ae,onCancel:le},S({_:2},[{name:"title",fn:y((()=>[V(L,{modelValue:k(X),"onUpdate:modelValue":[l[14]||(l[14]=e=>D(X)?X.value=e:null),oe],class:"search-box",clearable:!1,"input-align":"center",placeholder:"模糊查询"},null,8,["modelValue"])])),key:"0"}]),1032,["modelValue","columns","item-height"])])),_:1},8,["show"]),V(Q)])}}}),[["__scopeId","data-v-89f62e48"]]);export{E as default};
