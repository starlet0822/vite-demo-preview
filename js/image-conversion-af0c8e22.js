import{c as t}from"./@antv-74afab59.js";var e={exports:{}},n=e.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){var r,i;function o(t){return["image/png","image/jpeg","image/gif"].some((e=>e===t))}n.r(e),n.d(e,"canvastoDataURL",(function(){return c})),n.d(e,"canvastoFile",(function(){return u})),n.d(e,"dataURLtoFile",(function(){return l})),n.d(e,"dataURLtoImage",(function(){return h})),n.d(e,"downloadFile",(function(){return d})),n.d(e,"filetoDataURL",(function(){return f})),n.d(e,"imagetoCanvas",(function(){return w})),n.d(e,"urltoBlob",(function(){return m})),n.d(e,"urltoImage",(function(){return y})),n.d(e,"compress",(function(){return p})),n.d(e,"compressAccurately",(function(){return v})),n.d(e,"EImageType",(function(){return r})),(i=r||(r={})).PNG="image/png",i.JPEG="image/jpeg",i.GIF="image/gif";var a=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function c(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))};function c(t,e=.92,n=r.JPEG){return a(this,void 0,void 0,(function*(){return o(n)||(n=r.JPEG),t.toDataURL(n,e)}))}function u(t,e=.92,n=r.JPEG){return new Promise((r=>t.toBlob((t=>r(t)),n,e)))}var s=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function c(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))};function l(t,e){return s(this,void 0,void 0,(function*(){const n=t.split(",");let r=n[0].match(/:(.*?);/)[1];const i=atob(n[1]);let a=i.length;const c=new Uint8Array(a);for(;a--;)c[a]=i.charCodeAt(a);return o(e)&&(r=e),new Blob([c],{type:r})}))}function h(t){return new Promise(((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=()=>n(new Error("dataURLtoImage(): dataURL is illegal")),r.src=t}))}function d(t,e){const n=document.createElement("a");n.href=window.URL.createObjectURL(t),n.download=e||Date.now().toString(36),document.body.appendChild(n);const r=document.createEvent("MouseEvents");r.initEvent("click",!1,!1),n.dispatchEvent(r),document.body.removeChild(n)}function f(t){return new Promise((e=>{const n=new FileReader;n.onloadend=t=>e(t.target.result),n.readAsDataURL(t)}))}var g=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function c(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))};function w(t,e={}){return g(this,void 0,void 0,(function*(){const n=Object.assign({},e),r=document.createElement("canvas"),i=r.getContext("2d");let o,a;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=Number(n[t]));if(n.scale){const e=n.scale>0&&n.scale<10?n.scale:1;a=t.width*e,o=t.height*e}else a=n.width||n.height*t.width/t.height||t.width,o=n.height||n.width*t.height/t.width||t.height;switch([5,6,7,8].some((t=>t===n.orientation))?(r.height=a,r.width=o):(r.height=o,r.width=a),n.orientation){case 3:i.rotate(180*Math.PI/180),i.drawImage(t,-r.width,-r.height,r.width,r.height);break;case 6:i.rotate(90*Math.PI/180),i.drawImage(t,0,-r.width,r.height,r.width);break;case 8:i.rotate(270*Math.PI/180),i.drawImage(t,-r.height,0,r.height,r.width);break;case 2:i.translate(r.width,0),i.scale(-1,1),i.drawImage(t,0,0,r.width,r.height);break;case 4:i.translate(r.width,0),i.scale(-1,1),i.rotate(180*Math.PI/180),i.drawImage(t,-r.width,-r.height,r.width,r.height);break;case 5:i.translate(r.width,0),i.scale(-1,1),i.rotate(90*Math.PI/180),i.drawImage(t,0,-r.width,r.height,r.width);break;case 7:i.translate(r.width,0),i.scale(-1,1),i.rotate(270*Math.PI/180),i.drawImage(t,-r.height,0,r.height,r.width);break;default:i.drawImage(t,0,0,r.width,r.height)}return r}))}function m(t){return fetch(t).then((t=>t.blob()))}function y(t){return new Promise(((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=()=>n(new Error("urltoImage(): Image failed to load, please check the image URL")),r.src=t}))}var b=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function c(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))};function p(t,e={}){return b(this,void 0,void 0,(function*(){if(!(t instanceof Blob))throw new Error("compress(): First arg must be a Blob object or a File object.");if("object"!=typeof e&&(e=Object.assign({quality:e})),e.quality=Number(e.quality),Number.isNaN(e.quality))return t;const n=yield f(t);let i=n.split(",")[0].match(/:(.*?);/)[1],a=r.JPEG;o(e.type)&&(a=e.type,i=e.type);const u=yield h(n),s=yield w(u,Object.assign({},e)),d=yield c(s,e.quality,a),g=yield l(d,i);return g.size>t.size?t:g}))}function v(t,e={}){return b(this,void 0,void 0,(function*(){if(!(t instanceof Blob))throw new Error("compressAccurately(): First arg must be a Blob object or a File object.");if("object"!=typeof e&&(e=Object.assign({size:e})),e.size=Number(e.size),Number.isNaN(e.size))return t;if(1024*e.size>t.size)return t;e.accuracy=Number(e.accuracy),(!e.accuracy||e.accuracy<.8||e.accuracy>.99)&&(e.accuracy=.95);const n=e.size*(2-e.accuracy)*1024,i=1024*e.size,a=e.size*e.accuracy*1024,u=yield f(t);let s=u.split(",")[0].match(/:(.*?);/)[1],d=r.JPEG;o(e.type)&&(d=e.type,s=e.type);const g=yield h(u),m=yield w(g,Object.assign({},e));let y,b=.5;const p=[null,null];for(let t=1;t<=7;t++){y=yield c(m,b,d);const e=.75*y.length;if(7===t){(n<e||a>e)&&(y=[y,...p].filter((t=>t)).sort(((t,e)=>Math.abs(.75*t.length-i)-Math.abs(.75*e.length-i)))[0]);break}if(n<e)p[1]=y,b-=Math.pow(.5,t+1);else{if(!(a>e))break;p[0]=y,b+=Math.pow(.5,t+1)}}const v=yield l(y,s);return v.size>t.size?t:v}))}}]);export{n as i};
