var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,r=(e,r)=>{for(var i in r||(r={}))t.call(r,i)&&l(e,i,r[i]);if(a)for(var i of a(r))s.call(r,i)&&l(e,i,r[i]);return e};import{f as i,l as o,R as n,n as c,e as u}from"./vant-7136ba84.js";import{_ as d}from"./index-3bc02e96.js";import{l as p,bl as m,r as v,a as b,b as f,V as j,w as g,s as y,B as _,H as h,F as k,D as x,E as w,M as C,N as O,K as S,J as E,P as L,ay as z,u as P,aR as R,aQ as q}from"./@vue-52de1c01.js";import{S as I}from"./signature_pad-9c8fc988.js";import{I as D}from"./intro.js-10a0758d.js";import{_ as W}from"./index-3157abda.js";import"./@vant-0004063d.js";import"./vue-router-a4543dac.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vuex-c830e64e.js";import"./@vueuse-feee2333.js";import"./lodash-es-c547d601.js";import"./axios-0cd4f164.js";import"./qs-6446231f.js";import"./side-channel-b2edb420.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-8ed24658.js";import"./@antv-8a75d63c.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-319be66c.js";import"./vue3-hash-calendar-68956731.js";import"./hammerjs-ed6f6a9e.js";const B={class:"signature"},H={key:0,class:"tip-text st-font-24"},F={class:"ctrl-color"},J=["onClick"],K={class:"ctrl-btn text-right"};var M=W(p({__name:"SignaturePad",props:{options:{type:Object,default:()=>({})}},emits:["save"],setup(e,{expose:a,emit:t}){const s=e;m((e=>({"19d5e87f":p.value})));const l=v(),c=v(null),u=v(null),d=v(!0),p=v("#000"),z=b(["#000","#2489f3","#ed521f"]),P=v(.5);f((()=>{R(),window.addEventListener("resize",N)})),j((()=>{var e;null==(e=D())||e.exit(),u.value=null,window.removeEventListener("resize",N)})),g((()=>u.value),(e=>{d.value=e._isEmpty}),{deep:!0});const R=()=>{const e={minWidth:P.value,maxWidth:5,penColor:p.value,backgroundColor:"rgb(255, 255, 255)"};u.value=new I(c.value,r(r({},e),s.options)),d.value=u.value.isEmpty(),N(),u.value.addEventListener("beginStroke",(()=>{d.value=!1}),{once:!1})},q=()=>{const e=u.value.toData();e&&(e.pop(),u.value.fromData(e))},W=()=>{u.value.clear(),M()},M=()=>{if(u.value.isEmpty())t("save",null);else{const e=u.value.toDataURL();t("save",e)}};function N(){var e;c.value.width=null==(e=l.value)?void 0:e.offsetWidth,c.value.height=document.body.clientHeight/2,u.value.clear()}return a({guide:()=>{D().setOptions({prevLabel:"上一步",nextLabel:"下一步",skipLabel:"跳过",doneLabel:"知道了",showBullets:!1,disableInteraction:!0,exitOnOverlayClick:!1,steps:[{element:document.querySelector(".signature-wrapper"),title:"签名区域",intro:"您可以在此处手写签名",position:"top"},{element:document.querySelector(".ctrl-color"),title:"手写笔颜色",intro:"您可以切换手写笔颜色",position:"top"},{element:document.querySelector(".ctrl-btn"),title:"操作",intro:"您可以撤销、清空、保存签名",position:"bottom"},{element:document.querySelector(".preview"),title:"预览区域",intro:"您可以在此处预览签名效果",position:"top"}]}).start()}}),(e,a)=>{const t=i,s=o,r=n;return y(),_("div",B,[h("section",{ref_key:"wrapperRef",ref:l,class:"signature-wrapper"},[d.value?(y(),_("h2",H,"请在此处签名")):k("",!0),h("canvas",{ref_key:"canvasRef",ref:c},"您的浏览器不支持canvas技术,请升级浏览器!",512)],512),x(r,{type:"flex",justify:"space-between",class:"signature__control"},{default:w((()=>[x(t,{xs:12,sm:12,md:12,lg:8,xl:6},{default:w((()=>[h("div",F,[(y(!0),_(C,null,O(z,(e=>(y(),_("div",{key:e,style:S({"background-color":e}),class:E(["color-btn",{"active-color":e===p.value}]),onClick:a=>(e=>{u.value.penColor=p.value=e})(e)},null,14,J)))),128))])])),_:1}),x(t,{xs:12,sm:12,md:12,lg:8,xl:6},{default:w((()=>[h("div",K,[x(s,{size:"small",disabled:d.value,onClick:q},{default:w((()=>[L("撤 销")])),_:1},8,["disabled"]),x(s,{size:"small",type:"danger",disabled:d.value,onClick:W},{default:w((()=>[L(" 清 空 ")])),_:1},8,["disabled"]),x(s,{size:"small",type:"primary",disabled:d.value,onClick:M},{default:w((()=>[L(" 预 览 ")])),_:1},8,["disabled"])])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-5e4e8bb6"]]);const N={class:"page-wrapper"},Q=(e=>(R("data-v-bc531672"),e=e(),q(),e))((()=>h("span",{class:"st-margin-right-10"},"签名教程",-1))),U={key:0,class:"preview"},V=["src"],A=p({name:"Signature"});var G=W(Object.assign(A,{setup(e){const a=v(null),t=v(null),s=()=>{t.value.guide()},l=()=>{},r=e=>{if(a.value=e,!a.value)return!1};return(e,i)=>{const o=c,n=d,p=u;return y(),_("div",N,[x(n,null,{right:w((()=>[h("div",{class:"guide-icon st-font-12 st-flex-ai",onClick:s},[Q,x(o,{name:"info"})])])),_:1}),h("div",null,[x(p,{title:"手写签名区域",border:!1}),x(M,{ref_key:"signaturePadRef",ref:t,onSave:r},null,512),(y(),_("div",U,[x(p,{title:"预览签名区域",center:""},z({_:2},[void 0]),1024),P(a)?(y(),_("img",{key:0,class:"sign-img",src:P(a),onClick:l},null,8,V)):k("",!0)]))])])}}}),[["__scopeId","data-v-bc531672"]]);export{G as default};
