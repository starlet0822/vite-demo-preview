import{d as e,B as t}from"./vant-182c6d73.js";import{_ as i}from"./plugin-vue_export-helper-893979e1.js";import{m as a,a as l,r as s,b as o,aI as r,ak as u,al as m,F as n,aN as d,a5 as v,a2 as c,u as p,_ as f,l as b}from"./@vue-0da0c2e3.js";import{_ as j}from"./index-06373c59.js";import{p as h}from"./index-e9989a54.js";import"./@vant-b0725c78.js";import"./vue-router-1cbad9b8.js";import"./index-ec25ae5e.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vuex-fdaeb4c6.js";import"./@vueuse-cf363312.js";import"./lodash-es-12d03b41.js";import"./axios-0cd4f164.js";import"./qs-efaa5365.js";import"./side-channel-ebdfdc6e.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-af06f273.js";import"./@antv-74afab59.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-4e4fc296.js";import"./vue3-hash-calendar-e234247e.js";import"./hammerjs-ed6f6a9e.js";const x={class:"time-picker"},S={class:"time-wraper no-scrollbar"},k={class:"time-text"},g={class:"time-full"},y=["data-val","data-idx","onClick"],N=a({name:"TimePicker"});var H=i(Object.assign(N,{props:{modelValue:{type:Array,default:()=>[]},minHour:{type:[Number,String],default:"0"},maxHour:{type:[Number,String],default:"23"},visibleNum:{type:[Number,String],default:"8"},timeStep:{type:[Number,String],default:"30",validator:e=>60%e==0},readonly:Boolean,disabledBefore:Boolean},emits:["select"],setup(e,{emit:t}){const i=e;l([]),l([]),l([]);const a=s([]);let f=l([]);const b=s(),j=s();s(!1),o((()=>{N()}));const h=e=>Math.floor(e/60)>=10?Math.floor(e/60):"0"+Math.floor(e/60),N=()=>{const e=parseInt((new Date).getHours()),t=parseInt((new Date).getMinutes()),l=[],s=a=>{const l=[],s=60/i.timeStep*(a-i.minHour),o=(a,l)=>{if(!i.disabledBefore)return!1;if(a<e)return!0;if(e===a){const e=i.timeStep*(l-1),a=i.timeStep*l;if(t>=e&&t<=a)return!0;if(t>=a)return!0}};for(let e=1;e<=60/i.timeStep;e++)l.push({value:60*a+i.timeStep*e,selected:!1,disabled:o(a,e),index:s+e-1});return l};for(let a=+i.minHour;a<=+i.maxHour;a++){const e={time:"",blocks:s(a)};e.time=60*a,l.push(e)}a.value=l},H=(e,a,l)=>{if(i.readonly)return!1;if(i.disabledBefore&&N(),!a.disabled){if(void 0===b.value&&void 0===j.value)b.value=f[0]=l;else if(void 0!==b.value&&void 0===j.value){if(l===b.value&&f.indexOf(l)>-1&&(f.splice(f.indexOf(l),1),b.value=j.value=void 0),l>b.value){j.value=l,f.splice(0);for(let e=b.value;e<=j.value;e++)f.splice(e-b.value,1,e)}if(l<b.value){const[e,t]=[l,b.value];b.value=e,j.value=t,f.splice(0);for(let i=b.value;i<=j.value;i++)f.splice(i-b.value,1,i)}}else if(void 0!==b.value&&void 0!==j.value)if(l===b.value){const e=f.indexOf(l);f.splice(e,1),f.length?b.value=f[0]:b.value=j.value=void 0}else if(l===j.value){const e=f.indexOf(l);f.splice(e,1),j.value=f[f.length-1],b.value===j.value&&(j.value=void 0)}else if(l<b.value)f.splice(0),b.value=j.value=void 0;else if(l>b.value){j.value=l,f.splice(0);for(let e=b.value;e<=j.value;e++)f.splice(e-b.value,1,e)}(()=>{if(0===f.length)return void t("select",null);const e=60*+i.minHour+Number(i.timeStep)*b.value+Number(i.timeStep),a=60*+i.minHour+Number(i.timeStep)*j.value+Number(i.timeStep);let l="",s="",o="",r="",u="",m="";e&&a?(o=h(e-i.timeStep),l=h(a),r=(e-i.timeStep)%60==0?"00":Math.round(60*((e-i.timeStep)/60-o)),s=a%60==0?"00":Math.round(60*(a/60-l)),u=o+":"+r,24===l&&(l=23,s=59),m=l+":"+s):(o=h(e-i.timeStep),l=h(e),r=(e-i.timeStep)%60==0?"00":Math.round(60*((e-i.timeStep)/60-o)),s=e%60==0?"00":Math.round(60*(e/60-l)),u=o+":"+r,24===l&&(l=23,s=59),m=l+":"+s),t("select",[u,m])})()}};return(t,i)=>(r(),u("div",x,[m("div",S,[(r(!0),u(n,null,d(p(a),((t,i)=>(r(),u("div",{key:t.time,class:"time-bar"},[m("span",k,v(h(t.time)+":00"),1),m("div",g,[(r(!0),u(n,null,d(t.blocks,((t,i)=>(r(),u("div",{key:t.value,"data-val":t.value,"data-idx":t.index,class:c(["time-block",{"time-block--selected":p(f).includes(t.index),"time-block--readonly":e.readonly,"time-block--disabled":t.disabled}]),onClick:e=>H(0,t,t.index)},null,10,y)))),128))])])))),128))])]))}}),[["__scopeId","data-v-1b536680"]]);const M={class:"time-range-picker"},_={__name:"time-range-picker",setup(i){const a=l({time1:"",time2:"",time3:"",time4:""}),{time1:s,time2:o,time3:m,time4:n}=f(a),d=(e,t)=>{const i=e?e[0]+" ~ "+e[1]:"";"time1"===t&&(s.value=i),"time2"===t&&(o.value=i),"time3"===t&&(m.value=i),"time4"===t&&(n.value=i)};return(i,a)=>{const l=j,v=e,c=H,f=t;return r(),u("div",M,[b(l),b(v,{title:"完整时间",value:p(s),border:!1},null,8,["value"]),b(c,{onSelect:a[0]||(a[0]=e=>d(e,"time1"))}),b(v,{title:"自定义时间范围",value:p(o),border:!1},null,8,["value"]),b(c,{"min-hour":"9","max-hour":"18",onSelect:a[1]||(a[1]=e=>d(e,"time2"))}),b(v,{title:"禁用过去时间，不可选择",value:p(n)},null,8,["value"]),b(c,{"min-hour":"9","max-hour":"18","disabled-before":"",onSelect:a[2]||(a[2]=e=>d(e,"time4"))}),b(v,{title:"自定义时间间隔",value:p(m),border:!1},null,8,["value"]),b(c,{"min-hour":"11","max-hour":"22","time-step":"15",onSelect:a[3]||(a[3]=e=>d(e,"time3"))}),b(v,{title:"该组件为自研组件，后续提供更灵活定制选项~"}),b(f,{bottom:p(h)(60)},null,8,["bottom"])])}}};export{_ as default};
