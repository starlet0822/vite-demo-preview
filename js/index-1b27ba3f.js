var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,i=(e,a)=>{for(var l in a||(a={}))r.call(a,l)&&s(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&s(e,l,a[l]);return e},c=(e,t)=>a(e,l(t));import{w as n,u as d,v as u,x as f,y as h,z as p}from"./vant-78dd0152.js";import{t as v}from"./index-c813899e.js";import{_ as m}from"./plugin-vue_export-helper-893979e1.js";import{d as b}from"./lodash-es-0ddda1ab.js";import{m as w,r as k,a as y,w as g,_ as x,C,aI as j,ak as F,al as _,F as O,aN as S,l as A,b7 as V,a2 as E,a5 as I,ai as P,v as R,A as L,aK as B,aJ as K,aj as M}from"./@vue-0da0c2e3.js";const U=w({name:"FilterMenus",components:{},props:{activeColor:{type:String,default:v},filterMenu:{type:Array,default:()=>[{field:"status",label:"状态",value:"",multiple:!1,data:[{label:"不限",value:"-1"},{label:"上架",value:"0"},{label:"下架",value:"1"}]}],validator:e=>b(e)}},emits:["close","confirm"],setup(e,{emit:a}){const l=k(null),t=k([0,1]),r=y({list:[]});g((()=>e.filterMenu),((e,a)=>{e!==a&&(r.list=e,r.list.forEach((e=>{if(e.data&&e.data.length){e.data.forEach((e=>{e.checked=!1}));if(e.hasOwnProperty("canAll")&&e.canAll){const a={label:"全选",value:"all",checked:!1};e.data.unshift(a)}}})))}),{deep:!0,immediate:!0});return c(i({},x(r)),{container:l,activeArr:t,onFinish:({value:e,selectedOptions:a,tabIndex:l},t)=>{const r=t.showAllLevels;t.value=r?a.map((e=>e.value)).join("/"):e},handleClickBtn:()=>{},filterLabelSelect:(e,a,l,t)=>{if("all"===e.value&&(e.checked=!e.checked,e.label=e.checked?"反选":"全选",l.data.forEach((a=>a.checked=e.checked))),"all"!==e.value){e.checked=!e.checked;const a=l.data.filter((e=>"all"!==e.value&&e.checked)).length;l.hasOwnProperty("canAll")&&!0===l.canAll&&(l.data[0].checked=a===l.data.length-1,l.data[0].label=a===l.data.length-1?"反选":"全选")}l.hasOwnProperty("multiple")&&!l.multiple&&("all"!==e.value&&r.list[t].data.forEach((e=>e.checked=!1)),e.checked=!e.checked)},filterReset:()=>{r.list.forEach((e=>{e.type&&"tree"===e.type&&(e.valueShow="",e.value=""),e.data&&e.data.length&&e.data.forEach((e=>{e.checked=!1,"all"===e.value&&(e.label="全选")}))}))},filterConfirm:()=>{const e={};r.list.forEach((a=>{if(a.data&&a.data.length){const l=a.data.reduce(((e,a)=>("all"!==a.value&&a.checked&&e.push(a.value),e)),[]);"tree"===a.type&&""!==a.value&&(e[a.field]=a.value),""!==l.join(",")&&(e[a.field]=l.join(","))}}));const l=0!==Object.keys(e).length;a("confirm",e,l)}})}}),q={ref:"container",class:"filter-menus-wrapper st-bg-white"},z={class:"filter-list"},D={key:0,class:"st-flex-wrap st-padding-box"},J=["onClick"],N=(e=>(B("data-v-10473434"),e=e(),K(),e))((()=>_("div",null,null,-1))),G={class:"filter-button-box st-flex-ai"};var H=m(U,[["render",function(e,a,l,t,r,o){const s=n,i=d,c=u,f=C("waves");return j(),F("div",q,[_("div",z,[(j(!0),F(O,null,S(e.list,((l,t)=>(j(),F("div",{key:t,class:"filter-item"},[A(c,{modelValue:e.activeArr,"onUpdate:modelValue":a[1]||(a[1]=a=>e.activeArr=a),border:!1},{default:V((()=>[A(i,{name:t,title:l.label,value:""+(e.activeArr.includes(t)?"收起":"展开")},{default:V((()=>["tree"!==l.type?(j(),F("div",D,[(j(!0),F(O,null,S(l.data,((a,r)=>(j(),F("div",{key:r,class:E([{checked:a.checked},"filter-item-label st-line-16 van-ellipsis"]),onClick:o=>e.filterLabelSelect(a,r,l,t)},I(a.label),11,J)))),128))])):(j(),P(s,{key:t,ref_for:!0,ref:"cascaderRef",modelValue:l.value,"onUpdate:modelValue":e=>l.value=e,"field-names":{text:"label",value:"value",children:"children"},options:l.data,"active-color":e.activeColor,class:"cascader-tree",placeholder:"请选择",onClose:a[0]||(a[0]=a=>e.show=!1),onFinish:a=>e.onFinish(a,l,t)},{title:V((()=>[N])),_:2},1032,["modelValue","onUpdate:modelValue","options","active-color","onFinish"]))])),_:2},1032,["name","title","value"])])),_:2},1032,["modelValue"])])))),128))]),_("div",G,[R((j(),F("div",{class:"filter-button-reset st-flex-center st-flex-1",onClick:a[2]||(a[2]=(...a)=>e.filterReset&&e.filterReset(...a))},[L(" 清空 ")])),[[f]]),R((j(),F("div",{class:"filter-button-confirm st-flex-center st-flex-1 st-color-white",onClick:a[3]||(a[3]=(...a)=>e.filterConfirm&&e.filterConfirm(...a))},[L(" 确定 ")])),[[f]])])],512)}],["__scopeId","data-v-10473434"]]);const Q=w({name:"SearchFilter",props:{placeholder:{type:String,default:"搜索关键词"},filter:{type:Boolean,default:!1},shape:{type:String,default:"square",validator:e=>["square","round"].includes(e)}},emits:["search","confirm"],setup(e,{emit:a}){const l=y({keyword:"",showFilter:!0,isChecked:!1,dropdownItemRef:null,keywordListRef:null,showKeywordList:!1});g((()=>l.keyword),((e,a)=>{}));return c(i({},x(l)),{onFocus:()=>{l.showKeywordList=!0,l.showFilter=!1},onBlur:()=>{l.showKeywordList=!1,l.showFilter=!0},onSearch:()=>{a("search",l.keyword)},searchConfirm:()=>{},handleFilterConfirm:(e,t)=>{l.dropdownItemRef.toggle(),l.isChecked=t,a("confirm",e)},handleKeywordSearch:e=>{l.keyword=e}})}}),T={class:"search-filter-wrapper st-flex-ai st-bg-white st-border-bottom-1"},W=(e=>(B("data-v-43c47850"),e=e(),K(),e))((()=>_("div",{class:E("")},"筛选",-1)));var X=m(Q,[["render",function(e,a,l,t,r,o){const s=H,i=f,c=h,n=p;return j(),F("div",T,[A(n,{modelValue:e.keyword,"onUpdate:modelValue":a[0]||(a[0]=a=>e.keyword=a),modelModifiers:{trim:!0},shape:e.shape,"show-action":!0,class:"search-box st-flex-1",autocomplete:"off",placeholder:e.placeholder,"action-text":"",onBlur:e.onBlur,onFocus:e.onFocus,onSearch:e.onSearch},{action:V((()=>[(j(),P(c,{key:0,"active-color":"#333333","z-index":"999"},{default:V((()=>[A(i,{ref:"dropdownItemRef"},{title:V((()=>[W])),default:V((()=>[A(s,{onConfirm:e.handleFilterConfirm},null,8,["onConfirm"])])),_:1},512)])),_:1}))])),_:1},8,["modelValue","shape","placeholder","onBlur","onFocus","onSearch"])])}],["__scopeId","data-v-43c47850"]]);export{X as _};
