var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;import{f as l,R as n,l as p}from"./vant-7136ba84.js";import{a as d,t as c,n as f,af as m,l as g,r as u,b as h,B as b,H as j,M as v,N as x,u as y,D as w,E as P,s as _,K as k,Q as D,v as O,F as S,P as R,aR as z,aQ as B}from"./@vue-52de1c01.js";import{V as H}from"./vue-drag-resize-4f8623bc.js";import{p as I,a as W}from"./pdfjs-dist-6ebaafa4.js";import{_ as F}from"./index-3157abda.js";import"./@vant-0004063d.js";import"./@antv-8a75d63c.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./vue-c949ad72.js";import"./dommatrix-eb358292.js";import"./web-streams-polyfill-7fb58ada.js";import"./object-inspect-8ed24658.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vue-router-a4543dac.js";import"./vuex-c830e64e.js";import"./@vueuse-feee2333.js";import"./lodash-es-c547d601.js";import"./axios-0cd4f164.js";import"./qs-6446231f.js";import"./side-channel-b2edb420.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./nprogress-319be66c.js";import"./vue3-hash-calendar-68956731.js";import"./hammerjs-ed6f6a9e.js";I.exports.GlobalWorkerOptions.workerSrc=W;const C=()=>{const e=d({pdfDoc:"",pdfPages:0,pdfScale:1,pdfWidth:1e3,pdfHeight:1143,canvas_id:"pdf-canvas-"}),l=t=>{m(e.pdfDoc).getPage(t).then((a=>{const s=e.canvas_id+t,i=document.getElementById(s),o=i.getContext("2d"),r=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),n=a.getViewport({scale:e.pdfScale});i.width=n.width*r,i.height=n.height*r,i.style.width="375px",i.style.height="400px",e.pdfWidth=375,e.pdfHeight=400,o.setTransform(r,0,0,r,0,0);const p={canvasContext:o,viewport:n};a.render(p),t<e.pdfPages&&l(t+1)}))};return n=((e,t)=>{for(var a in t||(t={}))i.call(t,a)&&r(e,a,t[a]);if(s)for(var a of s(t))o.call(t,a)&&r(e,a,t[a]);return e})({},c(e)),t(n,a({loadFile:t=>{I.exports.getDocument(t).promise.then((t=>{e.pdfDoc=t,e.pdfPages=e.pdfDoc.numPages,f((()=>{l(1)}))}))}}));var n};const E=e=>(z("data-v-40d37ece"),e=e(),B(),e),L={class:"sign-drag st-bg"},N={class:"contract-document"},Q=["id"],V=E((()=>j("h3",null,"Hello World!",-1))),q={class:"control-tools"},A=E((()=>j("div",null,"印章",-1))),G=E((()=>j("div",null,"签名",-1))),K=E((()=>j("div",null,"日期",-1))),M=g({name:"SignDrag"});var T=F(Object.assign(M,{setup(e,{expose:t}){const{loadFile:a,pdfPages:s,pdfWidth:i,pdfHeight:o}=C(),r=u(null);u(1),u(0);const f=d({signList:[{signImg:"http://tva1.sinaimg.cn/large/006nwNl2ly1h71g369jdlj308c03c3yk.jpg",name:"模拟签名1",left:0,top:0,width:137,height:73,type:"sign"}],dropData:[],width:0,height:0,top:0,left:0}),{dropData:m,signList:g,top:z,left:B}=c(f),I=()=>{m.value.push(g.value[0])},W=(e,t)=>{f.width=e.width,f.height=e.height,f.top=e.top,f.left=e.left};return t({onPrint:()=>{r.value.print()}}),h((()=>{a("http://storage.xuetangx.com/public_assets/xuetangx/PDF/PlayerAPI_v1.0.6.pdf")})),(e,t)=>{const a=l,r=n,d=p;return _(),b("div",L,[j("ul",N,[(_(!0),b(v,null,x(y(s),(a=>(_(),b("li",{key:a,class:"contract-wrapper",style:k({width:y(i)+"px",height:y(o)+"px"}),onDragover:t[2]||(t[2]=D((()=>{}),["prevent"]))},[(_(),b("canvas",{id:"pdf-canvas-"+a,key:a,draggable:"false",style:{zoom:1}},null,8,Q)),1==a?(_(),O(y(H),{key:0,"is-active":!0,"parent-limitation":!0,w:80,h:40,x:y(B),y:y(z),z:9999,onResizing:t[0]||(t[0]=t=>W(t,e.item)),onDragging:t[1]||(t[1]=t=>W(t,e.item))},{default:P((()=>[V])),_:1},8,["x","y"])):S("",!0)],36)))),128))]),j("div",q,[w(r,{class:"tools-box",type:"flex",align:"center"},{default:P((()=>[w(a,{span:"12"},{default:P((()=>[w(r,{type:"flex",align:"center",gutter:"20"},{default:P((()=>[w(a,null,{default:P((()=>[A])),_:1}),w(a,{onClick:I},{default:P((()=>[G])),_:1}),w(a,null,{default:P((()=>[K])),_:1})])),_:1})])),_:1}),w(a,{span:"12"},{default:P((()=>[w(d,{size:"small",type:"primary",block:""},{default:P((()=>[R("提交签署")])),_:1})])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-40d37ece"]]);export{T as default};
