var e=(e,l,a)=>new Promise(((t,o)=>{var i=e=>{try{u(a.next(e))}catch(l){o(l)}},s=e=>{try{u(a.throw(e))}catch(l){o(l)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,s);u((a=a.apply(e,l)).next())}));import{l,r as a,a as t,w as o,b as i,n as s,B as u,F as r,H as n,J as d,M as m,N as p,u as v,s as c,I as f,bl as b,t as h,c as x,D as j,E as y,f as k,y as g,G as w,v as S,S as _}from"./@vue-52de1c01.js";import{a as C}from"./js-cookie-aaf6027b.js";import{t as V,R as H,_ as B}from"./index-3157abda.js";import{c as N}from"./@vueuse-feee2333.js";import{e as U,F as M,f as z,R as O,Z as P,a1 as I,P as A,J as R}from"./vant-7136ba84.js";import{p as D}from"./index-a5cbf9cf.js";import{o as q}from"./vue3-colorpicker-119fa3f0.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./vue-router-a4543dac.js";import"./vuex-c830e64e.js";import"./lodash-es-c547d601.js";import"./axios-0cd4f164.js";import"./qs-6446231f.js";import"./side-channel-b2edb420.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-8ed24658.js";import"./@antv-8a75d63c.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-319be66c.js";import"./vue3-hash-calendar-68956731.js";import"./hammerjs-ed6f6a9e.js";import"./@vant-0004063d.js";import"./vue-types-9561ac9a.js";import"./tinycolor2-7446cab2.js";import"./@aesoper-316802a3.js";import"./vue3-angle-289b91e7.js";import"./gradient-parser-c9367eab.js";import"./@popperjs-b33e3bca.js";const F={class:"time-picker"},J={class:"time-scroll"},E={class:"time-text"},G={class:"time-full"},T=["data-val","data-idx","onClick"],Z=l({name:"TimePicker"});var $=B(Object.assign(Z,{props:{modelValue:{type:Array,default:()=>[]},minHour:{type:[Number,String],default:"0"},maxHour:{type:[Number,String],default:"23"},visibleNum:{type:[Number,String],default:"8"},timeStep:{type:[Number,String],default:"30",validator:e=>60%e==0},blockColor:{type:String,default:C.get("themeColor")||V||"#2e6cf3"},showArrow:Boolean,fixed:Boolean,readonly:Boolean,disabledBefore:Boolean},emits:["select"],setup(l,{emit:h}){const x=l;b((e=>({"22bfa96c":v(k),db62b176:l.blockColor})));const j=a(0);a(!0),a(0);const y=a(0),k=a("");t([]),t([]),t([]);const g=a([]);a([]);const w=t([]),S=a(),_=a();a(!1),N(document.body,(e=>{})),o((()=>x),(e=>{U()}),{deep:!0}),i((()=>{U(),C()}));const C=()=>e(this,null,(function*(){var e;yield s(),y.value=null==(e=document.querySelector(".time-bar"))?void 0:e.getBoundingClientRect().width,k.value=y.value/H+"rem"})),V=e=>{j.value+=y.value*e,j.value!==y.value||(j.value=0)},B=e=>Math.floor(e/60)>=10?Math.floor(e/60):"0"+Math.floor(e/60),U=()=>{const e=parseInt((new Date).getHours()),l=parseInt((new Date).getMinutes()),a=[],t=a=>{const t=[],o=60/x.timeStep*(a-x.minHour),i=(a,t)=>{if(!x.disabledBefore)return!1;if(a<e)return!0;if(e===a){const e=x.timeStep*(t-1),a=x.timeStep*t;if(l>=e&&l<=a)return!0;if(l>=a)return!0}};for(let e=1;e<=60/x.timeStep;e++)t.push({value:60*a+x.timeStep*e,selected:!1,disabled:i(a,e),index:o+e-1});return t};for(let o=+x.minHour;o<=+x.maxHour;o++){const e={time:"",blocks:t(o)};e.time=60*o,a.push(e)}g.value=a},M=(e,l,a)=>{if(x.readonly)return!1;if(x.disabledBefore&&U(),!l.disabled){if(void 0===S.value&&void 0===_.value)S.value=w[0]=a;else if(void 0!==S.value&&void 0===_.value){if(a===S.value&&w.indexOf(a)>-1&&(w.splice(w.indexOf(a),1),S.value=_.value=void 0),a>S.value){_.value=a,w.splice(0);for(let e=S.value;e<=_.value;e++)w.splice(e-S.value,0,e)}if(a<S.value){const[e,l]=[a,S.value];S.value=e,_.value=l,w.splice(0);for(let a=S.value;a<=_.value;a++)w.splice(a-S.value,0,a)}}else if(void 0!==S.value&&void 0!==_.value)if(a===S.value){const e=w.indexOf(a);w.splice(e,1),w.length?S.value=w[0]:S.value=_.value=void 0}else if(a===_.value){const e=w.indexOf(a);w.splice(e,1),_.value=w[w.length-1],S.value===_.value&&(_.value=void 0)}else if(a<S.value)w.splice(0),S.value=_.value=void 0;else if(a>S.value){_.value=a,w.splice(0);for(let e=S.value;e<=_.value;e++)w.splice(e-S.value,0,e)}(()=>{if(0===w.length)return void h("select",null);const e=60*+x.minHour+Number(x.timeStep)*S.value+Number(x.timeStep),l=60*+x.minHour+Number(x.timeStep)*_.value+Number(x.timeStep);let a="",t="",o="",i="",s="",u="";e&&l?(o=B(e-x.timeStep),a=B(l),i=(e-x.timeStep)%60==0?"00":Math.round(60*((e-x.timeStep)/60-o)),t=l%60==0?"00":Math.round(60*(l/60-a)),s=o+":"+i,24===a&&(a=23,t=59),u=a+":"+t):(o=B(e-x.timeStep),a=B(e),i=(e-x.timeStep)%60==0?"00":Math.round(60*((e-x.timeStep)/60-o)),t=e%60==0?"00":Math.round(60*(e/60-a)),s=o+":"+i,24===a&&(a=23,t=59),u=a+":"+t),h("select",[s,u])})()}};return(e,a)=>(c(),u("div",F,[l.showArrow?(c(),u("div",{key:0,class:"time-picker-prev",onClick:a[0]||(a[0]=e=>V(1))},"<")):r("",!0),n("div",J,[n("div",{class:d(["time-wrapper",{"time-wrapper__fixed":l.fixed}])},[(c(!0),u(m,null,p(v(g),((e,a)=>(c(),u("div",{key:e.time+a,class:d(["time-bar",[{"time-bar--fixed-start":l.fixed&&0==a,"time-bar--fixed-end":l.fixed&&v(g).length-1===a,paddingno:l.fixed&&v(g).length-2===a}]])},[n("span",E,f(B(e.time)+":00"),1),n("div",G,[(c(!0),u(m,null,p(e.blocks,(e=>(c(),u("div",{key:e.value,"data-val":e.value,"data-idx":e.index,class:d(["time-block",{"time-block--selected":v(w).includes(e.index),"time-block--readonly":l.readonly,"time-block--disabled":e.disabled}]),onClick:l=>M(0,e,e.index)},null,10,T)))),128))])],2)))),128))],2)]),l.showArrow?(c(),u("div",{key:1,class:"time-picker-next",onClick:a[1]||(a[1]=e=>V(-1))},">")):r("",!0)]))}}),[["__scopeId","data-v-fc6b28f0"]]);const K={class:"time-range-picker"},L={class:"color-wrapper"};var Q=B({__name:"time-range-picker",setup(l){const o=a(),i=a(null),r=t({minHour:"00",maxHour:"23",timeStep:30,blockColor:V,fixed:!1,readonly:!1,disabledBefore:!1}),{minHour:d,maxHour:m,timeStep:p,disabledBefore:f,fixed:b,readonly:C,blockColor:H}=h(r),B=a(!1),N=a(["00","23"]),F=x((()=>d.value+" ~ "+m.value)),J=a(!1),E=()=>{J.value=!0},G=({selectedValues:e,selectedOptions:l})=>{const[a,t]=N.value;d.value=a,m.value=t,o.value="",J.value=!1},T=a(!1),Z=[{text:"10分",value:10},{text:"15分",value:15},{text:"20分",value:20},{text:"30分",value:30},{text:"60分",value:60}],Q=()=>{T.value=!0},W=({selectedOptions:e})=>{T.value=!1,p.value=e[0].value,o.value=""},X=()=>e(this,null,(function*(){yield s(),o.value=""})),Y=(e,l)=>"minute"===e?l.filter((e=>Number(e.value)<=23)):l,ee=(e,l)=>("hour"===e&&(l.text+="时开始"),"minute"===e&&(l.text+="时结束"),l),le=e=>{};return(e,l)=>{const a=U,t=M,s=z,d=O,m=P,h=I,x=A,V=R,ae=$,te=_("waves");return c(),u("div",K,[j(a,{title:"配置项",border:!0,value:`已选时间 ${v(o)||""}`},null,8,["value"]),j(d,{type:"flex",justify:"center"},{default:y((()=>[w((c(),S(s,{span:"8"},{default:y((()=>[j(t,{modelValue:v(H),"onUpdate:modelValue":l[0]||(l[0]=e=>k(H)?H.value=e:null),label:"高亮颜色","label-align":"top",readonly:"","is-link":"",onClick:l[1]||(l[1]=e=>B.value=!0)},null,8,["modelValue"])])),_:1})),[[te]]),w((c(),S(s,{span:"8"},{default:y((()=>[j(t,{modelValue:v(F),"onUpdate:modelValue":l[2]||(l[2]=e=>k(F)?F.value=e:null),label:"时间范围",placeholder:"自定义范围","label-align":"top",readonly:"","is-link":"",border:!0,onClick:E},null,8,["modelValue"])])),_:1})),[[te]]),w((c(),S(s,{span:"8"},{default:y((()=>[j(t,{modelValue:v(p),"onUpdate:modelValue":l[3]||(l[3]=e=>k(p)?p.value=e:null),label:"间隔（分）",placeholder:"规定时间间隔","label-align":"top",readonly:"","is-link":"",border:!0,onClick:Q},null,8,["modelValue"])])),_:1})),[[te]])])),_:1}),j(d,{type:"flex",justify:"center"},{default:y((()=>[w((c(),S(s,{span:"8"},{default:y((()=>[j(t,{label:"禁用过去","label-align":"top"},{input:y((()=>[j(m,{modelValue:v(f),"onUpdate:modelValue":l[4]||(l[4]=e=>k(f)?f.value=e:null),size:v(D)(18),onChange:X},null,8,["modelValue","size"])])),_:1})])),_:1})),[[te]]),w((c(),S(s,{span:"8"},{default:y((()=>[j(t,{label:"固定两端","label-align":"top"},{input:y((()=>[j(m,{modelValue:v(b),"onUpdate:modelValue":l[5]||(l[5]=e=>k(b)?b.value=e:null),size:v(D)(18)},null,8,["modelValue","size"])])),_:1})])),_:1})),[[te]]),w((c(),S(s,{span:"8"},{default:y((()=>[j(t,{label:"只读","label-align":"top"},{input:y((()=>[j(m,{modelValue:v(C),"onUpdate:modelValue":l[6]||(l[6]=e=>k(C)?C.value=e:null),size:v(D)(18)},null,8,["modelValue","size"])])),_:1})])),_:1})),[[te]])])),_:1}),j(x,{show:v(J),"onUpdate:show":l[9]||(l[9]=e=>k(J)?J.value=e:null),position:"bottom"},{default:y((()=>[j(h,{modelValue:v(N),"onUpdate:modelValue":l[7]||(l[7]=e=>k(N)?N.value=e:null),title:"选择小时范围",filter:Y,formatter:ee,"is-link":"",onCancel:l[8]||(l[8]=e=>J.value=!1),onConfirm:G},null,8,["modelValue"])])),_:1},8,["show"]),j(x,{show:v(T),"onUpdate:show":l[11]||(l[11]=e=>k(T)?T.value=e:null),position:"bottom"},{default:y((()=>[j(V,{title:"时间间隔",columns:Z,onCancel:l[10]||(l[10]=e=>T.value=!1),onConfirm:W})])),_:1},8,["show"]),j(x,{show:v(B),"onUpdate:show":l[13]||(l[13]=e=>k(B)?B.value=e:null)},{default:y((()=>[n("div",L,[j(v(q),{pureColor:v(H),"onUpdate:pureColor":l[12]||(l[12]=e=>k(H)?H.value=e:null),"is-widget":!0,"disable-alpha":"",format:"hex","picker-type":"chrome","use-type":"pure",onPureColorChange:le},null,8,["pureColor"])])])),_:1},8,["show"]),j(ae,g({ref_key:"timePickerRef",ref:i},v(r),{onSelect:l[14]||(l[14]=e=>((e,l)=>{const a=e?e[0]+" ~ "+e[1]:"";o.value=a})(e))}),null,16),j(a,{title:"该组件为自研组件，后续提供更灵活定制选项，有时间再优化动态预览配置~",border:!1})])}}},[["__scopeId","data-v-ae2648ce"]]);export{Q as default};
