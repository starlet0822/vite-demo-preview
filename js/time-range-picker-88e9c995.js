import{_ as e}from"./plugin-vue_export-helper-893979e1.js";import{m as t,a as l,r as a,b as i,aI as u,ak as s,al as o,F as r,aN as v,a5 as m,a2 as n,u as c,_ as d,l as p}from"./@vue-0da0c2e3.js";import{d as f}from"./vant-182c6d73.js";import{_ as b}from"./index-06373c59.js";import"./@vant-b0725c78.js";import"./vue-router-1cbad9b8.js";const S={class:"time-picker"},x={class:"time-wraper no-scrollbar"},h={class:"time-text"},k={class:"time-full"},g=["data-val","data-idx","onClick"],y=t({name:"TimePicker"});var N=e(Object.assign(y,{props:{modelValue:{type:Array,default:()=>[]},minHour:{type:[Number,String],default:"0"},maxHour:{type:[Number,String],default:"23"},visibleNum:{type:[Number,String],default:"8"},timeStep:{type:[Number,String],default:"30",validator:e=>60%e==0},readonly:Boolean},emits:["select"],setup(e,{emit:t}){const d=e;l([]),l([]),l([]);const p=a([]);let f=l([]);const b=a(),y=a();a(!1),i((()=>{_()}));const N=e=>Math.floor(e/60)>=10?Math.floor(e/60):"0"+Math.floor(e/60),_=()=>{const e=[],t=e=>{const t=[],l=60/d.timeStep*(e-d.minHour);for(let a=1;a<=60/d.timeStep;a++)t.push({value:60*e+d.timeStep*a,selected:!1,disabled:!1,index:l+a-1});return t};for(let l=+d.minHour;l<=+d.maxHour;l++){const a={time:"",blocks:t(l)};a.time=60*l,e.push(a)}p.value=e},j=(e,l,a)=>{if(d.readonly)return!1;if(void 0===b.value&&void 0===y.value)b.value=f[0]=a;else if(void 0!==b.value&&void 0===y.value){if(a===b.value&&f.indexOf(a)>-1&&(f.splice(f.indexOf(a),1),b.value=y.value=void 0),a>b.value){y.value=a,f.splice(0);for(let e=b.value;e<=y.value;e++)f.splice(e-b.value,1,e)}if(a<b.value){const[e,t]=[a,b.value];b.value=e,y.value=t,f.splice(0);for(let l=b.value;l<=y.value;l++)f.splice(l-b.value,1,l)}}else if(void 0!==b.value&&void 0!==y.value)if(a===b.value){const e=f.indexOf(a);f.splice(e,1),f.length?b.value=f[0]:b.value=y.value=void 0}else if(a===y.value){const e=f.indexOf(a);f.splice(e,1),y.value=f[f.length-1],b.value===y.value&&(y.value=void 0)}else if(a<b.value)f.splice(0),b.value=y.value=void 0;else if(a>b.value){y.value=a,f.splice(0);for(let e=b.value;e<=y.value;e++)f.splice(e-b.value,1,e)}(()=>{if(0===f.length)return void t("select",null);const e=60*+d.minHour+Number(d.timeStep)*b.value+Number(d.timeStep),l=60*+d.minHour+Number(d.timeStep)*y.value+Number(d.timeStep);let a="",i="",u="",s="",o="",r="";e&&l?(u=N(e-d.timeStep),a=N(l),s=(e-d.timeStep)%60==0?"00":Math.round(60*((e-d.timeStep)/60-u)),i=l%60==0?"00":Math.round(60*(l/60-a)),o=u+":"+s,r=a+":"+i):(u=N(e-d.timeStep),a=N(e),s=(e-d.timeStep)%60==0?"00":Math.round(60*((e-d.timeStep)/60-u)),i=e%60==0?"00":Math.round(60*(e/60-a)),o=u+":"+s,r=a+":"+i),t("select",[o,r])})()};return(e,t)=>(u(),s("div",S,[o("div",x,[(u(!0),s(r,null,v(c(p),((e,t)=>(u(),s("div",{key:e.time,class:"time-bar"},[o("span",h,m(N(e.time)+":00"),1),o("div",k,[(u(!0),s(r,null,v(e.blocks,((e,t)=>(u(),s("div",{key:e.value,"data-val":e.value,"data-idx":e.index,class:n(["time-block",{"time-block--selected":c(f).includes(e.index)}]),onClick:t=>j(0,0,e.index)},null,10,g)))),128))])])))),128))])]))}}),[["__scopeId","data-v-eeb9ae86"]]);const _={class:"time-range-picker"},j={__name:"time-range-picker",setup(e){const t=l({time3:"",time1:"",time2:""}),{time1:a,time2:i,time3:o}=d(t),r=(e,t)=>{const l=e?e[0]+" ~ "+e[1]:"";"time1"===t&&(a.value=l),"time2"===t&&(i.value=l),"time3"===t&&(o.value=l)};return(e,t)=>{const l=b,v=f,m=N;return u(),s("div",_,[p(l),p(v,{title:"完整时间",value:c(a),border:!1},null,8,["value"]),p(m,{onSelect:t[0]||(t[0]=e=>r(e,"time1"))}),p(v,{title:"自定义时间范围",value:c(i),border:!1},null,8,["value"]),p(m,{"min-hour":"9","max-hour":"18",onSelect:t[1]||(t[1]=e=>r(e,"time2"))}),p(v,{title:"自定义时间间隔",value:c(o),border:!1},null,8,["value"]),p(m,{"min-hour":"11","max-hour":"22","time-step":"15",onSelect:t[2]||(t[2]=e=>r(e,"time3"))}),p(v,{title:"该组件为自研组件，后续提供更灵活定制选项~"})])}}};export{j as default};
