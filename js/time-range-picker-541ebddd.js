var e=(e,l,a)=>new Promise(((t,o)=>{var i=e=>{try{u(a.next(e))}catch(l){o(l)}},s=e=>{try{u(a.throw(e))}catch(l){o(l)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,s);u((a=a.apply(e,l)).next())}));import{d as l,F as a,n as t,R as o,Z as i,$ as s,o as u,O as r,B as n}from"./vant-c731c718.js";import{m as d,r as m,a as p,w as v,b as c,n as f,ak as b,aj as h,al as x,a2 as j,F as k,aN as y,u as g,aI as _,a5 as w,bk as S,_ as C,c as V,l as H,b7 as B,f as N,t as U,v as M,ai as O,C as z}from"./@vue-0da0c2e3.js";import{a as I}from"./js-cookie-aaf6027b.js";import{t as P,R as A}from"./index-c2271971.js";import{c as R}from"./@vueuse-13b67ac5.js";import{_ as q}from"./plugin-vue_export-helper-893979e1.js";import{_ as D}from"./index-2f91436e.js";import{p as F}from"./index-57de3c0d.js";import{o as $}from"./vue3-colorpicker-a6e02a45.js";import"./@vant-b0725c78.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./vue-router-1cbad9b8.js";import"./vuex-fdaeb4c6.js";import"./lodash-es-12d03b41.js";import"./axios-0cd4f164.js";import"./qs-efaa5365.js";import"./side-channel-ebdfdc6e.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-af06f273.js";import"./@antv-74afab59.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-4e4fc296.js";import"./vue3-hash-calendar-e234247e.js";import"./hammerjs-ed6f6a9e.js";import"./vue-types-9561ac9a.js";import"./tinycolor2-7446cab2.js";import"./@aesoper-316802a3.js";import"./vue3-angle-f446972c.js";import"./gradient-parser-c9367eab.js";import"./@popperjs-f5cb6547.js";const T={class:"time-picker"},Z={class:"time-scroll"},E={class:"time-text"},G={class:"time-full"},J=["data-val","data-idx","onClick"],K=d({name:"TimePicker"});var L=q(Object.assign(K,{props:{modelValue:{type:Array,default:()=>[]},minHour:{type:[Number,String],default:"0"},maxHour:{type:[Number,String],default:"23"},visibleNum:{type:[Number,String],default:"8"},timeStep:{type:[Number,String],default:"30",validator:e=>60%e==0},blockColor:{type:String,default:I.get("themeColor")||P||"#2e6cf3"},showArrow:Boolean,fixed:Boolean,readonly:Boolean,disabledBefore:Boolean},emits:["select"],setup(l,{emit:a}){const t=l;S((e=>({66677720:g(s),"0a15f31b":l.blockColor})));const o=m(0);m(!0),m(0);const i=m(0),s=m("");p([]),p([]),p([]);const u=m([]);m([]);let r=p([]);const n=m(),d=m();m(!1),R(document.body,(e=>{})),v((()=>t),(e=>{B()}),{deep:!0}),c((()=>{B(),C()}));const C=()=>e(this,null,(function*(){var e;yield f(),i.value=null==(e=document.querySelector(".time-bar"))?void 0:e.getBoundingClientRect().width,s.value=i.value/A+"rem"})),V=e=>{o.value+=i.value*e,o.value!==i.value||(o.value=0)},H=e=>Math.floor(e/60)>=10?Math.floor(e/60):"0"+Math.floor(e/60),B=()=>{const e=parseInt((new Date).getHours()),l=parseInt((new Date).getMinutes()),a=[],o=a=>{const o=[],i=60/t.timeStep*(a-t.minHour),s=(a,o)=>{if(!t.disabledBefore)return!1;if(a<e)return!0;if(e===a){const e=t.timeStep*(o-1),a=t.timeStep*o;if(l>=e&&l<=a)return!0;if(l>=a)return!0}};for(let e=1;e<=60/t.timeStep;e++)o.push({value:60*a+t.timeStep*e,selected:!1,disabled:s(a,e),index:i+e-1});return o};for(let i=+t.minHour;i<=+t.maxHour;i++){const e={time:"",blocks:o(i)};e.time=60*i,a.push(e)}u.value=a},N=(e,l,o)=>{if(t.readonly)return!1;if(t.disabledBefore&&B(),!l.disabled){if(void 0===n.value&&void 0===d.value)n.value=r[0]=o;else if(void 0!==n.value&&void 0===d.value){if(o===n.value&&r.indexOf(o)>-1&&(r.splice(r.indexOf(o),1),n.value=d.value=void 0),o>n.value){d.value=o,r.splice(0);for(let e=n.value;e<=d.value;e++)r.splice(e-n.value,0,e)}if(o<n.value){const[e,l]=[o,n.value];n.value=e,d.value=l,r.splice(0);for(let a=n.value;a<=d.value;a++)r.splice(a-n.value,0,a)}}else if(void 0!==n.value&&void 0!==d.value)if(o===n.value){const e=r.indexOf(o);r.splice(e,1),r.length?n.value=r[0]:n.value=d.value=void 0}else if(o===d.value){const e=r.indexOf(o);r.splice(e,1),d.value=r[r.length-1],n.value===d.value&&(d.value=void 0)}else if(o<n.value)r.splice(0),n.value=d.value=void 0;else if(o>n.value){d.value=o,r.splice(0);for(let e=n.value;e<=d.value;e++)r.splice(e-n.value,0,e)}(()=>{if(0===r.length)return void a("select",null);const e=60*+t.minHour+Number(t.timeStep)*n.value+Number(t.timeStep),l=60*+t.minHour+Number(t.timeStep)*d.value+Number(t.timeStep);let o="",i="",s="",u="",m="",p="";e&&l?(s=H(e-t.timeStep),o=H(l),u=(e-t.timeStep)%60==0?"00":Math.round(60*((e-t.timeStep)/60-s)),i=l%60==0?"00":Math.round(60*(l/60-o)),m=s+":"+u,24===o&&(o=23,i=59),p=o+":"+i):(s=H(e-t.timeStep),o=H(e),u=(e-t.timeStep)%60==0?"00":Math.round(60*((e-t.timeStep)/60-s)),i=e%60==0?"00":Math.round(60*(e/60-o)),m=s+":"+u,24===o&&(o=23,i=59),p=o+":"+i),a("select",[m,p])})()}};return(e,a)=>(_(),b("div",T,[l.showArrow?(_(),b("div",{key:0,class:"time-picker-prev",onClick:a[0]||(a[0]=e=>V(1))},"<")):h("",!0),x("div",Z,[x("div",{class:j(["time-wrapper",{"time-wrapper__fixed":l.fixed}])},[(_(!0),b(k,null,y(g(u),((e,a)=>(_(),b("div",{key:e.time+a,class:j(["time-bar",[{"time-bar--fixed-start":l.fixed&&0==a,"time-bar--fixed-end":l.fixed&&g(u).length-1===a,paddingno:l.fixed&&g(u).length-2===a}]])},[x("span",E,w(H(e.time)+":00"),1),x("div",G,[(_(!0),b(k,null,y(e.blocks,(e=>(_(),b("div",{key:e.value,"data-val":e.value,"data-idx":e.index,class:j(["time-block",{"time-block--selected":g(r).includes(e.index),"time-block--readonly":l.readonly,"time-block--disabled":e.disabled}]),onClick:l=>N(0,e,e.index)},null,10,J)))),128))])],2)))),128))],2)]),l.showArrow?(_(),b("div",{key:1,class:"time-picker-next",onClick:a[1]||(a[1]=e=>V(-1))},">")):h("",!0)]))}}),[["__scopeId","data-v-cb51e416"]]);const Q={class:"time-range-picker"},W={class:"color-wrapper"};var X=q({__name:"time-range-picker",setup(d){const v=m(),c=m(null),h=p({minHour:"00",maxHour:"23",timeStep:30,blockColor:P,fixed:!1,readonly:!1,disabledBefore:!1}),{minHour:j,maxHour:k,timeStep:y,disabledBefore:w,fixed:S,readonly:I,blockColor:A}=C(h),R=m(!1),q=m(["00","23"]),T=V((()=>j.value+" ~ "+k.value)),Z=m(!1),E=()=>{Z.value=!0},G=({selectedValues:e,selectedOptions:l})=>{const[a,t]=q.value;j.value=a,k.value=t,v.value="",Z.value=!1},J=m(!1),K=[{text:"10分",value:10},{text:"15分",value:15},{text:"20分",value:20},{text:"30分",value:30},{text:"60分",value:60}],X=()=>{J.value=!0},Y=({selectedOptions:e})=>{J.value=!1,y.value=e[0].value,v.value=""},ee=()=>e(this,null,(function*(){yield f(),v.value=""})),le=(e,l)=>"minute"===e?l.filter((e=>Number(e.value)<=23)):l,ae=(e,l)=>("hour"===e&&(l.text+="时开始"),"minute"===e&&(l.text+="时结束"),l),te=e=>{};return(e,d)=>{const m=D,p=l,f=a,j=t,k=o,C=i,V=s,P=u,oe=r,ie=L,se=n,ue=z("waves");return _(),b("div",Q,[H(m),H(p,{title:"配置项",border:!0,value:`已选时间 ${g(v)||""}`},null,8,["value"]),H(k,{type:"flex",justify:"center"},{default:B((()=>[M((_(),O(j,{span:"8"},{default:B((()=>[H(f,{modelValue:g(A),"onUpdate:modelValue":d[0]||(d[0]=e=>N(A)?A.value=e:null),label:"高亮颜色","label-align":"top",readonly:"","is-link":"",onClick:d[1]||(d[1]=e=>R.value=!0)},null,8,["modelValue"])])),_:1})),[[ue]]),M((_(),O(j,{span:"8"},{default:B((()=>[H(f,{modelValue:g(T),"onUpdate:modelValue":d[2]||(d[2]=e=>N(T)?T.value=e:null),label:"时间范围",placeholder:"自定义范围","label-align":"top",readonly:"","is-link":"",border:!0,onClick:E},null,8,["modelValue"])])),_:1})),[[ue]]),M((_(),O(j,{span:"8"},{default:B((()=>[H(f,{modelValue:g(y),"onUpdate:modelValue":d[3]||(d[3]=e=>N(y)?y.value=e:null),label:"间隔（分）",placeholder:"规定时间间隔","label-align":"top",readonly:"","is-link":"",border:!0,onClick:X},null,8,["modelValue"])])),_:1})),[[ue]])])),_:1}),H(k,{type:"flex",justify:"center"},{default:B((()=>[M((_(),O(j,{span:"8"},{default:B((()=>[H(f,{label:"禁用过去","label-align":"top"},{input:B((()=>[H(C,{modelValue:g(w),"onUpdate:modelValue":d[4]||(d[4]=e=>N(w)?w.value=e:null),size:g(F)(18),onChange:ee},null,8,["modelValue","size"])])),_:1})])),_:1})),[[ue]]),M((_(),O(j,{span:"8"},{default:B((()=>[H(f,{label:"固定两端","label-align":"top"},{input:B((()=>[H(C,{modelValue:g(S),"onUpdate:modelValue":d[5]||(d[5]=e=>N(S)?S.value=e:null),size:g(F)(18)},null,8,["modelValue","size"])])),_:1})])),_:1})),[[ue]]),M((_(),O(j,{span:"8"},{default:B((()=>[H(f,{label:"只读","label-align":"top"},{input:B((()=>[H(C,{modelValue:g(I),"onUpdate:modelValue":d[6]||(d[6]=e=>N(I)?I.value=e:null),size:g(F)(18)},null,8,["modelValue","size"])])),_:1})])),_:1})),[[ue]])])),_:1}),H(P,{show:g(Z),"onUpdate:show":d[9]||(d[9]=e=>N(Z)?Z.value=e:null),position:"bottom"},{default:B((()=>[H(V,{modelValue:g(q),"onUpdate:modelValue":d[7]||(d[7]=e=>N(q)?q.value=e:null),title:"选择小时范围",filter:le,formatter:ae,"is-link":"",onCancel:d[8]||(d[8]=e=>Z.value=!1),onConfirm:G},null,8,["modelValue"])])),_:1},8,["show"]),H(P,{show:g(J),"onUpdate:show":d[11]||(d[11]=e=>N(J)?J.value=e:null),position:"bottom"},{default:B((()=>[H(oe,{title:"时间间隔",columns:K,onCancel:d[10]||(d[10]=e=>J.value=!1),onConfirm:Y})])),_:1},8,["show"]),H(P,{show:g(R),"onUpdate:show":d[13]||(d[13]=e=>N(R)?R.value=e:null)},{default:B((()=>[x("div",W,[H(g($),{pureColor:g(A),"onUpdate:pureColor":d[12]||(d[12]=e=>N(A)?A.value=e:null),"is-widget":!0,"disable-alpha":"",format:"hex","picker-type":"chrome","use-type":"pure",onPureColorChange:te},null,8,["pureColor"])])])),_:1},8,["show"]),H(ie,U({ref_key:"timePickerRef",ref:c},g(h),{onSelect:d[14]||(d[14]=e=>((e,l)=>{const a=e?e[0]+" ~ "+e[1]:"";v.value=a})(e))}),null,16),H(p,{title:"该组件为自研组件，后续提供更灵活定制选项，有时间再优化动态预览配置~",border:!1}),H(se,{bottom:g(F)(50)},null,8,["bottom"])])}}},[["__scopeId","data-v-b6580472"]]);export{X as default};
