var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,l=(e,l)=>{for(var r in l||(l={}))a.call(l,r)&&o(e,r,l[r]);if(t)for(var r of t(l))s.call(l,r)&&o(e,r,l[r]);return e};import{a0 as r,l as i,y as n,z as p,S as c,H as u,J as m,B as d}from"./vant-e0b5fbdf.js";import{_ as v}from"./plugin-vue_export-helper-893979e1.js";import{l as f,c as b,s as j,B as y,D as g,y as h,u as w,r as k,b as _,E as x,f as O,H as F,M as C,N as S,I,K as M,v as P,F as T}from"./@vue-52de1c01.js";import{g as R,_ as z}from"./dict-ab9c54d8.js";import{_ as B}from"./index-eb7feec2.js";import{b as N}from"./index-2eb2a530.js";import{d as V}from"./dayjs-f8677b81.js";import"./@vant-0004063d.js";import"./lodash-es-133975bb.js";import"./vue-router-35312974.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vuex-c830e64e.js";import"./@vueuse-feee2333.js";import"./axios-0cd4f164.js";import"./qs-6446231f.js";import"./side-channel-b2edb420.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-8ed24658.js";import"./@antv-8a75d63c.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-319be66c.js";import"./vue3-hash-calendar-68956731.js";import"./hammerjs-ed6f6a9e.js";import"./mockjs-0ec5bfd5.js";import"./vite-plugin-mock-fc11b28e.js";import"./path-to-regexp-9b852198.js";const q={class:"tip-wrapper"},E=f({name:"Tip"});var H=v(Object.assign(E,{props:{description:{type:String,default:""},icon:{type:String,default:"empty",validitor:e=>["404","empty","lock","network"].includes(e)}},setup(e){const t=e,a=new Map([["empty","/vite-vue3-preview/assets/empty.d48a173e.png"],["404","/vite-vue3-preview/assets/404.633f6e34.png"],["lock","/vite-vue3-preview/assets/lock.196962f4.png"],["network","/vite-vue3-preview/assets/network.60e3f254.png"]]),s=new Map([["empty","暂无数据"],["404","404 Not Found"],["lock","抱歉，您无权限访问此页面"],["network","网络异常"]]),o=a[t.icon],l=b((()=>t.description||s.get(t.icon)||"暂无数据"));return(e,t)=>{const a=r;return j(),y("div",q,[g(a,h(e.$attrs,{image:w(o),description:w(l)}),null,16,["image","description"])])}}}),[["__scopeId","data-v-c7a1ec6c"]]);const L={class:"work-order-list"},U={class:"list-wrapper"},D={class:"item-name"},J={class:"item-time"},K={class:"item-user"},W=f({name:"work-order"});var $=v(Object.assign(W,{setup(e){const t=k(1),a=k(20),s=k(0),o=k([]),r=k(!1),v=k(!1),f=k(!1),h=b((()=>o.value.length?"没有更多了":"")),q=k(null),E=k({order:"asc",prop:"createTime"}),W=(e,t)=>{var a;E.value=l(l({},E.value),e),null==(a=q.value)||a.close(),A()},$=()=>{return e=this,i=null,n=function*(){var e;try{f.value&&(o.value=[],f.value=!1);const i=l({pageNo:t.value,pageSize:a.value},E.value),n=yield N.getWorkOrderList(i);if(0===n.code){t.value+=1;const{rows:a,total:l}=null!=(e=n.data)?e:{};s.value=l,o.value=1===t.value?a:o.value.concat(a),o.value.length>=s.value&&(v.value=!0)}}catch(i){}finally{r.value=!1}},new Promise(((t,a)=>{var s=e=>{try{l(n.next(e))}catch(t){a(t)}},o=e=>{try{l(n.throw(e))}catch(t){a(t)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,o);l((n=n.apply(e,i)).next())}));var e,i,n},A=()=>{f.value=!0,v.value=!1,r.value=!0,t.value=1,$()},G=()=>{};_((()=>{$()}));const Q=new Map([["-1","全部"],["0","处理中"],["1","已完结"],["2","被退回"]]),X=new Map([["0","#2e6cf3"],["1","#ff0000"],["2","#05a081"]]),Y=document.querySelector(".todo-list"),Z=[{type:"CellField",title:"排序方式",value:"asc",name:"order",attrs:{options:[{label:"升序排序",value:"asc"},{label:"倒序排序",value:"desc"}]}},{type:"CellField",title:"排序字段",value:"createTime",name:"prop",attrs:{options:[{label:"发起时间",value:"createTime"},{label:"工单名称",value:"name"}]}}],ee=(V("2003-10-08 08:43").isBefore("2003-10-08 08:43","m"),[{type:"InputField",title:"关键词查询",value:"",name:"name",attrs:{placeholder:"输入搜索关键词"}},{type:"RadioField",title:"工单状态",value:"-1",name:"status",attrs:{options:R(Q)}}]);return(e,t)=>{const a=i,s=B,l=z,b=n,k=p,_=c,R=u,N=H,V=m,E=d;return j(),y("div",L,[g(s,{"right-text":"按钮",border:""},{right:x((()=>[F("span",{class:"st-color-blue st-font-12",onClick:t[0]||(t[0]=t=>e.showFilter=!0)},[g(a,{name:"plus",class:"st-font-16"})])])),_:1}),g(_,{"offset-top":46},{default:x((()=>[g(k,{ref_key:"menuRef",ref:q,"close-on-click-outside":!1,"close-on-click-overlay":!1,onClosed:G},{default:x((()=>[g(b,{title:"排序"},{default:x((()=>[g(l,{"form-items":Z,onConfirm:t[1]||(t[1]=e=>W(e))})])),_:1}),g(b,{ref:"filterRef",title:"筛选",teleport:w(Y)},{default:x((()=>[g(l,{"form-items":ee,onConfirm:t[2]||(t[2]=e=>W(e))})])),_:1},8,["teleport"])])),_:1},512)])),_:1}),g(V,{modelValue:w(f),"onUpdate:modelValue":t[4]||(t[4]=e=>O(f)?f.value=e:null),onRefresh:A},{default:x((()=>[g(R,{loading:w(r),"onUpdate:loading":t[3]||(t[3]=e=>O(r)?r.value=e:null),"immediate-check":!1,finished:w(v),"finished-text":w(h),onLoad:$},{default:x((()=>[F("ul",U,[(j(!0),y(C,null,S(w(o),((e,t)=>(j(),y("li",{key:e.name+t,class:"list-item"},[F("div",null,[F("p",D,I(e.name),1),F("p",J,"发起时间："+I(e.createTime),1),F("p",K,"处理人员："+I(e.username),1)]),F("div",{class:"item-status",style:M({color:w(X).get(e.status)})},I(w(Q).get(e.status)),5)])))),128))])])),_:1},8,["loading","finished","finished-text"]),w(o).length||w(r)?T("",!0):(j(),P(N,{key:0}))])),_:1},8,["modelValue"]),g(E)])}}}),[["__scopeId","data-v-64b3c509"]]);export{$ as default};
