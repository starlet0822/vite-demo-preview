import{d as e,B as t}from"./vant-182c6d73.js";import{m as i,bk as a,u as l,r,a as o,b as s,n as u,aI as n,ak as m,aj as d,al as v,a2 as c,F as p,aN as f,a4 as b,a5 as h,_ as x,l as j}from"./@vue-0da0c2e3.js";import{R as S}from"./index-9989b12e.js";import{_ as k}from"./plugin-vue_export-helper-893979e1.js";import{_ as y}from"./index-06373c59.js";import{p as g}from"./index-8fbf2ca5.js";import"./@vant-b0725c78.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vue-router-1cbad9b8.js";import"./vuex-fdaeb4c6.js";import"./@vueuse-cf363312.js";import"./lodash-es-12d03b41.js";import"./axios-0cd4f164.js";import"./qs-efaa5365.js";import"./side-channel-ebdfdc6e.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-af06f273.js";import"./@antv-74afab59.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-4e4fc296.js";import"./vue3-hash-calendar-e234247e.js";import"./hammerjs-ed6f6a9e.js";const w={class:"time-picker"},N={class:"time-scroll"},_={class:"time-text"},B={class:"time-full"},H=["data-val","data-idx","onClick"],M=i({name:"TimePicker"});var C=k(Object.assign(M,{props:{modelValue:{type:Array,default:()=>[]},minHour:{type:[Number,String],default:"0"},maxHour:{type:[Number,String],default:"23"},visibleNum:{type:[Number,String],default:"8"},timeStep:{type:[Number,String],default:"30",validator:e=>60%e==0},blockColor:{type:String,default:"#2e6cf3"},showArrow:Boolean,fixed:Boolean,readonly:Boolean,disabledBefore:Boolean},emits:["select"],setup(e,{emit:t}){const i=e;a((e=>({e6cc68ae:l(k)})));const x=r(0);r(!0),r(0);const j=r(0),k=r("");o([]),o([]),o([]);const y=r([]);r([]);let g=o([]);const M=r(),C=r();r(!1),s((()=>{P(),O()}));const O=()=>{return e=this,t=null,i=function*(){var e;yield u(),j.value=null==(e=document.querySelector(".time-bar"))?void 0:e.getBoundingClientRect().width,k.value=j.value/S+"rem"},new Promise(((a,l)=>{var r=e=>{try{s(i.next(e))}catch(t){l(t)}},o=e=>{try{s(i.throw(e))}catch(t){l(t)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,o);s((i=i.apply(e,t)).next())}));var e,t,i},A=e=>{x.value+=j.value*e,x.value!==j.value||(x.value=0)},I=e=>Math.floor(e/60)>=10?Math.floor(e/60):"0"+Math.floor(e/60),P=()=>{const e=parseInt((new Date).getHours()),t=parseInt((new Date).getMinutes()),a=[],l=a=>{const l=[],r=60/i.timeStep*(a-i.minHour),o=(a,l)=>{if(!i.disabledBefore)return!1;if(a<e)return!0;if(e===a){const e=i.timeStep*(l-1),a=i.timeStep*l;if(t>=e&&t<=a)return!0;if(t>=a)return!0}};for(let e=1;e<=60/i.timeStep;e++)l.push({value:60*a+i.timeStep*e,selected:!1,disabled:o(a,e),index:r+e-1});return l};for(let r=+i.minHour;r<=+i.maxHour;r++){const e={time:"",blocks:l(r)};e.time=60*r,a.push(e)}y.value=a},q=(e,a,l)=>{if(i.readonly)return!1;if(i.disabledBefore&&P(),!a.disabled){if(void 0===M.value&&void 0===C.value)M.value=g[0]=l;else if(void 0!==M.value&&void 0===C.value){if(l===M.value&&g.indexOf(l)>-1&&(g.splice(g.indexOf(l),1),M.value=C.value=void 0),l>M.value){C.value=l,g.splice(0);for(let e=M.value;e<=C.value;e++)g.splice(e-M.value,1,e)}if(l<M.value){const[e,t]=[l,M.value];M.value=e,C.value=t,g.splice(0);for(let i=M.value;i<=C.value;i++)g.splice(i-M.value,1,i)}}else if(void 0!==M.value&&void 0!==C.value)if(l===M.value){const e=g.indexOf(l);g.splice(e,1),g.length?M.value=g[0]:M.value=C.value=void 0}else if(l===C.value){const e=g.indexOf(l);g.splice(e,1),C.value=g[g.length-1],M.value===C.value&&(C.value=void 0)}else if(l<M.value)g.splice(0),M.value=C.value=void 0;else if(l>M.value){C.value=l,g.splice(0);for(let e=M.value;e<=C.value;e++)g.splice(e-M.value,1,e)}(()=>{if(0===g.length)return void t("select",null);const e=60*+i.minHour+Number(i.timeStep)*M.value+Number(i.timeStep),a=60*+i.minHour+Number(i.timeStep)*C.value+Number(i.timeStep);let l="",r="",o="",s="",u="",n="";e&&a?(o=I(e-i.timeStep),l=I(a),s=(e-i.timeStep)%60==0?"00":Math.round(60*((e-i.timeStep)/60-o)),r=a%60==0?"00":Math.round(60*(a/60-l)),u=o+":"+s,24===l&&(l=23,r=59),n=l+":"+r):(o=I(e-i.timeStep),l=I(e),s=(e-i.timeStep)%60==0?"00":Math.round(60*((e-i.timeStep)/60-o)),r=e%60==0?"00":Math.round(60*(e/60-l)),u=o+":"+s,24===l&&(l=23,r=59),n=l+":"+r),t("select",[u,n])})()}};return(t,i)=>(n(),m("div",w,[e.showArrow?(n(),m("div",{key:0,class:"time-picker-prev",onClick:i[0]||(i[0]=e=>A(1))},"<")):d("",!0),v("div",N,[v("div",{class:c(["time-wrapper",{"time-wrapper__fixed":e.fixed}])},[(n(!0),m(p,null,f(l(y),((t,i)=>(n(),m("div",{key:t.time+i,class:c(["time-bar",[{"time-bar--fixed-start":e.fixed&&0==i,"time-bar--fixed-end":e.fixed&&l(y).length-1===i}]]),style:b({padding:e.fixed&&l(y).length-2===i?0:"inset"})},[v("span",_,h(I(t.time)+":00"),1),v("div",B,[(n(!0),m(p,null,f(t.blocks,(t=>(n(),m("div",{key:t.value,"data-val":t.value,"data-idx":t.index,class:c(["time-block",{"time-block--selected":l(g).includes(t.index),"time-block--readonly":e.readonly,"time-block--disabled":t.disabled}]),onClick:e=>q(0,t,t.index)},null,10,H)))),128))])],6)))),128))],2)]),e.showArrow?(n(),m("div",{key:1,class:"time-picker-next",onClick:i[1]||(i[1]=e=>A(-1))},">")):d("",!0)]))}}),[["__scopeId","data-v-38c88fd4"]]);const O={class:"time-range-picker"},A={__name:"time-range-picker",setup(i){const a=o({time1:"",time2:"",time3:"",time4:"",time5:""}),{time1:r,time2:s,time3:u,time4:d,time5:v}=x(a),c=(e,t)=>{const i=e?e[0]+" ~ "+e[1]:"";"time1"===t&&(r.value=i),"time2"===t&&(s.value=i),"time3"===t&&(u.value=i),"time4"===t&&(d.value=i),"time5"===t&&(v.value=i)};return(i,a)=>{const o=y,p=e,f=C,b=t;return n(),m("div",O,[j(o),j(p,{title:"完整时间",value:l(r),border:!1},null,8,["value"]),j(f,{onSelect:a[0]||(a[0]=e=>c(e,"time1"))}),j(p,{title:"自定义时间范围",value:l(s),border:!1},null,8,["value"]),j(f,{"min-hour":"9","max-hour":"18",onSelect:a[1]||(a[1]=e=>c(e,"time2"))}),j(p,{title:"禁用过去时间，不可选择",value:l(d),border:!1},null,8,["value"]),j(f,{"min-hour":"9","max-hour":"18","disabled-before":"",onSelect:a[2]||(a[2]=e=>c(e,"time4"))}),j(p,{title:"起始固定，中间滑动",value:l(v),border:!1},null,8,["value"]),j(f,{"min-hour":"0","max-hour":"23",fixed:"",onSelect:a[3]||(a[3]=e=>c(e,"time5"))}),j(p,{title:"自定义时间间隔",value:l(u),border:!1},null,8,["value"]),j(f,{"min-hour":"11","max-hour":"22","time-step":"15",onSelect:a[4]||(a[4]=e=>c(e,"time3"))}),j(p,{title:"该组件为自研组件，后续提供更灵活定制选项~",border:!1}),j(b,{bottom:l(g)(50)},null,8,["bottom"])])}}};export{A as default};
