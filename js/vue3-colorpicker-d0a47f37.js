var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,s=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&l(e,a,t[a]);if(o)for(var a of o(t))r.call(t,a)&&l(e,a,t[a]);return e},i=(e,o)=>t(e,a(o));import{m as c,x as u,y as d,l as h,B as g,C as p,u as v,a3 as C,j as f,D as b,k as y,h as m,z as S,i as k,o as _,c as w,a as H,f as R,n as A,F as B,b as P,ap as V,r as O,ao as x,e as K,w as N,I as E,t as I,aQ as L,b8 as M,aR as W,H as j,J as D,aN as T,aM as $}from"./@vue-563ebafd.js";import{C as z}from"./vue-types-9561ac9a.js";import{t as G}from"./tinycolor2-7446cab2.js";import{V as F}from"./@aesoper-316802a3.js";import{A as q}from"./vue3-angle-ff229650.js";import{p as J,s as X}from"./gradient-parser-c9367eab.js";import{a as Z}from"./lodash-es-12d03b41.js";import{c as U}from"./@popperjs-f5cb6547.js";const Y="undefined"!=typeof window,Q=()=>{};function ee(e,t){return function(...a){e((()=>t.apply(this,a)),{fn:t,thisArg:this,args:a})}}const te=e=>e();function ae(e,t=200,a={}){return ee(function(e,t={}){let a,o;return n=>{const r=v(e),l=v(t.maxWait);if(a&&clearTimeout(a),r<=0||void 0!==l&&l<=0)return o&&(clearTimeout(o),o=null),n();l&&!o&&(o=setTimeout((()=>{a&&clearTimeout(a),o=null,n()}),l)),a=setTimeout((()=>{o&&clearTimeout(o),o=null,n()}),r)}}(t,a),e)}var oe=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;function le(e,t,a={}){const o=a,{eventFilter:n=te}=o,r=((e,t)=>{var a={};for(var o in e)ne.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&oe)for(var o of oe(e))t.indexOf(o)<0&&re.call(e,o)&&(a[o]=e[o]);return a})(o,["eventFilter"]);return u(e,ee(n,t),r)}function se(e,t=!0){d()?h(e):t?e():c(e)}function ie(e,t,a){return u(e,((e,a,o)=>{e&&t(e,a,o)}),a)}const ce=Y?window:void 0;function ue(...e){let t,a,o,n;if("string"==typeof e[0]?([a,o,n]=e,t=ce):[t,a,o,n]=e,!t)return Q;let r=Q;const l=u((()=>v(t)),(e=>{r(),e&&(e.addEventListener(a,o,n),r=()=>{e.removeEventListener(a,o,n),r=Q})}),{immediate:!0,flush:"post"}),s=()=>{l(),r()};var i;return i=s,g()&&p(i),s}function de(e,t,a={}){const{window:o=ce,event:n="pointerdown"}=a;if(!o)return;return ue(o,n,(a=>{const o=function(e){var t;const a=v(e);return null!=(t=null==a?void 0:a.$el)?t:a}(e);o&&(o===a.target||a.composedPath().includes(o)||t(a))}),{passive:!0})}const he={boolean:{read:e=>"true"===e,write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))}};function ge(e,t,a={}){const{window:o=ce}=a;return function(e,t,a=(e=>null==(e=ce)?void 0:e.localStorage)(),o={}){var n;const{flush:r="pre",deep:l=!0,listenToStorageChanges:s=!0,writeDefaults:i=!0,shallow:c,window:u=ce,eventFilter:d,onError:h=(e=>{})}=o,g=v(t),p=null==g?"any":g instanceof Set?"set":g instanceof Map?"map":"boolean"==typeof g?"boolean":"string"==typeof g?"string":"object"==typeof g||Array.isArray(g)?"object":Number.isNaN(g)?"any":"number",b=(c?C:f)(t),y=null!=(n=o.serializer)?n:he[p];function m(t){if(a&&(!t||t.key===e))try{const o=t?t.newValue:a.getItem(e);null==o?(b.value=g,i&&null!==g&&a.setItem(e,y.write(g))):b.value=y.read(o)}catch(o){h(o)}}return m(),u&&s&&ue(u,"storage",(e=>setTimeout((()=>m(e)),0))),a&&le(b,(()=>{try{null==b.value?a.removeItem(e):a.setItem(e,y.write(b.value))}catch(t){h(t)}}),{flush:r,deep:l,eventFilter:d}),b}(e,t,null==o?void 0:o.localStorage,a)}var pe,ve;(ve=pe||(pe={})).UP="UP",ve.RIGHT="RIGHT",ve.DOWN="DOWN",ve.LEFT="LEFT",ve.NONE="NONE";var Ce=Object.defineProperty,fe=(e,t,a)=>(((e,t,a)=>{t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a);const be=e=>Math.round(100*e)/100;class ye{constructor(e){fe(this,"instance"),fe(this,"alphaValue",0),fe(this,"redValue",0),fe(this,"greenValue",0),fe(this,"blueValue",0),fe(this,"hueValue",0),fe(this,"saturationValue",0),fe(this,"brightnessValue",0),fe(this,"hslSaturationValue",0),fe(this,"lightnessValue",0),fe(this,"initAlpha",(()=>{const e=this.instance.getAlpha();this.alphaValue=100*Math.min(1,e)})),fe(this,"initLightness",(()=>{const{s:e,l:t}=this.instance.toHsl();this.hslSaturationValue=be(e),this.lightnessValue=be(t)})),fe(this,"initRgb",(()=>{const{r:e,g:t,b:a}=this.instance.toRgb();this.redValue=be(e),this.greenValue=be(t),this.blueValue=be(a)})),fe(this,"initHsb",(()=>{const{h:e,s:t,v:a}=this.instance.toHsv();this.hueValue=Math.min(360,Math.ceil(e)),this.saturationValue=be(t),this.brightnessValue=be(a)})),fe(this,"toHexString",(()=>this.instance.toHexString())),fe(this,"toRgbString",(()=>this.instance.toRgbString())),this.instance=G(e),this.initRgb(),this.initHsb(),this.initLightness(),this.initAlpha()}toString(e){return this.instance.toString(e)}get hex(){return this.instance.toHex()}set hex(e){this.instance=G(e),this.initHsb(),this.initRgb(),this.initAlpha(),this.initLightness()}set hue(e){0===this.saturation&&0===this.brightness&&(this.saturationValue=1,this.brightnessValue=1),this.instance=G({h:be(e),s:this.saturation,v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.hueValue=be(e)}get hue(){return this.hueValue}set saturation(e){this.instance=G({h:this.hue,s:be(e),v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.saturationValue=be(e)}get saturation(){return this.saturationValue}set brightness(e){this.instance=G({h:this.hue,s:this.saturation,v:be(e),a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.brightnessValue=be(e)}get brightness(){return this.brightnessValue}set lightness(e){this.instance=G({h:this.hue,s:this.hslSaturationValue,l:be(e),a:this.alphaValue/100}),this.initRgb(),this.initHsb(),this.lightnessValue=be(e)}get lightness(){return this.lightnessValue}set red(e){const t=this.instance.toRgb();this.instance=G(i(s({},t),{r:be(e),a:this.alphaValue/100})),this.initHsb(),this.initLightness(),this.redValue=be(e)}get red(){return this.redValue}set green(e){const t=this.instance.toRgb();this.instance=G(i(s({},t),{g:be(e),a:this.alphaValue/100})),this.initHsb(),this.initLightness(),this.greenValue=be(e)}get green(){return this.greenValue}set blue(e){const t=this.instance.toRgb();this.instance=G(i(s({},t),{b:be(e),a:this.alphaValue/100})),this.initHsb(),this.initLightness(),this.blueValue=be(e)}get blue(){return this.blueValue}set alpha(e){this.instance.setAlpha(e/100),this.alphaValue=e}get alpha(){return this.alphaValue}get RGB(){return[this.red,this.green,this.blue,this.alpha/100]}get HSB(){return[this.hue,this.saturation,this.brightness,this.alpha/100]}get HSL(){return[this.hue,this.hslSaturationValue,this.lightness,this.alpha/100]}}function me(e,t,a,o){return`rgba(${[e,t,a,o/100].join(",")})`}const Se=(e,t,a)=>t<a?e<t?t:e>a?a:e:e<a?a:e>t?t:e,ke="color-history",_e=(e,t)=>{const a=e.__vccOpts||e;for(const[o,n]of t)a[o]=n;return a},we=b({name:"Alpha",props:{color:z.instanceOf(ye),size:z.oneOf(["small","default"]).def("default")},emits:["change"],setup(e,{emit:t}){const a=f(null),o=f(null);let n=e.color||new ye;const r=y({red:n.red,green:n.green,blue:n.blue,alpha:n.alpha});u((()=>e.color),(e=>{e&&(n=e,Z(r,{red:e.red,green:e.green,blue:e.blue,alpha:e.alpha}))}),{deep:!0});const l=m((()=>({background:`linear-gradient(to right, ${me(r.red,r.green,r.blue,0)} , ${me(r.red,r.green,r.blue,100)})`}))),s=()=>{if(a.value&&o.value){const e=r.alpha/100,t=a.value.getBoundingClientRect(),n=o.value.offsetWidth;return Math.round(e*(t.width-n)+n/2)}return 0},i=m((()=>({left:s()+"px",top:0}))),c=e=>{if(e.stopPropagation(),a.value&&o.value){const l=a.value.getBoundingClientRect(),s=o.value.offsetWidth;let i=e.clientX-l.left;i=Math.max(s/2,i),i=Math.min(i,l.width-s/2);const c=Math.round((i-s/2)/(l.width-s)*100);n.alpha=c,r.alpha=c,t("change",c)}};return se((()=>{const e={drag:e=>{c(e)},end:e=>{c(e)}};a.value&&o.value&&F.triggerDragEvent(a.value,e)})),{barElement:a,cursorElement:o,getCursorStyle:i,getBackgroundStyle:l,onClickSider:e=>{e.target!==a.value&&c(e)}}}}),He=[(e=>(T("data-v-18925ba6"),e=e(),$(),e))((()=>H("div",{class:"vc-alpha-slider__bar-handle"},null,-1)))];const Re=_e(we,[["render",function(e,t,a,o,n,r){return _(),w("div",{class:R(["vc-alpha-slider","transparent",{"small-slider":"small"===e.size}])},[H("div",{ref:"barElement",class:"vc-alpha-slider__bar",style:A(e.getBackgroundStyle),onClick:t[0]||(t[0]=(...t)=>e.onClickSider&&e.onClickSider(...t))},[H("div",{class:R(["vc-alpha-slider__bar-pointer",{"small-bar":"small"===e.size}]),ref:"cursorElement",style:A(e.getCursorStyle)},He,6)],4)],2)}],["__scopeId","data-v-18925ba6"]]),Ae=[["#fcc02e","#f67c01","#e64a19","#d81b43","#8e24aa","#512da7","#1f87e8","#008781","#05a045"],["#fed835","#fb8c00","#f5511e","#eb1d4e","#9c28b1","#5d35b0","#2097f3","#029688","#4cb050"],["#ffeb3c","#ffa727","#fe5722","#eb4165","#aa47bc","#673bb7","#42a5f6","#26a59a","#83c683"],["#fff176","#ffb74e","#ff8a66","#f1627e","#b968c7","#7986cc","#64b5f6","#80cbc4","#a5d6a7"],["#fff59c","#ffcc80","#ffab91","#fb879e","#cf93d9","#9ea8db","#90caf8","#b2dfdc","#c8e6ca"],["transparent","#ffffff","#dedede","#a9a9a9","#4b4b4b","#353535","#212121","#000000","advance"]],Be=b({name:"Palette",emits:["change"],setup:(e,{emit:t})=>({palettes:Ae,computedBgStyle:e=>"transparent"===e?e:"advance"===e?{}:{background:G(e).toRgbString()},onColorChange:e=>{t("change",e)}})}),Pe={class:"vc-compact"},Ve=["onClick"];const Oe=_e(Be,[["render",function(e,t,a,o,n,r){return _(),w("div",Pe,[(_(!0),w(B,null,P(e.palettes,((t,a)=>(_(),w("div",{key:a,class:"vc-compact__row"},[(_(!0),w(B,null,P(t,((t,a)=>(_(),w("div",{key:a,class:"vc-compact__color-cube--wrap",onClick:a=>e.onColorChange(t)},[H("div",{class:R(["vc-compact__color_cube",{advance:"advance"===t,transparent:"transparent"===t}]),style:A(e.computedBgStyle(t))},null,6)],8,Ve)))),128))])))),128))])}],["__scopeId","data-v-b969fd48"]]),xe=b({name:"Board",props:{color:z.instanceOf(ye),round:z.bool.def(!1),hide:z.bool.def(!0)},emits:["change"],setup(e,{emit:t}){var a,o,n;const r=d(),l={h:(null==(a=e.color)?void 0:a.hue)||0,s:1,v:1},s=new ye(l).toHexString(),i=y({hueColor:s,saturation:(null==(o=e.color)?void 0:o.saturation)||0,brightness:(null==(n=e.color)?void 0:n.brightness)||0}),c=f(0),u=f(0),h=f(),g=f(),p=m((()=>({top:c.value+"px",left:u.value+"px"}))),v=()=>{if(r){const e=r.vnode.el;u.value=i.saturation*(null==e?void 0:e.clientWidth),c.value=(1-i.brightness)*(null==e?void 0:e.clientHeight)}},C=e=>{if(r){const a=r.vnode.el,o=null==a?void 0:a.getBoundingClientRect();let n=e.clientX-o.left,l=e.clientY-o.top;n=Se(n,0,o.width),l=Se(l,0,o.height);const s=n/o.width,d=Se(-l/o.height+1,0,1);u.value=n,c.value=l,i.saturation=s,i.brightness=d,t("change",s,d)}};return se((()=>{r&&r.vnode.el&&h.value&&(F.triggerDragEvent(h.value,{drag:e=>{C(e)},end:e=>{C(e)}}),v())})),ie((()=>e.color),(e=>{Z(i,{hueColor:new ye({h:e.hue,s:1,v:1}).toHexString(),saturation:e.saturation,brightness:e.brightness}),v()}),{deep:!0}),{state:i,cursorElement:h,getCursorStyle:p,onClickBoard:e=>{e.target!==g.value&&C(e)}}}}),Ke=e=>(T("data-v-63803390"),e=e(),$(),e),Ne=Ke((()=>H("div",{class:"vc-saturation__white"},null,-1))),Ee=Ke((()=>H("div",{class:"vc-saturation__black"},null,-1))),Ie=[Ke((()=>H("div",null,null,-1)))];const Le=_e(xe,[["render",function(e,t,a,o,n,r){return _(),w("div",{ref:"boardElement",class:R(["vc-saturation",{"vc-saturation__chrome":e.round,"vc-saturation__hidden":e.hide}]),style:A({backgroundColor:e.state.hueColor}),onClick:t[0]||(t[0]=(...t)=>e.onClickBoard&&e.onClickBoard(...t))},[Ne,Ee,H("div",{class:"vc-saturation__cursor",ref:"cursorElement",style:A(e.getCursorStyle)},Ie,4)],6)}],["__scopeId","data-v-63803390"]]),Me=b({name:"Hue",props:{color:z.instanceOf(ye),size:z.oneOf(["small","default"]).def("default")},emits:["change"],setup(e,{emit:t}){const a=f(null),o=f(null);let n=e.color||new ye;const r=y({hue:n.hue||0});u((()=>e.color),(e=>{e&&(n=e,Z(r,{hue:n.hue}))}),{deep:!0});const l=()=>{if(a.value&&o.value){const e=a.value.getBoundingClientRect(),t=o.value.offsetWidth;return 360===r.hue?e.width-t/2:r.hue%360*(e.width-t)/360+t/2}return 0},s=m((()=>({left:l()+"px",top:0}))),i=e=>{if(e.stopPropagation(),a.value&&o.value){const l=a.value.getBoundingClientRect(),s=o.value.offsetWidth;let i=e.clientX-l.left;i=Math.min(i,l.width-s/2),i=Math.max(s/2,i);const c=Math.round((i-s/2)/(l.width-s)*360);n.hue=c,r.hue=c,t("change",c)}};return se((()=>{const e={drag:e=>{i(e)},end:e=>{i(e)}};a.value&&o.value&&F.triggerDragEvent(a.value,e)})),{barElement:a,cursorElement:o,getCursorStyle:s,onClickSider:e=>{e.target!==a.value&&i(e)}}}}),We=[(e=>(T("data-v-5c4cae5b"),e=e(),$(),e))((()=>H("div",{class:"vc-hue-slider__bar-handle"},null,-1)))];const je=_e(Me,[["render",function(e,t,a,o,n,r){return _(),w("div",{class:R(["vc-hue-slider",{"small-slider":"small"===e.size}])},[H("div",{ref:"barElement",class:"vc-hue-slider__bar",onClick:t[0]||(t[0]=(...t)=>e.onClickSider&&e.onClickSider(...t))},[H("div",{class:R(["vc-hue-slider__bar-pointer",{"small-bar":"small"===e.size}]),ref:"cursorElement",style:A(e.getCursorStyle)},We,6)],512)],2)}],["__scopeId","data-v-5c4cae5b"]]),De=b({name:"Lightness",props:{color:z.instanceOf(ye),size:z.oneOf(["small","default"]).def("default")},emits:["change"],setup(e,{emit:t}){const a=f(null),o=f(null);let n=e.color||new ye;const[r,l,s]=n.HSL,i=y({hue:r,saturation:l,lightness:s});u((()=>e.color),(e=>{if(e){n=e;const[t,a,o]=n.HSL;Z(i,{hue:t,saturation:a,lightness:o})}}),{deep:!0});const c=m((()=>{const e=G({h:i.hue,s:i.saturation,l:.8}).toPercentageRgbString(),t=G({h:i.hue,s:i.saturation,l:.6}).toPercentageRgbString(),a=G({h:i.hue,s:i.saturation,l:.4}).toPercentageRgbString(),o=G({h:i.hue,s:i.saturation,l:.2}).toPercentageRgbString();return{background:[`-webkit-linear-gradient(left, rgb(255, 255, 255), ${e}, ${t}, ${a}, ${o}, rgb(0, 0, 0))`,`-moz-linear-gradient(left, rgb(255, 255, 255), ${e}, ${t}, ${a}, ${o}, rgb(0, 0, 0))`,`-ms-linear-gradient(left, rgb(255, 255, 255), ${e}, ${t}, ${a}, ${o}, rgb(0, 0, 0))`]}})),d=()=>{if(a.value&&o.value){const e=i.lightness,t=a.value.getBoundingClientRect(),n=o.value.offsetWidth;return(1-e)*(t.width-n)+n/2}return 0},h=m((()=>({left:d()+"px",top:0}))),g=e=>{if(e.stopPropagation(),a.value&&o.value){const r=a.value.getBoundingClientRect(),l=o.value.offsetWidth;let s=e.clientX-r.left;s=Math.max(l/2,s),s=Math.min(s,r.width-l/2);const i=1-(s-l/2)/(r.width-l);n.lightness=i,t("change",i)}};return se((()=>{const e={drag:e=>{g(e)},end:e=>{g(e)}};a.value&&o.value&&F.triggerDragEvent(a.value,e)})),{barElement:a,cursorElement:o,getCursorStyle:h,getBackgroundStyle:c,onClickSider:e=>{e.target!==a.value&&g(e)}}}}),Te=[(e=>(T("data-v-6156acb7"),e=e(),$(),e))((()=>H("div",{class:"vc-lightness-slider__bar-handle"},null,-1)))];const $e=_e(De,[["render",function(e,t,a,o,n,r){return _(),w("div",{class:R(["vc-lightness-slider",{"small-slider":"small"===e.size}])},[H("div",{ref:"barElement",class:"vc-lightness-slider__bar",style:A(e.getBackgroundStyle),onClick:t[0]||(t[0]=(...t)=>e.onClickSider&&e.onClickSider(...t))},[H("div",{class:R(["vc-lightness-slider__bar-pointer",{"small-bar":"small"===e.size}]),ref:"cursorElement",style:A(e.getCursorStyle)},Te,6)],4)],2)}],["__scopeId","data-v-6156acb7"]]),ze=b({name:"History",props:{colors:z.arrayOf(String).def((()=>[])),round:z.bool.def(!1)},emits:["change"],setup:(e,{emit:t})=>({onColorSelect:e=>{t("change",e)}})}),Ge={key:0,class:"vc-colorPicker__record"},Fe={class:"color-list"},qe=["onClick"];const Je=_e(ze,[["render",function(e,t,a,o,n,r){return e.colors&&e.colors.length>0?(_(),w("div",Ge,[H("div",Fe,[(_(!0),w(B,null,P(e.colors,((t,a)=>(_(),w("div",{key:a,class:R(["color-item","transparent",{"color-item__round":e.round}]),onClick:a=>e.onColorSelect(t)},[H("div",{class:"color-item__display",style:A({backgroundColor:t})},null,4)],10,qe)))),128))])])):V("",!0)}],["__scopeId","data-v-7e6b67ca"]]),Xe=b({name:"Display",props:{color:z.instanceOf(ye),disableAlpha:z.bool.def(!1)},emits:["update:color","change"],setup(e,{emit:t}){var a,o,n;const r=y({color:e.color,hex:null==(a=e.color)?void 0:a.hex,alpha:(null==(o=e.color)?void 0:o.alpha)+"%",previewBgColor:null==(n=e.color)?void 0:n.toRgbString()}),l=m((()=>({background:r.previewBgColor}))),s=ae((e=>{if(!e.target.value)return;const a=parseInt(e.target.value.replace("%",""));!isNaN(a)&&r.color&&(r.color.alpha=a),t("update:color",r.color),t("change",r.color)}),300),i=ae((e=>{if(!e.target.value)return;const a=e.target.value.replace("#","");G(a).isValid()&&r.color&&(r.color.hex=a),t("update:color",r.color),t("change",r.color)}),300);return ie((()=>e.color),(e=>{e&&(r.color=e,r.alpha=r.color.alpha+"%",r.hex=r.color.hex)}),{deep:!0}),ie((()=>r.color),(()=>{r.color&&(r.previewBgColor=r.color.toRgbString())}),{deep:!0}),{state:r,getBgColorStyle:l,onAlphaBlur:s,onInputChange:i}}}),Ze={class:"vc-display"},Ue={class:"vc-current-color vc-transparent"},Ye={class:"vc-color-input"},Qe=["value"],et={key:0,class:"vc-alpha-input"},tt=["value"];const at=_e(Xe,[["render",function(e,t,a,o,n,r){return _(),w("div",Ze,[H("div",Ue,[H("div",{class:"color-cube",style:A(e.getBgColorStyle)},null,4)]),H("div",Ye,[H("input",{value:e.state.hex,onInput:t[0]||(t[0]=(...t)=>e.onInputChange&&e.onInputChange(...t))},null,40,Qe)]),e.disableAlpha?V("",!0):(_(),w("div",et,[H("input",{class:"vc-alpha-input__inner",value:e.state.alpha,onInput:t[1]||(t[1]=(...t)=>e.onAlphaBlur&&e.onAlphaBlur(...t))},null,40,tt)]))])}],["__scopeId","data-v-ffdc53e2"]]),ot=b({name:"FkColorPicker",components:{Display:at,Alpha:Re,Palette:Oe,Board:Le,Hue:je,Lightness:$e,History:Je},props:{color:z.instanceOf(ye),disableHistory:z.bool.def(!1),roundHistory:z.bool.def(!1),disableAlpha:z.bool.def(!1)},emits:["update:color","change","advanceChange"],setup(e,{emit:t}){const a=e.color||new ye,o=y({color:a,hex:a.toHexString(),rgb:a.toRgbString()}),n=f(!1),r=m((()=>({background:o.rgb}))),l=ge(ke,[],{}),s=ae((()=>{if(e.disableHistory)return;const t=o.color.toRgbString();if(l.value=l.value.filter((e=>!G.equals(e,t))),!l.value.includes(t)){for(;l.value.length>8;)l.value.pop();l.value.unshift(t)}}),500);return ie((()=>e.color),(e=>{e&&(o.color=e)}),{deep:!0}),ie((()=>o.color),(()=>{o.hex=o.color.hex,o.rgb=o.color.toRgbString(),s(),t("update:color",o.color),t("change",o.color)}),{deep:!0}),{state:o,advancePanelShow:n,onBack:()=>{n.value=!1,t("advanceChange",!1)},onCompactChange:e=>{"advance"===e?(n.value=!0,t("advanceChange",!0)):(o.color.hex=e,t("advanceChange",!1))},onAlphaChange:e=>{o.color.alpha=e},onHueChange:e=>{o.color.hue=e},onBoardChange:(e,t)=>{o.color.saturation=e,o.color.brightness=t},onLightChange:e=>{o.color.lightness=e},onInputChange:e=>{const t=e.target.value.replace("#","");G(t).isValid()&&(o.color.hex=t)},previewStyle:r,historyColors:l}}}),nt={class:"vc-fk-colorPicker"},rt={class:"vc-fk-colorPicker__inner"},lt={class:"vc-fk-colorPicker__header"},st=[(e=>(T("data-v-592a5ec3"),e=e(),$(),e))((()=>H("div",{class:"back"},null,-1)))];const it=_e(ot,[["render",function(e,t,a,o,n,r){const l=O("Palette"),s=O("Board"),i=O("Hue"),c=O("Lightness"),u=O("Alpha"),d=O("Display"),h=O("History");return _(),w("div",nt,[H("div",rt,[H("div",lt,[e.advancePanelShow?(_(),w("span",{key:0,style:{cursor:"pointer"},onClick:t[0]||(t[0]=(...t)=>e.onBack&&e.onBack(...t))},st)):V("",!0)]),e.advancePanelShow?V("",!0):(_(),x(l,{key:0,onChange:e.onCompactChange},null,8,["onChange"])),e.advancePanelShow?(_(),x(s,{key:1,color:e.state.color,onChange:e.onBoardChange},null,8,["color","onChange"])):V("",!0),e.advancePanelShow?(_(),x(i,{key:2,color:e.state.color,onChange:e.onHueChange},null,8,["color","onChange"])):V("",!0),e.advancePanelShow?V("",!0):(_(),x(c,{key:3,color:e.state.color,onChange:e.onLightChange},null,8,["color","onChange"])),e.disableAlpha?V("",!0):(_(),x(u,{key:4,color:e.state.color,onChange:e.onAlphaChange},null,8,["color","onChange"])),K(d,{color:e.state.color,"disable-alpha":e.disableAlpha},null,8,["color","disable-alpha"]),e.disableHistory?V("",!0):(_(),x(h,{key:5,round:e.roundHistory,colors:e.historyColors,onChange:e.onCompactChange},null,8,["round","colors","onChange"]))])])}],["__scopeId","data-v-592a5ec3"]]),ct=b({name:"ChromeColorPicker",components:{Display:at,Alpha:Re,Board:Le,Hue:je,History:Je},props:{color:z.instanceOf(ye),disableHistory:z.bool.def(!1),roundHistory:z.bool.def(!1),disableAlpha:z.bool.def(!1)},emits:["update:color","change"],setup(e,{emit:t}){const a=e.color||new ye,o=y({color:a,hex:a.toHexString(),rgb:a.toRgbString()}),n=m((()=>({background:o.rgb}))),r=ge(ke,[],{}),l=ae((()=>{if(e.disableHistory)return;const t=o.color.toRgbString();if(r.value=r.value.filter((e=>!G.equals(e,t))),!r.value.includes(t)){for(;r.value.length>8;)r.value.pop();r.value.unshift(t)}}),500);return ie((()=>e.color),(e=>{e&&(o.color=e)}),{deep:!0}),ie((()=>o.color),(()=>{o.hex=o.color.hex,o.rgb=o.color.toRgbString(),l(),t("update:color",o.color),t("change",o.color)}),{deep:!0}),{state:o,previewStyle:n,historyColors:r,onAlphaChange:e=>{o.color.alpha=e},onHueChange:e=>{o.color.hue=e},onBoardChange:(e,t)=>{o.color.saturation=e,o.color.brightness=t},onCompactChange:e=>{"advance"!==e&&(o.color.hex=e)}}}}),ut={class:"vc-chrome-colorPicker"},dt={class:"vc-chrome-colorPicker-body"},ht={class:"chrome-controls"},gt={class:"chrome-color-wrap transparent"},pt={class:"chrome-sliders"};const vt=_e(ct,[["render",function(e,t,a,o,n,r){const l=O("Board"),s=O("Hue"),i=O("Alpha"),c=O("Display"),u=O("History");return _(),w("div",ut,[K(l,{round:!0,hide:!1,color:e.state.color,onChange:e.onBoardChange},null,8,["color","onChange"]),H("div",dt,[H("div",ht,[H("div",gt,[H("div",{class:"current-color",style:A(e.previewStyle)},null,4)]),H("div",pt,[K(s,{size:"small",color:e.state.color,onChange:e.onHueChange},null,8,["color","onChange"]),e.disableAlpha?V("",!0):(_(),x(i,{key:0,size:"small",color:e.state.color,onChange:e.onAlphaChange},null,8,["color","onChange"]))])]),K(c,{color:e.state.color,"disable-alpha":e.disableAlpha},null,8,["color","disable-alpha"]),e.disableHistory?V("",!0):(_(),x(u,{key:0,round:e.roundHistory,colors:e.historyColors,onChange:e.onCompactChange},null,8,["round","colors","onChange"]))])])}],["__scopeId","data-v-61d7303b"]]),Ct="Vue3ColorPickerProvider",ft=b({name:"GradientColorPicker",components:{Angle:q,Display:at,Alpha:Re,Palette:Oe,Board:Le,Hue:je,Lightness:$e,History:Je},props:{startColor:z.instanceOf(ye).isRequired,endColor:z.instanceOf(ye).isRequired,startColorStop:z.number.def(0),endColorStop:z.number.def(100),angle:z.number.def(0),disableHistory:z.bool.def(!1),roundHistory:z.bool.def(!1),disableAlpha:z.bool.def(!1)},emits:["update:startColor","update:endColor","update:angle","update:startColorStop","update:endColorStop","startColorChange","endColorChange","advanceChange","angleChange","startColorStopChange","endColorStopChange"],setup(e,{emit:t}){const a=y({startActive:!0,startColor:e.startColor,endColor:e.endColor,startColorStop:e.startColorStop,endColorStop:e.endColorStop,angle:e.angle,startColorRgba:e.startColor.toRgbString(),endColorRgba:e.endColor.toRgbString()}),o=k(Ct),n=f(!1),r=f(),l=f(),s=f();u((()=>[e.startColor,e.endColor,e.angle]),(e=>{a.startColor=e[0],a.endColor=e[1],a.angle=e[2]}));const i=m({get:()=>a.startActive?a.startColor:a.endColor,set:e=>{a.startActive?a.startColor=e:a.endColor=e}}),c=m((()=>{if(s.value&&r.value){const e=a.startColorStop/100,t=s.value.getBoundingClientRect(),o=r.value.offsetWidth;return Math.round(e*(t.width-o)+o/2)}return 0})),d=m((()=>{if(s.value&&l.value){const e=a.endColorStop/100,t=s.value.getBoundingClientRect(),o=l.value.offsetWidth;return Math.round(e*(t.width-o)+o/2)}return 0})),h=m((()=>({background:`linear-gradient(${a.angle}deg, ${a.startColorRgba} ${a.startColorStop}%, ${a.endColorRgba} ${a.endColorStop}%)`}))),g=e=>{var o;if(a.startActive=!0,s.value&&r.value){const n=null==(o=s.value)?void 0:o.getBoundingClientRect();let l=e.clientX-n.left;l=Math.max(r.value.offsetWidth/2,l),l=Math.min(l,n.width-r.value.offsetWidth/2),a.startColorStop=Math.round((l-r.value.offsetWidth/2)/(n.width-r.value.offsetWidth)*100),t("update:startColorStop",a.startColorStop),t("startColorStopChange",a.startColorStop)}},p=e=>{var o;if(a.startActive=!1,s.value&&l.value){const n=null==(o=s.value)?void 0:o.getBoundingClientRect();let r=e.clientX-n.left;r=Math.max(l.value.offsetWidth/2,r),r=Math.min(r,n.width-l.value.offsetWidth/2),a.endColorStop=Math.round((r-l.value.offsetWidth/2)/(n.width-l.value.offsetWidth)*100),t("update:endColorStop",a.endColorStop),t("endColorStopChange",a.endColorStop)}},v=()=>{a.startActive?(t("update:startColor",a.startColor),t("startColorChange",a.startColor)):(t("update:endColor",a.endColor),t("endColorChange",a.endColor))},C=ge(ke,[],{}),b=ae((()=>{if(e.disableHistory)return;const t=i.value.toRgbString();if(C.value=C.value.filter((e=>!G.equals(e,t))),!C.value.includes(t)){for(;C.value.length>8;)C.value.pop();C.value.unshift(t)}}),500);return se((()=>{l.value&&r.value&&(F.triggerDragEvent(l.value,{drag:e=>{p(e)},end:e=>{p(e)}}),F.triggerDragEvent(r.value,{drag:e=>{g(e)},end:e=>{g(e)}}))})),ie((()=>a.startColor),(e=>{a.startColorRgba=e.toRgbString()}),{deep:!0}),ie((()=>a.endColor),(e=>{a.endColorRgba=e.toRgbString()}),{deep:!0}),ie((()=>i.value),(()=>{b()}),{deep:!0}),{startGradientRef:r,stopGradientRef:l,colorRangeRef:s,state:a,currentColor:i,getStartColorLeft:c,getEndColorLeft:d,gradientBg:h,advancePanelShow:n,onDegreeBlur:e=>{const o=e.target,n=parseInt(o.value.replace("°",""));isNaN(n)||(a.angle=n%360),t("update:angle",a.angle),t("angleChange",a.angle)},onCompactChange:e=>{"advance"===e?(n.value=!0,t("advanceChange",!0)):(i.value.hex=e,t("advanceChange",!1)),v()},onAlphaChange:e=>{i.value.alpha=e,v()},onHueChange:e=>{i.value.hue=e,v()},onBoardChange:(e,t)=>{i.value.saturation=e,i.value.brightness=t,v()},onLightChange:e=>{i.value.lightness=e,v()},historyColors:C,onBack:()=>{n.value=!1,t("advanceChange",!1)},onDegreeChange:e=>{a.angle=e,t("update:angle",a.angle),t("angleChange",a.angle)},onDisplayChange:()=>{v()},lang:null==o?void 0:o.lang}}}),bt=e=>(T("data-v-46339c64"),e=e(),$(),e),yt={class:"vc-gradient-picker"},mt={class:"vc-gradient-picker__header"},St=[bt((()=>H("div",{class:"back"},null,-1)))],kt={class:"vc-gradient-picker__body"},_t={class:"vc-color-range",ref:"colorRangeRef"},wt={class:"vc-color-range__container"},Ht={class:"vc-gradient__stop__container"},Rt=["title"],At=[bt((()=>H("span",{class:"vc-gradient__stop--inner"},null,-1)))],Bt=["title"],Pt=[bt((()=>H("span",{class:"vc-gradient__stop--inner"},null,-1)))],Vt={class:"vc-picker-degree-input vc-degree-input"},Ot={class:"vc-degree-input__control"},xt=["value"],Kt={class:"vc-degree-input__panel"},Nt={class:"vc-degree-input__disk"};const Et=_e(ft,[["render",function(e,t,a,o,n,r){const l=O("Angle"),s=O("Palette"),i=O("Board"),c=O("Hue"),u=O("Lightness"),d=O("Alpha"),h=O("Display"),g=O("History");return _(),w("div",yt,[N(H("div",mt,[H("span",{style:{cursor:"pointer"},onClick:t[0]||(t[0]=(...t)=>e.onBack&&e.onBack(...t))},St)],512),[[E,e.advancePanelShow]]),H("div",kt,[H("div",_t,[H("div",wt,[H("div",{class:"vc-background",style:A(e.gradientBg)},null,4),H("div",Ht,[H("div",{class:R(["vc-gradient__stop",{"vc-gradient__stop--current":e.state.startActive}]),ref:"startGradientRef",title:"ZH-cn"===e.lang?"开始":"Start",style:A({left:e.getStartColorLeft+"px"})},At,14,Rt),H("div",{class:R(["vc-gradient__stop",{"vc-gradient__stop--current":!e.state.startActive}]),ref:"stopGradientRef",title:"ZH-cn"===e.lang?"结束":"End",style:A({left:e.getEndColorLeft+"px"})},Pt,14,Bt)])])],512),H("div",Vt,[H("div",Ot,[H("input",{value:e.state.angle,onBlur:t[1]||(t[1]=(...t)=>e.onDegreeBlur&&e.onDegreeBlur(...t))},null,40,xt)]),H("div",Kt,[H("div",Nt,[K(l,{angle:e.state.angle,"onUpdate:angle":t[2]||(t[2]=t=>e.state.angle=t),size:40,onChange:e.onDegreeChange},null,8,["angle","onChange"])])])])]),e.advancePanelShow?V("",!0):(_(),x(s,{key:0,onChange:e.onCompactChange},null,8,["onChange"])),e.advancePanelShow?(_(),x(i,{key:1,color:e.currentColor,onChange:e.onBoardChange},null,8,["color","onChange"])):V("",!0),e.advancePanelShow?(_(),x(c,{key:2,color:e.currentColor,onChange:e.onHueChange},null,8,["color","onChange"])):V("",!0),e.advancePanelShow?V("",!0):(_(),x(u,{key:3,color:e.currentColor,onChange:e.onLightChange},null,8,["color","onChange"])),e.disableAlpha?V("",!0):(_(),x(d,{key:4,color:e.currentColor,onChange:e.onAlphaChange},null,8,["color","onChange"])),K(h,{color:e.currentColor,"disable-alpha":e.disableAlpha,onChange:e.onDisplayChange},null,8,["color","disable-alpha","onChange"]),e.disableHistory?V("",!0):(_(),x(g,{key:5,round:e.roundHistory,colors:e.historyColors,onChange:e.onCompactChange},null,8,["round","colors","onChange"]))])}],["__scopeId","data-v-46339c64"]]),It=b({name:"WrapContainer",props:{showTab:z.bool.def(!1),activeKey:z.oneOf(["pure","gradient"]).def("pure")},emits:["update:activeKey","change"],setup(e,{emit:t}){const a=y({activeKey:e.activeKey}),o=k(Ct);return ie((()=>e.activeKey),(e=>{a.activeKey=e})),{state:a,onActiveKeyChange:e=>{a.activeKey=e,t("update:activeKey",e),t("change",e)},lang:null==o?void 0:o.lang}}}),Lt={class:"vc-colorpicker"},Mt={class:"vc-colorpicker--container"},Wt={key:0,class:"vc-colorpicker--tabs"},jt={class:"vc-colorpicker--tabs__inner"},Dt={class:"vc-btn__content"},Tt={class:"vc-btn__content"};const $t=_e(It,[["render",function(e,t,a,o,n,r){return _(),w("div",Lt,[H("div",Mt,[e.showTab?(_(),w("div",Wt,[H("div",jt,[H("div",{class:R(["vc-colorpicker--tabs__btn",{"vc-btn-active":"pure"===e.state.activeKey}]),onClick:t[0]||(t[0]=t=>e.onActiveKeyChange("pure"))},[H("button",null,[H("div",Dt,I("ZH-cn"===e.lang?"纯色":"Pure"),1)])],2),H("div",{class:R(["vc-colorpicker--tabs__btn",{"vc-btn-active":"gradient"===e.state.activeKey}]),onClick:t[1]||(t[1]=t=>e.onActiveKeyChange("gradient"))},[H("button",null,[H("div",Tt,I("ZH-cn"===e.lang?"渐变色":"Gradient"),1)])],2),H("div",{class:"vc-colorpicker--tabs__bg",style:A({width:"50%",left:`calc(${"gradient"===e.state.activeKey?50:0}%)`})},null,4)])])):V("",!0),L(e.$slots,"default",{},void 0,!0)])])}],["__scopeId","data-v-4afdf3bb"]]),zt={isWidget:z.bool.def(!1),pickerType:z.oneOf(["fk","chrome"]).def("fk"),shape:z.oneOf(["circle","square"]).def("square"),pureColor:{type:[String,Object],default:"#000000"},gradientColor:z.string.def("linear-gradient(90deg, rgba(255, 255, 255, 1) 0%, rgba(0, 0, 0, 1) 100%)"),format:{type:String,default:"rgb"},disableAlpha:z.bool.def(!1),disableHistory:z.bool.def(!1),roundHistory:z.bool.def(!1),useType:z.oneOf(["pure","gradient","both"]).def("pure"),activeKey:z.oneOf(["pure","gradient"]).def("pure"),lang:{type:String,default:"ZH-cn"},zIndex:z.number.def(9999)};const Gt=_e(b({name:"ColorPicker",components:{FkColorPicker:it,ChromeColorPicker:vt,GradientColorPicker:Et,WrapContainer:$t},inheritAttrs:!1,props:zt,emits:["update:pureColor","pureColorChange","update:gradientColor","gradientColorChange","update:activeKey","activeKeyChange"],setup(e,{emit:t}){const a=y({pureColor:e.pureColor||"",activeKey:"gradient"===e.useType?"gradient":e.activeKey,isAdvanceMode:!1});S(Ct,{lang:m((()=>e.lang||"ZH-cn"))});const o=new ye(a.pureColor),n=f(o),r=new ye("#000"),l=new ye("#000"),s=y({startColor:r,endColor:l,startColorStop:0,endColorStop:100,angle:0,gradientColor:e.gradientColor}),i=f(!1),c=f(null),u=f(null),d=m((()=>({background:"gradient"!==a.activeKey?G(a.pureColor).toRgbString():s.gradientColor}))),h=m((()=>"gradient"===a.activeKey?Et.name:"fk"===e.pickerType?it.name:vt.name)),g=m((()=>"gradient"===a.activeKey?{startColor:s.startColor,endColor:s.endColor,onStartColorChange:e=>{s.startColor=e,C()},onEndColorChange:e=>{s.endColor=e,C()},angle:s.angle,startColorStop:s.startColorStop,endColorStop:s.endColorStop,onStartColorStopChange:e=>{s.startColorStop=e,C()},onEndColorStopChange:e=>{s.endColorStop=e,C()},onAngleChange:e=>{s.angle=e,C()},onAdvanceChange:e=>{a.isAdvanceMode=e}}:{disableAlpha:e.disableAlpha,disableHistory:e.disableHistory,roundHistory:e.roundHistory,color:n.value,onChange:k,onAdvanceChange:p})),p=e=>{a.isAdvanceMode=e},v=()=>{var e,t,a,o;try{const[n]=J(s.gradientColor);if(n&&"linear-gradient"===n.type&&"angular"===(null==(e=n.orientation)?void 0:e.type)&&n.colorStops.length>=2){const e=n.colorStops[0],r=n.colorStops[1];s.startColorStop=Number(null==(t=e.length)?void 0:t.value)||0,s.endColorStop=Number(null==(a=r.length)?void 0:a.value)||0,s.angle=Number(null==(o=n.orientation)?void 0:o.value)||0;const[l,i,c,u]=e.value,[d,h,g,p]=r.value;s.startColor=new ye({r:Number(l),g:Number(i),b:Number(c),a:Number(u)}),s.endColor=new ye({r:Number(d),g:Number(h),b:Number(g),a:Number(p)})}}catch(n){}},C=ae((()=>{const e=b();try{s.gradientColor=X(e),t("update:gradientColor",s.gradientColor),t("gradientColorChange",s.gradientColor)}catch(a){}}),300),b=()=>{const e=[],t=s.startColor.RGB.map((e=>e.toString())),a=s.endColor.RGB.map((e=>e.toString()));return e.push({type:"linear-gradient",orientation:{type:"angular",value:s.angle+""},colorStops:[{type:"rgba",value:[t[0],t[1],t[2],t[3]],length:{value:s.startColorStop+"",type:"%"}},{type:"rgba",value:[a[0],a[1],a[2],a[3]],length:{value:s.endColorStop+"",type:"%"}}]}),e},k=t=>{n.value=t,a.pureColor=t.toString(e.format),_()},_=ae((()=>{t("update:pureColor",a.pureColor),t("pureColorChange",a.pureColor)}),300);de(u,(()=>{i.value=!1}));return se((()=>{v(),(()=>{if(c.value&&u.value){const e=c.value.offsetParent,t=c.value.offsetTop||(null==e?void 0:e.offsetTop),a=window.innerHeight-(t-window.pageYOffset)-c.value.offsetHeight;U(c.value,u.value,{placement:"auto",modifiers:[{name:"flip",options:{boundary:a>500?"clippingParents":c.value,fallbackPlacements:["bottom","left"]}}]})}})()})),ie((()=>e.gradientColor),(e=>{e!=s.gradientColor&&(s.gradientColor=e)})),ie((()=>s.gradientColor),(()=>{v()})),ie((()=>e.activeKey),(e=>{a.activeKey=e})),ie((()=>e.useType),(e=>{"gradient"!==a.activeKey&&"gradient"===e?a.activeKey="gradient":a.activeKey="pure"})),ie((()=>e.pureColor),(e=>{G.equals(e,a.pureColor)||(a.pureColor=e,n.value=new ye(e),_())}),{deep:!0}),{colorCubeRef:c,pickerRef:u,showPicker:i,colorInstance:n,getBgColorStyle:d,onColorChange:k,onShowPicker:()=>{i.value=!0},onActiveKeyChange:e=>{a.activeKey=e,t("update:activeKey",e),t("activeKeyChange",e)},getComponentName:h,getBindArgs:g,state:a}}}),[["render",function(e,t,a,o,n,r){const l=O("WrapContainer");return _(),w(B,null,[e.isWidget?(_(),x(l,{key:0,"active-key":e.state.activeKey,"onUpdate:active-key":t[0]||(t[0]=t=>e.state.activeKey=t),"show-tab":"both"===e.useType,onChange:e.onActiveKeyChange,style:A({zIndex:e.zIndex})},{default:M((()=>[(_(),x(W(e.getComponentName),j({key:e.getComponentName},e.getBindArgs),null,16))])),_:1},8,["active-key","show-tab","onChange","style"])):V("",!0),e.isWidget?V("",!0):(_(),w(B,{key:1},[H("div",{class:R(["vc-color-wrap transparent",{round:"circle"===e.shape}]),ref:"colorCubeRef"},[H("div",{class:"current-color",style:A(e.getBgColorStyle),onClick:t[1]||(t[1]=(...t)=>e.onShowPicker&&e.onShowPicker(...t))},null,4)],2),(_(),x(D,{to:"body"},[N(H("div",{ref:"pickerRef",style:A({zIndex:e.zIndex})},[e.showPicker?(_(),x(l,{key:0,"show-tab":"both"===e.useType&&!e.state.isAdvanceMode,"active-key":e.state.activeKey,"onUpdate:active-key":t[2]||(t[2]=t=>e.state.activeKey=t),onChange:e.onActiveKeyChange},{default:M((()=>[(_(),x(W(e.getComponentName),j({key:e.getComponentName},e.getBindArgs),null,16))])),_:1},8,["show-tab","active-key","onChange"])):V("",!0)],4),[[E,e.showPicker]])]))],64))],64)}],["__scopeId","data-v-730ef6cd"]]);export{Gt as o};
