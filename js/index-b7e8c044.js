import{s as e,F as s,Q as a,l as o,m as r,n as t,_ as l,$ as n}from"./vant-7136ba84.js";import{_ as m}from"./index-fbb04010.js";import{_ as i,l as d}from"./index-3157abda.js";import{r as c,a as u,S as p,s as f,v,E as b,D as w,u as j,H as h,J as g,I as _,G as y,P,aR as k,aQ as V,l as C,B as $,F as I}from"./@vue-52de1c01.js";import{u as x}from"./vue-router-a4543dac.js";import"./@vant-0004063d.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vuex-c830e64e.js";import"./@vueuse-feee2333.js";import"./lodash-es-c547d601.js";import"./axios-0cd4f164.js";import"./qs-6446231f.js";import"./side-channel-b2edb420.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-8ed24658.js";import"./@antv-8a75d63c.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-319be66c.js";import"./vue3-hash-calendar-68956731.js";import"./hammerjs-ed6f6a9e.js";const S={class:"submit-btn"};var q=i({__name:"Step1",emits:["change-step"],setup(t,{emit:l}){const n=c(!0),i=c(null),k=c(0),V=u({phone:"",verifyCode:""}),C=u({phone:[{required:!0,message:"手机号码不能为空"},{pattern:/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,message:"手机号码格式不正确"}],verifyCode:[{required:!0,message:"验证码不能为空"},{pattern:/^\d{6}$/,message:"验证码不正确"}]});function $(){i.value||(k.value=60,n.value=!1,i.value=setInterval((()=>{k.value>0&&k.value<=60?k.value--:(n.value=!0,clearInterval(i.value),i.value=null)}),1e3))}const I=s=>{e({type:"success",message:"手机验证成功"}),l("change-step",1)},x=s=>{const{errors:[a]}=s;e(a.message)};return(e,t)=>{const l=m,i=s,c=a,u=o,q=r,z=p("waves");return f(),v(q,{class:"form-wrapper","validate-first":"","show-error":!1,"show-error-message":!1,"submit-on-enter":!1,onSubmit:I,onFailed:x},{default:b((()=>[w(c,{inset:""},{default:b((()=>[w(i,{modelValue:j(V).phone,"onUpdate:modelValue":t[0]||(t[0]=e=>j(V).phone=e),modelModifiers:{trim:!0},name:"phone",center:"",clearable:"",placeholder:"手机号码",autocomplete:"off",rules:j(C).phone},{"left-icon":b((()=>[w(l,{name:"EpIphone","class-name":"mr-12"})])),_:1},8,["modelValue","rules"]),w(i,{modelValue:j(V).verifyCode,"onUpdate:modelValue":t[1]||(t[1]=e=>j(V).verifyCode=e),modelModifiers:{trim:!0},name:"verifyCode",center:"",autocomplete:"off",placeholder:"6位数短信验证码",rules:j(C).verifyCode},{"left-icon":b((()=>[w(l,{name:"EpMessage","class-name":"mr-12"})])),button:b((()=>[h("div",{class:g(j(n)?"active-color":""),onClick:$},_(j(n)?"获取验证码":`${j(k)} 秒后可重新获取`),3)])),_:1},8,["modelValue","rules"])])),_:1}),h("div",S,[y((f(),v(u,{color:j(d),round:!1,block:"","native-type":"submit"},{default:b((()=>[P(" 下一步 ")])),_:1},8,["color"])),[[z]])])])),_:1})}}},[["__scopeId","data-v-c478faa0"]]);const z=(e=>(k("data-v-15123f4f"),e=e(),V(),e))((()=>h("p",{class:"tips"},"密码格式应为 6-20 位数字、字母、符号的任意两种组合）",-1))),A={class:"submit-btn"};var F=i({__name:"Step2",setup(a){const l=x(),n=c(!1),i=c(!1),g=u({newPassword:"",confirmPassword:""}),_=u({newPassword:[{required:!0,message:"新密码不能为空"},{pattern:/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)]|[()])+$)(?!^.*[\u4E00-\u9FA5].*$)([^(0-9a-zA-Z)]|[()]|[a-z]|[A-Z]|[0-9]){6,20}$/,message:"新密码格式不正确"}],confirmPassword:[{required:!0,message:"请再次输入新的登录密码"},{validator:e=>e&&e===g.newPassword,message:"两次输入的密码不一致"}]}),k=s=>{e({type:"success",message:"密码修改成功"}),l.replace("/login")},V=s=>{const{errors:[a]}=s;e(a.message)};return(e,a)=>{const l=m,c=t,u=s,C=o,$=r,I=p("waves");return f(),v($,{class:"form-wrapper","validate-first":"","show-error":!1,"show-error-message":!1,"submit-on-enter":!1,onSubmit:k,onFailed:V},{default:b((()=>[w(u,{modelValue:j(g).newPassword,"onUpdate:modelValue":a[0]||(a[0]=e=>j(g).newPassword=e),modelModifiers:{trim:!0},name:"newPassword",center:"",clearable:"",border:!1,autocomplete:"off",type:j(n)?"text":"password",placeholder:"请设置6-20位新的登录密码",rules:j(_).newPassword,onClickRightIcon:a[1]||(a[1]=e=>n.value=!j(n))},{"left-icon":b((()=>[w(l,{name:"lock","class-name":"mr-12"})])),"right-icon":b((()=>[w(c,{name:j(n)?"eye-o":"closed-eye"},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),z,w(u,{modelValue:j(g).confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>j(g).confirmPassword=e),modelModifiers:{trim:!0},name:"confirmPassword",center:"",clearable:"",border:!1,autocomplete:"off",type:j(i)?"text":"password",placeholder:"请再次输入新的登录密码",rules:j(_).confirmPassword,onClickRightIcon:a[3]||(a[3]=e=>i.value=!j(i))},{"left-icon":b((()=>[w(l,{name:"lock","class-name":"mr-12"})])),"right-icon":b((()=>[j(i)?(f(),v(c,{key:0,name:"eye-o"})):(f(),v(c,{key:1,name:"closed-eye"}))])),_:1},8,["modelValue","type","rules"]),h("div",A,[y((f(),v(C,{color:j(d),round:!1,block:"","native-type":"submit"},{default:b((()=>[P(" 保 存 ")])),_:1},8,["color"])),[[I]])])])),_:1})}}},[["__scopeId","data-v-15123f4f"]]);const M={class:"step-wrapper"},E=C({name:"reset-password"});var U=i(Object.assign(E,{setup(e){const s=c(0),a=e=>{s.value=e};return(e,o)=>{const r=l,t=n;return f(),$("div",null,[h("div",M,[w(t,{active:j(s)},{default:b((()=>[w(r,null,{default:b((()=>[P("1.验证手机号码")])),_:1}),w(r,null,{default:b((()=>[P("2.设置新密码")])),_:1})])),_:1},8,["active"])]),0===j(s)?(f(),v(q,{key:0,onChangeStep:a})):I("",!0),1===j(s)?(f(),v(F,{key:1})):I("",!0)])}}}),[["__scopeId","data-v-6037a57c"]]);export{U as default};
