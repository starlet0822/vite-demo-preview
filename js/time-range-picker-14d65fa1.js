import{_ as e}from"./plugin-vue_export-helper-893979e1.js";import{m as t,a,r as l,b as i,aI as r,ak as s,al as o,F as u,aN as m,a5 as n,a2 as c,u as d,_ as p,l as v}from"./@vue-0da0c2e3.js";import{d as b}from"./vant-182c6d73.js";import{_ as h}from"./index-06373c59.js";import"./@vant-b0725c78.js";import"./vue-router-1cbad9b8.js";const f={class:"time-picker"},S={class:"time-wraper no-scrollbar"},k={class:"time-text"},y={class:"time-full"},g=["data-val","data-idx","onClick"],x=t({name:"TimePicker"});var _=e(Object.assign(x,{props:{modelValue:{type:Array,default:()=>[]},minHour:{type:[Number,String],default:"0"},maxHour:{type:[Number,String],default:"23"},visibleNum:{type:[Number,String],default:"8"},timeStep:{type:[Number,String],default:"30",validator:e=>60%e==0},readonly:Boolean},emits:["select"],setup(e,{emit:t}){const p=e;let v=a([]),b=a([]),h=a([]);const x=l([]),_=e=>{const t=[];for(let a=1;a<=60/p.timeStep;a++)t.push({value:60*e+p.timeStep*a,selected:!1,disabled:!1});return t};i((()=>{M()}));const j=e=>Math.floor(e/60)>=10?Math.floor(e/60):"0"+Math.floor(e/60),M=()=>{const e=[];for(let t=+p.minHour;t<=+p.maxHour;t++){const a={time:"",blocks:_(t)};a.time=60*t,e.push(a)}x.value=e},N=e=>{const[a,l]=h.sort(((e,t)=>e-t));b=((e,t)=>{let a="",l="",i="",r="",s="",o="";return e&&t?(i=j(e-p.timeStep),a=j(t),r=(e-p.timeStep)%60==0?"00":Math.round(60*((e-p.timeStep)/60-i)),l=t%60==0?"00":Math.round(60*(t/60-a)),s=i+":"+r,o=a+":"+l):(i=j(e-p.timeStep),a=j(e),r=(e-p.timeStep)%60==0?"00":Math.round(60*((e-p.timeStep)/60-i)),l=e%60==0?"00":Math.round(60*(e/60-a)),s=i+":"+r,o=a+":"+l),[s,o]})(a,l),x.value.forEach((e=>{e.blocks.forEach((e=>{a&&(e.value===a?e.selected=!0:e.selected=!1),a&&l&&e.value>=a&&e.value<=l&&(e.selected=!0)}))})),t("select",b)};return(t,a)=>(r(),s("div",f,[o("div",S,[(r(!0),s(u,null,m(d(x),((t,a)=>(r(),s("div",{key:t.time,class:"time-bar"},[o("span",k,n(j(t.time)+":00"),1),o("div",y,[(r(!0),s(u,null,m(t.blocks,((l,i)=>(r(),s("div",{key:l.value,"data-val":l.value,"data-idx":60/e.timeStep*a+i,class:c(["time-block",{"time-block--selected":l.selected,"time-block--disabled":l.disabled,"time-block--readonly":e.readonly}]),onClick:e=>((e,t,a)=>{if(p.readonly)return!1;0===h.length||h.length<2?h.includes(t.value)||(h.push(t.value),v.push(e)):(h=[t.value],v=[e]),N()})(t,l)},null,10,g)))),128))])])))),128))])]))}}),[["__scopeId","data-v-10325b19"]]);const j={class:"time-range-picker"},M={__name:"time-range-picker",setup(e){const t=a({time3:"",time1:"",time2:""}),{time1:l,time2:i,time3:o}=p(t),u=(e,t)=>{const a=e[0]+" ~ "+e[1];"time1"===t&&(l.value=a),"time2"===t&&(i.value=a),"time3"===t&&(o.value=a)};return(e,t)=>{const a=h,m=b,n=_;return r(),s("div",j,[v(a),v(m,{title:"完整时间",value:d(l),border:!1},null,8,["value"]),v(n,{onSelect:t[0]||(t[0]=e=>u(e,"time1"))}),v(m,{title:"自定义时间范围",value:d(i),border:!1},null,8,["value"]),v(n,{"min-hour":"9","max-hour":"18",onSelect:t[1]||(t[1]=e=>u(e,"time2"))}),v(m,{title:"自定义时间间隔",value:d(o),border:!1},null,8,["value"]),v(n,{"min-hour":"11","max-hour":"22","time-step":"15",onSelect:t[2]||(t[2]=e=>u(e,"time3"))}),v(m,{title:"该组件为自研组件，后续提供更灵活定制选项~"})])}}};export{M as default};
