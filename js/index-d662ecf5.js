var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;import{f as l,R as n,n as p}from"./vant-e0b5fbdf.js";import{_ as d}from"./index-eb7feec2.js";import{a as c,t as f,n as g,af as u,l as m,r as h,b as v,B as b,D as x,H as j,M as y,N as w,u as P,E as _,s as k,K as D,Q as O,v as S,F as R,P as z,aR as B,aQ as H}from"./@vue-52de1c01.js";import{V as I}from"./vue-drag-resize-4f8623bc.js";import{p as W,a as F}from"./pdfjs-dist-6ebaafa4.js";import{_ as C}from"./plugin-vue_export-helper-893979e1.js";import"./@vant-0004063d.js";import"./vue-router-35312974.js";import"./@antv-8a75d63c.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./vue-c949ad72.js";import"./dommatrix-eb358292.js";import"./web-streams-polyfill-7fb58ada.js";import"./object-inspect-8ed24658.js";W.exports.GlobalWorkerOptions.workerSrc=F;const E=()=>{const e=c({pdfDoc:"",pdfPages:0,pdfScale:1,pdfWidth:1e3,pdfHeight:1143,canvas_id:"pdf-canvas-"}),l=t=>{u(e.pdfDoc).getPage(t).then((a=>{const s=e.canvas_id+t,i=document.getElementById(s),o=i.getContext("2d"),r=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),n=a.getViewport({scale:e.pdfScale});i.width=n.width*r,i.height=n.height*r,i.style.width="375px",i.style.height="400px",e.pdfWidth=375,e.pdfHeight=400,o.setTransform(r,0,0,r,0,0);const p={canvasContext:o,viewport:n};a.render(p),t<e.pdfPages&&l(t+1)}))};return n=((e,t)=>{for(var a in t||(t={}))i.call(t,a)&&r(e,a,t[a]);if(s)for(var a of s(t))o.call(t,a)&&r(e,a,t[a]);return e})({},f(e)),t(n,a({loadFile:t=>{W.exports.getDocument(t).promise.then((t=>{e.pdfDoc=t,e.pdfPages=e.pdfDoc.numPages,g((()=>{l(1)}))}))}}));var n};const L=e=>(B("data-v-14fec98a"),e=e(),H(),e),N={class:"sign-drag st-bg"},Q={class:"contract-document"},V=["id"],A=L((()=>j("h3",null,"Hello World!",-1))),G={class:"control-tools"},K=L((()=>j("div",null,"印章",-1))),M=L((()=>j("div",null,"签名",-1))),T=L((()=>j("div",null,"日期",-1))),q=m({name:"SignDrag"});var J=C(Object.assign(q,{setup(e,{expose:t}){const{loadFile:a,pdfPages:s,pdfWidth:i,pdfHeight:o}=E(),r=h(null);h(1),h(0);const g=c({signList:[{signImg:"http://tva1.sinaimg.cn/large/006nwNl2ly1h71g369jdlj308c03c3yk.jpg",name:"模拟签名1",left:0,top:0,width:137,height:73,type:"sign"}],dropData:[],width:0,height:0,top:0,left:0}),{dropData:u,signList:m,top:B,left:H}=f(g),W=()=>{u.value.push(m.value[0])},F=(e,t)=>{g.width=e.width,g.height=e.height,g.top=e.top,g.left=e.left};return t({onPrint:()=>{r.value.print()}}),v((()=>{a("http://storage.xuetangx.com/public_assets/xuetangx/PDF/PlayerAPI_v1.0.6.pdf")})),(e,t)=>{const a=d,r=l,c=n,f=p;return k(),b("div",N,[x(a),j("ul",Q,[(k(!0),b(y,null,w(P(s),(a=>(k(),b("li",{key:a,class:"contract-wrapper",style:D({width:P(i)+"px",height:P(o)+"px"}),onDragover:t[2]||(t[2]=O((()=>{}),["prevent"]))},[(k(),b("canvas",{id:"pdf-canvas-"+a,key:a,draggable:"false",style:{zoom:1}},null,8,V)),1==a?(k(),S(P(I),{key:0,"is-active":!0,"parent-limitation":!0,w:80,h:40,x:P(H),y:P(B),z:9999,onResizing:t[0]||(t[0]=t=>F(t,e.item)),onDragging:t[1]||(t[1]=t=>F(t,e.item))},{default:_((()=>[A])),_:1},8,["x","y"])):R("",!0)],36)))),128))]),j("div",G,[x(c,{class:"tools-box",type:"flex",align:"center"},{default:_((()=>[x(r,{span:"12"},{default:_((()=>[x(c,{type:"flex",align:"center",gutter:"20"},{default:_((()=>[x(r,null,{default:_((()=>[K])),_:1}),x(r,{onClick:W},{default:_((()=>[M])),_:1}),x(r,null,{default:_((()=>[T])),_:1})])),_:1})])),_:1}),x(r,{span:"12"},{default:_((()=>[x(f,{size:"small",type:"primary",block:""},{default:_((()=>[z("提交签署")])),_:1})])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-14fec98a"]]);export{J as default};
