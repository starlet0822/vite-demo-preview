!function(){function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(N){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),c=new O(n||[]);return a(i,"_invoke",{value:L(t,r,c)}),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(N){return{type:"throw",arg:N}}}r.wrap=h;var d={};function p(){}function v(){}function y(){}var g={};f(g,c,(function(){return this}));var m=Object.getPrototypeOf,w=m&&m(m(I([])));w&&w!==n&&o.call(w,c)&&(g=w);var b=y.prototype=p.prototype=Object.create(g);function x(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,r){function n(a,i,c,u){var s=l(t[a],t,i);if("throw"!==s.type){var f=s.arg,h=f.value;return h&&"object"==e(h)&&o.call(h,"__await")?r.resolve(h.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):r.resolve(h).then((function(t){f.value=t,c(f)}),(function(t){return n("throw",t,c,u)}))}u(s.arg)}var i;a(this,"_invoke",{value:function(t,e){function o(){return new r((function(r,o){n(t,e,r,o)}))}return i=i?i.then(o,o):o()}})}function L(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return _()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function I(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:_}}function _(){return{value:void 0,done:!0}}return v.prototype=y,a(b,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=f(y,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},r.awrap=function(t){return{__await:t}},x(E.prototype),f(E.prototype,u,(function(){return this})),r.AsyncIterator=E,r.async=function(t,e,n,o,a){void 0===a&&(a=Promise);var i=new E(h(t,e,n,o),a);return r.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(b),f(b,s,"Generator"),f(b,c,(function(){return this})),f(b,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=I,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},r}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}System.register(["./@antv-legacy-a9dadf71.js"],(function(r){"use strict";return{setters:[function(t){t.c}],execute:function(){var n={exports:{}};n.exports=function(t){var r={};function n(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=r,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"==e(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(r,n,o){var a;function i(t){return["image/png","image/jpeg","image/gif"].some((function(e){return e===t}))}o.r(n),o.d(n,"canvastoDataURL",(function(){return u})),o.d(n,"canvastoFile",(function(){return s})),o.d(n,"dataURLtoFile",(function(){return h})),o.d(n,"dataURLtoImage",(function(){return l})),o.d(n,"downloadFile",(function(){return d})),o.d(n,"filetoDataURL",(function(){return p})),o.d(n,"imagetoCanvas",(function(){return y})),o.d(n,"urltoBlob",(function(){return g})),o.d(n,"urltoImage",(function(){return m})),o.d(n,"compress",(function(){return b})),o.d(n,"compressAccurately",(function(){return x})),o.d(n,"EImageType",(function(){return a})),function(t){t.PNG="image/png",t.JPEG="image/jpeg",t.GIF="image/gif"}(a||(a={}));var c=function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function c(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,c)}u((n=n.apply(t,e||[])).next())}))};function u(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.92,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.JPEG;return c(this,void 0,void 0,t().mark((function o(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(i(n)||(n=a.JPEG),e.toDataURL(n,r)));case 1:case"end":return t.stop()}}),o)})))}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.92,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.JPEG;return new Promise((function(n){return t.toBlob((function(t){return n(t)}),r,e)}))}var f=function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function c(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,c)}u((n=n.apply(t,e||[])).next())}))};function h(e,r){return f(this,void 0,void 0,t().mark((function n(){var o,a,c,u,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o=e.split(","),a=o[0].match(/:(.*?);/)[1],c=atob(o[1]),u=c.length,s=new Uint8Array(u);u--;)s[u]=c.charCodeAt(u);return t.abrupt("return",(i(r)&&(a=r),new Blob([s],{type:a})));case 7:case"end":return t.stop()}}),n)})))}function l(t){return new Promise((function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=function(){return r(new Error("dataURLtoImage(): dataURL is illegal"))},n.src=t}))}function d(t,e){var r=document.createElement("a");r.href=window.URL.createObjectURL(t),r.download=e||Date.now().toString(36),document.body.appendChild(r);var n=document.createEvent("MouseEvents");n.initEvent("click",!1,!1),r.dispatchEvent(n),document.body.removeChild(r)}function p(t){return new Promise((function(e){var r=new FileReader;r.onloadend=function(t){return e(t.target.result)},r.readAsDataURL(t)}))}var v=function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function c(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,c)}u((n=n.apply(t,e||[])).next())}))};function y(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(this,void 0,void 0,t().mark((function n(){var o,a,i,c,u,s,f;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(s in o=Object.assign({},r),a=document.createElement("canvas"),i=a.getContext("2d"),o)Object.prototype.hasOwnProperty.call(o,s)&&(o[s]=Number(o[s]));o.scale?(f=o.scale>0&&o.scale<10?o.scale:1,u=e.width*f,c=e.height*f):(u=o.width||o.height*e.width/e.height||e.width,c=o.height||o.width*e.height/e.width||e.height),t.t0=([5,6,7,8].some((function(t){return t===o.orientation}))?(a.height=u,a.width=c):(a.height=c,a.width=u),o.orientation),t.next=3===t.t0?6:6===t.t0?8:8===t.t0?10:2===t.t0?12:4===t.t0?14:5===t.t0?16:7===t.t0?18:20;break;case 6:return i.rotate(180*Math.PI/180),i.drawImage(e,-a.width,-a.height,a.width,a.height),t.abrupt("break",21);case 8:return i.rotate(90*Math.PI/180),i.drawImage(e,0,-a.width,a.height,a.width),t.abrupt("break",21);case 10:return i.rotate(270*Math.PI/180),i.drawImage(e,-a.height,0,a.height,a.width),t.abrupt("break",21);case 12:return i.translate(a.width,0),i.scale(-1,1),i.drawImage(e,0,0,a.width,a.height),t.abrupt("break",21);case 14:return i.translate(a.width,0),i.scale(-1,1),i.rotate(180*Math.PI/180),i.drawImage(e,-a.width,-a.height,a.width,a.height),t.abrupt("break",21);case 16:return i.translate(a.width,0),i.scale(-1,1),i.rotate(90*Math.PI/180),i.drawImage(e,0,-a.width,a.height,a.width),t.abrupt("break",21);case 18:return i.translate(a.width,0),i.scale(-1,1),i.rotate(270*Math.PI/180),i.drawImage(e,-a.height,0,a.height,a.width),t.abrupt("break",21);case 20:i.drawImage(e,0,0,a.width,a.height);case 21:return t.abrupt("return",a);case 22:case"end":return t.stop()}}),n)})))}function g(t){return fetch(t).then((function(t){return t.blob()}))}function m(t){return new Promise((function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=function(){return r(new Error("urltoImage(): Image failed to load, please check the image URL"))},n.src=t}))}var w=function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function c(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,c)}u((n=n.apply(t,e||[])).next())}))};function b(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w(this,void 0,void 0,t().mark((function o(){var c,s,f,d,v,g,m;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r instanceof Blob){t.next=2;break}throw new Error("compress(): First arg must be a Blob object or a File object.");case 2:if("object"!=e(n)&&(n=Object.assign({quality:n})),n.quality=Number(n.quality),!Number.isNaN(n.quality)){t.next=4;break}return t.abrupt("return",r);case 4:return t.next=6,p(r);case 6:return c=t.sent,s=c.split(",")[0].match(/:(.*?);/)[1],f=a.JPEG,i(n.type)&&(f=n.type,s=n.type),t.next=11,l(c);case 11:return d=t.sent,t.next=14,y(d,Object.assign({},n));case 14:return v=t.sent,t.next=17,u(v,n.quality,f);case 17:return g=t.sent,t.next=20,h(g,s);case 20:return m=t.sent,t.abrupt("return",m.size>r.size?r:m);case 22:case"end":return t.stop()}}),o)})))}function x(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w(this,void 0,void 0,t().mark((function o(){var c,s,f,d,v,g,m,w,b,x,E,L,j,k;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r instanceof Blob){t.next=2;break}throw new Error("compressAccurately(): First arg must be a Blob object or a File object.");case 2:if("object"!=e(n)&&(n=Object.assign({size:n})),n.size=Number(n.size),!Number.isNaN(n.size)){t.next=4;break}return t.abrupt("return",r);case 4:if(!(1024*n.size>r.size)){t.next=6;break}return t.abrupt("return",r);case 6:return n.accuracy=Number(n.accuracy),(!n.accuracy||n.accuracy<.8||n.accuracy>.99)&&(n.accuracy=.95),c=n.size*(2-n.accuracy)*1024,s=1024*n.size,f=n.size*n.accuracy*1024,t.next=12,p(r);case 12:return d=t.sent,v=d.split(",")[0].match(/:(.*?);/)[1],g=a.JPEG,i(n.type)&&(g=n.type,v=n.type),t.next=17,l(d);case 17:return m=t.sent,t.next=20,y(m,Object.assign({},n));case 20:w=t.sent,x=.5,E=[null,null],L=1;case 24:if(!(L<=7)){t.next=42;break}return t.next=27,u(w,x,g);case 27:if(b=t.sent,j=.75*b.length,7!==L){t.next=32;break}return(c<j||f>j)&&(b=[b].concat(E).filter((function(t){return t})).sort((function(t,e){return Math.abs(.75*t.length-s)-Math.abs(.75*e.length-s)}))[0]),t.abrupt("break",42);case 32:if(!(c<j)){t.next=36;break}E[1]=b,x-=Math.pow(.5,L+1),t.next=39;break;case 36:if(f>j){t.next=38;break}return t.abrupt("break",42);case 38:E[0]=b,x+=Math.pow(.5,L+1);case 39:L++,t.next=24;break;case 42:return t.next=44,h(b,v);case 44:return k=t.sent,t.abrupt("return",k.size>r.size?r:k);case 46:case"end":return t.stop()}}),o)})))}}]);r("i",n.exports)}}}))}();
