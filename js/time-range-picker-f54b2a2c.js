var e=(e,l,a)=>new Promise(((t,o)=>{var i=e=>{try{u(a.next(e))}catch(l){o(l)}},s=e=>{try{u(a.throw(e))}catch(l){o(l)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,s);u((a=a.apply(e,l)).next())}));import{d as l,F as a,n as t,R as o,Z as i,$ as s,o as u,O as n,B as r}from"./vant-f142fa12.js";import{D as d,bl as m,u as p,j as v,k as c,x as f,l as b,m as h,o as x,c as j,ap as k,a as y,f as g,F as S,b as w,t as _,a7 as V,h as C,e as H,b8 as B,s as N,H as U,w as M,ao as O,N as z}from"./@vue-563ebafd.js";import{t as A,R as P}from"./index-ac9d2ddd.js";import{c as R}from"./@vueuse-3d373d70.js";import{_ as D}from"./plugin-vue_export-helper-893979e1.js";import{_ as I}from"./index-7153c68f.js";import{p as q}from"./index-d5a2837b.js";import{s as F}from"./@ckpack-b5a01aa6.js";import"./@vant-3579f7e1.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vue-router-2cd4af54.js";import"./vuex-423acd4f.js";import"./lodash-es-12d03b41.js";import"./axios-0cd4f164.js";import"./qs-efaa5365.js";import"./side-channel-ebdfdc6e.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-af06f273.js";import"./@antv-74afab59.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-4e4fc296.js";import"./vue3-hash-calendar-edea4f58.js";import"./hammerjs-ed6f6a9e.js";import"./@ctrl-aa1b1e70.js";const T={class:"time-picker"},Z={class:"time-scroll"},$={class:"time-text"},E={class:"time-full"},G=["data-val","data-idx","onClick"],J=d({name:"TimePicker"});var K=D(Object.assign(J,{props:{modelValue:{type:Array,default:()=>[]},minHour:{type:[Number,String],default:"0"},maxHour:{type:[Number,String],default:"23"},visibleNum:{type:[Number,String],default:"8"},timeStep:{type:[Number,String],default:"30",validator:e=>60%e==0},blockColor:{type:String,default:A},showArrow:Boolean,fixed:Boolean,readonly:Boolean,disabledBefore:Boolean},emits:["select"],setup(l,{emit:a}){const t=l;m((e=>({"0dc79676":p(s)})));const o=v(0);v(!0),v(0);const i=v(0),s=v("");c([]),c([]),c([]);const u=v([]);v([]);let n=c([]);const r=v(),d=v();v(!1),R(document.body,(e=>{})),f((()=>t),(e=>{B()}),{deep:!0}),b((()=>{B(),V()}));const V=()=>e(this,null,(function*(){var e;yield h(),i.value=null==(e=document.querySelector(".time-bar"))?void 0:e.getBoundingClientRect().width,s.value=i.value/P+"rem"})),C=e=>{o.value+=i.value*e,o.value!==i.value||(o.value=0)},H=e=>Math.floor(e/60)>=10?Math.floor(e/60):"0"+Math.floor(e/60),B=()=>{const e=parseInt((new Date).getHours()),l=parseInt((new Date).getMinutes()),a=[],o=a=>{const o=[],i=60/t.timeStep*(a-t.minHour),s=(a,o)=>{if(!t.disabledBefore)return!1;if(a<e)return!0;if(e===a){const e=t.timeStep*(o-1),a=t.timeStep*o;if(l>=e&&l<=a)return!0;if(l>=a)return!0}};for(let e=1;e<=60/t.timeStep;e++)o.push({value:60*a+t.timeStep*e,selected:!1,disabled:s(a,e),index:i+e-1});return o};for(let i=+t.minHour;i<=+t.maxHour;i++){const e={time:"",blocks:o(i)};e.time=60*i,a.push(e)}u.value=a},N=(e,l,o)=>{if(t.readonly)return!1;if(t.disabledBefore&&B(),!l.disabled){if(void 0===r.value&&void 0===d.value)r.value=n[0]=o;else if(void 0!==r.value&&void 0===d.value){if(o===r.value&&n.indexOf(o)>-1&&(n.splice(n.indexOf(o),1),r.value=d.value=void 0),o>r.value){d.value=o,n.splice(0);for(let e=r.value;e<=d.value;e++)n.splice(e-r.value,0,e)}if(o<r.value){const[e,l]=[o,r.value];r.value=e,d.value=l,n.splice(0);for(let a=r.value;a<=d.value;a++)n.splice(a-r.value,0,a)}}else if(void 0!==r.value&&void 0!==d.value)if(o===r.value){const e=n.indexOf(o);n.splice(e,1),n.length?r.value=n[0]:r.value=d.value=void 0}else if(o===d.value){const e=n.indexOf(o);n.splice(e,1),d.value=n[n.length-1],r.value===d.value&&(d.value=void 0)}else if(o<r.value)n.splice(0),r.value=d.value=void 0;else if(o>r.value){d.value=o,n.splice(0);for(let e=r.value;e<=d.value;e++)n.splice(e-r.value,0,e)}(()=>{if(0===n.length)return void a("select",null);const e=60*+t.minHour+Number(t.timeStep)*r.value+Number(t.timeStep),l=60*+t.minHour+Number(t.timeStep)*d.value+Number(t.timeStep);let o="",i="",s="",u="",m="",p="";e&&l?(s=H(e-t.timeStep),o=H(l),u=(e-t.timeStep)%60==0?"00":Math.round(60*((e-t.timeStep)/60-s)),i=l%60==0?"00":Math.round(60*(l/60-o)),m=s+":"+u,24===o&&(o=23,i=59),p=o+":"+i):(s=H(e-t.timeStep),o=H(e),u=(e-t.timeStep)%60==0?"00":Math.round(60*((e-t.timeStep)/60-s)),i=e%60==0?"00":Math.round(60*(e/60-o)),m=s+":"+u,24===o&&(o=23,i=59),p=o+":"+i),a("select",[m,p])})()}};return(e,a)=>(x(),j("div",T,[l.showArrow?(x(),j("div",{key:0,class:"time-picker-prev",onClick:a[0]||(a[0]=e=>C(1))},"<")):k("",!0),y("div",Z,[y("div",{class:g(["time-wrapper",{"time-wrapper__fixed":l.fixed}])},[(x(!0),j(S,null,w(p(u),((e,a)=>(x(),j("div",{key:e.time+a,class:g(["time-bar",[{"time-bar--fixed-start":l.fixed&&0==a,"time-bar--fixed-end":l.fixed&&p(u).length-1===a,paddingno:l.fixed&&p(u).length-2===a}]])},[y("span",$,_(H(e.time)+":00"),1),y("div",E,[(x(!0),j(S,null,w(e.blocks,(e=>(x(),j("div",{key:e.value,"data-val":e.value,"data-idx":e.index,class:g(["time-block",{"time-block--selected":p(n).includes(e.index),"time-block--readonly":l.readonly,"time-block--disabled":e.disabled}]),onClick:l=>N(0,e,e.index)},null,10,G)))),128))])],2)))),128))],2)]),l.showArrow?(x(),j("div",{key:1,class:"time-picker-next",onClick:a[1]||(a[1]=e=>C(-1))},">")):k("",!0)]))}}),[["__scopeId","data-v-1fdd0b53"]]);const L={class:"time-range-picker"},Q={__name:"time-range-picker",setup(d){const m=v(),f=v(null),b=c({minHour:"00",maxHour:"23",timeStep:30,blockColor:A,fixed:!1,readonly:!1,disabledBefore:!1}),{minHour:y,maxHour:g,timeStep:S,disabledBefore:w,fixed:_,readonly:P,blockColor:R}=V(b),D=v(!1),T=v(["00","23"]),Z=C((()=>y.value+" ~ "+g.value)),$=v(!1),E=()=>{$.value=!0},G=({selectedValues:e,selectedOptions:l})=>{const[a,t]=T.value;y.value=a,g.value=t,m.value="",$.value=!1},J=v(!1),Q=[{text:"10分",value:10},{text:"15分",value:15},{text:"20分",value:20},{text:"30分",value:30},{text:"60分",value:60}],W=()=>{J.value=!0},X=({selectedOptions:e})=>{J.value=!1,S.value=e[0].value,m.value=""},Y=()=>e(this,null,(function*(){yield h(),m.value=""})),ee=(e,l)=>"minute"===e?l.filter((e=>Number(e.value)<=23)):l,le=(e,l)=>("hour"===e&&(l.text+="时开始"),"minute"===e&&(l.text+="时结束"),l);return(e,d)=>{const v=I,c=l,h=a,y=t,g=o,V=i,C=s,A=u,ae=n,te=K,oe=r,ie=z("waves");return x(),j("div",L,[H(v),H(c,{title:"配置项",border:!0}),H(g,{type:"flex",justify:"center"},{default:B((()=>[M((x(),O(y,{span:"8"},{default:B((()=>[H(h,{modelValue:p(m),"onUpdate:modelValue":d[0]||(d[0]=e=>N(m)?m.value=e:null),label:"已选时间",placeholder:"暂无选择","label-align":"top",readonly:""},null,8,["modelValue"])])),_:1})),[[ie]]),M((x(),O(y,{span:"8"},{default:B((()=>[H(h,{modelValue:p(Z),"onUpdate:modelValue":d[1]||(d[1]=e=>N(Z)?Z.value=e:null),label:"时间范围",placeholder:"自定义范围","label-align":"top",readonly:"","is-link":"",onClick:E},null,8,["modelValue"])])),_:1})),[[ie]]),M((x(),O(y,{span:"8"},{default:B((()=>[H(h,{modelValue:p(S),"onUpdate:modelValue":d[2]||(d[2]=e=>N(S)?S.value=e:null),label:"间隔（分）",placeholder:"规定时间间隔","label-align":"top",readonly:"","is-link":"",onClick:W},null,8,["modelValue"])])),_:1})),[[ie]])])),_:1}),k("",!0),H(g,{type:"flex",justify:"center"},{default:B((()=>[M((x(),O(y,{span:"8"},{default:B((()=>[H(h,{label:"禁用过去","label-align":"top"},{input:B((()=>[H(V,{modelValue:p(w),"onUpdate:modelValue":d[6]||(d[6]=e=>N(w)?w.value=e:null),size:p(q)(18),onChange:Y},null,8,["modelValue","size"])])),_:1})])),_:1})),[[ie]]),M((x(),O(y,{span:"8"},{default:B((()=>[H(h,{label:"固定两端","label-align":"top"},{input:B((()=>[H(V,{modelValue:p(_),"onUpdate:modelValue":d[7]||(d[7]=e=>N(_)?_.value=e:null),size:p(q)(18)},null,8,["modelValue","size"])])),_:1})])),_:1})),[[ie]]),M((x(),O(y,{span:"8"},{default:B((()=>[H(h,{label:"只读","label-align":"top"},{input:B((()=>[H(V,{modelValue:p(P),"onUpdate:modelValue":d[8]||(d[8]=e=>N(P)?P.value=e:null),size:p(q)(18)},null,8,["modelValue","size"])])),_:1})])),_:1})),[[ie]])])),_:1}),H(A,{show:p($),"onUpdate:show":d[11]||(d[11]=e=>N($)?$.value=e:null),position:"bottom"},{default:B((()=>[H(C,{modelValue:p(T),"onUpdate:modelValue":d[9]||(d[9]=e=>N(T)?T.value=e:null),title:"选择小时范围",filter:ee,formatter:le,"is-link":"",onCancel:d[10]||(d[10]=e=>$.value=!1),onConfirm:G},null,8,["modelValue"])])),_:1},8,["show"]),H(A,{show:p(J),"onUpdate:show":d[13]||(d[13]=e=>N(J)?J.value=e:null),position:"bottom"},{default:B((()=>[H(ae,{title:"时间间隔",columns:Q,onCancel:d[12]||(d[12]=e=>J.value=!1),onConfirm:X})])),_:1},8,["show"]),H(A,{show:p(D),"onUpdate:show":d[14]||(d[14]=e=>N(D)?D.value=e:null),position:"bottom"},{default:B((()=>[H(p(F),{"model-value":p(R),triangle:"hide"},null,8,["model-value"])])),_:1},8,["show"]),H(te,U({ref_key:"timePickerRef",ref:f},p(b),{onSelect:d[15]||(d[15]=e=>((e,l)=>{const a=e?e[0]+" ~ "+e[1]:"";m.value=a})(e))}),null,16),H(c,{title:"该组件为自研组件，后续提供更灵活定制选项，有时间再优化动态预览配置~",border:!1}),H(oe,{bottom:p(q)(50)},null,8,["bottom"])])}}};export{Q as default};
