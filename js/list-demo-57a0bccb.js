var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&r(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&r(e,t,a[t]);return e},n=(e,l)=>a(e,t(l));import{z as c,x as d,y as u,A as f,E as p,H as h,S as m,J as v,K as b,M as y,B as j,h as w}from"./vant-182c6d73.js";import{m as k,r as g,a as x,w as _,_ as C,C as F,aI as O,ak as S,al as V,F as A,aN as E,l as L,b7 as P,a2 as R,a5 as I,ai as B,v as K,A as U,aK as M,aJ as z,aj as q,b as J,n as D,u as N,f as T}from"./@vue-0da0c2e3.js";import{t as H}from"./index-01111c4c.js";import{_ as $}from"./plugin-vue_export-helper-893979e1.js";import{d as G}from"./lodash-es-0ddda1ab.js";import{_ as Q}from"./index-06373c59.js";import"./@vant-b0725c78.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vue-router-1cbad9b8.js";import"./vuex-fdaeb4c6.js";import"./@vueuse-cf363312.js";import"./axios-0cd4f164.js";import"./qs-efaa5365.js";import"./side-channel-ebdfdc6e.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-af06f273.js";import"./@antv-74afab59.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-4e4fc296.js";import"./vue3-hash-calendar-e234247e.js";import"./hammerjs-ed6f6a9e.js";k({name:"ListTotal"});const W=k({name:"FilterMenus",components:{},props:{activeColor:{type:String,default:H},filterMenu:{type:Array,default:()=>[{field:"status",label:"状态",value:"",multiple:!1,data:[{label:"不限",value:"-1"},{label:"上架",value:"0"},{label:"下架",value:"1"}]}],validator:e=>G(e)}},emits:["close","confirm"],setup(e,{emit:a}){const t=g(null),l=g([0,1]),s=x({list:[]});_((()=>e.filterMenu),((e,a)=>{e!==a&&(s.list=e,s.list.forEach((e=>{if(e.data&&e.data.length){e.data.forEach((e=>{e.checked=!1}));if(e.hasOwnProperty("canAll")&&e.canAll){const a={label:"全选",value:"all",checked:!1};e.data.unshift(a)}}})))}),{deep:!0,immediate:!0});return n(i({},C(s)),{container:t,activeArr:l,onFinish:({value:e,selectedOptions:a,tabIndex:t},l)=>{const s=l.showAllLevels;l.value=s?a.map((e=>e.value)).join("/"):e},handleClickBtn:()=>{},filterLabelSelect:(e,a,t,l)=>{if("all"===e.value&&(e.checked=!e.checked,e.label=e.checked?"反选":"全选",t.data.forEach((a=>a.checked=e.checked))),"all"!==e.value){e.checked=!e.checked;const a=t.data.filter((e=>"all"!==e.value&&e.checked)).length;t.hasOwnProperty("canAll")&&!0===t.canAll&&(t.data[0].checked=a===t.data.length-1,t.data[0].label=a===t.data.length-1?"反选":"全选")}t.hasOwnProperty("multiple")&&!t.multiple&&("all"!==e.value&&s.list[l].data.forEach((e=>e.checked=!1)),e.checked=!e.checked)},filterReset:()=>{s.list.forEach((e=>{e.type&&"tree"===e.type&&(e.valueShow="",e.value=""),e.data&&e.data.length&&e.data.forEach((e=>{e.checked=!1,"all"===e.value&&(e.label="全选")}))}))},filterConfirm:()=>{const e={};s.list.forEach((a=>{if(a.data&&a.data.length){const t=a.data.reduce(((e,a)=>("all"!==a.value&&a.checked&&e.push(a.value),e)),[]);"tree"===a.type&&""!==a.value&&(e[a.field]=a.value),""!==t.join(",")&&(e[a.field]=t.join(","))}}));const t=0!==Object.keys(e).length;a("confirm",e,t)}})}}),X={ref:"container",class:"filter-menus-wrapper st-bg-white"},Y={class:"filter-list"},Z={key:0,class:"st-flex-wrap st-padding-box"},ee=["onClick"],ae=(e=>(M("data-v-10473434"),e=e(),z(),e))((()=>V("div",null,null,-1))),te={class:"filter-button-box st-flex-ai"};var le=$(W,[["render",function(e,a,t,l,s,o){const r=c,i=d,n=u,f=F("waves");return O(),S("div",X,[V("div",Y,[(O(!0),S(A,null,E(e.list,((t,l)=>(O(),S("div",{key:l,class:"filter-item"},[L(n,{modelValue:e.activeArr,"onUpdate:modelValue":a[1]||(a[1]=a=>e.activeArr=a),border:!1},{default:P((()=>[L(i,{name:l,title:t.label,value:""+(e.activeArr.includes(l)?"收起":"展开")},{default:P((()=>["tree"!==t.type?(O(),S("div",Z,[(O(!0),S(A,null,E(t.data,((a,s)=>(O(),S("div",{key:s,class:R([{checked:a.checked},"filter-item-label st-line-16 van-ellipsis"]),onClick:o=>e.filterLabelSelect(a,s,t,l)},I(a.label),11,ee)))),128))])):(O(),B(r,{key:l,ref_for:!0,ref:"cascaderRef",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,"field-names":{text:"label",value:"value",children:"children"},options:t.data,"active-color":e.activeColor,class:"cascader-tree",placeholder:"请选择",onClose:a[0]||(a[0]=a=>e.show=!1),onFinish:a=>e.onFinish(a,t,l)},{title:P((()=>[ae])),_:2},1032,["modelValue","onUpdate:modelValue","options","active-color","onFinish"]))])),_:2},1032,["name","title","value"])])),_:2},1032,["modelValue"])])))),128))]),V("div",te,[K((O(),S("div",{class:"filter-button-reset st-flex-center st-flex-1",onClick:a[2]||(a[2]=(...a)=>e.filterReset&&e.filterReset(...a))},[U(" 清空 ")])),[[f]]),K((O(),S("div",{class:"filter-button-confirm st-flex-center st-flex-1 st-color-white",onClick:a[3]||(a[3]=(...a)=>e.filterConfirm&&e.filterConfirm(...a))},[U(" 确定 ")])),[[f]])])],512)}],["__scopeId","data-v-10473434"]]);const se=k({name:"SearchFilter",props:{placeholder:{type:String,default:"搜索关键词"},filter:{type:Boolean,default:!1},shape:{type:String,default:"square",validator:e=>["square","round"].includes(e)}},emits:["search","confirm"],setup(e,{emit:a}){const t=x({keyword:"",showFilter:!0,isChecked:!1,dropdownItemRef:null,keywordListRef:null,showKeywordList:!1});_((()=>t.keyword),((e,a)=>{}));return n(i({},C(t)),{onFocus:()=>{t.showKeywordList=!0,t.showFilter=!1},onBlur:()=>{t.showKeywordList=!1,t.showFilter=!0},onSearch:()=>{a("search",t.keyword)},searchConfirm:()=>{},handleFilterConfirm:(e,l)=>{t.dropdownItemRef.toggle(),t.isChecked=l,a("confirm",e)},handleKeywordSearch:e=>{t.keyword=e}})}}),oe={class:"search-filter-wrapper st-flex-ai st-bg-white van-hairline--bottom"},re=(e=>(M("data-v-7f600c48"),e=e(),z(),e))((()=>V("div",{class:R("")},"筛选",-1)));var ie=$(se,[["render",function(e,a,t,l,s,o){const r=le,i=f,n=p,c=h;return O(),S("div",oe,[L(c,{modelValue:e.keyword,"onUpdate:modelValue":a[0]||(a[0]=a=>e.keyword=a),modelModifiers:{trim:!0},shape:e.shape,"show-action":!0,class:"search-box st-flex-1",autocomplete:"off",placeholder:e.placeholder,"action-text":"",onBlur:e.onBlur,onFocus:e.onFocus,onSearch:e.onSearch},{action:P((()=>[(O(),B(n,{key:0,"active-color":"#333333","z-index":"999"},{default:P((()=>[L(i,{ref:"dropdownItemRef"},{title:P((()=>[re])),default:P((()=>[L(r,{onConfirm:e.handleFilterConfirm},null,8,["onConfirm"])])),_:1},512)])),_:1}))])),_:1},8,["modelValue","shape","placeholder","onBlur","onFocus","onSearch"])])}],["__scopeId","data-v-7f600c48"]]);const ne={class:"layout__page"},ce={class:"layout__body"},de=k({name:"ListDemo"});var ue=$(Object.assign(de,{setup(e){g(null);J((()=>{return e=this,a=null,t=function*(){yield D()},new Promise(((l,s)=>{var o=e=>{try{i(t.next(e))}catch(a){s(a)}},r=e=>{try{i(t.throw(e))}catch(a){s(a)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,r);i((t=t.apply(e,a)).next())}));var e,a,t})),g(0);const a=g([]),t=g([]);x({status:"-1"});const l=g(!1),s=g(!1),o=g(!1),r=()=>{setTimeout((()=>{o.value&&(t.value=a.value=[],o.value=!1);for(let e=1;e<=10;e++){const l={title:"商品"+e,tag:e%2==0?"上架":"下架",status:e%2==0?"0":"1",price:(2*e).toFixed(2),desc:e%2==0?"我是上架的宝贝":"我是下架的宝贝",thumb:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"};t.value.push(l),a.value.push(l)}l.value=!1,a.value.length>=50&&(s.value=!0)}),1e3)};r();const i=()=>{s.value=!1,l.value=!0,r()},n=e=>{if(""!==e.trim()){const l=new RegExp(e,"gi"),s=t.value.filter((e=>l.test(e.title)));a.value=s}else a.value=t.value},c=e=>{w({message:`筛选参数：${JSON.stringify(e)}`})};return(e,t)=>{const d=Q,u=ie,f=m,p=v,h=b,w=y,k=j;return O(),S("div",ne,[L(d),L(f,{"offset-top":46,"z-index":99},{default:P((()=>[L(u,{placeholder:"搜索商品",onSearch:n,onConfirm:c})])),_:1}),V("div",ce,[L(w,{modelValue:N(o),"onUpdate:modelValue":t[1]||(t[1]=e=>T(o)?o.value=e:null),onRefresh:i},{default:P((()=>[L(h,{loading:N(l),"onUpdate:loading":t[0]||(t[0]=e=>T(l)?l.value=e:null),finished:N(s),"finished-text":"没有更多了",onLoad:r},{default:P((()=>[(O(!0),S(A,null,E(N(a),((e,a)=>(O(),B(p,{key:e.title+a,tag:e.tag,price:e.price,desc:e.desc,title:e.title,thumb:e.thumb,class:"st-bg-white"},null,8,["tag","price","desc","title","thumb"])))),128))])),_:1},8,["loading","finished"])])),_:1},8,["modelValue"]),q("",!0),L(k)])])}}}),[["__scopeId","data-v-61ec40be"]]);export{ue as default};
