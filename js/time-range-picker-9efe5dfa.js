import{d as e,B as t}from"./vant-182c6d73.js";import{_ as a}from"./plugin-vue_export-helper-893979e1.js";import{m as i,a as l,r as s,b as o,aI as r,ak as u,al as m,F as n,aN as d,a5 as v,a2 as c,u as p,_ as f,l as b}from"./@vue-0da0c2e3.js";import{_ as j}from"./index-06373c59.js";import{p as h}from"./index-dfc50954.js";import"./@vant-b0725c78.js";import"./vue-router-1cbad9b8.js";import"./index-a63a75db.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vuex-fdaeb4c6.js";import"./@vueuse-cf363312.js";import"./lodash-es-12d03b41.js";import"./axios-0cd4f164.js";import"./qs-efaa5365.js";import"./side-channel-ebdfdc6e.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-af06f273.js";import"./@antv-74afab59.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-4e4fc296.js";import"./vue3-hash-calendar-e234247e.js";import"./hammerjs-ed6f6a9e.js";const x={class:"time-picker"},S={class:"time-wraper no-scrollbar"},k={class:"time-text"},g={class:"time-full"},y=["data-val","data-idx","onClick"],N=i({name:"TimePicker"});var H=a(Object.assign(N,{props:{modelValue:{type:Array,default:()=>[]},minHour:{type:[Number,String],default:"0"},maxHour:{type:[Number,String],default:"23"},visibleNum:{type:[Number,String],default:"8"},timeStep:{type:[Number,String],default:"30",validator:e=>60%e==0},readonly:Boolean,disabledBefore:Boolean},emits:["select"],setup(e,{emit:t}){const a=e;l([]),l([]),l([]);const i=s([]);let f=l([]);const b=s(),j=s();s(!1),o((()=>{N()}));const h=e=>Math.floor(e/60)>=10?Math.floor(e/60):"0"+Math.floor(e/60),N=()=>{const e=parseInt((new Date).getHours()),t=parseInt((new Date).getMinutes()),l=[],s=i=>{const l=[],s=60/a.timeStep*(i-a.minHour),o=(i,l)=>{if(!a.disabledBefore)return!1;if(i<e)return!0;if(e===i){const e=a.timeStep*(l-1),i=a.timeStep*l;if(t>=e&&t<=i)return!0;if(t>=i)return!0}};for(let e=1;e<=60/a.timeStep;e++)l.push({value:60*i+a.timeStep*e,selected:!1,disabled:o(i,e),index:s+e-1});return l};for(let i=+a.minHour;i<=+a.maxHour;i++){const e={time:"",blocks:s(i)};e.time=60*i,l.push(e)}i.value=l},H=(e,i,l)=>{if(a.readonly)return!1;if(a.disabledBefore&&N(),!i.disabled){if(void 0===b.value&&void 0===j.value)b.value=f[0]=l;else if(void 0!==b.value&&void 0===j.value){if(l===b.value&&f.indexOf(l)>-1&&(f.splice(f.indexOf(l),1),b.value=j.value=void 0),l>b.value){j.value=l,f.splice(0);for(let e=b.value;e<=j.value;e++)f.splice(e-b.value,1,e)}if(l<b.value){const[e,t]=[l,b.value];b.value=e,j.value=t,f.splice(0);for(let a=b.value;a<=j.value;a++)f.splice(a-b.value,1,a)}}else if(void 0!==b.value&&void 0!==j.value)if(l===b.value){const e=f.indexOf(l);f.splice(e,1),f.length?b.value=f[0]:b.value=j.value=void 0}else if(l===j.value){const e=f.indexOf(l);f.splice(e,1),j.value=f[f.length-1],b.value===j.value&&(j.value=void 0)}else if(l<b.value)f.splice(0),b.value=j.value=void 0;else if(l>b.value){j.value=l,f.splice(0);for(let e=b.value;e<=j.value;e++)f.splice(e-b.value,1,e)}(()=>{if(0===f.length)return void t("select",null);const e=60*+a.minHour+Number(a.timeStep)*b.value+Number(a.timeStep),i=60*+a.minHour+Number(a.timeStep)*j.value+Number(a.timeStep);let l="",s="",o="",r="",u="",m="";e&&i?(o=h(e-a.timeStep),l=h(i),r=(e-a.timeStep)%60==0?"00":Math.round(60*((e-a.timeStep)/60-o)),s=i%60==0?"00":Math.round(60*(i/60-l)),u=o+":"+r,m=l+":"+s):(o=h(e-a.timeStep),l=h(e),r=(e-a.timeStep)%60==0?"00":Math.round(60*((e-a.timeStep)/60-o)),s=e%60==0?"00":Math.round(60*(e/60-l)),u=o+":"+r,m=l+":"+s),t("select",[u,m])})()}};return(t,a)=>(r(),u("div",x,[m("div",S,[(r(!0),u(n,null,d(p(i),((t,a)=>(r(),u("div",{key:t.time,class:"time-bar"},[m("span",k,v(h(t.time)+":00"),1),m("div",g,[(r(!0),u(n,null,d(t.blocks,((t,a)=>(r(),u("div",{key:t.value,"data-val":t.value,"data-idx":t.index,class:c(["time-block",{"time-block--selected":p(f).includes(t.index),"time-block--readonly":e.readonly,"time-block--disabled":t.disabled}]),onClick:e=>H(0,t,t.index)},null,10,y)))),128))])])))),128))])]))}}),[["__scopeId","data-v-a35e4958"]]);const M={class:"time-range-picker"},_={__name:"time-range-picker",setup(a){const i=l({time1:"",time2:"",time3:"",time4:""}),{time1:s,time2:o,time3:m,time4:n}=f(i),d=(e,t)=>{const a=e?e[0]+" ~ "+e[1]:"";"time1"===t&&(s.value=a),"time2"===t&&(o.value=a),"time3"===t&&(m.value=a),"time4"===t&&(n.value=a)};return(a,i)=>{const l=j,v=e,c=H,f=t;return r(),u("div",M,[b(l),b(v,{title:"完整时间",value:p(s),border:!1},null,8,["value"]),b(c,{onSelect:i[0]||(i[0]=e=>d(e,"time1"))}),b(v,{title:"自定义时间范围",value:p(o),border:!1},null,8,["value"]),b(c,{"min-hour":"9","max-hour":"18",onSelect:i[1]||(i[1]=e=>d(e,"time2"))}),b(v,{title:"禁用过去时间，不可选择",value:p(n)},null,8,["value"]),b(c,{"min-hour":"9","max-hour":"18","disabled-before":"",onSelect:i[2]||(i[2]=e=>d(e,"time4"))}),b(v,{title:"自定义时间间隔",value:p(m),border:!1},null,8,["value"]),b(c,{"min-hour":"11","max-hour":"22","time-step":"15",onSelect:i[3]||(i[3]=e=>d(e,"time3"))}),b(v,{title:"该组件为自研组件，后续提供更灵活定制选项~"}),b(f,{bottom:p(h)(60)},null,8,["bottom"])])}}};export{_ as default};
