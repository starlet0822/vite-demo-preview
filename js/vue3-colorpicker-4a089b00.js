var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,s=(e,t)=>{for(var o in t||(t={}))n.call(t,o)&&l(e,o,t[o]);if(a)for(var o of a(t))r.call(t,o)&&l(e,o,t[o]);return e},i=(e,a)=>t(e,o(a));import{n as c,w as u,g as d,b as h,j as g,k as p,u as v,ad as C,r as f,l as b,a as y,c as m,p as S,i as k,s as _,B as w,H,J as A,K as R,M as B,N as P,F as V,O,v as x,D as K,G as N,W as E,I,A as L,E as M,z as W,y as j,X as D,aR as T,aQ as $}from"./@vue-52de1c01.js";import{C as z}from"./vue-types-9561ac9a.js";import{t as G}from"./tinycolor2-7446cab2.js";import{V as F}from"./@aesoper-316802a3.js";import{A as q}from"./vue3-angle-289b91e7.js";import{p as J,s as X}from"./gradient-parser-c9367eab.js";import{a as Z}from"./lodash-es-133975bb.js";import{c as U}from"./@popperjs-b33e3bca.js";const Y="undefined"!=typeof window,Q=()=>{};function ee(e,t){return function(...o){e((()=>t.apply(this,o)),{fn:t,thisArg:this,args:o})}}const te=e=>e();function oe(e,t=200,o={}){return ee(function(e,t={}){let o,a;return n=>{const r=v(e),l=v(t.maxWait);if(o&&clearTimeout(o),r<=0||void 0!==l&&l<=0)return a&&(clearTimeout(a),a=null),n();l&&!a&&(a=setTimeout((()=>{o&&clearTimeout(o),a=null,n()}),l)),o=setTimeout((()=>{a&&clearTimeout(a),a=null,n()}),r)}}(t,o),e)}var ae=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;function le(e,t,o={}){const a=o,{eventFilter:n=te}=a,r=((e,t)=>{var o={};for(var a in e)ne.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&ae)for(var a of ae(e))t.indexOf(a)<0&&re.call(e,a)&&(o[a]=e[a]);return o})(a,["eventFilter"]);return u(e,ee(n,t),r)}function se(e,t=!0){d()?h(e):t?e():c(e)}function ie(e,t,o){return u(e,((e,o,a)=>{e&&t(e,o,a)}),o)}const ce=Y?window:void 0;function ue(...e){let t,o,a,n;if("string"==typeof e[0]?([o,a,n]=e,t=ce):[t,o,a,n]=e,!t)return Q;let r=Q;const l=u((()=>v(t)),(e=>{r(),e&&(e.addEventListener(o,a,n),r=()=>{e.removeEventListener(o,a,n),r=Q})}),{immediate:!0,flush:"post"}),s=()=>{l(),r()};var i;return i=s,g()&&p(i),s}function de(e,t,o={}){const{window:a=ce,event:n="pointerdown"}=o;if(!a)return;return ue(a,n,(o=>{const a=function(e){var t;const o=v(e);return null!=(t=null==o?void 0:o.$el)?t:o}(e);a&&(a===o.target||o.composedPath().includes(a)||t(o))}),{passive:!0})}const he={boolean:{read:e=>"true"===e,write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))}};function ge(e,t,o={}){const{window:a=ce}=o;return function(e,t,o=(e=>null==(e=ce)?void 0:e.localStorage)(),a={}){var n;const{flush:r="pre",deep:l=!0,listenToStorageChanges:s=!0,writeDefaults:i=!0,shallow:c,window:u=ce,eventFilter:d,onError:h=(e=>{})}=a,g=v(t),p=null==g?"any":g instanceof Set?"set":g instanceof Map?"map":"boolean"==typeof g?"boolean":"string"==typeof g?"string":"object"==typeof g||Array.isArray(g)?"object":Number.isNaN(g)?"any":"number",b=(c?C:f)(t),y=null!=(n=a.serializer)?n:he[p];function m(t){if(o&&(!t||t.key===e))try{const a=t?t.newValue:o.getItem(e);null==a?(b.value=g,i&&null!==g&&o.setItem(e,y.write(g))):b.value=y.read(a)}catch(a){h(a)}}return m(),u&&s&&ue(u,"storage",(e=>setTimeout((()=>m(e)),0))),o&&le(b,(()=>{try{null==b.value?o.removeItem(e):o.setItem(e,y.write(b.value))}catch(t){h(t)}}),{flush:r,deep:l,eventFilter:d}),b}(e,t,null==a?void 0:a.localStorage,o)}var pe,ve;(ve=pe||(pe={})).UP="UP",ve.RIGHT="RIGHT",ve.DOWN="DOWN",ve.LEFT="LEFT",ve.NONE="NONE";var Ce=Object.defineProperty,fe=(e,t,o)=>(((e,t,o)=>{t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o})(e,"symbol"!=typeof t?t+"":t,o),o);const be=e=>Math.round(100*e)/100;class ye{constructor(e){fe(this,"instance"),fe(this,"alphaValue",0),fe(this,"redValue",0),fe(this,"greenValue",0),fe(this,"blueValue",0),fe(this,"hueValue",0),fe(this,"saturationValue",0),fe(this,"brightnessValue",0),fe(this,"hslSaturationValue",0),fe(this,"lightnessValue",0),fe(this,"initAlpha",(()=>{const e=this.instance.getAlpha();this.alphaValue=100*Math.min(1,e)})),fe(this,"initLightness",(()=>{const{s:e,l:t}=this.instance.toHsl();this.hslSaturationValue=be(e),this.lightnessValue=be(t)})),fe(this,"initRgb",(()=>{const{r:e,g:t,b:o}=this.instance.toRgb();this.redValue=be(e),this.greenValue=be(t),this.blueValue=be(o)})),fe(this,"initHsb",(()=>{const{h:e,s:t,v:o}=this.instance.toHsv();this.hueValue=Math.min(360,Math.ceil(e)),this.saturationValue=be(t),this.brightnessValue=be(o)})),fe(this,"toHexString",(()=>this.instance.toHexString())),fe(this,"toRgbString",(()=>this.instance.toRgbString())),this.instance=G(e),this.initRgb(),this.initHsb(),this.initLightness(),this.initAlpha()}toString(e){return this.instance.toString(e)}get hex(){return this.instance.toHex()}set hex(e){this.instance=G(e),this.initHsb(),this.initRgb(),this.initAlpha(),this.initLightness()}set hue(e){0===this.saturation&&0===this.brightness&&(this.saturationValue=1,this.brightnessValue=1),this.instance=G({h:be(e),s:this.saturation,v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.hueValue=be(e)}get hue(){return this.hueValue}set saturation(e){this.instance=G({h:this.hue,s:be(e),v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.saturationValue=be(e)}get saturation(){return this.saturationValue}set brightness(e){this.instance=G({h:this.hue,s:this.saturation,v:be(e),a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.brightnessValue=be(e)}get brightness(){return this.brightnessValue}set lightness(e){this.instance=G({h:this.hue,s:this.hslSaturationValue,l:be(e),a:this.alphaValue/100}),this.initRgb(),this.initHsb(),this.lightnessValue=be(e)}get lightness(){return this.lightnessValue}set red(e){const t=this.instance.toRgb();this.instance=G(i(s({},t),{r:be(e),a:this.alphaValue/100})),this.initHsb(),this.initLightness(),this.redValue=be(e)}get red(){return this.redValue}set green(e){const t=this.instance.toRgb();this.instance=G(i(s({},t),{g:be(e),a:this.alphaValue/100})),this.initHsb(),this.initLightness(),this.greenValue=be(e)}get green(){return this.greenValue}set blue(e){const t=this.instance.toRgb();this.instance=G(i(s({},t),{b:be(e),a:this.alphaValue/100})),this.initHsb(),this.initLightness(),this.blueValue=be(e)}get blue(){return this.blueValue}set alpha(e){this.instance.setAlpha(e/100),this.alphaValue=e}get alpha(){return this.alphaValue}get RGB(){return[this.red,this.green,this.blue,this.alpha/100]}get HSB(){return[this.hue,this.saturation,this.brightness,this.alpha/100]}get HSL(){return[this.hue,this.hslSaturationValue,this.lightness,this.alpha/100]}}function me(e,t,o,a){return`rgba(${[e,t,o,a/100].join(",")})`}const Se=(e,t,o)=>t<o?e<t?t:e>o?o:e:e<o?o:e>t?t:e,ke="color-history",_e=(e,t)=>{const o=e.__vccOpts||e;for(const[a,n]of t)o[a]=n;return o},we=b({name:"Alpha",props:{color:z.instanceOf(ye),size:z.oneOf(["small","default"]).def("default")},emits:["change"],setup(e,{emit:t}){const o=f(null),a=f(null);let n=e.color||new ye;const r=y({red:n.red,green:n.green,blue:n.blue,alpha:n.alpha});u((()=>e.color),(e=>{e&&(n=e,Z(r,{red:e.red,green:e.green,blue:e.blue,alpha:e.alpha}))}),{deep:!0});const l=m((()=>({background:`linear-gradient(to right, ${me(r.red,r.green,r.blue,0)} , ${me(r.red,r.green,r.blue,100)})`}))),s=()=>{if(o.value&&a.value){const e=r.alpha/100,t=o.value.getBoundingClientRect(),n=a.value.offsetWidth;return Math.round(e*(t.width-n)+n/2)}return 0},i=m((()=>({left:s()+"px",top:0}))),c=e=>{if(e.stopPropagation(),o.value&&a.value){const l=o.value.getBoundingClientRect(),s=a.value.offsetWidth;let i=e.clientX-l.left;i=Math.max(s/2,i),i=Math.min(i,l.width-s/2);const c=Math.round((i-s/2)/(l.width-s)*100);n.alpha=c,r.alpha=c,t("change",c)}};return se((()=>{const e={drag:e=>{c(e)},end:e=>{c(e)}};o.value&&a.value&&F.triggerDragEvent(o.value,e)})),{barElement:o,cursorElement:a,getCursorStyle:i,getBackgroundStyle:l,onClickSider:e=>{e.target!==o.value&&c(e)}}}}),He=[(e=>(T("data-v-18925ba6"),e=e(),$(),e))((()=>H("div",{class:"vc-alpha-slider__bar-handle"},null,-1)))];const Ae=_e(we,[["render",function(e,t,o,a,n,r){return _(),w("div",{class:A(["vc-alpha-slider","transparent",{"small-slider":"small"===e.size}])},[H("div",{ref:"barElement",class:"vc-alpha-slider__bar",style:R(e.getBackgroundStyle),onClick:t[0]||(t[0]=(...t)=>e.onClickSider&&e.onClickSider(...t))},[H("div",{class:A(["vc-alpha-slider__bar-pointer",{"small-bar":"small"===e.size}]),ref:"cursorElement",style:R(e.getCursorStyle)},He,6)],4)],2)}],["__scopeId","data-v-18925ba6"]]),Re=[["#fcc02e","#f67c01","#e64a19","#d81b43","#8e24aa","#512da7","#1f87e8","#008781","#05a045"],["#fed835","#fb8c00","#f5511e","#eb1d4e","#9c28b1","#5d35b0","#2097f3","#029688","#4cb050"],["#ffeb3c","#ffa727","#fe5722","#eb4165","#aa47bc","#673bb7","#42a5f6","#26a59a","#83c683"],["#fff176","#ffb74e","#ff8a66","#f1627e","#b968c7","#7986cc","#64b5f6","#80cbc4","#a5d6a7"],["#fff59c","#ffcc80","#ffab91","#fb879e","#cf93d9","#9ea8db","#90caf8","#b2dfdc","#c8e6ca"],["transparent","#ffffff","#dedede","#a9a9a9","#4b4b4b","#353535","#212121","#000000","advance"]],Be=b({name:"Palette",emits:["change"],setup:(e,{emit:t})=>({palettes:Re,computedBgStyle:e=>"transparent"===e?e:"advance"===e?{}:{background:G(e).toRgbString()},onColorChange:e=>{t("change",e)}})}),Pe={class:"vc-compact"},Ve=["onClick"];const Oe=_e(Be,[["render",function(e,t,o,a,n,r){return _(),w("div",Pe,[(_(!0),w(B,null,P(e.palettes,((t,o)=>(_(),w("div",{key:o,class:"vc-compact__row"},[(_(!0),w(B,null,P(t,((t,o)=>(_(),w("div",{key:o,class:"vc-compact__color-cube--wrap",onClick:o=>e.onColorChange(t)},[H("div",{class:A(["vc-compact__color_cube",{advance:"advance"===t,transparent:"transparent"===t}]),style:R(e.computedBgStyle(t))},null,6)],8,Ve)))),128))])))),128))])}],["__scopeId","data-v-b969fd48"]]),xe=b({name:"Board",props:{color:z.instanceOf(ye),round:z.bool.def(!1),hide:z.bool.def(!0)},emits:["change"],setup(e,{emit:t}){var o,a,n;const r=d(),l={h:(null==(o=e.color)?void 0:o.hue)||0,s:1,v:1},s=new ye(l).toHexString(),i=y({hueColor:s,saturation:(null==(a=e.color)?void 0:a.saturation)||0,brightness:(null==(n=e.color)?void 0:n.brightness)||0}),c=f(0),u=f(0),h=f(),g=f(),p=m((()=>({top:c.value+"px",left:u.value+"px"}))),v=()=>{if(r){const e=r.vnode.el;u.value=i.saturation*(null==e?void 0:e.clientWidth),c.value=(1-i.brightness)*(null==e?void 0:e.clientHeight)}},C=e=>{if(r){const o=r.vnode.el,a=null==o?void 0:o.getBoundingClientRect();let n=e.clientX-a.left,l=e.clientY-a.top;n=Se(n,0,a.width),l=Se(l,0,a.height);const s=n/a.width,d=Se(-l/a.height+1,0,1);u.value=n,c.value=l,i.saturation=s,i.brightness=d,t("change",s,d)}};return se((()=>{r&&r.vnode.el&&h.value&&(F.triggerDragEvent(h.value,{drag:e=>{C(e)},end:e=>{C(e)}}),v())})),ie((()=>e.color),(e=>{Z(i,{hueColor:new ye({h:e.hue,s:1,v:1}).toHexString(),saturation:e.saturation,brightness:e.brightness}),v()}),{deep:!0}),{state:i,cursorElement:h,getCursorStyle:p,onClickBoard:e=>{e.target!==g.value&&C(e)}}}}),Ke=e=>(T("data-v-63803390"),e=e(),$(),e),Ne=Ke((()=>H("div",{class:"vc-saturation__white"},null,-1))),Ee=Ke((()=>H("div",{class:"vc-saturation__black"},null,-1))),Ie=[Ke((()=>H("div",null,null,-1)))];const Le=_e(xe,[["render",function(e,t,o,a,n,r){return _(),w("div",{ref:"boardElement",class:A(["vc-saturation",{"vc-saturation__chrome":e.round,"vc-saturation__hidden":e.hide}]),style:R({backgroundColor:e.state.hueColor}),onClick:t[0]||(t[0]=(...t)=>e.onClickBoard&&e.onClickBoard(...t))},[Ne,Ee,H("div",{class:"vc-saturation__cursor",ref:"cursorElement",style:R(e.getCursorStyle)},Ie,4)],6)}],["__scopeId","data-v-63803390"]]),Me=b({name:"Hue",props:{color:z.instanceOf(ye),size:z.oneOf(["small","default"]).def("default")},emits:["change"],setup(e,{emit:t}){const o=f(null),a=f(null);let n=e.color||new ye;const r=y({hue:n.hue||0});u((()=>e.color),(e=>{e&&(n=e,Z(r,{hue:n.hue}))}),{deep:!0});const l=()=>{if(o.value&&a.value){const e=o.value.getBoundingClientRect(),t=a.value.offsetWidth;return 360===r.hue?e.width-t/2:r.hue%360*(e.width-t)/360+t/2}return 0},s=m((()=>({left:l()+"px",top:0}))),i=e=>{if(e.stopPropagation(),o.value&&a.value){const l=o.value.getBoundingClientRect(),s=a.value.offsetWidth;let i=e.clientX-l.left;i=Math.min(i,l.width-s/2),i=Math.max(s/2,i);const c=Math.round((i-s/2)/(l.width-s)*360);n.hue=c,r.hue=c,t("change",c)}};return se((()=>{const e={drag:e=>{i(e)},end:e=>{i(e)}};o.value&&a.value&&F.triggerDragEvent(o.value,e)})),{barElement:o,cursorElement:a,getCursorStyle:s,onClickSider:e=>{e.target!==o.value&&i(e)}}}}),We=[(e=>(T("data-v-5c4cae5b"),e=e(),$(),e))((()=>H("div",{class:"vc-hue-slider__bar-handle"},null,-1)))];const je=_e(Me,[["render",function(e,t,o,a,n,r){return _(),w("div",{class:A(["vc-hue-slider",{"small-slider":"small"===e.size}])},[H("div",{ref:"barElement",class:"vc-hue-slider__bar",onClick:t[0]||(t[0]=(...t)=>e.onClickSider&&e.onClickSider(...t))},[H("div",{class:A(["vc-hue-slider__bar-pointer",{"small-bar":"small"===e.size}]),ref:"cursorElement",style:R(e.getCursorStyle)},We,6)],512)],2)}],["__scopeId","data-v-5c4cae5b"]]),De=b({name:"Lightness",props:{color:z.instanceOf(ye),size:z.oneOf(["small","default"]).def("default")},emits:["change"],setup(e,{emit:t}){const o=f(null),a=f(null);let n=e.color||new ye;const[r,l,s]=n.HSL,i=y({hue:r,saturation:l,lightness:s});u((()=>e.color),(e=>{if(e){n=e;const[t,o,a]=n.HSL;Z(i,{hue:t,saturation:o,lightness:a})}}),{deep:!0});const c=m((()=>{const e=G({h:i.hue,s:i.saturation,l:.8}).toPercentageRgbString(),t=G({h:i.hue,s:i.saturation,l:.6}).toPercentageRgbString(),o=G({h:i.hue,s:i.saturation,l:.4}).toPercentageRgbString(),a=G({h:i.hue,s:i.saturation,l:.2}).toPercentageRgbString();return{background:[`-webkit-linear-gradient(left, rgb(255, 255, 255), ${e}, ${t}, ${o}, ${a}, rgb(0, 0, 0))`,`-moz-linear-gradient(left, rgb(255, 255, 255), ${e}, ${t}, ${o}, ${a}, rgb(0, 0, 0))`,`-ms-linear-gradient(left, rgb(255, 255, 255), ${e}, ${t}, ${o}, ${a}, rgb(0, 0, 0))`]}})),d=()=>{if(o.value&&a.value){const e=i.lightness,t=o.value.getBoundingClientRect(),n=a.value.offsetWidth;return(1-e)*(t.width-n)+n/2}return 0},h=m((()=>({left:d()+"px",top:0}))),g=e=>{if(e.stopPropagation(),o.value&&a.value){const r=o.value.getBoundingClientRect(),l=a.value.offsetWidth;let s=e.clientX-r.left;s=Math.max(l/2,s),s=Math.min(s,r.width-l/2);const i=1-(s-l/2)/(r.width-l);n.lightness=i,t("change",i)}};return se((()=>{const e={drag:e=>{g(e)},end:e=>{g(e)}};o.value&&a.value&&F.triggerDragEvent(o.value,e)})),{barElement:o,cursorElement:a,getCursorStyle:h,getBackgroundStyle:c,onClickSider:e=>{e.target!==o.value&&g(e)}}}}),Te=[(e=>(T("data-v-6156acb7"),e=e(),$(),e))((()=>H("div",{class:"vc-lightness-slider__bar-handle"},null,-1)))];const $e=_e(De,[["render",function(e,t,o,a,n,r){return _(),w("div",{class:A(["vc-lightness-slider",{"small-slider":"small"===e.size}])},[H("div",{ref:"barElement",class:"vc-lightness-slider__bar",style:R(e.getBackgroundStyle),onClick:t[0]||(t[0]=(...t)=>e.onClickSider&&e.onClickSider(...t))},[H("div",{class:A(["vc-lightness-slider__bar-pointer",{"small-bar":"small"===e.size}]),ref:"cursorElement",style:R(e.getCursorStyle)},Te,6)],4)],2)}],["__scopeId","data-v-6156acb7"]]),ze=b({name:"History",props:{colors:z.arrayOf(String).def((()=>[])),round:z.bool.def(!1)},emits:["change"],setup:(e,{emit:t})=>({onColorSelect:e=>{t("change",e)}})}),Ge={key:0,class:"vc-colorPicker__record"},Fe={class:"color-list"},qe=["onClick"];const Je=_e(ze,[["render",function(e,t,o,a,n,r){return e.colors&&e.colors.length>0?(_(),w("div",Ge,[H("div",Fe,[(_(!0),w(B,null,P(e.colors,((t,o)=>(_(),w("div",{key:o,class:A(["color-item","transparent",{"color-item__round":e.round}]),onClick:o=>e.onColorSelect(t)},[H("div",{class:"color-item__display",style:R({backgroundColor:t})},null,4)],10,qe)))),128))])])):V("",!0)}],["__scopeId","data-v-7e6b67ca"]]),Xe=b({name:"Display",props:{color:z.instanceOf(ye),disableAlpha:z.bool.def(!1)},emits:["update:color","change"],setup(e,{emit:t}){var o,a,n;const r=y({color:e.color,hex:null==(o=e.color)?void 0:o.hex,alpha:(null==(a=e.color)?void 0:a.alpha)+"%",previewBgColor:null==(n=e.color)?void 0:n.toRgbString()}),l=m((()=>({background:r.previewBgColor}))),s=oe((e=>{if(!e.target.value)return;const o=parseInt(e.target.value.replace("%",""));!isNaN(o)&&r.color&&(r.color.alpha=o),t("update:color",r.color),t("change",r.color)}),300),i=oe((e=>{if(!e.target.value)return;const o=e.target.value.replace("#","");G(o).isValid()&&r.color&&(r.color.hex=o),t("update:color",r.color),t("change",r.color)}),300);return ie((()=>e.color),(e=>{e&&(r.color=e,r.alpha=r.color.alpha+"%",r.hex=r.color.hex)}),{deep:!0}),ie((()=>r.color),(()=>{r.color&&(r.previewBgColor=r.color.toRgbString())}),{deep:!0}),{state:r,getBgColorStyle:l,onAlphaBlur:s,onInputChange:i}}}),Ze={class:"vc-display"},Ue={class:"vc-current-color vc-transparent"},Ye={class:"vc-color-input"},Qe=["value"],et={key:0,class:"vc-alpha-input"},tt=["value"];const ot=_e(Xe,[["render",function(e,t,o,a,n,r){return _(),w("div",Ze,[H("div",Ue,[H("div",{class:"color-cube",style:R(e.getBgColorStyle)},null,4)]),H("div",Ye,[H("input",{value:e.state.hex,onInput:t[0]||(t[0]=(...t)=>e.onInputChange&&e.onInputChange(...t))},null,40,Qe)]),e.disableAlpha?V("",!0):(_(),w("div",et,[H("input",{class:"vc-alpha-input__inner",value:e.state.alpha,onInput:t[1]||(t[1]=(...t)=>e.onAlphaBlur&&e.onAlphaBlur(...t))},null,40,tt)]))])}],["__scopeId","data-v-ffdc53e2"]]),at=b({name:"FkColorPicker",components:{Display:ot,Alpha:Ae,Palette:Oe,Board:Le,Hue:je,Lightness:$e,History:Je},props:{color:z.instanceOf(ye),disableHistory:z.bool.def(!1),roundHistory:z.bool.def(!1),disableAlpha:z.bool.def(!1)},emits:["update:color","change","advanceChange"],setup(e,{emit:t}){const o=e.color||new ye,a=y({color:o,hex:o.toHexString(),rgb:o.toRgbString()}),n=f(!1),r=m((()=>({background:a.rgb}))),l=ge(ke,[],{}),s=oe((()=>{if(e.disableHistory)return;const t=a.color.toRgbString();if(l.value=l.value.filter((e=>!G.equals(e,t))),!l.value.includes(t)){for(;l.value.length>8;)l.value.pop();l.value.unshift(t)}}),500);return ie((()=>e.color),(e=>{e&&(a.color=e)}),{deep:!0}),ie((()=>a.color),(()=>{a.hex=a.color.hex,a.rgb=a.color.toRgbString(),s(),t("update:color",a.color),t("change",a.color)}),{deep:!0}),{state:a,advancePanelShow:n,onBack:()=>{n.value=!1,t("advanceChange",!1)},onCompactChange:e=>{"advance"===e?(n.value=!0,t("advanceChange",!0)):(a.color.hex=e,t("advanceChange",!1))},onAlphaChange:e=>{a.color.alpha=e},onHueChange:e=>{a.color.hue=e},onBoardChange:(e,t)=>{a.color.saturation=e,a.color.brightness=t},onLightChange:e=>{a.color.lightness=e},onInputChange:e=>{const t=e.target.value.replace("#","");G(t).isValid()&&(a.color.hex=t)},previewStyle:r,historyColors:l}}}),nt={class:"vc-fk-colorPicker"},rt={class:"vc-fk-colorPicker__inner"},lt={class:"vc-fk-colorPicker__header"},st=[(e=>(T("data-v-592a5ec3"),e=e(),$(),e))((()=>H("div",{class:"back"},null,-1)))];const it=_e(at,[["render",function(e,t,o,a,n,r){const l=O("Palette"),s=O("Board"),i=O("Hue"),c=O("Lightness"),u=O("Alpha"),d=O("Display"),h=O("History");return _(),w("div",nt,[H("div",rt,[H("div",lt,[e.advancePanelShow?(_(),w("span",{key:0,style:{cursor:"pointer"},onClick:t[0]||(t[0]=(...t)=>e.onBack&&e.onBack(...t))},st)):V("",!0)]),e.advancePanelShow?V("",!0):(_(),x(l,{key:0,onChange:e.onCompactChange},null,8,["onChange"])),e.advancePanelShow?(_(),x(s,{key:1,color:e.state.color,onChange:e.onBoardChange},null,8,["color","onChange"])):V("",!0),e.advancePanelShow?(_(),x(i,{key:2,color:e.state.color,onChange:e.onHueChange},null,8,["color","onChange"])):V("",!0),e.advancePanelShow?V("",!0):(_(),x(c,{key:3,color:e.state.color,onChange:e.onLightChange},null,8,["color","onChange"])),e.disableAlpha?V("",!0):(_(),x(u,{key:4,color:e.state.color,onChange:e.onAlphaChange},null,8,["color","onChange"])),K(d,{color:e.state.color,"disable-alpha":e.disableAlpha},null,8,["color","disable-alpha"]),e.disableHistory?V("",!0):(_(),x(h,{key:5,round:e.roundHistory,colors:e.historyColors,onChange:e.onCompactChange},null,8,["round","colors","onChange"]))])])}],["__scopeId","data-v-592a5ec3"]]),ct=b({name:"ChromeColorPicker",components:{Display:ot,Alpha:Ae,Board:Le,Hue:je,History:Je},props:{color:z.instanceOf(ye),disableHistory:z.bool.def(!1),roundHistory:z.bool.def(!1),disableAlpha:z.bool.def(!1)},emits:["update:color","change"],setup(e,{emit:t}){const o=e.color||new ye,a=y({color:o,hex:o.toHexString(),rgb:o.toRgbString()}),n=m((()=>({background:a.rgb}))),r=ge(ke,[],{}),l=oe((()=>{if(e.disableHistory)return;const t=a.color.toRgbString();if(r.value=r.value.filter((e=>!G.equals(e,t))),!r.value.includes(t)){for(;r.value.length>8;)r.value.pop();r.value.unshift(t)}}),500);return ie((()=>e.color),(e=>{e&&(a.color=e)}),{deep:!0}),ie((()=>a.color),(()=>{a.hex=a.color.hex,a.rgb=a.color.toRgbString(),l(),t("update:color",a.color),t("change",a.color)}),{deep:!0}),{state:a,previewStyle:n,historyColors:r,onAlphaChange:e=>{a.color.alpha=e},onHueChange:e=>{a.color.hue=e},onBoardChange:(e,t)=>{a.color.saturation=e,a.color.brightness=t},onCompactChange:e=>{"advance"!==e&&(a.color.hex=e)}}}}),ut={class:"vc-chrome-colorPicker"},dt={class:"vc-chrome-colorPicker-body"},ht={class:"chrome-controls"},gt={class:"chrome-color-wrap transparent"},pt={class:"chrome-sliders"};const vt=_e(ct,[["render",function(e,t,o,a,n,r){const l=O("Board"),s=O("Hue"),i=O("Alpha"),c=O("Display"),u=O("History");return _(),w("div",ut,[K(l,{round:!0,hide:!1,color:e.state.color,onChange:e.onBoardChange},null,8,["color","onChange"]),H("div",dt,[H("div",ht,[H("div",gt,[H("div",{class:"current-color",style:R(e.previewStyle)},null,4)]),H("div",pt,[K(s,{size:"small",color:e.state.color,onChange:e.onHueChange},null,8,["color","onChange"]),e.disableAlpha?V("",!0):(_(),x(i,{key:0,size:"small",color:e.state.color,onChange:e.onAlphaChange},null,8,["color","onChange"]))])]),K(c,{color:e.state.color,"disable-alpha":e.disableAlpha},null,8,["color","disable-alpha"]),e.disableHistory?V("",!0):(_(),x(u,{key:0,round:e.roundHistory,colors:e.historyColors,onChange:e.onCompactChange},null,8,["round","colors","onChange"]))])])}],["__scopeId","data-v-61d7303b"]]),Ct="Vue3ColorPickerProvider",ft=b({name:"GradientColorPicker",components:{Angle:q,Display:ot,Alpha:Ae,Palette:Oe,Board:Le,Hue:je,Lightness:$e,History:Je},props:{startColor:z.instanceOf(ye).isRequired,endColor:z.instanceOf(ye).isRequired,startColorStop:z.number.def(0),endColorStop:z.number.def(100),angle:z.number.def(0),disableHistory:z.bool.def(!1),roundHistory:z.bool.def(!1),disableAlpha:z.bool.def(!1)},emits:["update:startColor","update:endColor","update:angle","update:startColorStop","update:endColorStop","startColorChange","endColorChange","advanceChange","angleChange","startColorStopChange","endColorStopChange"],setup(e,{emit:t}){const o=y({startActive:!0,startColor:e.startColor,endColor:e.endColor,startColorStop:e.startColorStop,endColorStop:e.endColorStop,angle:e.angle,startColorRgba:e.startColor.toRgbString(),endColorRgba:e.endColor.toRgbString()}),a=k(Ct),n=f(!1),r=f(),l=f(),s=f();u((()=>[e.startColor,e.endColor,e.angle]),(e=>{o.startColor=e[0],o.endColor=e[1],o.angle=e[2]}));const i=m({get:()=>o.startActive?o.startColor:o.endColor,set:e=>{o.startActive?o.startColor=e:o.endColor=e}}),c=m((()=>{if(s.value&&r.value){const e=o.startColorStop/100,t=s.value.getBoundingClientRect(),a=r.value.offsetWidth;return Math.round(e*(t.width-a)+a/2)}return 0})),d=m((()=>{if(s.value&&l.value){const e=o.endColorStop/100,t=s.value.getBoundingClientRect(),a=l.value.offsetWidth;return Math.round(e*(t.width-a)+a/2)}return 0})),h=m((()=>({background:`linear-gradient(${o.angle}deg, ${o.startColorRgba} ${o.startColorStop}%, ${o.endColorRgba} ${o.endColorStop}%)`}))),g=e=>{var a;if(o.startActive=!0,s.value&&r.value){const n=null==(a=s.value)?void 0:a.getBoundingClientRect();let l=e.clientX-n.left;l=Math.max(r.value.offsetWidth/2,l),l=Math.min(l,n.width-r.value.offsetWidth/2),o.startColorStop=Math.round((l-r.value.offsetWidth/2)/(n.width-r.value.offsetWidth)*100),t("update:startColorStop",o.startColorStop),t("startColorStopChange",o.startColorStop)}},p=e=>{var a;if(o.startActive=!1,s.value&&l.value){const n=null==(a=s.value)?void 0:a.getBoundingClientRect();let r=e.clientX-n.left;r=Math.max(l.value.offsetWidth/2,r),r=Math.min(r,n.width-l.value.offsetWidth/2),o.endColorStop=Math.round((r-l.value.offsetWidth/2)/(n.width-l.value.offsetWidth)*100),t("update:endColorStop",o.endColorStop),t("endColorStopChange",o.endColorStop)}},v=()=>{o.startActive?(t("update:startColor",o.startColor),t("startColorChange",o.startColor)):(t("update:endColor",o.endColor),t("endColorChange",o.endColor))},C=ge(ke,[],{}),b=oe((()=>{if(e.disableHistory)return;const t=i.value.toRgbString();if(C.value=C.value.filter((e=>!G.equals(e,t))),!C.value.includes(t)){for(;C.value.length>8;)C.value.pop();C.value.unshift(t)}}),500);return se((()=>{l.value&&r.value&&(F.triggerDragEvent(l.value,{drag:e=>{p(e)},end:e=>{p(e)}}),F.triggerDragEvent(r.value,{drag:e=>{g(e)},end:e=>{g(e)}}))})),ie((()=>o.startColor),(e=>{o.startColorRgba=e.toRgbString()}),{deep:!0}),ie((()=>o.endColor),(e=>{o.endColorRgba=e.toRgbString()}),{deep:!0}),ie((()=>i.value),(()=>{b()}),{deep:!0}),{startGradientRef:r,stopGradientRef:l,colorRangeRef:s,state:o,currentColor:i,getStartColorLeft:c,getEndColorLeft:d,gradientBg:h,advancePanelShow:n,onDegreeBlur:e=>{const a=e.target,n=parseInt(a.value.replace("°",""));isNaN(n)||(o.angle=n%360),t("update:angle",o.angle),t("angleChange",o.angle)},onCompactChange:e=>{"advance"===e?(n.value=!0,t("advanceChange",!0)):(i.value.hex=e,t("advanceChange",!1)),v()},onAlphaChange:e=>{i.value.alpha=e,v()},onHueChange:e=>{i.value.hue=e,v()},onBoardChange:(e,t)=>{i.value.saturation=e,i.value.brightness=t,v()},onLightChange:e=>{i.value.lightness=e,v()},historyColors:C,onBack:()=>{n.value=!1,t("advanceChange",!1)},onDegreeChange:e=>{o.angle=e,t("update:angle",o.angle),t("angleChange",o.angle)},onDisplayChange:()=>{v()},lang:null==a?void 0:a.lang}}}),bt=e=>(T("data-v-46339c64"),e=e(),$(),e),yt={class:"vc-gradient-picker"},mt={class:"vc-gradient-picker__header"},St=[bt((()=>H("div",{class:"back"},null,-1)))],kt={class:"vc-gradient-picker__body"},_t={class:"vc-color-range",ref:"colorRangeRef"},wt={class:"vc-color-range__container"},Ht={class:"vc-gradient__stop__container"},At=["title"],Rt=[bt((()=>H("span",{class:"vc-gradient__stop--inner"},null,-1)))],Bt=["title"],Pt=[bt((()=>H("span",{class:"vc-gradient__stop--inner"},null,-1)))],Vt={class:"vc-picker-degree-input vc-degree-input"},Ot={class:"vc-degree-input__control"},xt=["value"],Kt={class:"vc-degree-input__panel"},Nt={class:"vc-degree-input__disk"};const Et=_e(ft,[["render",function(e,t,o,a,n,r){const l=O("Angle"),s=O("Palette"),i=O("Board"),c=O("Hue"),u=O("Lightness"),d=O("Alpha"),h=O("Display"),g=O("History");return _(),w("div",yt,[N(H("div",mt,[H("span",{style:{cursor:"pointer"},onClick:t[0]||(t[0]=(...t)=>e.onBack&&e.onBack(...t))},St)],512),[[E,e.advancePanelShow]]),H("div",kt,[H("div",_t,[H("div",wt,[H("div",{class:"vc-background",style:R(e.gradientBg)},null,4),H("div",Ht,[H("div",{class:A(["vc-gradient__stop",{"vc-gradient__stop--current":e.state.startActive}]),ref:"startGradientRef",title:"ZH-cn"===e.lang?"开始":"Start",style:R({left:e.getStartColorLeft+"px"})},Rt,14,At),H("div",{class:A(["vc-gradient__stop",{"vc-gradient__stop--current":!e.state.startActive}]),ref:"stopGradientRef",title:"ZH-cn"===e.lang?"结束":"End",style:R({left:e.getEndColorLeft+"px"})},Pt,14,Bt)])])],512),H("div",Vt,[H("div",Ot,[H("input",{value:e.state.angle,onBlur:t[1]||(t[1]=(...t)=>e.onDegreeBlur&&e.onDegreeBlur(...t))},null,40,xt)]),H("div",Kt,[H("div",Nt,[K(l,{angle:e.state.angle,"onUpdate:angle":t[2]||(t[2]=t=>e.state.angle=t),size:40,onChange:e.onDegreeChange},null,8,["angle","onChange"])])])])]),e.advancePanelShow?V("",!0):(_(),x(s,{key:0,onChange:e.onCompactChange},null,8,["onChange"])),e.advancePanelShow?(_(),x(i,{key:1,color:e.currentColor,onChange:e.onBoardChange},null,8,["color","onChange"])):V("",!0),e.advancePanelShow?(_(),x(c,{key:2,color:e.currentColor,onChange:e.onHueChange},null,8,["color","onChange"])):V("",!0),e.advancePanelShow?V("",!0):(_(),x(u,{key:3,color:e.currentColor,onChange:e.onLightChange},null,8,["color","onChange"])),e.disableAlpha?V("",!0):(_(),x(d,{key:4,color:e.currentColor,onChange:e.onAlphaChange},null,8,["color","onChange"])),K(h,{color:e.currentColor,"disable-alpha":e.disableAlpha,onChange:e.onDisplayChange},null,8,["color","disable-alpha","onChange"]),e.disableHistory?V("",!0):(_(),x(g,{key:5,round:e.roundHistory,colors:e.historyColors,onChange:e.onCompactChange},null,8,["round","colors","onChange"]))])}],["__scopeId","data-v-46339c64"]]),It=b({name:"WrapContainer",props:{showTab:z.bool.def(!1),activeKey:z.oneOf(["pure","gradient"]).def("pure")},emits:["update:activeKey","change"],setup(e,{emit:t}){const o=y({activeKey:e.activeKey}),a=k(Ct);return ie((()=>e.activeKey),(e=>{o.activeKey=e})),{state:o,onActiveKeyChange:e=>{o.activeKey=e,t("update:activeKey",e),t("change",e)},lang:null==a?void 0:a.lang}}}),Lt={class:"vc-colorpicker"},Mt={class:"vc-colorpicker--container"},Wt={key:0,class:"vc-colorpicker--tabs"},jt={class:"vc-colorpicker--tabs__inner"},Dt={class:"vc-btn__content"},Tt={class:"vc-btn__content"};const $t=_e(It,[["render",function(e,t,o,a,n,r){return _(),w("div",Lt,[H("div",Mt,[e.showTab?(_(),w("div",Wt,[H("div",jt,[H("div",{class:A(["vc-colorpicker--tabs__btn",{"vc-btn-active":"pure"===e.state.activeKey}]),onClick:t[0]||(t[0]=t=>e.onActiveKeyChange("pure"))},[H("button",null,[H("div",Dt,I("ZH-cn"===e.lang?"纯色":"Pure"),1)])],2),H("div",{class:A(["vc-colorpicker--tabs__btn",{"vc-btn-active":"gradient"===e.state.activeKey}]),onClick:t[1]||(t[1]=t=>e.onActiveKeyChange("gradient"))},[H("button",null,[H("div",Tt,I("ZH-cn"===e.lang?"渐变色":"Gradient"),1)])],2),H("div",{class:"vc-colorpicker--tabs__bg",style:R({width:"50%",left:`calc(${"gradient"===e.state.activeKey?50:0}%)`})},null,4)])])):V("",!0),L(e.$slots,"default",{},void 0,!0)])])}],["__scopeId","data-v-4afdf3bb"]]),zt={isWidget:z.bool.def(!1),pickerType:z.oneOf(["fk","chrome"]).def("fk"),shape:z.oneOf(["circle","square"]).def("square"),pureColor:{type:[String,Object],default:"#000000"},gradientColor:z.string.def("linear-gradient(90deg, rgba(255, 255, 255, 1) 0%, rgba(0, 0, 0, 1) 100%)"),format:{type:String,default:"rgb"},disableAlpha:z.bool.def(!1),disableHistory:z.bool.def(!1),roundHistory:z.bool.def(!1),useType:z.oneOf(["pure","gradient","both"]).def("pure"),activeKey:z.oneOf(["pure","gradient"]).def("pure"),lang:{type:String,default:"ZH-cn"},zIndex:z.number.def(9999)};const Gt=_e(b({name:"ColorPicker",components:{FkColorPicker:it,ChromeColorPicker:vt,GradientColorPicker:Et,WrapContainer:$t},inheritAttrs:!1,props:zt,emits:["update:pureColor","pureColorChange","update:gradientColor","gradientColorChange","update:activeKey","activeKeyChange"],setup(e,{emit:t}){const o=y({pureColor:e.pureColor||"",activeKey:"gradient"===e.useType?"gradient":e.activeKey,isAdvanceMode:!1});S(Ct,{lang:m((()=>e.lang||"ZH-cn"))});const a=new ye(o.pureColor),n=f(a),r=new ye("#000"),l=new ye("#000"),s=y({startColor:r,endColor:l,startColorStop:0,endColorStop:100,angle:0,gradientColor:e.gradientColor}),i=f(!1),c=f(null),u=f(null),d=m((()=>({background:"gradient"!==o.activeKey?G(o.pureColor).toRgbString():s.gradientColor}))),h=m((()=>"gradient"===o.activeKey?Et.name:"fk"===e.pickerType?it.name:vt.name)),g=m((()=>"gradient"===o.activeKey?{startColor:s.startColor,endColor:s.endColor,onStartColorChange:e=>{s.startColor=e,C()},onEndColorChange:e=>{s.endColor=e,C()},angle:s.angle,startColorStop:s.startColorStop,endColorStop:s.endColorStop,onStartColorStopChange:e=>{s.startColorStop=e,C()},onEndColorStopChange:e=>{s.endColorStop=e,C()},onAngleChange:e=>{s.angle=e,C()},onAdvanceChange:e=>{o.isAdvanceMode=e}}:{disableAlpha:e.disableAlpha,disableHistory:e.disableHistory,roundHistory:e.roundHistory,color:n.value,onChange:k,onAdvanceChange:p})),p=e=>{o.isAdvanceMode=e},v=()=>{var e,t,o,a;try{const[n]=J(s.gradientColor);if(n&&"linear-gradient"===n.type&&"angular"===(null==(e=n.orientation)?void 0:e.type)&&n.colorStops.length>=2){const e=n.colorStops[0],r=n.colorStops[1];s.startColorStop=Number(null==(t=e.length)?void 0:t.value)||0,s.endColorStop=Number(null==(o=r.length)?void 0:o.value)||0,s.angle=Number(null==(a=n.orientation)?void 0:a.value)||0;const[l,i,c,u]=e.value,[d,h,g,p]=r.value;s.startColor=new ye({r:Number(l),g:Number(i),b:Number(c),a:Number(u)}),s.endColor=new ye({r:Number(d),g:Number(h),b:Number(g),a:Number(p)})}}catch(n){}},C=oe((()=>{const e=b();try{s.gradientColor=X(e),t("update:gradientColor",s.gradientColor),t("gradientColorChange",s.gradientColor)}catch(o){}}),300),b=()=>{const e=[],t=s.startColor.RGB.map((e=>e.toString())),o=s.endColor.RGB.map((e=>e.toString()));return e.push({type:"linear-gradient",orientation:{type:"angular",value:s.angle+""},colorStops:[{type:"rgba",value:[t[0],t[1],t[2],t[3]],length:{value:s.startColorStop+"",type:"%"}},{type:"rgba",value:[o[0],o[1],o[2],o[3]],length:{value:s.endColorStop+"",type:"%"}}]}),e},k=t=>{n.value=t,o.pureColor=t.toString(e.format),_()},_=oe((()=>{t("update:pureColor",o.pureColor),t("pureColorChange",o.pureColor)}),300);de(u,(()=>{i.value=!1}));return se((()=>{v(),(()=>{if(c.value&&u.value){const e=c.value.offsetParent,t=c.value.offsetTop||(null==e?void 0:e.offsetTop),o=window.innerHeight-(t-window.pageYOffset)-c.value.offsetHeight;U(c.value,u.value,{placement:"auto",modifiers:[{name:"flip",options:{boundary:o>500?"clippingParents":c.value,fallbackPlacements:["bottom","left"]}}]})}})()})),ie((()=>e.gradientColor),(e=>{e!=s.gradientColor&&(s.gradientColor=e)})),ie((()=>s.gradientColor),(()=>{v()})),ie((()=>e.activeKey),(e=>{o.activeKey=e})),ie((()=>e.useType),(e=>{"gradient"!==o.activeKey&&"gradient"===e?o.activeKey="gradient":o.activeKey="pure"})),ie((()=>e.pureColor),(e=>{G.equals(e,o.pureColor)||(o.pureColor=e,n.value=new ye(e),_())}),{deep:!0}),{colorCubeRef:c,pickerRef:u,showPicker:i,colorInstance:n,getBgColorStyle:d,onColorChange:k,onShowPicker:()=>{i.value=!0},onActiveKeyChange:e=>{o.activeKey=e,t("update:activeKey",e),t("activeKeyChange",e)},getComponentName:h,getBindArgs:g,state:o}}}),[["render",function(e,t,o,a,n,r){const l=O("WrapContainer");return _(),w(B,null,[e.isWidget?(_(),x(l,{key:0,"active-key":e.state.activeKey,"onUpdate:active-key":t[0]||(t[0]=t=>e.state.activeKey=t),"show-tab":"both"===e.useType,onChange:e.onActiveKeyChange,style:R({zIndex:e.zIndex})},{default:M((()=>[(_(),x(W(e.getComponentName),j({key:e.getComponentName},e.getBindArgs),null,16))])),_:1},8,["active-key","show-tab","onChange","style"])):V("",!0),e.isWidget?V("",!0):(_(),w(B,{key:1},[H("div",{class:A(["vc-color-wrap transparent",{round:"circle"===e.shape}]),ref:"colorCubeRef"},[H("div",{class:"current-color",style:R(e.getBgColorStyle),onClick:t[1]||(t[1]=(...t)=>e.onShowPicker&&e.onShowPicker(...t))},null,4)],2),(_(),x(D,{to:"body"},[N(H("div",{ref:"pickerRef",style:R({zIndex:e.zIndex})},[e.showPicker?(_(),x(l,{key:0,"show-tab":"both"===e.useType&&!e.state.isAdvanceMode,"active-key":e.state.activeKey,"onUpdate:active-key":t[2]||(t[2]=t=>e.state.activeKey=t),onChange:e.onActiveKeyChange},{default:M((()=>[(_(),x(W(e.getComponentName),j({key:e.getComponentName},e.getBindArgs),null,16))])),_:1},8,["show-tab","active-key","onChange"])):V("",!0)],4),[[E,e.showPicker]])]))],64))],64)}],["__scopeId","data-v-730ef6cd"]]);export{Gt as o};
