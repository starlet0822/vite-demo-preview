import{s as e,F as s,V as a,n as o,o as r,l as t,_ as l,$ as n}from"./vant-e0b5fbdf.js";import{_ as m}from"./index-eb7feec2.js";import{_ as i}from"./index-62ae0006.js";import{l as c}from"./index-2eb2a530.js";import{_ as d}from"./plugin-vue_export-helper-893979e1.js";import{r as p,a as u,S as f,s as v,v as b,E as j,D as h,u as w,H as g,J as _,I as y,G as k,P,aR as V,aQ as x,l as C,B as $,F as I}from"./@vue-52de1c01.js";import{u as S}from"./vue-router-35312974.js";import"./@vant-0004063d.js";/* empty css                      */import"./amfe-flexible-385c80ea.js";import"./js-cookie-aaf6027b.js";import"./vuex-c830e64e.js";import"./@vueuse-feee2333.js";import"./lodash-es-133975bb.js";import"./axios-0cd4f164.js";import"./qs-6446231f.js";import"./side-channel-b2edb420.js";import"./get-intrinsic-8aab7bd3.js";import"./has-symbols-1f359e75.js";import"./function-bind-c930bb92.js";import"./has-03e8e28c.js";import"./call-bind-b7e23f7e.js";import"./object-inspect-8ed24658.js";import"./@antv-8a75d63c.js";import"./tslib-546db90a.js";import"./fecha-2b185e5a.js";import"./nprogress-319be66c.js";import"./vue3-hash-calendar-68956731.js";import"./hammerjs-ed6f6a9e.js";import"./mockjs-0ec5bfd5.js";import"./dayjs-f8677b81.js";import"./vite-plugin-mock-fc11b28e.js";import"./path-to-regexp-9b852198.js";const q={class:"submit-btn"};var z=d({__name:"Step1",emits:["change-step"],setup(t,{emit:l}){const n=p(!0),m=p(null),d=p(0),V=u({phone:"",verifyCode:""}),x=u({phone:[{required:!0,message:"手机号码不能为空"},{pattern:/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,message:"手机号码格式不正确"}],verifyCode:[{required:!0,message:"验证码不能为空"},{pattern:/^\d{6}$/,message:"验证码不正确"}]});function C(){m.value||(d.value=60,n.value=!1,m.value=setInterval((()=>{d.value>0&&d.value<=60?d.value--:(n.value=!0,clearInterval(m.value),m.value=null)}),1e3))}const $=s=>{e({type:"success",message:"手机验证成功"}),l("change-step",1)},I=s=>{const{errors:[a]}=s;e(a.message)};return(e,t)=>{const l=i,m=s,p=a,u=o,S=r,z=f("waves");return v(),b(S,{class:"form-wrapper","validate-first":"","show-error":!1,"show-error-message":!1,"submit-on-enter":!1,onSubmit:$,onFailed:I},{default:j((()=>[h(p,{inset:""},{default:j((()=>[h(m,{modelValue:w(V).phone,"onUpdate:modelValue":t[0]||(t[0]=e=>w(V).phone=e),modelModifiers:{trim:!0},name:"phone",center:"",clearable:"",placeholder:"手机号码",autocomplete:"off",rules:w(x).phone},{"left-icon":j((()=>[h(l,{name:"EpIphone","class-name":"mr-12"})])),_:1},8,["modelValue","rules"]),h(m,{modelValue:w(V).verifyCode,"onUpdate:modelValue":t[1]||(t[1]=e=>w(V).verifyCode=e),modelModifiers:{trim:!0},name:"verifyCode",center:"",autocomplete:"off",placeholder:"6位数短信验证码",rules:w(x).verifyCode},{"left-icon":j((()=>[h(l,{name:"EpMessage","class-name":"mr-12"})])),button:j((()=>[g("div",{class:_(w(n)?"active-color":""),onClick:C},y(w(n)?"获取验证码":`${w(d)} 秒后可重新获取`),3)])),_:1},8,["modelValue","rules"])])),_:1}),g("div",q,[k((v(),b(u,{color:w(c),round:!1,block:"","native-type":"submit"},{default:j((()=>[P(" 下一步 ")])),_:1},8,["color"])),[[z]])])])),_:1})}}},[["__scopeId","data-v-c478faa0"]]);const A=(e=>(V("data-v-15123f4f"),e=e(),x(),e))((()=>g("p",{class:"tips"},"密码格式应为 6-20 位数字、字母、符号的任意两种组合）",-1))),F={class:"submit-btn"};var M=d({__name:"Step2",setup(a){const l=S(),n=p(!1),m=p(!1),d=u({newPassword:"",confirmPassword:""}),_=u({newPassword:[{required:!0,message:"新密码不能为空"},{pattern:/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)]|[()])+$)(?!^.*[\u4E00-\u9FA5].*$)([^(0-9a-zA-Z)]|[()]|[a-z]|[A-Z]|[0-9]){6,20}$/,message:"新密码格式不正确"}],confirmPassword:[{required:!0,message:"请再次输入新的登录密码"},{validator:e=>e&&e===d.newPassword,message:"两次输入的密码不一致"}]}),y=s=>{e({type:"success",message:"密码修改成功"}),l.replace("/login")},V=s=>{const{errors:[a]}=s;e(a.message)};return(e,a)=>{const l=i,p=t,u=s,x=o,C=r,$=f("waves");return v(),b(C,{class:"form-wrapper","validate-first":"","show-error":!1,"show-error-message":!1,"submit-on-enter":!1,onSubmit:y,onFailed:V},{default:j((()=>[h(u,{modelValue:w(d).newPassword,"onUpdate:modelValue":a[0]||(a[0]=e=>w(d).newPassword=e),modelModifiers:{trim:!0},name:"newPassword",center:"",clearable:"",border:!1,autocomplete:"off",type:w(n)?"text":"password",placeholder:"请设置6-20位新的登录密码",rules:w(_).newPassword,onClickRightIcon:a[1]||(a[1]=e=>n.value=!w(n))},{"left-icon":j((()=>[h(l,{name:"lock","class-name":"mr-12"})])),"right-icon":j((()=>[h(p,{name:w(n)?"eye-o":"closed-eye"},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),A,h(u,{modelValue:w(d).confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>w(d).confirmPassword=e),modelModifiers:{trim:!0},name:"confirmPassword",center:"",clearable:"",border:!1,autocomplete:"off",type:w(m)?"text":"password",placeholder:"请再次输入新的登录密码",rules:w(_).confirmPassword,onClickRightIcon:a[3]||(a[3]=e=>m.value=!w(m))},{"left-icon":j((()=>[h(l,{name:"lock","class-name":"mr-12"})])),"right-icon":j((()=>[w(m)?(v(),b(p,{key:0,name:"eye-o"})):(v(),b(p,{key:1,name:"closed-eye"}))])),_:1},8,["modelValue","type","rules"]),g("div",F,[k((v(),b(x,{color:w(c),round:!1,block:"","native-type":"submit"},{default:j((()=>[P(" 保 存 ")])),_:1},8,["color"])),[[$]])])])),_:1})}}},[["__scopeId","data-v-15123f4f"]]);const E={class:"step-wrapper"},U=C({name:"reset-password"});var Z=d(Object.assign(U,{setup(e){const s=p(0),a=e=>{s.value=e};return(e,o)=>{const r=m,t=l,i=n;return v(),$("div",null,[h(r),g("div",E,[h(i,{active:w(s)},{default:j((()=>[h(t,null,{default:j((()=>[P("1.验证手机号码")])),_:1}),h(t,null,{default:j((()=>[P("2.设置新密码")])),_:1})])),_:1},8,["active"])]),0===w(s)?(v(),b(z,{key:0,onChangeStep:a})):I("",!0),1===w(s)?(v(),b(M,{key:1})):I("",!0)])}}}),[["__scopeId","data-v-02ec571a"]]);export{Z as default};
