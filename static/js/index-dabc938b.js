import{Z as x,d as b,a as w,_ as ee,w as A,p as _,as as te,at as H,ar as oe,$ as le,B as q,X as z,ce as se,a3 as ne,f,k as v,x as $,F as R,G as U,A as j,z as D,K as P,y as B,c as E,s as M,m as T,q as G,W as L,d5 as ae,g as re,i as ie,al as ue,am as ce}from"./index-5560da19.js";import{_ as C}from"./plugin-vue_export-helper-c27b6911.js";import"./index-462a24ae.js";import{F as K}from"./index-ef67e059.js";/* empty css              */import"./index-b9dd3661.js";import{D as de}from"./index-7fe5bd41.js";import{b as pe,a as me,T as _e}from"./index-e2b6ecb5.js";const[fe,g,ve]=x("cascader"),he={title:String,options:te(),closeable:H,swipeable:H,closeIcon:oe("cross"),showHeader:H,modelValue:le,fieldNames:Object,placeholder:String,activeColor:String};var ye=b({name:fe,props:he,emits:["close","change","finish","clickTab","update:modelValue"],setup(e,{slots:t,emit:c}){const n=w([]),r=w(0),[h,o]=pe(),{text:d,value:i,children:l}=ee({text:"text",value:"value",children:"children"},e.fieldNames),y=(s,a)=>{for(const p of s){if(p[i]===a)return[p];if(p[l]){const u=y(p[l],a);if(u)return[p,...u]}}},V=()=>{const{options:s,modelValue:a}=e;if(a!==void 0){const p=y(s,a);if(p){let u=s;n.value=p.map(m=>{const N={options:u,selected:m},k=u.find(O=>O[i]===m[i]);return k&&(u=k[l]),N}),u&&n.value.push({options:u,selected:null}),q(()=>{r.value=n.value.length-1});return}}n.value=[{options:s,selected:null}]},F=(s,a)=>{if(s.disabled)return;if(n.value[a].selected=s,n.value.length>a+1&&(n.value=n.value.slice(0,a+1)),s[l]){const m={options:s[l],selected:null};n.value[a+1]?n.value[a+1]=m:n.value.push(m),q(()=>{r.value++})}const p=n.value.map(m=>m.selected).filter(Boolean);c("update:modelValue",s[i]);const u={value:s[i],tabIndex:a,selectedOptions:p};c("change",u),s[l]||c("finish",u)},S=()=>c("close"),I=({name:s,title:a})=>c("clickTab",s,a),W=()=>e.showHeader?_("div",{class:g("header")},[_("h2",{class:g("title")},[t.title?t.title():e.title]),e.closeable?_(z,{name:e.closeIcon,class:[g("close-icon"),se],onClick:S},null):null]):null,X=(s,a,p)=>{const{disabled:u}=s,m=!!(a&&s[i]===a[i]),N=s.color||(m?e.activeColor:void 0),k=t.option?t.option({option:s,selected:m}):_("span",null,[s[d]]);return _("li",{ref:m?o(p):void 0,role:"menuitemradio",class:[g("option",{selected:m,disabled:u}),s.className],style:{color:N},tabindex:u?void 0:m?0:-1,"aria-checked":m,"aria-disabled":u||void 0,onClick:()=>F(s,p)},[k,m?_(z,{name:"success",class:g("selected-icon")},null):null])},Z=(s,a,p)=>_("ul",{role:"menu",class:g("options")},[s.map(u=>X(u,a,p))]),J=(s,a)=>{const{options:p,selected:u}=s,m=e.placeholder||ve("select"),N=u?u[d]:m;return _(_e,{title:N,titleClass:g("tab",{unselected:!u})},{default:()=>{var k,O;return[(k=t["options-top"])==null?void 0:k.call(t,{tabIndex:a}),Z(p,u,a),(O=t["options-bottom"])==null?void 0:O.call(t,{tabIndex:a})]}})},Q=()=>_(me,{active:r.value,"onUpdate:active":s=>r.value=s,shrink:!0,animated:!0,class:g("tabs"),color:e.activeColor,swipeable:e.swipeable,onClickTab:I},{default:()=>[n.value.map(J)]}),Y=s=>{const a=s.parentElement;a&&(a.scrollTop=s.offsetTop-(a.offsetHeight-s.offsetHeight)/2)};return V(),A(r,s=>{const a=h.value[s];a&&Y(a)}),A(()=>e.options,V,{deep:!0}),A(()=>e.modelValue,s=>{s!==void 0&&n.value.map(p=>{var u;return(u=p.selected)==null?void 0:u[i]}).includes(s)||V()}),()=>_("div",{class:g()},[W(),Q()])}});const Ve=ne(ye);const $e=b({props:{modelValue:{type:[Array,String,Number,Boolean,Object],default:""},title:{type:String,default:""},name:{type:String,default:""},options:{type:Array,default:()=>[]},columnNum:{type:[Number,String],default:3},gutter:{type:[Number,String],default:10}},emits:["update:modelValue"],setup(e,{emit:t}){return{itemStyle:{flexBasis:`${1/e.columnNum*100}%`,paddingRight:`${e.gutter}px`},onChange:r=>{t("update:modelValue",r.value)}}}}),ge={class:"custom-radio"},be={class:"radio-group"},ke=["onClick"],Ce={class:"radio-item__text"};function Se(e,t,c,n,r,h){return f(),v("div",ge,[$("ul",be,[(f(!0),v(R,null,U(e.options,(o,d)=>(f(),v("li",{key:o.value,class:"radio-item",style:j({...e.itemStyle,marginTop:d>=+e.columnNum?10/37.5+"rem":0})},[$("div",{class:D(["radio-item__content",{"is-selected":e.modelValue===o.value}]),onClick:P(i=>e.onChange(o),["stop"])},[$("div",Ce,B(o.label),1)],10,ke)],4))),128))])])}const we=C($e,[["render",Se],["__scopeId","data-v-1bd70046"]]);const Fe=b({name:"CheckboxField",props:{modelValue:{type:[Array,String,Number,Boolean,Object],default:""},name:{type:String,default:""},title:{type:String,default:""},shape:{type:String,default:"square"},disabled:Boolean,checked:Boolean,checkAll:Boolean,options:{type:Array,default:()=>[]},columnNum:{type:[Number,String],default:3},gutter:{type:[Number,String],default:10}},emits:["update:modelValue"],setup(e,{emit:t}){const c={flexBasis:`${1/e.columnNum*100}%`,paddingRight:`${e.gutter}px`},n=E(()=>{const{checkAll:l,options:y}=e;let V=y;return l&&(V=[{label:"全部",value:"-1"},...V]),V}),r=l=>t("update:modelValue",l),h=l=>{d(l)},o=l=>e.modelValue.indexOf(l.value)!==-1,d=l=>{l.checked=!o(l),i(l)},i=({value:l,checked:y,disabled:V})=>{const{modelValue:F}=e,S=[...F.slice()];if(y)S.push(l);else{const I=S.indexOf(l);I!==-1&&S.splice(I,1)}r(S)};return A(()=>e.modelValue,l=>r(l)),{checkboxs:n,itemStyle:c,isChecked:o,onClick:h}}}),Ne={class:"custom-checkbox"},Pe={class:"checkbox-group"},Te=["onClick"],Be={class:"checkbox-item__text"};function Ie(e,t,c,n,r,h){return f(),v("div",Ne,[$("ul",Pe,[(f(!0),v(R,null,U(e.checkboxs,(o,d)=>(f(),v("li",{key:o.value,class:"checkbox-item",style:j({...e.itemStyle,marginTop:d>=+e.columnNum?10/37.5+"rem":0})},[$("div",{class:D(["checkbox-item__content",{"is-selected":e.isChecked(o)}]),onClick:P(i=>e.onClick(o),["stop"])},[$("div",Be,B(o.label),1)],10,Te)],4))),128))])])}const Oe=C(Fe,[["render",Ie],["__scopeId","data-v-d8693886"]]);const Ae=b({props:{modelValue:{type:[Array,String,Number,Boolean,Object],default:""},name:{type:String,default:""},options:{type:Array,default:()=>[]},columnNum:{type:[Number,String],default:1},gutter:{type:[Number,String],default:10}},emits:["update:modelValue"],setup(e,{emit:t}){return{itemStyle:{flexBasis:`${1/e.columnNum*100}%`},onChange:r=>{t("update:modelValue",r.value)}}}}),Re={class:"custom-cell"},Ue={class:"cell-group"},Ee=["onClick"],He={class:"cell-item__text"};function je(e,t,c,n,r,h){return f(),v("div",Re,[$("ul",Ue,[(f(!0),v(R,null,U(e.options,(o,d)=>(f(),v("li",{key:o.value,class:"cell-item",style:j({...e.itemStyle,marginTop:d>=+e.columnNum?10/37.5+"rem":0})},[$("div",{class:D(["cell-item__content",{"is-selected":e.modelValue==o.value}]),onClick:P(i=>e.onChange(o),["stop"])},[$("div",He,B(o.label),1),M("",!0)],10,Ee)],4))),128))])])}const De=C(Ae,[["render",je],["__scopeId","data-v-762b58d8"]]);const Ke=b({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){return{inputValue:E({get:()=>e.modelValue,set:n=>{t("update:modelValue",n)}})}}}),qe={class:"custom-input"};function ze(e,t,c,n,r,h){const o=K;return f(),v("div",qe,[_(o,T({modelValue:e.inputValue,"onUpdate:modelValue":t[0]||(t[0]=d=>e.inputValue=d),modelModifiers:{trim:!0},autocomplete:"off",clearable:""},e.$attrs),null,16,["modelValue"])])}const Me=C(Ke,[["render",ze],["__scopeId","data-v-585ff044"]]);const Ge=b({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const c=E({get:()=>e.modelValue,set:o=>{t("update:modelValue",o)}}),n=w(!1),r=document.querySelector(".form-wrapper");return{inputValue:c,showPicker:n,teleport:r,onConfirm:({selectedValues:o})=>{const d=o.join("-");t("update:modelValue",d),n.value=!1}}}}),Le={class:"custom-date-picker"};function We(e,t,c,n,r,h){const o=K,d=de,i=L;return f(),v("div",Le,[_(o,T({modelValue:e.inputValue,"onUpdate:modelValue":t[0]||(t[0]=l=>e.inputValue=l),readonly:!0,clearable:""},e.$attrs,{onClick:t[1]||(t[1]=l=>e.showPicker=!0)}),null,16,["modelValue"]),_(i,{show:e.showPicker,"onUpdate:show":t[3]||(t[3]=l=>e.showPicker=l),position:"bottom",teleport:e.teleport,overlay:!0},{default:G(()=>[_(d,{title:"选择时间",onConfirm:e.onConfirm,onCancel:t[2]||(t[2]=l=>e.showPicker=!1)},null,8,["onConfirm"])]),_:1},8,["show","teleport"])])}const Xe=C(Ge,[["render",We],["__scopeId","data-v-6e6dd16e"]]);const Ze=b({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t,attrs:c}){const n=E({get:()=>e.modelValue,set:i=>{t("update:modelValue",i)}}),r=w(!1),h=w(""),o=document.querySelector(".form-wrapper");return{inputValue:n,cascaderValue:h,showPicker:r,teleport:o,onFinish:({selectedOptions:i})=>{const{text:l,value:y}=c.fieldNames||{text:"label",value:"value",children:"children"},V=i.map(F=>F[l]).join("/");t("update:modelValue",V),r.value=!1}}}}),Je={class:"custom-cascader"};function Qe(e,t,c,n,r,h){const o=K,d=Ve,i=L;return f(),v("div",Je,[_(o,T({modelValue:e.inputValue,"onUpdate:modelValue":t[0]||(t[0]=l=>e.inputValue=l),readonly:!0},e.$attrs,{onClick:t[1]||(t[1]=l=>e.showPicker=!0)}),null,16,["modelValue"]),_(i,{show:e.showPicker,"onUpdate:show":t[4]||(t[4]=l=>e.showPicker=l),position:"bottom",teleport:e.teleport,overlay:!0},{default:G(()=>[_(d,T({modelValue:e.cascaderValue,"onUpdate:modelValue":t[2]||(t[2]=l=>e.cascaderValue=l),title:"请选择所在地区"},e.$attrs,{onClose:t[3]||(t[3]=l=>e.showPicker=!1),onFinish:e.onFinish}),null,16,["modelValue","onFinish"])]),_:1},8,["show","teleport"])])}const Ye=C(Ze,[["render",Qe],["__scopeId","data-v-727503ca"]]);const xe=b({name:"FilterSearch",components:{InputField:Me,RadioField:we,CheckboxField:Oe,DateField:Xe,CellField:De,CascaderField:Ye},props:{showHeader:Boolean,formOptions:{type:Object,default:()=>({"label-align":"top","label-width":"6.2em","input-align":"left"})},formItems:{type:Array,default:()=>[]}},emits:["confirm","reset"],setup(e,{emit:t}){const c=d=>{const i={},l=y=>{let V="";return ae(y.value)?[].includes(y.type)?V=[]:V="":V=y.value,V};return e.formItems.forEach(y=>{y.name&&(i[y.name]=l(y))}),{...i}},n={"label-align":"top","label-width":"6.2em","input-align":"left",...e.formOptions},r=w(c()),h=async()=>{r.value=c(),t("reset",r.value),o()},o=()=>{console.log("onConfirm",r.value),t("confirm",r.value)};return{formProps:n,formValues:r,onReset:h,onConfirm:o}}}),et=e=>(ue("data-v-8d5eeac2"),e=e(),ce(),e),tt={class:"form form-wrapper"},ot={key:0,class:"form__header"},lt=et(()=>$("div",{class:"form__header-title"},B("数据筛选"),-1)),st=[lt],nt={class:"form__body"},at={class:"filter__item-title"},rt={class:"form__footer van-safe-area-bottom"};function it(e,t,c,n,r,h){return f(),v("div",tt,[e.showHeader?(f(),v("div",ot,st)):M("",!0),$("div",nt,[(f(!0),v(R,null,U(e.formItems,(o,d)=>(f(),v("div",{key:o.name+d,class:"filter__item"},[$("div",at,B(o.title),1),(f(),re(ie(o.type),T({modelValue:e.formValues[o.name],"onUpdate:modelValue":i=>e.formValues[o.name]=i,title:o.title},o.attrs),null,16,["modelValue","onUpdate:modelValue","title"]))]))),128))]),$("div",rt,[$("div",{class:"filter__reset",onClick:t[0]||(t[0]=P((...o)=>e.onReset&&e.onReset(...o),["stop"]))},"重置"),$("div",{class:"filter__confirm",onClick:t[1]||(t[1]=P((...o)=>e.onConfirm&&e.onConfirm(...o),["stop"]))},"确定")])])}const ht=C(xe,[["render",it],["__scopeId","data-v-8d5eeac2"]]);export{ht as _};
