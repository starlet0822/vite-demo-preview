import{_ as X}from"./index-4a8a8591.js";import{ab as Y,d as z,p as e,cv as ee,ag as te,am as ne,c as R,f as k,k as N,m as ae,u as s,a as d,o as oe,Q as le,g as V,q as f,cN as re,a9 as ie,x as h,J as A,G as se,v as ce,y as B,A as de,F as pe,s as L,M as ue,aa as me}from"./index-2d318566.js";import{B as fe}from"./index-649ab5be.js";import{D as _e,a as ve,L as ge,P as he}from"./index-8a6b92e8.js";import{_ as P}from"./plugin-vue_export-helper-c27b6911.js";import{u as ye}from"./use-id-0b0c73bf.js";/* empty css              */import"./index-434b4cca.js";import{g as xe,_ as Fe}from"./dict-768a9887.js";import{_ as we}from"./index-aad031b4.js";import{S as ke}from"./index-08eb4df6.js";import"./index-f93f27f2.js";import"./use-route-e384b3a3.js";import"./index-f2118f16.js";import"./index-c31337e6.js";import"./use-sync-prop-ref-a7fb8ef7.js";import"./index-d24697aa.js";import"./index-7451b2d1.js";import"./index-5561415e.js";const[Ee,C]=Y("empty"),De={image:te("default"),imageSize:[Number,String,Array],description:String};var Me=z({name:Ee,props:De,setup(p,{slots:i}){const u=()=>{const l=i.description?i.description():p.description;if(l)return e("p",{class:C("description")},[l])},F=()=>{if(i.default)return e("div",{class:C("bottom")},[i.default()])},y=ye(),n=l=>`${y}-${l}`,t=l=>`url(#${n(l)})`,a=(l,m,I)=>e("stop",{"stop-color":l,offset:`${m}%`,"stop-opacity":I},null),o=(l,m)=>[a(l,0),a(m,100)],E=l=>[e("defs",null,[e("radialGradient",{id:n(l),cx:"50%",cy:"54%",fx:"50%",fy:"54%",r:"297%",gradientTransform:"matrix(-.16 0 0 -.33 .58 .72)"},[a("#EBEDF0",0),a("#F2F3F5",100,.3)])]),e("ellipse",{fill:t(l),opacity:".8",cx:"80",cy:"140",rx:"46",ry:"8"},null)],_=()=>[e("defs",null,[e("linearGradient",{id:n("a"),x1:"64%",y1:"100%",x2:"64%"},[a("#FFF",0,.5),a("#F2F3F5",100)])]),e("g",{opacity:".8"},[e("path",{d:"M36 131V53H16v20H2v58h34z",fill:t("a")},null),e("path",{d:"M123 15h22v14h9v77h-31V15z",fill:t("a")},null)])],v=()=>[e("defs",null,[e("linearGradient",{id:n("b"),x1:"64%",y1:"97%",x2:"64%",y2:"0%"},[a("#F2F3F5",0,.3),a("#F2F3F5",100)])]),e("g",{opacity:".8"},[e("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:t("b")},null),e("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:t("b")},null)])],D=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{id:n(1),x1:"64%",y1:"100%",x2:"64%"},[a("#FFF",0,.5),a("#F2F3F5",100)]),e("linearGradient",{id:n(2),x1:"50%",x2:"50%",y2:"84%"},[a("#EBEDF0",0),a("#DCDEE0",100,0)]),e("linearGradient",{id:n(3),x1:"100%",x2:"100%",y2:"100%"},[o("#EAEDF0","#DCDEE0")]),e("radialGradient",{id:n(4),cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[a("#EBEDF0",0),a("#FFF",100,0)])]),e("g",{fill:"none"},[_(),e("path",{fill:t(4),d:"M0 139h160v21H0z"},null),e("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:t(2)},null),e("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7"},[e("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:t(3)},null),e("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:t(3)},null),e("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:t(3)},null),e("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:t(3)},null)]),e("g",{transform:"translate(31 105)"},[e("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),e("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),e("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),w=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:n(5)},[o("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:n(6)},[o("#EAEDF1","#DCDEE0")]),e("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:n(7)},[o("#EAEDF1","#DCDEE0")])]),_(),v(),e("g",{transform:"translate(36 50)",fill:"none"},[e("g",{transform:"translate(8)"},[e("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"},null),e("rect",{fill:t(5),width:"64",height:"66",rx:"2"},null),e("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"},null),e("g",{transform:"translate(15 17)",fill:t(6)},[e("rect",{width:"34",height:"6",rx:"1"},null),e("path",{d:"M0 14h34v6H0z"},null),e("rect",{y:"28",width:"34",height:"6",rx:"1"},null)])]),e("rect",{fill:t(7),y:"61",width:"88",height:"28",rx:"1"},null),e("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"},null)])]),M=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:n(8)},[o("#EAEDF1","#DCDEE0")])]),_(),v(),E("c"),e("path",{d:"m59 60 21 21 21-21h3l9 9v3L92 93l21 21v3l-9 9h-3l-21-21-21 21h-3l-9-9v-3l21-21-21-21v-3l9-9h3Z",fill:t(8)},null)]),b=()=>e("svg",{viewBox:"0 0 160 160"},[e("defs",null,[e("linearGradient",{x1:"50%",y1:"100%",x2:"50%",id:n(9)},[o("#EEE","#D8D8D8")]),e("linearGradient",{x1:"100%",y1:"50%",y2:"50%",id:n(10)},[o("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:n(11)},[o("#F2F3F5","#DCDEE0")]),e("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:n(12)},[o("#FFF","#F7F8FA")])]),_(),v(),E("d"),e("g",{transform:"rotate(-45 113 -4)",fill:"none"},[e("rect",{fill:t(9),x:"24",y:"52.8",width:"5.8",height:"19",rx:"1"},null),e("rect",{fill:t(10),x:"22.1",y:"67.3",width:"9.9",height:"28",rx:"1"},null),e("circle",{stroke:t(11),"stroke-width":"8",cx:"27",cy:"27",r:"27"},null),e("circle",{fill:t(12),cx:"27",cy:"27",r:"16"},null),e("path",{d:"M37 7c-8 0-15 5-16 12",stroke:t(11),"stroke-width":"3",opacity:".5","stroke-linecap":"round",transform:"rotate(45 29 13)"},null)])]),S=()=>{var l;if(i.image)return i.image();const m={error:M,search:b,network:D,default:w};return((l=m[p.image])==null?void 0:l.call(m))||e("img",{src:p.image},null)};return()=>e("div",{class:C()},[e("div",{class:C("image"),style:ee(p.imageSize)},[S()]),u(),F()])}});const Se=ne(Me);const Be="/vite-vue3-preview/static/png/empty-d48a173e.png",Ce="/vite-vue3-preview/static/png/404-633f6e34.png",be="/vite-vue3-preview/static/png/lock-196962f4.png",Ie="/vite-vue3-preview/static/png/network-60e3f254.png";const Ge={class:"tip-wrapper"},Ne=z({name:"Tip"}),ze=Object.assign(Ne,{props:{description:{type:String,default:""},icon:{type:String,default:"empty",validitor(p){return["404","empty","lock","network"].includes(p)}}},setup(p){const i=p,u=new Map([["empty",Be],["404",Ce],["lock",be],["network",Ie]]),F=new Map([["empty","暂无数据"],["404","404 Not Found"],["lock","抱歉，您无权限访问此页面"],["network","网络异常"]]),y=u[i.icon],n=R(()=>i.description||F.get(i.icon)||"暂无数据");return(t,a)=>{const o=Se;return k(),N("div",Ge,[e(o,ae(t.$attrs,{image:s(y),description:s(n)}),null,16,["image","description"])])}}}),Te=P(ze,[["__scopeId","data-v-c7a1ec6c"]]);const $e={class:"list-wrapper"},Ve={class:"item-name"},Ae={class:"item-time"},Le={class:"item-user"},Re=z({name:"work-order"}),Pe=Object.assign(Re,{setup(p){const i=d(null),u=d(1),F=d(20),y=d(0),n=d([]),t=d(!0),a=d(!1),o=d(!1),E=R(()=>n.value.length?"没有更多了":""),_=d(null),v=d({order:"asc",prop:"createTime"}),D=(g,c)=>{var x;console.log("query:",g),v.value={...v.value,...g},(x=_.value)==null||x.close(),M()},w=async()=>{try{o.value&&(n.value=[],o.value=!1);const g={pageNo:u.value,pageSize:F.value,...v.value},c=await re.getWorkOrderList(g);if(c.code===0){u.value+=1;const{rows:x,total:G}=c.data??{};y.value=G,n.value=u.value===1?x:n.value.concat(x),n.value.length>=y.value&&(a.value=!0)}}catch(g){console.error("捕获异常",g)}finally{t.value=!1}},M=()=>{o.value=!0,a.value=!1,t.value=!0,u.value=1,w()},b=()=>{};oe(()=>{w()});const S=new Map([["-1","全部"],["0","处理中"],["1","已完结"],["2","被退回"]]),l=new Map([["0","#2e6cf3"],["1","#ff0000"],["2","#05a081"]]),m=document.querySelector(".todo-list"),I=[{type:"CellField",title:"排序方式",value:"asc",name:"order",attrs:{options:[{label:"升序排序",value:"asc"},{label:"倒序排序",value:"desc"}]}},{type:"CellField",title:"排序字段",value:"createTime",name:"prop",attrs:{options:[{label:"发起时间",value:"createTime"},{label:"工单名称",value:"name"}]}}],H=le("2003-10-08 08:43").isBefore("2003-10-08 08:43","m");console.log("flag:",H);const O=[{type:"InputField",title:"关键词查询",value:"",name:"name",attrs:{placeholder:"输入搜索关键词"}},{type:"RadioField",title:"工单状态",value:"-1",name:"status",attrs:{options:xe(S)}}];return(g,c)=>{const x=me,G=we,T=Fe,$=_e,j=ve,U=ke,Z=ge,q=Te,Q=he,He=fe,J=X,W=ue("waves");return k(),V(J,{class:"work-order-list",title:"工单管理"},{header:f(()=>[e(G,{border:"",fixed:!1,title:"工单管理"},ie({_:2},[void 0]),1024)]),default:f(()=>[h("div",{ref_key:"container",ref:i},[e(U,{"offset-top":0,"z-index":999,container:s(i)},{default:f(()=>[e(j,{ref_key:"menuRef",ref:_,"close-on-click-outside":!1,"close-on-click-overlay":!1,onClosed:b},{default:f(()=>[e($,{title:"排序"},{default:f(()=>[e(T,{"form-items":I,onConfirm:c[1]||(c[1]=r=>D(r,"sort"))})]),_:1}),e($,{ref:"filterRef",title:"筛选",teleport:s(m)},{default:f(()=>[e(T,{"form-items":O,onConfirm:c[2]||(c[2]=r=>D(r,"filter"))})]),_:1},8,["teleport"])]),_:1},512)]),_:1},8,["container"]),e(Q,{modelValue:s(o),"onUpdate:modelValue":c[4]||(c[4]=r=>A(o)?o.value=r:null),onRefresh:M},{default:f(()=>[e(Z,{loading:s(t),"onUpdate:loading":c[3]||(c[3]=r=>A(t)?t.value=r:null),"immediate-check":!1,finished:s(a),"finished-text":s(E),onLoad:w},{default:f(()=>[h("ul",$e,[(k(!0),N(pe,null,se(s(n),(r,K)=>ce((k(),N("li",{key:r.name+K,class:"list-item"},[h("div",null,[h("p",Ve,B(r.name),1),h("p",Ae,"发起时间："+B(r.createTime),1),h("p",Le,"处理人员："+B(r.username),1)]),h("div",{class:"item-status",style:de({color:s(l).get(r.status)})},B(s(S).get(r.status)),5)])),[[W]])),128))])]),_:1},8,["loading","finished","finished-text"]),!s(n).length&&!s(t)?(k(),V(q,{key:0})):L("",!0)]),_:1},8,["modelValue"]),L("",!0)],512)]),_:1})}}}),st=P(Pe,[["__scopeId","data-v-3ccaf375"]]);export{st as default};
