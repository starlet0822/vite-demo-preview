import{ab as G,d as C,c4 as T,p as l,af as V,ag as J,I as R,am as H,a3 as Q,c5 as W,a as b,r as x,w as N,t as O,M as X,f as _,k as y,x as $,F as A,G as B,q as w,z,y as Y,g as D,v as j,O as U,P as K,s as Z,o as I,B as ee,u as S,J as M,V as te}from"./index-2d318566.js";import{D as ae,a as oe,P as ne,L as le}from"./index-8a6b92e8.js";import{T as re}from"./index-6651ddf1.js";/* empty css              */import"./index-434b4cca.js";import"./index-f2118f16.js";import{S as se}from"./index-83316725.js";import{a as ie,C as ce}from"./index-e3da7754.js";import{C as de}from"./index-7451b2d1.js";import{_ as E}from"./plugin-vue_export-helper-c27b6911.js";import{S as ue}from"./index-08eb4df6.js";import{I as fe}from"./index-2b5f5f87.js";import"./use-id-0b0c73bf.js";import"./use-route-e384b3a3.js";import"./index-5561415e.js";const[he,f]=G("card"),_e={tag:String,num:V,desc:String,thumb:String,title:String,price:V,centered:Boolean,lazyLoad:Boolean,currency:J("¥"),thumbLink:String,originPrice:V};var pe=C({name:he,props:_e,emits:["clickThumb"],setup(t,{slots:o,emit:s}){const v=()=>{if(o.title)return o.title();if(t.title)return l("div",{class:[f("title"),"van-multi-ellipsis--l2"]},[t.title])},d=()=>{if(o.tag||t.tag)return l("div",{class:f("tag")},[o.tag?o.tag():l(re,{mark:!0,type:"primary"},{default:()=>[t.tag]})])},g=()=>o.thumb?o.thumb():l(fe,{src:t.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:t.lazyLoad},null),u=()=>{if(o.thumb||t.thumb)return l("a",{href:t.thumbLink,class:f("thumb"),onClick:i=>s("clickThumb",i)},[g(),d()])},p=()=>{if(o.desc)return o.desc();if(t.desc)return l("div",{class:[f("desc"),"van-ellipsis"]},[t.desc])},k=()=>{const i=t.price.toString().split(".");return l("div",null,[l("span",{class:f("price-currency")},[t.currency]),l("span",{class:f("price-integer")},[i[0]]),R("."),l("span",{class:f("price-decimal")},[i[1]])])};return()=>{var i,e,n;const a=o.num||T(t.num),c=o.price||T(t.price),r=o["origin-price"]||T(t.originPrice),h=a||c||r||o.bottom,F=c&&l("div",{class:f("price")},[o.price?o.price():k()]),L=r&&l("div",{class:f("origin-price")},[o["origin-price"]?o["origin-price"]():`${t.currency} ${t.originPrice}`]),m=a&&l("div",{class:f("num")},[o.num?o.num():`x${t.num}`]),P=o.footer&&l("div",{class:f("footer")},[o.footer()]),q=h&&l("div",{class:f("bottom")},[(i=o["price-top"])==null?void 0:i.call(o),F,L,m,(e=o.bottom)==null?void 0:e.call(o)]);return l("div",{class:f()},[l("div",{class:f("header")},[u(),l("div",{class:f("content",{centered:t.centered})},[l("div",null,[v(),p(),(n=o.tags)==null?void 0:n.call(o)]),q])]),P])}}});const ve=H(pe);C({name:"ListTotal"});const me=C({name:"FilterMenus",components:{},props:{activeColor:{type:String,default:Q},filterMenu:{type:Array,default:()=>[{field:"status",label:"状态",value:"",multiple:!1,data:[{label:"不限",value:"-1"},{label:"上架",value:"0"},{label:"下架",value:"1"}]}],validator(t){return W(t)}}},emits:["close","confirm"],setup(t,{emit:o}){const s=b(null),v=b([0,1]),d=x({list:[]}),g=()=>{},u=({value:e,selectedOptions:n,tabIndex:a},c)=>{console.log(e,a,n,n.map(h=>h.value)),console.log("pItem:",c);const r=c.showAllLevels;c.value=r?n.map(h=>h.value).join("/"):e};N(()=>t.filterMenu,(e,n)=>{e!==n&&(d.list=e,d.list.forEach(a=>{if(a.data&&a.data.length&&(a.data.forEach(r=>{r.checked=!1}),a.hasOwnProperty("canAll")&&a.canAll)){const r={label:"全选",value:"all",checked:!1};a.data.unshift(r)}}))},{deep:!0,immediate:!0});const p=(e,n,a,c)=>{if(console.log(" 点击选择项",e,n,a,c),console.log(e.value),e.value==="all"&&(e.checked=!e.checked,e.label=e.checked?"反选":"全选",a.data.forEach(r=>r.checked=e.checked)),e.value!=="all"){e.checked=!e.checked;const r=a.data.filter(h=>h.value!=="all"&&h.checked).length;console.log("非全部按钮已选中的个数",r),a.hasOwnProperty("canAll")&&a.canAll===!0&&(a.data[0].checked=r===a.data.length-1,a.data[0].label=r===a.data.length-1?"反选":"全选")}a.hasOwnProperty("multiple")&&!a.multiple&&(e.value!=="all"&&d.list[c].data.forEach(r=>r.checked=!1),e.checked=!e.checked)},k=()=>{d.list.forEach(e=>{e.type&&e.type==="tree"&&(e.valueShow="",e.value=""),e.data&&e.data.length&&e.data.forEach(n=>{n.checked=!1,n.value==="all"&&(n.label="全选")})})},i=()=>{const e={};d.list.forEach(a=>{if(a.data&&a.data.length){const c=a.data.reduce((r,h)=>(h.value!=="all"&&h.checked&&r.push(h.value),r),[]);a.type==="tree"&&a.value!==""&&(e[a.field]=a.value),c.join(",")!==""&&(e[a.field]=c.join(","))}}),console.log("result",e);const n=Object.keys(e).length!==0;o("confirm",e,n)};return{...O(d),container:s,activeArr:v,onFinish:u,handleClickBtn:g,filterLabelSelect:p,filterReset:k,filterConfirm:i}}}),ge=t=>(U("data-v-10473434"),t=t(),K(),t),ke={ref:"container",class:"filter-menus-wrapper st-bg-white"},ye={class:"filter-list"},we={key:0,class:"st-flex-wrap st-padding-box"},be=["onClick"],Ce=ge(()=>$("div",null,null,-1)),Se={class:"filter-button-box st-flex-ai"};function $e(t,o,s,v,d,g){const u=de,p=ie,k=ce,i=X("waves");return _(),y("div",ke,[$("div",ye,[(_(!0),y(A,null,B(t.list,(e,n)=>(_(),y("div",{key:n,class:"filter-item"},[l(k,{modelValue:t.activeArr,"onUpdate:modelValue":o[1]||(o[1]=a=>t.activeArr=a),border:!1},{default:w(()=>[l(p,{name:n,title:e.label,value:`${t.activeArr.includes(n)?"收起":"展开"}`},{default:w(()=>[e.type!=="tree"?(_(),y("div",we,[(_(!0),y(A,null,B(e.data,(a,c)=>(_(),y("div",{key:c,class:z([{checked:a.checked},"filter-item-label st-line-16 van-ellipsis"]),onClick:r=>t.filterLabelSelect(a,c,e,n)},Y(a.label),11,be))),128))])):(_(),D(u,{key:n,ref_for:!0,ref:"cascaderRef",modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,"field-names":{text:"label",value:"value",children:"children"},options:e.data,"active-color":t.activeColor,class:"cascader-tree",placeholder:"请选择",onClose:o[0]||(o[0]=a=>t.show=!1),onFinish:a=>t.onFinish(a,e,n)},{title:w(()=>[Ce]),_:2},1032,["modelValue","onUpdate:modelValue","options","active-color","onFinish"]))]),_:2},1032,["name","title","value"])]),_:2},1032,["modelValue"])]))),128))]),$("div",Se,[j((_(),y("div",{class:"filter-button-reset st-flex-center st-flex-1",onClick:o[2]||(o[2]=(...e)=>t.filterReset&&t.filterReset(...e))},[R(" 清空 ")])),[[i]]),j((_(),y("div",{class:"filter-button-confirm st-flex-center st-flex-1 st-color-white",onClick:o[3]||(o[3]=(...e)=>t.filterConfirm&&t.filterConfirm(...e))},[R(" 确定 ")])),[[i]])])],512)}const Fe=E(me,[["render",$e],["__scopeId","data-v-10473434"]]);const Le=C({name:"SearchFilter",props:{placeholder:{type:String,default:"搜索关键词"},filter:{type:Boolean,default:!1},shape:{type:String,default:"square",validator(t){return["square","round"].includes(t)}}},emits:["search","confirm"],setup(t,{emit:o}){const s=x({keyword:"",showFilter:!0,isChecked:!1,dropdownItemRef:null,keywordListRef:null,showKeywordList:!1}),v=(i,e)=>{s.dropdownItemRef.toggle(),console.log("筛选结果：",i,e),s.isChecked=e,o("confirm",i)},d=()=>{s.showKeywordList=!0,s.showFilter=!1},g=()=>{s.showKeywordList=!1,s.showFilter=!0},u=()=>{o("search",s.keyword)},p=()=>{};N(()=>s.keyword,(i,e)=>{});const k=i=>{s.keyword=i};return{...O(s),onFocus:d,onBlur:g,onSearch:u,searchConfirm:p,handleFilterConfirm:v,handleKeywordSearch:k}}}),Pe=t=>(U("data-v-7f600c48"),t=t(),K(),t),Te={class:"search-filter-wrapper st-flex-ai st-bg-white van-hairline--bottom"},Ve=Pe(()=>$("div",{class:z("")},"筛选",-1));function Re(t,o,s,v,d,g){const u=Fe,p=ae,k=oe,i=se;return _(),y("div",Te,[l(i,{modelValue:t.keyword,"onUpdate:modelValue":o[0]||(o[0]=e=>t.keyword=e),modelModifiers:{trim:!0},shape:t.shape,"show-action":!0,class:"search-box st-flex-1",autocomplete:"off",placeholder:t.placeholder,"action-text":"",onBlur:t.onBlur,onFocus:t.onFocus,onSearch:t.onSearch},{action:w(()=>[(_(),D(k,{key:0,"active-color":"#333333","z-index":"999"},{default:w(()=>[l(p,{ref:"dropdownItemRef"},{title:w(()=>[Ve]),default:w(()=>[l(u,{onConfirm:t.handleFilterConfirm},null,8,["onConfirm"])]),_:1},512)]),_:1}))]),_:1},8,["modelValue","shape","placeholder","onBlur","onFocus","onSearch"])])}const Ae=E(Le,[["render",Re],["__scopeId","data-v-7f600c48"]]);const Be={class:"page-wrapper"},xe=C({name:"ListDemo"}),De=Object.assign(xe,{setup(t){const o=b(null);I(async()=>{await ee(),console.log("backTopRef",o.value)}),b(0);const s=b([]),v=b([]);x({status:"-1"});const d=b(!1),g=b(!1),u=b(!1),p=()=>{setTimeout(()=>{u.value&&(v.value=s.value=[],u.value=!1);for(let n=1;n<=10;n++){const a={title:"商品"+n,tag:n%2===0?"上架":"下架",status:n%2===0?"0":"1",price:(n*2).toFixed(2),desc:n%2===0?"我是上架的宝贝":"我是下架的宝贝",thumb:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"};v.value.push(a),s.value.push(a)}d.value=!1,s.value.length>=50&&(g.value=!0)},1e3)};p();const k=()=>{g.value=!1,d.value=!0,p()},i=n=>{if(console.log("handleSearch",n),n.trim()!==""){const a=new RegExp(n,"gi"),c=v.value.filter(r=>a.test(r.title));s.value=c}else s.value=v.value},e=n=>{te({message:`筛选参数：${JSON.stringify(n)}`})};return(n,a)=>{const c=Ae,r=ue,h=ve,F=le,L=ne;return _(),y("div",Be,[l(r,{"offset-top":46,"z-index":99},{default:w(()=>[l(c,{placeholder:"搜索商品",onSearch:i,onConfirm:e})]),_:1}),l(L,{modelValue:S(u),"onUpdate:modelValue":a[1]||(a[1]=m=>M(u)?u.value=m:null),onRefresh:k},{default:w(()=>[l(F,{loading:S(d),"onUpdate:loading":a[0]||(a[0]=m=>M(d)?d.value=m:null),finished:S(g),"finished-text":"没有更多了",onLoad:p},{default:w(()=>[(_(!0),y(A,null,B(S(s),(m,P)=>(_(),D(h,{key:m.title+P,tag:m.tag,price:m.price,desc:m.desc,title:m.title,thumb:m.thumb,class:"st-bg-white"},null,8,["tag","price","desc","title","thumb"]))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"]),Z("",!0)])}}}),Ye=E(De,[["__scopeId","data-v-702a5966"]]);export{Ye as default};
