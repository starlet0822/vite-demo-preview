import{_ as Q}from"./index-03d2b5ec.js";import{Z as B,d as F,ao as W,p as s,av as Y,ar as M,a1 as H,c as N,ci as J,X as k,a3 as D,a as y,r as x,M as U,f,g as v,q as i,u as o,x as b,z as L,y as ee,v as A,cM as q,I,S as $,Q as oe,al as te,am as se,s as R}from"./index-5560da19.js";import{C as ne}from"./index-fdc343a7.js";import"./index-462a24ae.js";import{F as O}from"./index-ef67e059.js";import{_ as Z}from"./index-77999180.js";import{_ as T}from"./plugin-vue_export-helper-c27b6911.js";import{B as G}from"./index-e0efa64a.js";import{F as X}from"./index-4cdb7e34.js";import"./index-0e6beb51.js";import"./use-placeholder-87cf9818.js";import"./use-route-23f883a9.js";import"./use-id-e390e938.js";const[j,z]=B("steps"),ae={active:Y(0),direction:M("horizontal"),activeIcon:M("checked"),iconPrefix:String,finishIcon:String,activeColor:String,inactiveIcon:String,inactiveColor:String},K=Symbol(j);var re=F({name:j,props:ae,emits:["clickStep"],setup(m,{emit:n,slots:c}){const{linkChildren:r}=W(K);return r({props:m,onClickStep:t=>n("clickStep",t)}),()=>{var t;return s("div",{class:z([m.direction])},[s("div",{class:z("items")},[(t=c.default)==null?void 0:t.call(c)])])}}});const[ie,g]=B("step");var ce=F({name:ie,setup(m,{slots:n}){const{parent:c,index:r}=H(K);if(!c)return;const a=c.props,t=()=>{const e=+a.active;return r.value<e?"finish":r.value===e?"process":"waiting"},d=()=>t()==="process",p=N(()=>({background:t()==="finish"?a.activeColor:a.inactiveColor})),P=N(()=>{if(d())return{color:a.activeColor};if(t()==="waiting")return{color:a.inactiveColor}}),C=()=>c.onClickStep(r.value),l=()=>{const{iconPrefix:e,finishIcon:u,activeIcon:w,activeColor:h,inactiveIcon:S}=a;return d()?n["active-icon"]?n["active-icon"]():s(k,{class:g("icon","active"),name:w,color:h,classPrefix:e},null):t()==="finish"&&(u||n["finish-icon"])?n["finish-icon"]?n["finish-icon"]():s(k,{class:g("icon","finish"),name:u,color:h,classPrefix:e},null):n["inactive-icon"]?n["inactive-icon"]():S?s(k,{class:g("icon"),name:S,classPrefix:e},null):s("i",{class:g("circle"),style:p.value},null)};return()=>{var e;const u=t();return s("div",{class:[J,g([a.direction,{[u]:u}])]},[s("div",{class:g("title",{active:d()}),style:P.value,onClick:C},[(e=n.default)==null?void 0:e.call(n)]),s("div",{class:g("circle-container"),onClick:C},[l()]),s("div",{class:g("line"),style:p.value},null)])}}});const le=D(ce),ue=D(re);const me={class:"submit-btn"},de={__name:"Step1",emits:["change-step"],setup(m,{emit:n}){const c=y(!0),r=y(null),a=y(0),t=x({phone:"",verifyCode:""}),d=x({phone:[{required:!0,message:"手机号码不能为空"},{pattern:/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,message:"手机号码格式不正确"}],verifyCode:[{required:!0,message:"验证码不能为空"},{pattern:/^\d{6}$/,message:"验证码不正确"}]});function p(){r.value||(a.value=60,c.value=!1,r.value=setInterval(()=>{a.value>0&&a.value<=60?a.value--:(c.value=!0,clearInterval(r.value),r.value=null)},1e3))}const P=l=>{console.log("values:",l),$({type:"success",message:"手机验证成功"}),n("change-step",1)},C=l=>{console.log("failed",l);const{errors:[e]}=l;$(e.message)};return(l,e)=>{const u=Z,w=O,h=ne,S=G,V=X,E=U("waves");return f(),v(V,{class:"form-wrapper","validate-first":"","show-error":!1,"show-error-message":!1,"submit-on-enter":!1,onSubmit:P,onFailed:C},{default:i(()=>[s(h,{inset:""},{default:i(()=>[s(w,{modelValue:o(t).phone,"onUpdate:modelValue":e[0]||(e[0]=_=>o(t).phone=_),modelModifiers:{trim:!0},name:"phone",center:"",clearable:"",placeholder:"手机号码",autocomplete:"off",rules:o(d).phone},{"left-icon":i(()=>[s(u,{name:"EpIphone","class-name":"mr-12"})]),_:1},8,["modelValue","rules"]),s(w,{modelValue:o(t).verifyCode,"onUpdate:modelValue":e[1]||(e[1]=_=>o(t).verifyCode=_),modelModifiers:{trim:!0},name:"verifyCode",center:"",autocomplete:"off",placeholder:"6位数短信验证码",rules:o(d).verifyCode},{"left-icon":i(()=>[s(u,{name:"EpMessage","class-name":"mr-12"})]),button:i(()=>[b("div",{class:L(o(c)?"active-color":""),onClick:p},ee(o(c)?"获取验证码":`${o(a)} 秒后可重新获取`),3)]),_:1},8,["modelValue","rules"])]),_:1}),b("div",me,[A((f(),v(S,{color:o(q),round:!1,block:"","native-type":"submit"},{default:i(()=>[I(" 下一步 ")]),_:1},8,["color"])),[[E]])])]),_:1})}}},pe=T(de,[["__scopeId","data-v-c478faa0"]]);const _e=m=>(te("data-v-15123f4f"),m=m(),se(),m),fe=_e(()=>b("p",{class:"tips"},"密码格式应为 6-20 位数字、字母、符号的任意两种组合）",-1)),ve={class:"submit-btn"},we={__name:"Step2",setup(m){const n=oe(),c=/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)]|[()])+$)(?!^.*[\u4E00-\u9FA5].*$)([^(0-9a-zA-Z)]|[()]|[a-z]|[A-Z]|[0-9]){6,20}$/,r=y(!1),a=y(!1),t=x({newPassword:"",confirmPassword:""}),p=x({newPassword:[{required:!0,message:"新密码不能为空"},{pattern:c,message:"新密码格式不正确"}],confirmPassword:[{required:!0,message:"请再次输入新的登录密码"},{validator:l=>l&&l===t.newPassword,message:"两次输入的密码不一致"}]}),P=l=>{$({type:"success",message:"密码修改成功"}),n.replace("/login")},C=l=>{const{errors:[e]}=l;$(e.message)};return(l,e)=>{const u=Z,w=k,h=O,S=G,V=X,E=U("waves");return f(),v(V,{class:"form-wrapper","validate-first":"","show-error":!1,"show-error-message":!1,"submit-on-enter":!1,onSubmit:P,onFailed:C},{default:i(()=>[s(h,{modelValue:o(t).newPassword,"onUpdate:modelValue":e[0]||(e[0]=_=>o(t).newPassword=_),modelModifiers:{trim:!0},name:"newPassword",center:"",clearable:"",border:!1,autocomplete:"off",type:o(r)?"text":"password",placeholder:"请设置6-20位新的登录密码",rules:o(p).newPassword,onClickRightIcon:e[1]||(e[1]=_=>r.value=!o(r))},{"left-icon":i(()=>[s(u,{name:"lock","class-name":"mr-12"})]),"right-icon":i(()=>[s(w,{name:o(r)?"eye-o":"closed-eye"},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),fe,s(h,{modelValue:o(t).confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=_=>o(t).confirmPassword=_),modelModifiers:{trim:!0},name:"confirmPassword",center:"",clearable:"",border:!1,autocomplete:"off",type:o(a)?"text":"password",placeholder:"请再次输入新的登录密码",rules:o(p).confirmPassword,onClickRightIcon:e[3]||(e[3]=_=>a.value=!o(a))},{"left-icon":i(()=>[s(u,{name:"lock","class-name":"mr-12"})]),"right-icon":i(()=>[o(a)?(f(),v(w,{key:0,name:"eye-o"})):(f(),v(w,{key:1,name:"closed-eye"}))]),_:1},8,["modelValue","type","rules"]),b("div",ve,[A((f(),v(S,{color:o(q),round:!1,block:"","native-type":"submit"},{default:i(()=>[I(" 保 存 ")]),_:1},8,["color"])),[[E]])])]),_:1})}}},ge=T(we,[["__scopeId","data-v-15123f4f"]]);const he={class:"step-wrapper"},Ce=F({name:"reset-password"}),Se=Object.assign(Ce,{setup(m){const n=y(0),c=r=>{n.value=r};return(r,a)=>{const t=le,d=ue,p=Q;return f(),v(p,{title:"重置密码"},{default:i(()=>[b("div",he,[s(d,{active:o(n)},{default:i(()=>[s(t,null,{default:i(()=>[I("1.验证手机号码")]),_:1}),s(t,null,{default:i(()=>[I("2.设置新密码")]),_:1})]),_:1},8,["active"])]),o(n)===0?(f(),v(pe,{key:0,onChangeStep:c})):R("",!0),o(n)===1?(f(),v(ge,{key:1})):R("",!0)]),_:1})}}}),Re=T(Se,[["__scopeId","data-v-3975fbeb"]]);export{Re as default};
