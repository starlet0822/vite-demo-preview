import{a1 as oe,d as b,a as F,a2 as le,w as A,p as v,c9 as se,ax as E,au as ne,a3 as ae,B as z,P as j,cD as re,a7 as ie,as as Q,f as p,k as _,x as V,F as R,G as D,A as K,z as q,K as P,y as B,c as U,m as T,q as J,$ as W,d3 as ce,M as ue,s as G,I as H,g as de,i as pe,v as L,Q as me,R as _e}from"./index-9dbeec4c.js";import{_ as w}from"./plugin-vue_export-helper-c27b6911.js";import"./index-9ed074f4.js";import{F as M}from"./index-69c1563e.js";/* empty css              */import"./index-4f3dc014.js";import{D as fe}from"./index-fd2af317.js";import{b as ve,a as he,T as ye}from"./index-d250541d.js";const[Ve,g,ke]=oe("cascader"),$e={title:String,options:se(),closeable:E,swipeable:E,closeIcon:ne("cross"),showHeader:E,modelValue:ae,fieldNames:Object,placeholder:String,activeColor:String};var ge=b({name:Ve,props:$e,emits:["close","change","finish","clickTab","update:modelValue"],setup(e,{slots:t,emit:u}){const a=F([]),i=F(0),[h,s]=ve(),{text:c,value:o,children:l}=le({text:"text",value:"value",children:"children"},e.fieldNames),k=(n,r)=>{for(const m of n){if(m[o]===r)return[m];if(m[l]){const d=k(m[l],r);if(d)return[m,...d]}}},f=()=>{const{options:n,modelValue:r}=e;if(r!==void 0){const m=k(n,r);if(m){let d=n;a.value=m.map(y=>{const N={options:d,selected:y},C=d.find(O=>O[o]===y[o]);return C&&(d=C[l]),N}),d&&a.value.push({options:d,selected:null}),z(()=>{i.value=a.value.length-1});return}}a.value=[{options:n,selected:null}]},$=(n,r)=>{if(n.disabled)return;if(a.value[r].selected=n,a.value.length>r+1&&(a.value=a.value.slice(0,r+1)),n[l]){const y={options:n[l],selected:null};a.value[r+1]?a.value[r+1]=y:a.value.push(y),z(()=>{i.value++})}const m=a.value.map(y=>y.selected).filter(Boolean);u("update:modelValue",n[o]);const d={value:n[o],tabIndex:r,selectedOptions:m};u("change",d),n[l]||u("finish",d)},S=()=>u("close"),I=({name:n,title:r})=>u("clickTab",n,r),X=()=>e.showHeader?v("div",{class:g("header")},[v("h2",{class:g("title")},[t.title?t.title():e.title]),e.closeable?v(j,{name:e.closeIcon,class:[g("close-icon"),re],onClick:S},null):null]):null,Y=(n,r,m)=>{const{disabled:d}=n,y=!!(r&&n[o]===r[o]),N=n.color||(y?e.activeColor:void 0),C=t.option?t.option({option:n,selected:y}):v("span",null,[n[c]]);return v("li",{ref:y?s(m):void 0,role:"menuitemradio",class:[g("option",{selected:y,disabled:d}),n.className],style:{color:N},tabindex:d?void 0:y?0:-1,"aria-checked":y,"aria-disabled":d||void 0,onClick:()=>$(n,m)},[C,y?v(j,{name:"success",class:g("selected-icon")},null):null])},Z=(n,r,m)=>v("ul",{role:"menu",class:g("options")},[n.map(d=>Y(d,r,m))]),x=(n,r)=>{const{options:m,selected:d}=n,y=e.placeholder||ke("select"),N=d?d[c]:y;return v(ye,{title:N,titleClass:g("tab",{unselected:!d})},{default:()=>{var C,O;return[(C=t["options-top"])==null?void 0:C.call(t,{tabIndex:r}),Z(m,d,r),(O=t["options-bottom"])==null?void 0:O.call(t,{tabIndex:r})]}})},ee=()=>v(he,{active:i.value,"onUpdate:active":n=>i.value=n,shrink:!0,animated:!0,class:g("tabs"),color:e.activeColor,swipeable:e.swipeable,onClickTab:I},{default:()=>[a.value.map(x)]}),te=n=>{const r=n.parentElement;r&&(r.scrollTop=n.offsetTop-(r.offsetHeight-n.offsetHeight)/2)};return f(),A(i,n=>{const r=h.value[n];r&&te(r)}),A(()=>e.options,f,{deep:!0}),A(()=>e.modelValue,n=>{n!==void 0&&a.value.map(m=>{var d;return(d=m.selected)==null?void 0:d[o]}).includes(n)||f()}),()=>v("div",{class:g()},[X(),ee()])}});const be=ie(ge);const Ce=b({props:{modelValue:{type:[Array,String,Number,Boolean,Object],default:""},title:{type:String,default:""},name:{type:String,default:""},options:{type:Array,default:()=>[]},columnNum:{type:[Number,String],default:3},gutter:{type:[Number,String],default:10}},emits:["update:modelValue"],setup(e,{emit:t}){const u={flexBasis:`${1/e.columnNum*100}%`,paddingRight:Q(e.gutter)},a=o=>t("update:modelValue",o),i=({value:o,checked:l})=>{a(l?o:"")},h=o=>{c(o)},s=o=>e.modelValue===o.value,c=o=>{o.checked=!s(o),i(o)};return{itemStyle:u,isChecked:s,onClick:h}}}),we={class:"custom-radio"},Se={class:"radio-group"},Fe=["onClick"],Ne={class:"radio-item__text"};function Pe(e,t,u,a,i,h){return p(),_("div",we,[V("ul",Se,[(p(!0),_(R,null,D(e.options,(s,c)=>(p(),_("li",{key:s.value,class:"radio-item",style:K({...e.itemStyle,marginTop:c>=+e.columnNum?10/37.5+"rem":0})},[V("div",{class:q(["radio-item__content","st-line-1",{"is-selected":e.isChecked(s)}]),onClick:P(o=>e.onClick(s),["stop"])},[V("div",Ne,B(s.label),1)],10,Fe)],4))),128))])])}const Te=w(Ce,[["render",Pe],["__scopeId","data-v-5ce800a6"]]);const Be=b({name:"CheckboxField",props:{modelValue:{type:[Array,String,Number,Boolean,Object],default:""},name:{type:String,default:""},title:{type:String,default:""},shape:{type:String,default:"square"},disabled:Boolean,checked:Boolean,checkAll:Boolean,options:{type:Array,default:()=>[]},columnNum:{type:[Number,String],default:3},gutter:{type:[Number,String],default:10}},emits:["update:modelValue"],setup(e,{emit:t}){const u={flexBasis:`${1/e.columnNum*100}%`,paddingRight:Q(e.gutter)},a=U(()=>{const{checkAll:l,options:k}=e;let f=k;return l&&(f=[{label:"全部",value:"-1"},...f]),f}),i=l=>t("update:modelValue",l),h=l=>{c(l)},s=l=>e.modelValue.indexOf(l.value)!==-1,c=l=>{l.checked=!s(l),o(l)},o=({value:l,checked:k,disabled:f})=>{const{modelValue:$}=e,S=[...$.slice()];if(k)S.push(l);else{const I=S.indexOf(l);I!==-1&&S.splice(I,1)}i(S)};return A(()=>e.modelValue,l=>i(l)),{checkboxs:a,itemStyle:u,isChecked:s,onClick:h}}}),Ie={class:"custom-checkbox"},Oe={class:"checkbox-group"},Ae=["onClick"],Re={class:"checkbox-item__text"};function De(e,t,u,a,i,h){return p(),_("div",Ie,[V("ul",Oe,[(p(!0),_(R,null,D(e.checkboxs,(s,c)=>(p(),_("li",{key:s.value,class:"checkbox-item",style:K({...e.itemStyle,marginTop:c>=+e.columnNum?10/37.5+"rem":0})},[V("div",{class:q(["checkbox-item__content","st-line-1",{"is-selected":e.isChecked(s)}]),onClick:P(o=>e.onClick(s),["stop"])},[V("div",Re,B(s.label),1)],10,Ae)],4))),128))])])}const Ue=w(Be,[["render",De],["__scopeId","data-v-85ed6b9c"]]);const Ee=b({props:{modelValue:{type:[Array,String,Number,Boolean,Object],default:""},name:{type:String,default:""},options:{type:Array,default:()=>[]},columnNum:{type:[Number,String],default:1},gutter:{type:[Number,String],default:10}},emits:["update:modelValue"],setup(e,{emit:t}){return{itemStyle:{flexBasis:`${1/e.columnNum*100}%`},onChange:i=>{t("update:modelValue",i.value)}}}}),He={class:"custom-cell"},je={class:"cell-group"},Ke=["onClick"],qe={class:"cell-item__text"};function Me(e,t,u,a,i,h){return p(),_("div",He,[V("ul",je,[(p(!0),_(R,null,D(e.options,(s,c)=>(p(),_("li",{key:s.value,class:"cell-item",style:K({...e.itemStyle,marginTop:c>=+e.columnNum?10/37.5+"rem":0})},[V("div",{class:q(["cell-item__content",{"is-selected":e.modelValue==s.value}]),onClick:P(o=>e.onChange(s),["stop"])},[V("div",qe,B(s.label),1)],10,Ke)],4))),128))])])}const ze=w(Ee,[["render",Me],["__scopeId","data-v-4b0460a0"]]);const Ge=b({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){return{inputValue:U({get:()=>e.modelValue,set:a=>{t("update:modelValue",a)}})}}}),Le={class:"custom-input"};function Qe(e,t,u,a,i,h){const s=M;return p(),_("div",Le,[v(s,T({modelValue:e.inputValue,"onUpdate:modelValue":t[0]||(t[0]=c=>e.inputValue=c),modelModifiers:{trim:!0},autocomplete:"off",clearable:""},e.$attrs),null,16,["modelValue"])])}const Je=w(Ge,[["render",Qe],["__scopeId","data-v-585ff044"]]);const We=b({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const u=U({get:()=>e.modelValue,set:s=>{t("update:modelValue",s)}}),a=F(!1),i=document.querySelector(".form-wrapper");return{inputValue:u,showPicker:a,teleport:i,onConfirm:({selectedValues:s})=>{const c=s.join("-");t("update:modelValue",c),a.value=!1}}}}),Xe={class:"custom-date-picker"};function Ye(e,t,u,a,i,h){const s=M,c=fe,o=W;return p(),_("div",Xe,[v(s,T({modelValue:e.inputValue,"onUpdate:modelValue":t[0]||(t[0]=l=>e.inputValue=l),readonly:!0,clearable:"",placeholder:"点击选择"},e.$attrs,{onClick:t[1]||(t[1]=l=>e.showPicker=!0)}),null,16,["modelValue"]),v(o,{show:e.showPicker,"onUpdate:show":t[3]||(t[3]=l=>e.showPicker=l),position:"bottom",teleport:e.teleport,overlay:!0},{default:J(()=>[v(c,{title:"选择时间",onConfirm:e.onConfirm,onCancel:t[2]||(t[2]=l=>e.showPicker=!1)},null,8,["onConfirm"])]),_:1},8,["show","teleport"])])}const Ze=w(We,[["render",Ye],["__scopeId","data-v-12df6230"]]);const xe=b({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t,attrs:u}){const a=U({get:()=>e.modelValue,set:o=>{t("update:modelValue",o)}}),i=F(!1),h=F(""),s=document.querySelector(".form-wrapper");return{inputValue:a,cascaderValue:h,showPicker:i,teleport:s,onFinish:({selectedOptions:o})=>{const{text:l,value:k}=u.fieldNames||{text:"label",value:"value",children:"children"},f=o.map($=>$[l]).join("/");t("update:modelValue",f),i.value=!1}}}}),et={class:"custom-cascader"};function tt(e,t,u,a,i,h){const s=M,c=be,o=W;return p(),_("div",et,[v(s,T({modelValue:e.inputValue,"onUpdate:modelValue":t[0]||(t[0]=l=>e.inputValue=l),readonly:!0},e.$attrs,{onClick:t[1]||(t[1]=l=>e.showPicker=!0)}),null,16,["modelValue"]),v(o,{show:e.showPicker,"onUpdate:show":t[4]||(t[4]=l=>e.showPicker=l),position:"bottom",teleport:e.teleport,overlay:!0},{default:J(()=>[v(c,T({modelValue:e.cascaderValue,"onUpdate:modelValue":t[2]||(t[2]=l=>e.cascaderValue=l),title:"请选择所在地区"},e.$attrs,{onClose:t[3]||(t[3]=l=>e.showPicker=!1),onFinish:e.onFinish}),null,16,["modelValue","onFinish"])]),_:1},8,["show","teleport"])])}const ot=w(xe,[["render",tt],["__scopeId","data-v-727503ca"]]);const lt=b({name:"FilterSearch",components:{InputField:Je,RadioField:Te,CheckboxField:Ue,DateField:Ze,CellField:ze,CascaderField:ot},props:{showHeader:Boolean,formOptions:{type:Object,default:()=>({"label-align":"top","label-width":"6.2em","input-align":"left"})},formItems:{type:Array,default:()=>[]}},emits:["close","confirm","reset"],setup(e,{emit:t}){const u=o=>{const l={},k=f=>{let $="";return ce(f.value)?[].includes(f.type)?$=[]:$="":$=f.value,$};return e.formItems.forEach(f=>{f.name&&(l[f.name]=k(f))}),{...l}},a={"label-align":"top","label-width":"6.2em","input-align":"left",...e.formOptions},i=F(u()),h=()=>{s(!1),t("close")},s=async(o=!0)=>{i.value=u(),t("reset",i.value),o&&c()},c=()=>{console.log("onConfirm",i.value),t("confirm",i.value)};return{formProps:a,formValues:i,onClose:h,onReset:s,onConfirm:c}}}),st=e=>(me("data-v-292ef53a"),e=e(),_e(),e),nt={class:"form form-wrapper"},at={key:0,class:"form__header"},rt=st(()=>V("div",{class:"form__header-title"},B("数据筛选"),-1)),it={class:"form__body"},ct={class:"filter__item-title"},ut={key:0,class:"tips"},dt={class:"form__footer van-safe-area-bottom"};function pt(e,t,u,a,i,h){const s=j,c=ue("waves");return p(),_("div",nt,[e.showHeader?(p(),_("div",at,[rt,v(s,{name:"cross",class:"form__header-close",onClick:e.onClose},null,8,["onClick"])])):G("",!0),V("div",it,[(p(!0),_(R,null,D(e.formItems,(o,l)=>(p(),_("div",{key:o.name+l,class:"filter__item"},[V("div",ct,[H(B(o.title)+" ",1),["CheckboxField"].includes(o.type)?(p(),_("span",ut,"(可多选)")):G("",!0)]),(p(),de(pe(o.type),T({modelValue:e.formValues[o.name],"onUpdate:modelValue":k=>e.formValues[o.name]=k,title:o.title},o.attrs),null,16,["modelValue","onUpdate:modelValue","title"]))]))),128))]),V("div",dt,[L((p(),_("div",{class:"filter__reset",onClick:t[0]||(t[0]=P((...o)=>e.onReset&&e.onReset(...o),["stop"]))},[H("重置")])),[[c]]),L((p(),_("div",{class:"filter__confirm",onClick:t[1]||(t[1]=P((...o)=>e.onConfirm&&e.onConfirm(...o),["stop"]))},[H("完成")])),[[c]])])])}const $t=w(lt,[["render",pt],["__scopeId","data-v-292ef53a"]]);export{$t as _};
