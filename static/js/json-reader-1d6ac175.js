import{d as b,T as g,a as C,b as s,S as y,j as S,f as a,w as o,e as k,u,U as E,g as F,G as J,h as d,V as i}from"./index-23cd956f.js";const O=d("div",{class:"card-header"},[d("span",{class:"font-medium"}," JSON 读取回显 ")],-1),T=d("div",{class:"el-upload__tip"},"仅支持上传 json 文件",-1),_=".json",R=b({name:"JsonReader",__name:"json-reader",setup(B){const{isDark:f}=g(),l=C("{}"),p=t=>{const e=t.name,r=e.lastIndexOf(".");if(r===-1)return i.error("文件格式不正确!"),!1;const n=e.substring(r+1);return _.includes(n)?!0:(i.error("文件格式不正确!"),!1)},m=t=>{l.value="{}"},v=t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{const c=n.result;e(c)},n.readAsText(t)}),w=async t=>{const e=await v(t.file);l.value=e};return(t,e)=>{const r=s("el-button"),n=s("el-upload"),c=s("el-col"),h=s("CodeEditor"),j=s("el-row"),x=s("el-card"),N=y("copy");return k(),S("div",null,[a(x,{shadow:"never"},{header:o(()=>[O]),default:o(()=>[a(j,null,{default:o(()=>[a(c,null,{default:o(()=>[a(n,{accept:_,"before-upload":p,"http-request":w,action:"/",limit:1,multiple:!1,"on-remove":m},{tip:o(()=>[T]),default:o(()=>[a(r,{type:"primary",icon:u(E)},{default:o(()=>[F(" 上传 JSON 文件 ")]),_:1},8,["icon"])]),_:1})]),_:1}),a(c,null,{default:o(()=>[J(a(h,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=V=>l.value=V),language:"json",showTools:!1,mode:u(f)?"dark":"default"},null,8,["modelValue","mode"]),[[N,l.value]])]),_:1})]),_:1})]),_:1})])}}});export{R as default};
