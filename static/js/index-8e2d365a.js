import{_ as me}from"./index-4a8a8591.js";import{ab as fe,d as Z,a as p,cy as _e,c as G,c0 as ge,ae as ve,cz as he,p as r,an as Q,af as te,cF as oe,cA as ne,cx as be,cG as pe,cH as ke,cv as ye,ap as we,am as Se,r as ie,cI as N,cJ as re,cK as ce,t as ue,E as R,f as U,k as Ce,x as k,y as ae,u as i,q as x,J as z,z as Ve,a3 as xe,g as W,S as ze,s as M,v as Te,I as Be,$ as Pe,a0 as Ne,ct as Ae,ar as Ee,as as se,a7 as $e,M as Fe,V as Ie,O as dt,P as mt}from"./index-2d318566.js";import{A as Le}from"./index-39d3d837.js";import{C as Me}from"./index-434b4cca.js";import{F as Re}from"./index-f2118f16.js";import{o as Ue,S as De}from"./style-30569755.js";import{_ as de}from"./plugin-vue_export-helper-c27b6911.js";import{p as le}from"./index-45ffbb49.js";import{B as je}from"./index-678b3be0.js";import"./index-649ab5be.js";import"./index-f93f27f2.js";import"./use-route-e384b3a3.js";import"./use-id-0b0c73bf.js";import"./popper-f3391c26.js";const[Oe,$]=fe("slider"),He={min:Q(0),max:Q(100),step:Q(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:te,buttonSize:te,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}};var Je=Z({name:Oe,props:He,emits:["change","dragEnd","dragStart","update:modelValue"],setup(t,{emit:w,slots:v}){let l,m,_;const S=p(),g=[p(),p()],c=p(),C=_e(),h=G(()=>Number(t.max)-Number(t.min)),d=G(()=>{const e=t.vertical?"width":"height";return{background:t.inactiveColor,[e]:ge(t.barHeight)}}),b=e=>t.range&&Array.isArray(e),D=()=>{const{modelValue:e,min:a}=t;return b(e)?`${(e[1]-e[0])*100/h.value}%`:`${(e-Number(a))*100/h.value}%`},j=()=>{const{modelValue:e,min:a}=t;return b(e)?`${(e[0]-Number(a))*100/h.value}%`:"0%"},O=G(()=>{const a={[t.vertical?"height":"width"]:D(),background:t.activeColor};c.value&&(a.transition="none");const o=()=>t.vertical?t.reverse?"bottom":"top":t.reverse?"right":"left";return a[o()]=j(),a}),A=e=>{const a=+t.min,o=+t.max,n=+t.step;e=we(e,a,o);const s=Math.round((e-a)/n)*n;return ke(a,s)},H=()=>{const e=t.modelValue;b(e)?_=e.map(A):_=A(e)},T=e=>{var a,o;const n=(a=e[0])!=null?a:Number(t.min),s=(o=e[1])!=null?o:Number(t.max);return n>s?[s,n]:[n,s]},y=(e,a)=>{b(e)?e=T(e).map(A):e=A(e),oe(e,t.modelValue)||w("update:modelValue",e),a&&!oe(e,_)&&w("change",e)},J=e=>{if(e.stopPropagation(),t.disabled||t.readonly)return;H();const{min:a,reverse:o,vertical:n,modelValue:s}=t,u=ne(S),B=()=>n?o?u.bottom-e.clientY:e.clientY-u.top:o?u.right-e.clientX:e.clientX-u.left,F=n?u.height:u.width,P=Number(a)+B()/F*h.value;if(b(s)){const[I,L]=s,q=(I+L)/2;P<=q?y([P,L],!0):y([I,P],!0)}else y(P,!0)},X=e=>{t.disabled||t.readonly||(C.start(e),m=t.modelValue,H(),c.value="start")},Y=e=>{if(t.disabled||t.readonly)return;c.value==="start"&&w("dragStart",e),be(e,!0),C.move(e),c.value="dragging";const a=ne(S),o=t.vertical?C.deltaY.value:C.deltaX.value,n=t.vertical?a.height:a.width;let s=o/n*h.value;if(t.reverse&&(s=-s),b(_)){const u=t.reverse?1-l:l;m[u]=_[u]+s}else m=_+s;y(m)},K=e=>{t.disabled||t.readonly||(c.value==="dragging"&&(y(m,!0),w("dragEnd",e)),c.value="")},ee=e=>typeof e=="number"?$("button-wrapper",["left","right"][e]):$("button-wrapper",t.reverse?"left":"right"),V=(e,a)=>{const o=c.value==="dragging";if(typeof a=="number"){const n=v[a===0?"left-button":"right-button"];let s;if(o&&Array.isArray(m)&&(s=m[0]>m[1]?l^1:l),n)return n({value:e,dragging:o,dragIndex:s})}return v.button?v.button({value:e,dragging:o}):r("div",{class:$("button"),style:ye(t.buttonSize)},null)},E=e=>{const a=typeof e=="number"?t.modelValue[e]:t.modelValue;return r("div",{ref:g[e??0],role:"slider",class:ee(e),tabindex:t.disabled?void 0:0,"aria-valuemin":t.min,"aria-valuenow":a,"aria-valuemax":t.max,"aria-disabled":t.disabled||void 0,"aria-readonly":t.readonly||void 0,"aria-orientation":t.vertical?"vertical":"horizontal",onTouchstartPassive:o=>{typeof e=="number"&&(l=e),X(o)},onTouchend:K,onTouchcancel:K,onClick:pe},[V(a,e)])};return y(t.modelValue),ve(()=>t.modelValue),g.forEach(e=>{he("touchmove",Y,{target:e})}),()=>r("div",{ref:S,style:d.value,class:$({vertical:t.vertical,disabled:t.disabled}),onClick:J},[r("div",{class:$("bar"),style:O.value},[t.range?[E(0),E(1)]:E()])])}});const Xe=Se(Je);const Ye={class:"picker-fontSize-wrapper"},Ke={class:"setting-box st-bg-white"},qe={class:Ve(["st-flex-center"])},Ge={class:"slider"},Qe={class:"custom-button"},We=Z({name:"PickerFontSize"}),Ze=Object.assign(We,{emits:["change"],setup(t,{emit:w}){const v=ie({fontSize:+N.get("fontSize")||re,fontTypes:ce}),{fontSize:l,fontTypes:m}=ue(v),_=R("setSize"),S=g=>{console.log(g),N.set("fontSize",g),localStorage.setItem("fontSize",g),_(g+"px"),w("change",g)};return(g,c)=>{const C=Xe;return U(),Ce("div",Ye,[k("div",Ke,[k("div",qe,ae(i(m).get(+i(l))),1),k("div",Ge,[r(C,{modelValue:i(l),"onUpdate:modelValue":c[0]||(c[0]=h=>z(l)?l.value=h:null),max:16,min:12,step:2,onChange:S},{button:x(()=>[k("div",Qe,ae(i(l)),1)]),_:1},8,["modelValue"])])])])}}}),et=de(Ze,[["__scopeId","data-v-7c9c5aae"]]);const tt={class:"content"},ot={class:"st-margin-top-10"};const nt={class:"st-margin-top-10"},at={class:"st-margin-top-10"},st={class:"st-flex-center st-margin-top-15"},lt={class:"color-wrapper"},it=Z({name:"Setting"}),rt=Object.assign(it,{setup(t){Pe(o=>({"4490b9d4":i(l)}));const w=R("setThemeColor");R("themeColor");const v=p(!1),l=p(N.get("themeColor")||xe),m=o=>{console.log("主题色",o),w(o)};Ne();const _=ze(),S=Ae(),g=R("setTheme"),c=p(N.get("darkMode")==="dark"),C=o=>{g(o?"dark":"light"),c.value=o,N.set("darkMode",o?"dark":"light")},h="//cdn.jsdelivr.net/npm/eruda";let d=[...document.scripts].find(o=>o.src===h);const b=p(window.activeEruda),D=async o=>{j(o)},j=o=>{const n={defaults:{theme:o?"Dark":"Light"}};o?(console.log("开启eruda",d),d?(console.log("存在eruda脚本时，直接初始化eruda"),eruda.init(n)):(console.log("不存在eruda脚本时，需要创建标签"),Ee("初始化中"),new Promise((s,u)=>{d=document.createElement("script"),d.type="text/javascript",d.onload=function(){eruda.init(n),window.activeEruda=!0,s(""),se()},d.onerror=function(B){u(B),se()},d.src=h,document.head.appendChild(d)}))):(console.log("关闭eruda",d),d&&d.remove(),window.eruda&&(eruda==null||eruda.destroy()))},O=ie({title:_.currentRoute.value.meta.title,screenLock:!1,showFontSize:!1,fontSize:N.get("fontSize")||re,fontTypes:ce}),{title:A,screenLock:H,showFontSize:T,fontSize:y,fontTypes:J}=ue(O);p(!1);const X=()=>{T.value=!0},Y=o=>{y.value=o},K=()=>{Ie({message:"敬请期待~"})},ee=()=>{v.value=!0},V=p(!1),E=[{name:"退出登录",color:"#ee0a24"}],e=async o=>{console.log("item:",o),V.value=!1,await a()},a=async()=>{await S.dispatch("logout"),await S.dispatch("cacheViews/clearView"),await _.replace("/login")};return(o,n)=>{const s=Me,u=$e,B=De,F=Re,P=je,I=Le,L=me,q=Fe("waves");return U(),W(L,{class:"page-wrapper",title:"我的设置"},{default:x(()=>[k("div",tt,[k("div",ot,[r(s,{center:"","is-link":"",title:"个人资料",to:"/edit-baseinfo"}),(U(),W(s,{key:0,value:i(J).get(+i(y)),center:"","is-link":"",title:"字体大小",onClick:X},null,8,["value"])),r(u,{show:i(T),"onUpdate:show":n[0]||(n[0]=f=>z(T)?T.value=f:null),position:"bottom","z-index":9999,closeable:!1},{default:x(()=>[r(et,{onChange:Y})]),_:1},8,["show"]),M("",!0),M("",!0),r(F,{name:"darkMode",label:"深色模式","input-align":"right",center:""},{input:x(()=>[r(B,{modelValue:i(c),"onUpdate:modelValue":n[1]||(n[1]=f=>z(c)?c.value=f:null),disabled:!0,size:i(le)(18),onChange:C},null,8,["modelValue","size"])]),_:1}),r(F,{name:"eruda",label:"eruda调试","input-align":"right",center:""},{input:x(()=>[r(B,{modelValue:i(b),"onUpdate:modelValue":n[2]||(n[2]=f=>z(b)?b.value=f:null),size:i(le)(18),onChange:D},null,8,["modelValue","size"])]),_:1})]),k("div",nt,[r(s,{center:"",title:"导航栏设置","is-link":"",to:"/setting-tabbar"}),M("",!0)]),k("div",at,[M("",!0)]),k("div",st,[Te((U(),W(P,{block:"",style:{width:"80%"},type:"primary",onClick:n[3]||(n[3]=f=>V.value=!0)},{default:x(()=>[Be(" 退出登录 ")]),_:1})),[[q]])])]),r(I,{show:i(V),"onUpdate:show":n[4]||(n[4]=f=>z(V)?V.value=f:null),actions:E,"cancel-text":"取消",description:"确定要退出当前账号？","close-on-click-overlay":!1,onSelect:e},null,8,["show"]),r(u,{show:i(v),"onUpdate:show":n[6]||(n[6]=f=>z(v)?v.value=f:null)},{default:x(()=>[k("div",lt,[r(i(Ue),{pureColor:i(l),"onUpdate:pureColor":n[5]||(n[5]=f=>z(l)?l.value=f:null),"is-widget":!0,"disable-alpha":"",format:"hex","picker-type":"chrome","use-type":"pure",onPureColorChange:m},null,8,["pureColor"])])]),_:1},8,["show"])]),_:1})}}}),Vt=de(rt,[["__scopeId","data-v-c720d3cc"]]);export{Vt as default};
