import{a1 as w,d as B,a as h,c as R,a2 as M,cP as U,cg as j,cd as X,cQ as ee,o as D,bl as te,bo as ae,w as H,p as b,P as J,m as A,aJ as oe,a3 as y,av as Z,cR as ne,ca as re,B as G,cS as se,a7 as O,c5 as le,ax as z,ck as ce,cu as ue,ak as ie,a5 as de,a6 as me,cT as fe,U as be,aa as ve,Z as _e,cU as he,cO as ge,f as x,k as E,x as S,g as I,u as _,j as L,q,F as pe,G as ye,y as xe,J as ke,s as Be,z as Pe}from"./index-3418e78b.js";import{N as Ce}from"./index-972ab8e3.js";import{_ as Se}from"./plugin-vue_export-helper-c27b6911.js";import{u as Ie}from"./use-placeholder-c7d2abea.js";import{r as Te,u as $e}from"./use-route-029d125b.js";const[we,T]=w("back-top"),Re={right:y,bottom:y,zIndex:y,target:[String,Object],offset:Z(200),immediate:Boolean,teleport:{type:[String,Object],default:"body"}};var Ae=B({name:we,inheritAttrs:!1,props:Re,emits:["click"],setup(e,{emit:v,slots:d,attrs:u}){let m=!1;const r=h(!1),f=h(),n=h(),p=R(()=>M(U(e.zIndex),{right:j(e.right),bottom:j(e.bottom)})),s=c=>{var t;v("click",c),(t=n.value)==null||t.scrollTo({top:0,behavior:e.immediate?"auto":"smooth"})},o=()=>{r.value=n.value?ne(n.value)>=+e.offset:!1},l=()=>{const{target:c}=e;if(typeof c=="string"){const t=document.querySelector(c);if(t)return t}else return c},i=()=>{re&&G(()=>{n.value=e.target?l():se(f.value),o()})};return X("scroll",ee(o,100),{target:n}),D(i),te(()=>{m&&(r.value=!0,m=!1)}),ae(()=>{r.value&&e.teleport&&(r.value=!1,m=!0)}),H(()=>e.target,i),()=>{const c=b("div",A({ref:e.teleport?void 0:f,class:T({active:r.value}),style:p.value,onClick:s},u),[d.default?d.default():b(J,{name:"back-top",class:T("icon")},null)]);return e.teleport?[b("div",{ref:f,class:T("placeholder")},null),b(oe,{to:e.teleport},{default:()=>[c]})]:c}}});const Oe=O(Ae),[K,F]=w("tabbar"),Ne={route:Boolean,fixed:z,border:z,zIndex:y,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:Z(0),safeAreaInsetBottom:{type:Boolean,default:null}},Q=Symbol(K);var Ve=B({name:K,props:Ne,emits:["change","update:modelValue"],setup(e,{emit:v,slots:d}){const u=h(),{linkChildren:m}=le(Q),r=Ie(u,F),f=()=>{var s;return(s=e.safeAreaInsetBottom)!=null?s:e.fixed},n=()=>{var s;const{fixed:o,zIndex:l,border:i}=e;return b("div",{ref:u,role:"tablist",style:U(l),class:[F({fixed:o}),{[ce]:i,"van-safe-area-bottom":f()}]},[(s=d.default)==null?void 0:s.call(d)])};return m({props:e,setActive:(s,o)=>{ue(e.beforeChange,{args:[s],done(){v("update:modelValue",s),v("change",s),o()}})}}),()=>e.fixed&&e.placeholder?r(n):n()}});const je=O(Ve),[ze,$]=w("tabbar-item"),Ee=M({},Te,{dot:Boolean,icon:String,name:y,badge:y,badgeProps:Object,iconPrefix:String});var Le=B({name:ze,props:Ee,emits:["click"],setup(e,{emit:v,slots:d}){const u=$e(),m=ie().proxy,{parent:r,index:f}=de(Q);if(!r)return;const n=R(()=>{var o;const{route:l,modelValue:i}=r.props;if(l&&"$route"in m){const{$route:c}=m,{to:t}=e,a=fe(t)?t:{path:t};return!!c.matched.find(k=>{const P="path"in a&&a.path===k.path,C="name"in a&&a.name===k.name;return P||C})}return((o=e.name)!=null?o:f.value)===i}),p=o=>{var l;n.value||r.setActive((l=e.name)!=null?l:f.value,u),v("click",o)},s=()=>{if(d.icon)return d.icon({active:n.value});if(e.icon)return b(J,{name:e.icon,classPrefix:e.iconPrefix},null)};return()=>{var o;const{dot:l,badge:i}=e,{activeColor:c,inactiveColor:t}=r.props,a=n.value?c:t;return b("div",{role:"tab",class:$({active:n.value}),style:{color:a},tabindex:0,"aria-selected":n.value,onClick:p},[b(me,A({dot:l,class:$("icon"),content:i},e.badgeProps),{default:s}),b("div",{class:$("text")},[(o=d.default)==null?void 0:o.call(d,{active:n.value})])])}}});const qe=O(Le);const Fe={class:"layout__container"},Me={class:"layout__header"},Ue=B({name:"Layout"}),De=Object.assign(Ue,{props:{withHeader:{type:Boolean,default:!0},title:{type:String,default:""}},emits:["change","body-scroll"],setup(e,{emit:v}){const d=localStorage.getItem("tabbar_sort")&&[{title:"扶뒬못",to:{name:"Home"},icon:"home-o"},...JSON.parse(localStorage.getItem("tabbar_sort"))],u=be(),m=ve(),r=h(!1),f=R(()=>{var t;return((t=u.currentRoute.value.meta)==null?void 0:t.level)>1}),n=h(!1),p=()=>{u.back()};function s(){const{fullPath:t,query:a}=_(m);u.replace({path:"/redirect"+t,query:a})}D(async()=>{_e.on("update-tabbar",a=>{i.value=[{title:"扶뒬못",to:{name:"Home"},icon:"home-o"},...a],s()}),await G();const t=document.querySelector(".layout__container .layout__body");he(t,"scroll",a=>{v("body-scroll",a)})});const o=h(!0),l=h("Name"),i=h(d||ge);H(()=>u,()=>{const t=i.value.some(a=>a.to.name===u.currentRoute.value.name);l.value=i.value.findIndex(a=>a.to.name===u.currentRoute.value.name),o.value=t},{deep:!0,immediate:!0});const c=t=>{v("change",t)};return(t,a)=>{var N;const k=Ce,P=qe,C=je,Y=Oe;return x(),E("div",Fe,[S("div",Me,[t.$slots.header?L(t.$slots,"header",{key:1},void 0,!0):(x(),I(k,{key:0,fixed:_(r),placeholder:_(r),"safe-area-inset-top":"","left-arrow":_(f),title:e.title||((N=t.$route.meta)==null?void 0:N.title),onClickLeft:p},null,8,["fixed","placeholder","left-arrow","title"]))]),S("div",{class:Pe(["layout__body",{"layout__body--show-navbar":_(n)},{"layout__body--show-tabbar":_(o)}])},[L(t.$slots,"default",{},void 0,!0),_(o)?(x(),I(C,A({key:0,modelValue:_(l),"onUpdate:modelValue":a[0]||(a[0]=g=>ke(l)?l.value=g:null),class:"layout-tabbar",fixed:!0,border:"","z-index":9,route:""},t.$attrs,{onChange:c}),{default:q(()=>[(x(!0),E(pe,null,ye(_(i),(g,W)=>{var V;return x(),I(P,{id:"tabbar-item-"+((V=g.to)==null?void 0:V.name),key:g.to+W,to:g.to,icon:g.icon,replace:""},{default:q(()=>[S("span",null,xe(g.title),1)]),_:2},1032,["id","to","icon"])}),128))]),_:1},16,["modelValue"])):Be("",!0),b(Y,{right:"5vw",bottom:"10vh"})],2)])}}}),Qe=Se(De,[["__scopeId","data-v-78c92115"]]);export{Qe as _};
