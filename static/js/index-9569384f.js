import{a1 as Z,d as b,a as F,a2 as x,w as A,p as _,c9 as ee,ax as E,au as te,a3 as oe,B as z,P as H,cD as le,a7 as se,f as h,k as y,x as V,F as R,G as U,A as j,z as K,K as P,y as B,c as D,m as T,q as M,$ as G,d3 as ne,s as ae,g as re,i as ie,Q as ue,R as ce}from"./index-52606606.js";import{_ as S}from"./plugin-vue_export-helper-c27b6911.js";import"./index-2ac635a2.js";import{F as q}from"./index-4f0b9345.js";/* empty css              */import"./index-8700f8a5.js";import{D as de}from"./index-5d39bcc2.js";import{b as pe,a as me,T as _e}from"./index-05b6706b.js";const[fe,g,ve]=Z("cascader"),he={title:String,options:ee(),closeable:E,swipeable:E,closeIcon:te("cross"),showHeader:E,modelValue:oe,fieldNames:Object,placeholder:String,activeColor:String};var ye=b({name:fe,props:he,emits:["close","change","finish","clickTab","update:modelValue"],setup(e,{slots:t,emit:c}){const r=F([]),u=F(0),[f,l]=pe(),{text:a,value:s,children:o}=x({text:"text",value:"value",children:"children"},e.fieldNames),$=(n,i)=>{for(const p of n){if(p[s]===i)return[p];if(p[o]){const d=$(p[o],i);if(d)return[p,...d]}}},m=()=>{const{options:n,modelValue:i}=e;if(i!==void 0){const p=$(n,i);if(p){let d=n;r.value=p.map(v=>{const N={options:d,selected:v},C=d.find(O=>O[s]===v[s]);return C&&(d=C[o]),N}),d&&r.value.push({options:d,selected:null}),z(()=>{u.value=r.value.length-1});return}}r.value=[{options:n,selected:null}]},k=(n,i)=>{if(n.disabled)return;if(r.value[i].selected=n,r.value.length>i+1&&(r.value=r.value.slice(0,i+1)),n[o]){const v={options:n[o],selected:null};r.value[i+1]?r.value[i+1]=v:r.value.push(v),z(()=>{u.value++})}const p=r.value.map(v=>v.selected).filter(Boolean);c("update:modelValue",n[s]);const d={value:n[s],tabIndex:i,selectedOptions:p};c("change",d),n[o]||c("finish",d)},w=()=>c("close"),I=({name:n,title:i})=>c("clickTab",n,i),L=()=>e.showHeader?_("div",{class:g("header")},[_("h2",{class:g("title")},[t.title?t.title():e.title]),e.closeable?_(H,{name:e.closeIcon,class:[g("close-icon"),le],onClick:w},null):null]):null,Q=(n,i,p)=>{const{disabled:d}=n,v=!!(i&&n[s]===i[s]),N=n.color||(v?e.activeColor:void 0),C=t.option?t.option({option:n,selected:v}):_("span",null,[n[a]]);return _("li",{ref:v?l(p):void 0,role:"menuitemradio",class:[g("option",{selected:v,disabled:d}),n.className],style:{color:N},tabindex:d?void 0:v?0:-1,"aria-checked":v,"aria-disabled":d||void 0,onClick:()=>k(n,p)},[C,v?_(H,{name:"success",class:g("selected-icon")},null):null])},J=(n,i,p)=>_("ul",{role:"menu",class:g("options")},[n.map(d=>Q(d,i,p))]),W=(n,i)=>{const{options:p,selected:d}=n,v=e.placeholder||ve("select"),N=d?d[a]:v;return _(_e,{title:N,titleClass:g("tab",{unselected:!d})},{default:()=>{var C,O;return[(C=t["options-top"])==null?void 0:C.call(t,{tabIndex:i}),J(p,d,i),(O=t["options-bottom"])==null?void 0:O.call(t,{tabIndex:i})]}})},X=()=>_(me,{active:u.value,"onUpdate:active":n=>u.value=n,shrink:!0,animated:!0,class:g("tabs"),color:e.activeColor,swipeable:e.swipeable,onClickTab:I},{default:()=>[r.value.map(W)]}),Y=n=>{const i=n.parentElement;i&&(i.scrollTop=n.offsetTop-(i.offsetHeight-n.offsetHeight)/2)};return m(),A(u,n=>{const i=f.value[n];i&&Y(i)}),A(()=>e.options,m,{deep:!0}),A(()=>e.modelValue,n=>{n!==void 0&&r.value.map(p=>{var d;return(d=p.selected)==null?void 0:d[s]}).includes(n)||m()}),()=>_("div",{class:g()},[L(),X()])}});const Ve=se(ye);const $e=b({props:{modelValue:{type:[Array,String,Number,Boolean,Object],default:""},title:{type:String,default:""},name:{type:String,default:""},options:{type:Array,default:()=>[]},columnNum:{type:[Number,String],default:3},gutter:{type:[Number,String],default:10}},emits:["update:modelValue"],setup(e,{emit:t}){const c={flexBasis:`${1/e.columnNum*100}%`,paddingRight:`${e.gutter}px`},r=s=>t("update:modelValue",s),u=({value:s,checked:o})=>{r(o?s:null)},f=s=>{a(s)},l=s=>e.modelValue===s.value,a=s=>{s.checked=!l(s),u(s)};return{itemStyle:c,isChecked:l,onClick:f}}}),ke={class:"custom-radio"},ge={class:"radio-group"},be=["onClick"],Ce={class:"radio-item__text"};function Se(e,t,c,r,u,f){return h(),y("div",ke,[V("ul",ge,[(h(!0),y(R,null,U(e.options,(l,a)=>(h(),y("li",{key:l.value,class:"radio-item",style:j({...e.itemStyle,marginTop:a>=+e.columnNum?10/37.5+"rem":0})},[V("div",{class:K(["radio-item__content","st-line-1",{"is-selected":e.isChecked(l)}]),onClick:P(s=>e.onClick(l),["stop"])},[V("div",Ce,B(l.label),1)],10,be)],4))),128))])])}const we=S($e,[["render",Se],["__scopeId","data-v-6b5d166e"]]);const Fe=b({name:"CheckboxField",props:{modelValue:{type:[Array,String,Number,Boolean,Object],default:""},name:{type:String,default:""},title:{type:String,default:""},shape:{type:String,default:"square"},disabled:Boolean,checked:Boolean,checkAll:Boolean,options:{type:Array,default:()=>[]},columnNum:{type:[Number,String],default:3},gutter:{type:[Number,String],default:10}},emits:["update:modelValue"],setup(e,{emit:t}){const c={flexBasis:`${1/e.columnNum*100}%`,paddingRight:`${e.gutter}px`},r=D(()=>{const{checkAll:o,options:$}=e;let m=$;return o&&(m=[{label:"全部",value:"-1"},...m]),m}),u=o=>t("update:modelValue",o),f=o=>{a(o)},l=o=>e.modelValue.indexOf(o.value)!==-1,a=o=>{o.checked=!l(o),s(o)},s=({value:o,checked:$,disabled:m})=>{const{modelValue:k}=e,w=[...k.slice()];if($)w.push(o);else{const I=w.indexOf(o);I!==-1&&w.splice(I,1)}u(w)};return A(()=>e.modelValue,o=>u(o)),{checkboxs:r,itemStyle:c,isChecked:l,onClick:f}}}),Ne={class:"custom-checkbox"},Pe={class:"checkbox-group"},Te=["onClick"],Be={class:"checkbox-item__text"};function Ie(e,t,c,r,u,f){return h(),y("div",Ne,[V("ul",Pe,[(h(!0),y(R,null,U(e.checkboxs,(l,a)=>(h(),y("li",{key:l.value,class:"checkbox-item",style:j({...e.itemStyle,marginTop:a>=+e.columnNum?10/37.5+"rem":0})},[V("div",{class:K(["checkbox-item__content","st-line-1",{"is-selected":e.isChecked(l)}]),onClick:P(s=>e.onClick(l),["stop"])},[V("div",Be,B(l.label),1)],10,Te)],4))),128))])])}const Oe=S(Fe,[["render",Ie],["__scopeId","data-v-5600560e"]]);const Ae=b({props:{modelValue:{type:[Array,String,Number,Boolean,Object],default:""},name:{type:String,default:""},options:{type:Array,default:()=>[]},columnNum:{type:[Number,String],default:1},gutter:{type:[Number,String],default:10}},emits:["update:modelValue"],setup(e,{emit:t}){return{itemStyle:{flexBasis:`${1/e.columnNum*100}%`},onChange:u=>{t("update:modelValue",u.value)}}}}),Re={class:"custom-cell"},Ue={class:"cell-group"},De=["onClick"],Ee={class:"cell-item__text"};function He(e,t,c,r,u,f){return h(),y("div",Re,[V("ul",Ue,[(h(!0),y(R,null,U(e.options,(l,a)=>(h(),y("li",{key:l.value,class:"cell-item",style:j({...e.itemStyle,marginTop:a>=+e.columnNum?10/37.5+"rem":0})},[V("div",{class:K(["cell-item__content",{"is-selected":e.modelValue==l.value}]),onClick:P(s=>e.onChange(l),["stop"])},[V("div",Ee,B(l.label),1)],10,De)],4))),128))])])}const je=S(Ae,[["render",He],["__scopeId","data-v-4b0460a0"]]);const Ke=b({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){return{inputValue:D({get:()=>e.modelValue,set:r=>{t("update:modelValue",r)}})}}}),qe={class:"custom-input"};function ze(e,t,c,r,u,f){const l=q;return h(),y("div",qe,[_(l,T({modelValue:e.inputValue,"onUpdate:modelValue":t[0]||(t[0]=a=>e.inputValue=a),modelModifiers:{trim:!0},autocomplete:"off",clearable:""},e.$attrs),null,16,["modelValue"])])}const Me=S(Ke,[["render",ze],["__scopeId","data-v-585ff044"]]);const Ge=b({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const c=D({get:()=>e.modelValue,set:l=>{t("update:modelValue",l)}}),r=F(!1),u=document.querySelector(".form-wrapper");return{inputValue:c,showPicker:r,teleport:u,onConfirm:({selectedValues:l})=>{const a=l.join("-");t("update:modelValue",a),r.value=!1}}}}),Le={class:"custom-date-picker"};function Qe(e,t,c,r,u,f){const l=q,a=de,s=G;return h(),y("div",Le,[_(l,T({modelValue:e.inputValue,"onUpdate:modelValue":t[0]||(t[0]=o=>e.inputValue=o),readonly:!0,clearable:"",placeholder:"点击选择"},e.$attrs,{onClick:t[1]||(t[1]=o=>e.showPicker=!0)}),null,16,["modelValue"]),_(s,{show:e.showPicker,"onUpdate:show":t[3]||(t[3]=o=>e.showPicker=o),position:"bottom",teleport:e.teleport,overlay:!0},{default:M(()=>[_(a,{title:"选择时间",onConfirm:e.onConfirm,onCancel:t[2]||(t[2]=o=>e.showPicker=!1)},null,8,["onConfirm"])]),_:1},8,["show","teleport"])])}const Je=S(Ge,[["render",Qe],["__scopeId","data-v-12df6230"]]);const We=b({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t,attrs:c}){const r=D({get:()=>e.modelValue,set:s=>{t("update:modelValue",s)}}),u=F(!1),f=F(""),l=document.querySelector(".form-wrapper");return{inputValue:r,cascaderValue:f,showPicker:u,teleport:l,onFinish:({selectedOptions:s})=>{const{text:o,value:$}=c.fieldNames||{text:"label",value:"value",children:"children"},m=s.map(k=>k[o]).join("/");t("update:modelValue",m),u.value=!1}}}}),Xe={class:"custom-cascader"};function Ye(e,t,c,r,u,f){const l=q,a=Ve,s=G;return h(),y("div",Xe,[_(l,T({modelValue:e.inputValue,"onUpdate:modelValue":t[0]||(t[0]=o=>e.inputValue=o),readonly:!0},e.$attrs,{onClick:t[1]||(t[1]=o=>e.showPicker=!0)}),null,16,["modelValue"]),_(s,{show:e.showPicker,"onUpdate:show":t[4]||(t[4]=o=>e.showPicker=o),position:"bottom",teleport:e.teleport,overlay:!0},{default:M(()=>[_(a,T({modelValue:e.cascaderValue,"onUpdate:modelValue":t[2]||(t[2]=o=>e.cascaderValue=o),title:"请选择所在地区"},e.$attrs,{onClose:t[3]||(t[3]=o=>e.showPicker=!1),onFinish:e.onFinish}),null,16,["modelValue","onFinish"])]),_:1},8,["show","teleport"])])}const Ze=S(We,[["render",Ye],["__scopeId","data-v-727503ca"]]);const xe=b({name:"FilterSearch",components:{InputField:Me,RadioField:we,CheckboxField:Oe,DateField:Je,CellField:je,CascaderField:Ze},props:{showHeader:Boolean,formOptions:{type:Object,default:()=>({"label-align":"top","label-width":"6.2em","input-align":"left"})},formItems:{type:Array,default:()=>[]}},emits:["close","confirm","reset"],setup(e,{emit:t}){const c=s=>{const o={},$=m=>{let k="";return ne(m.value)?[].includes(m.type)?k=[]:k="":k=m.value,k};return e.formItems.forEach(m=>{m.name&&(o[m.name]=$(m))}),{...o}},r={"label-align":"top","label-width":"6.2em","input-align":"left",...e.formOptions},u=F(c()),f=()=>{l(!1),t("close")},l=async(s=!0)=>{u.value=c(),t("reset",u.value),s&&a()},a=()=>{console.log("onConfirm",u.value),t("confirm",u.value)};return{formProps:r,formValues:u,onClose:f,onReset:l,onConfirm:a}}}),et=e=>(ue("data-v-d77d1534"),e=e(),ce(),e),tt={class:"form form-wrapper"},ot={key:0,class:"form__header"},lt=et(()=>V("div",{class:"form__header-title"},B("数据筛选"),-1)),st={class:"form__body"},nt={class:"filter__item-title"},at={class:"form__footer van-safe-area-bottom"};function rt(e,t,c,r,u,f){const l=H;return h(),y("div",tt,[e.showHeader?(h(),y("div",ot,[lt,_(l,{name:"cross",class:"form__header-close",onClick:e.onClose},null,8,["onClick"])])):ae("",!0),V("div",st,[(h(!0),y(R,null,U(e.formItems,(a,s)=>(h(),y("div",{key:a.name+s,class:"filter__item"},[V("div",nt,B(a.title),1),(h(),re(ie(a.type),T({modelValue:e.formValues[a.name],"onUpdate:modelValue":o=>e.formValues[a.name]=o,title:a.title},a.attrs),null,16,["modelValue","onUpdate:modelValue","title"]))]))),128))]),V("div",at,[V("div",{class:"filter__reset",onClick:t[0]||(t[0]=P((...a)=>e.onReset&&e.onReset(...a),["stop"]))},"重置"),V("div",{class:"filter__confirm",onClick:t[1]||(t[1]=P((...a)=>e.onConfirm&&e.onConfirm(...a),["stop"]))},"完成")])])}const vt=S(xe,[["render",rt],["__scopeId","data-v-d77d1534"]]);export{vt as _};
