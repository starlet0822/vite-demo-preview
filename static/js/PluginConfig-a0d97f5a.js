import{aI as Ga,aJ as Bn,_ as Ja,b as Xt,e as Ba,c as Wa,w as Rt,h as Wn,f as Qt,g as Nn,m as On,v as Xa}from"./index-23cd956f.js";var wr={exports:{}},Xn={},Ce={},yt={},Ut={},B={},Ft={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(O){if(super(),!e.IDENTIFIER.test(O))throw new Error("CodeGen: name must be a valid identifier");this.str=O}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class a extends t{constructor(O){super(),this._items=typeof O=="string"?[O]:O}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const O=this._items[0];return O===""||O==='""'}get str(){var O;return(O=this._str)!==null&&O!==void 0?O:this._str=this._items.reduce((S,T)=>`${S}${T}`,"")}get names(){var O;return(O=this._names)!==null&&O!==void 0?O:this._names=this._items.reduce((S,T)=>(T instanceof r&&(S[T.str]=(S[T.str]||0)+1),S),{})}}e._Code=a,e.nil=new a("");function n(p,...O){const S=[p[0]];let T=0;for(;T<O.length;)d(S,O[T]),S.push(p[++T]);return new a(S)}e._=n;const i=new a("+");function c(p,...O){const S=[R(p[0])];let T=0;for(;T<O.length;)S.push(i),d(S,O[T]),S.push(i,R(p[++T]));return y(S),new a(S)}e.str=c;function d(p,O){O instanceof a?p.push(...O._items):O instanceof r?p.push(O):p.push($(O))}e.addCodeArg=d;function y(p){let O=1;for(;O<p.length-1;){if(p[O]===i){const S=f(p[O-1],p[O+1]);if(S!==void 0){p.splice(O-1,3,S);continue}p[O++]="+"}O++}}function f(p,O){if(O==='""')return p;if(p==='""')return O;if(typeof p=="string")return O instanceof r||p[p.length-1]!=='"'?void 0:typeof O!="string"?`${p.slice(0,-1)}${O}"`:O[0]==='"'?p.slice(0,-1)+O.slice(1):void 0;if(typeof O=="string"&&O[0]==='"'&&!(p instanceof r))return`"${p}${O.slice(1)}`}function m(p,O){return O.emptyStr()?p:p.emptyStr()?O:c`${p}${O}`}e.strConcat=m;function $(p){return typeof p=="number"||typeof p=="boolean"||p===null?p:R(Array.isArray(p)?p.join(","):p)}function j(p){return new a(R(p))}e.stringify=j;function R(p){return JSON.stringify(p).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=R;function w(p){return typeof p=="string"&&e.IDENTIFIER.test(p)?new a(`.${p}`):n`[${p}]`}e.getProperty=w;function b(p){if(typeof p=="string"&&e.IDENTIFIER.test(p))return new a(`${p}`);throw new Error(`CodeGen: invalid export name: ${p}, use explicit $id name mapping`)}e.getEsmExportName=b;function v(p){return new a(p.toString())}e.regexpCode=v})(Ft);var Er={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Ft;class r extends Error{constructor(f){super(`CodeGen: "code" for ${f} not defined`),this.value=f.value}}var a;(function(y){y[y.Started=0]="Started",y[y.Completed=1]="Completed"})(a=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class n{constructor({prefixes:f,parent:m}={}){this._names={},this._prefixes=f,this._parent=m}toName(f){return f instanceof t.Name?f:this.name(f)}name(f){return new t.Name(this._newName(f))}_newName(f){const m=this._names[f]||this._nameGroup(f);return`${f}${m.index++}`}_nameGroup(f){var m,$;if(!(($=(m=this._parent)===null||m===void 0?void 0:m._prefixes)===null||$===void 0)&&$.has(f)||this._prefixes&&!this._prefixes.has(f))throw new Error(`CodeGen: prefix "${f}" is not allowed in this scope`);return this._names[f]={prefix:f,index:0}}}e.Scope=n;class i extends t.Name{constructor(f,m){super(m),this.prefix=f}setValue(f,{property:m,itemIndex:$}){this.value=f,this.scopePath=(0,t._)`.${new t.Name(m)}[${$}]`}}e.ValueScopeName=i;const c=(0,t._)`\n`;class d extends n{constructor(f){super(f),this._values={},this._scope=f.scope,this.opts={...f,_n:f.lines?c:t.nil}}get(){return this._scope}name(f){return new i(f,this._newName(f))}value(f,m){var $;if(m.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const j=this.toName(f),{prefix:R}=j,w=($=m.key)!==null&&$!==void 0?$:m.ref;let b=this._values[R];if(b){const O=b.get(w);if(O)return O}else b=this._values[R]=new Map;b.set(w,j);const v=this._scope[R]||(this._scope[R]=[]),p=v.length;return v[p]=m.ref,j.setValue(m,{property:R,itemIndex:p}),j}getValue(f,m){const $=this._values[f];if($)return $.get(m)}scopeRefs(f,m=this._values){return this._reduceValues(m,$=>{if($.scopePath===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return(0,t._)`${f}${$.scopePath}`})}scopeCode(f=this._values,m,$){return this._reduceValues(f,j=>{if(j.value===void 0)throw new Error(`CodeGen: name "${j}" has no value`);return j.value.code},m,$)}_reduceValues(f,m,$={},j){let R=t.nil;for(const w in f){const b=f[w];if(!b)continue;const v=$[w]=$[w]||new Map;b.forEach(p=>{if(v.has(p))return;v.set(p,a.Started);let O=m(p);if(O){const S=this.opts.es5?e.varKinds.var:e.varKinds.const;R=(0,t._)`${R}${S} ${p} = ${O};${this.opts._n}`}else if(O=j==null?void 0:j(p))R=(0,t._)`${R}${O}${this.opts._n}`;else throw new r(p);v.set(p,a.Completed)})}return R}}e.ValueScope=d})(Er);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Ft,r=Er;var a=Ft;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return a._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return a.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return a.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return a.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return a.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return a.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return a.Name}});var n=Er;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return n.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return n.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return n.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return n.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(s,l){return this}}class c extends i{constructor(s,l,k){super(),this.varKind=s,this.name=l,this.rhs=k}render({es5:s,_n:l}){const k=s?r.varKinds.var:this.varKind,z=this.rhs===void 0?"":` = ${this.rhs}`;return`${k} ${this.name}${z};`+l}optimizeNames(s,l){if(s[this.name.str])return this.rhs&&(this.rhs=re(this.rhs,s,l)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class d extends i{constructor(s,l,k){super(),this.lhs=s,this.rhs=l,this.sideEffects=k}render({_n:s}){return`${this.lhs} = ${this.rhs};`+s}optimizeNames(s,l){if(!(this.lhs instanceof t.Name&&!s[this.lhs.str]&&!this.sideEffects))return this.rhs=re(this.rhs,s,l),this}get names(){const s=this.lhs instanceof t.Name?{}:{...this.lhs.names};return de(s,this.rhs)}}class y extends d{constructor(s,l,k,z){super(s,k,z),this.op=l}render({_n:s}){return`${this.lhs} ${this.op}= ${this.rhs};`+s}}class f extends i{constructor(s){super(),this.label=s,this.names={}}render({_n:s}){return`${this.label}:`+s}}class m extends i{constructor(s){super(),this.label=s,this.names={}}render({_n:s}){return`break${this.label?` ${this.label}`:""};`+s}}class $ extends i{constructor(s){super(),this.error=s}render({_n:s}){return`throw ${this.error};`+s}get names(){return this.error.names}}class j extends i{constructor(s){super(),this.code=s}render({_n:s}){return`${this.code};`+s}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(s,l){return this.code=re(this.code,s,l),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class R extends i{constructor(s=[]){super(),this.nodes=s}render(s){return this.nodes.reduce((l,k)=>l+k.render(s),"")}optimizeNodes(){const{nodes:s}=this;let l=s.length;for(;l--;){const k=s[l].optimizeNodes();Array.isArray(k)?s.splice(l,1,...k):k?s[l]=k:s.splice(l,1)}return s.length>0?this:void 0}optimizeNames(s,l){const{nodes:k}=this;let z=k.length;for(;z--;){const F=k[z];F.optimizeNames(s,l)||(we(s,F.names),k.splice(z,1))}return k.length>0?this:void 0}get names(){return this.nodes.reduce((s,l)=>H(s,l.names),{})}}class w extends R{render(s){return"{"+s._n+super.render(s)+"}"+s._n}}class b extends R{}class v extends w{}v.kind="else";class p extends w{constructor(s,l){super(l),this.condition=s}render(s){let l=`if(${this.condition})`+super.render(s);return this.else&&(l+="else "+this.else.render(s)),l}optimizeNodes(){super.optimizeNodes();const s=this.condition;if(s===!0)return this.nodes;let l=this.else;if(l){const k=l.optimizeNodes();l=this.else=Array.isArray(k)?new v(k):k}if(l)return s===!1?l instanceof p?l:l.nodes:this.nodes.length?this:new p(Je(s),l instanceof p?[l]:l.nodes);if(!(s===!1||!this.nodes.length))return this}optimizeNames(s,l){var k;if(this.else=(k=this.else)===null||k===void 0?void 0:k.optimizeNames(s,l),!!(super.optimizeNames(s,l)||this.else))return this.condition=re(this.condition,s,l),this}get names(){const s=super.names;return de(s,this.condition),this.else&&H(s,this.else.names),s}}p.kind="if";class O extends w{}O.kind="for";class S extends O{constructor(s){super(),this.iteration=s}render(s){return`for(${this.iteration})`+super.render(s)}optimizeNames(s,l){if(super.optimizeNames(s,l))return this.iteration=re(this.iteration,s,l),this}get names(){return H(super.names,this.iteration.names)}}class T extends O{constructor(s,l,k,z){super(),this.varKind=s,this.name=l,this.from=k,this.to=z}render(s){const l=s.es5?r.varKinds.var:this.varKind,{name:k,from:z,to:F}=this;return`for(${l} ${k}=${z}; ${k}<${F}; ${k}++)`+super.render(s)}get names(){const s=de(super.names,this.from);return de(s,this.to)}}class A extends O{constructor(s,l,k,z){super(),this.loop=s,this.varKind=l,this.name=k,this.iterable=z}render(s){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(s)}optimizeNames(s,l){if(super.optimizeNames(s,l))return this.iterable=re(this.iterable,s,l),this}get names(){return H(super.names,this.iterable.names)}}class g extends w{constructor(s,l,k){super(),this.name=s,this.args=l,this.async=k}render(s){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(s)}}g.kind="func";class C extends R{render(s){return"return "+super.render(s)}}C.kind="return";class D extends w{render(s){let l="try"+super.render(s);return this.catch&&(l+=this.catch.render(s)),this.finally&&(l+=this.finally.render(s)),l}optimizeNodes(){var s,l;return super.optimizeNodes(),(s=this.catch)===null||s===void 0||s.optimizeNodes(),(l=this.finally)===null||l===void 0||l.optimizeNodes(),this}optimizeNames(s,l){var k,z;return super.optimizeNames(s,l),(k=this.catch)===null||k===void 0||k.optimizeNames(s,l),(z=this.finally)===null||z===void 0||z.optimizeNames(s,l),this}get names(){const s=super.names;return this.catch&&H(s,this.catch.names),this.finally&&H(s,this.finally.names),s}}class M extends w{constructor(s){super(),this.error=s}render(s){return`catch(${this.error})`+super.render(s)}}M.kind="catch";class U extends w{render(s){return"finally"+super.render(s)}}U.kind="finally";class W{constructor(s,l={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...l,_n:l.lines?`
`:""},this._extScope=s,this._scope=new r.Scope({parent:s}),this._nodes=[new b]}toString(){return this._root.render(this.opts)}name(s){return this._scope.name(s)}scopeName(s){return this._extScope.name(s)}scopeValue(s,l){const k=this._extScope.value(s,l);return(this._values[k.prefix]||(this._values[k.prefix]=new Set)).add(k),k}getScopeValue(s,l){return this._extScope.getValue(s,l)}scopeRefs(s){return this._extScope.scopeRefs(s,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(s,l,k,z){const F=this._scope.toName(l);return k!==void 0&&z&&(this._constants[F.str]=k),this._leafNode(new c(s,F,k)),F}const(s,l,k){return this._def(r.varKinds.const,s,l,k)}let(s,l,k){return this._def(r.varKinds.let,s,l,k)}var(s,l,k){return this._def(r.varKinds.var,s,l,k)}assign(s,l,k){return this._leafNode(new d(s,l,k))}add(s,l){return this._leafNode(new y(s,e.operators.ADD,l))}code(s){return typeof s=="function"?s():s!==t.nil&&this._leafNode(new j(s)),this}object(...s){const l=["{"];for(const[k,z]of s)l.length>1&&l.push(","),l.push(k),(k!==z||this.opts.es5)&&(l.push(":"),(0,t.addCodeArg)(l,z));return l.push("}"),new t._Code(l)}if(s,l,k){if(this._blockNode(new p(s)),l&&k)this.code(l).else().code(k).endIf();else if(l)this.code(l).endIf();else if(k)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(s){return this._elseNode(new p(s))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(p,v)}_for(s,l){return this._blockNode(s),l&&this.code(l).endFor(),this}for(s,l){return this._for(new S(s),l)}forRange(s,l,k,z,F=this.opts.es5?r.varKinds.var:r.varKinds.let){const Q=this._scope.toName(s);return this._for(new T(F,Q,l,k),()=>z(Q))}forOf(s,l,k,z=r.varKinds.const){const F=this._scope.toName(s);if(this.opts.es5){const Q=l instanceof t.Name?l:this.var("_arr",l);return this.forRange("_i",0,(0,t._)`${Q}.length`,Z=>{this.var(F,(0,t._)`${Q}[${Z}]`),k(F)})}return this._for(new A("of",z,F,l),()=>k(F))}forIn(s,l,k,z=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(s,(0,t._)`Object.keys(${l})`,k);const F=this._scope.toName(s);return this._for(new A("in",z,F,l),()=>k(F))}endFor(){return this._endBlockNode(O)}label(s){return this._leafNode(new f(s))}break(s){return this._leafNode(new m(s))}return(s){const l=new C;if(this._blockNode(l),this.code(s),l.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(s,l,k){if(!l&&!k)throw new Error('CodeGen: "try" without "catch" and "finally"');const z=new D;if(this._blockNode(z),this.code(s),l){const F=this.name("e");this._currNode=z.catch=new M(F),l(F)}return k&&(this._currNode=z.finally=new U,this.code(k)),this._endBlockNode(M,U)}throw(s){return this._leafNode(new $(s))}block(s,l){return this._blockStarts.push(this._nodes.length),s&&this.code(s).endBlock(l),this}endBlock(s){const l=this._blockStarts.pop();if(l===void 0)throw new Error("CodeGen: not in self-balancing block");const k=this._nodes.length-l;if(k<0||s!==void 0&&k!==s)throw new Error(`CodeGen: wrong number of nodes: ${k} vs ${s} expected`);return this._nodes.length=l,this}func(s,l=t.nil,k,z){return this._blockNode(new g(s,l,k)),z&&this.code(z).endFunc(),this}endFunc(){return this._endBlockNode(g)}optimize(s=1){for(;s-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(s){return this._currNode.nodes.push(s),this}_blockNode(s){this._currNode.nodes.push(s),this._nodes.push(s)}_endBlockNode(s,l){const k=this._currNode;if(k instanceof s||l&&k instanceof l)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${l?`${s.kind}/${l.kind}`:s.kind}"`)}_elseNode(s){const l=this._currNode;if(!(l instanceof p))throw new Error('CodeGen: "else" without "if"');return this._currNode=l.else=s,this}get _root(){return this._nodes[0]}get _currNode(){const s=this._nodes;return s[s.length-1]}set _currNode(s){const l=this._nodes;l[l.length-1]=s}}e.CodeGen=W;function H(E,s){for(const l in s)E[l]=(E[l]||0)+(s[l]||0);return E}function de(E,s){return s instanceof t._CodeOrName?H(E,s.names):E}function re(E,s,l){if(E instanceof t.Name)return k(E);if(!z(E))return E;return new t._Code(E._items.reduce((F,Q)=>(Q instanceof t.Name&&(Q=k(Q)),Q instanceof t._Code?F.push(...Q._items):F.push(Q),F),[]));function k(F){const Q=l[F.str];return Q===void 0||s[F.str]!==1?F:(delete s[F.str],Q)}function z(F){return F instanceof t._Code&&F._items.some(Q=>Q instanceof t.Name&&s[Q.str]===1&&l[Q.str]!==void 0)}}function we(E,s){for(const l in s)E[l]=(E[l]||0)-(s[l]||0)}function Je(E){return typeof E=="boolean"||typeof E=="number"||E===null?!E:(0,t._)`!${I(E)}`}e.not=Je;const nt=_(e.operators.AND);function gt(...E){return E.reduce(nt)}e.and=gt;const at=_(e.operators.OR);function V(...E){return E.reduce(at)}e.or=V;function _(E){return(s,l)=>s===t.nil?l:l===t.nil?s:(0,t._)`${I(s)} ${E} ${I(l)}`}function I(E){return E instanceof t.Name?E:(0,t._)`(${E})`}})(B);var ee={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=B,r=Ft;function a(g){const C={};for(const D of g)C[D]=!0;return C}e.toHash=a;function n(g,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(i(g,C),!c(C,g.self.RULES.all))}e.alwaysValidSchema=n;function i(g,C=g.schema){const{opts:D,self:M}=g;if(!D.strictSchema||typeof C=="boolean")return;const U=M.RULES.keywords;for(const W in C)U[W]||A(g,`unknown keyword: "${W}"`)}e.checkUnknownRules=i;function c(g,C){if(typeof g=="boolean")return!g;for(const D in g)if(C[D])return!0;return!1}e.schemaHasRules=c;function d(g,C){if(typeof g=="boolean")return!g;for(const D in g)if(D!=="$ref"&&C.all[D])return!0;return!1}e.schemaHasRulesButRef=d;function y({topSchemaRef:g,schemaPath:C},D,M,U){if(!U){if(typeof D=="number"||typeof D=="boolean")return D;if(typeof D=="string")return(0,t._)`${D}`}return(0,t._)`${g}${C}${(0,t.getProperty)(M)}`}e.schemaRefOrVal=y;function f(g){return j(decodeURIComponent(g))}e.unescapeFragment=f;function m(g){return encodeURIComponent($(g))}e.escapeFragment=m;function $(g){return typeof g=="number"?`${g}`:g.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=$;function j(g){return g.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=j;function R(g,C){if(Array.isArray(g))for(const D of g)C(D);else C(g)}e.eachItem=R;function w({mergeNames:g,mergeToName:C,mergeValues:D,resultToName:M}){return(U,W,H,de)=>{const re=H===void 0?W:H instanceof t.Name?(W instanceof t.Name?g(U,W,H):C(U,W,H),H):W instanceof t.Name?(C(U,H,W),W):D(W,H);return de===t.Name&&!(re instanceof t.Name)?M(U,re):re}}e.mergeEvaluated={props:w({mergeNames:(g,C,D)=>g.if((0,t._)`${D} !== true && ${C} !== undefined`,()=>{g.if((0,t._)`${C} === true`,()=>g.assign(D,!0),()=>g.assign(D,(0,t._)`${D} || {}`).code((0,t._)`Object.assign(${D}, ${C})`))}),mergeToName:(g,C,D)=>g.if((0,t._)`${D} !== true`,()=>{C===!0?g.assign(D,!0):(g.assign(D,(0,t._)`${D} || {}`),v(g,D,C))}),mergeValues:(g,C)=>g===!0?!0:{...g,...C},resultToName:b}),items:w({mergeNames:(g,C,D)=>g.if((0,t._)`${D} !== true && ${C} !== undefined`,()=>g.assign(D,(0,t._)`${C} === true ? true : ${D} > ${C} ? ${D} : ${C}`)),mergeToName:(g,C,D)=>g.if((0,t._)`${D} !== true`,()=>g.assign(D,C===!0?!0:(0,t._)`${D} > ${C} ? ${D} : ${C}`)),mergeValues:(g,C)=>g===!0?!0:Math.max(g,C),resultToName:(g,C)=>g.var("items",C)})};function b(g,C){if(C===!0)return g.var("props",!0);const D=g.var("props",(0,t._)`{}`);return C!==void 0&&v(g,D,C),D}e.evaluatedPropsToName=b;function v(g,C,D){Object.keys(D).forEach(M=>g.assign((0,t._)`${C}${(0,t.getProperty)(M)}`,!0))}e.setEvaluated=v;const p={};function O(g,C){return g.scopeValue("func",{ref:C,code:p[C.code]||(p[C.code]=new r._Code(C.code))})}e.useFunc=O;var S;(function(g){g[g.Num=0]="Num",g[g.Str=1]="Str"})(S=e.Type||(e.Type={}));function T(g,C,D){if(g instanceof t.Name){const M=C===S.Num;return D?M?(0,t._)`"[" + ${g} + "]"`:(0,t._)`"['" + ${g} + "']"`:M?(0,t._)`"/" + ${g}`:(0,t._)`"/" + ${g}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return D?(0,t.getProperty)(g).toString():"/"+$(g)}e.getErrorPath=T;function A(g,C,D=g.opts.strictSchema){if(D){if(C=`strict mode: ${C}`,D===!0)throw new Error(C);g.self.logger.warn(C)}}e.checkStrictMode=A})(ee);var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});const pe=B,Qa={data:new pe.Name("data"),valCxt:new pe.Name("valCxt"),instancePath:new pe.Name("instancePath"),parentData:new pe.Name("parentData"),parentDataProperty:new pe.Name("parentDataProperty"),rootData:new pe.Name("rootData"),dynamicAnchors:new pe.Name("dynamicAnchors"),vErrors:new pe.Name("vErrors"),errors:new pe.Name("errors"),this:new pe.Name("this"),self:new pe.Name("self"),scope:new pe.Name("scope"),json:new pe.Name("json"),jsonPos:new pe.Name("jsonPos"),jsonLen:new pe.Name("jsonLen"),jsonPart:new pe.Name("jsonPart")};Ve.default=Qa;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=B,r=ee,a=Ve;e.keywordError={message:({keyword:v})=>(0,t.str)`must pass "${v}" keyword validation`},e.keyword$DataError={message:({keyword:v,schemaType:p})=>p?(0,t.str)`"${v}" keyword must be ${p} ($data)`:(0,t.str)`"${v}" keyword is invalid ($data)`};function n(v,p=e.keywordError,O,S){const{it:T}=v,{gen:A,compositeRule:g,allErrors:C}=T,D=$(v,p,O);S??(g||C)?y(A,D):f(T,(0,t._)`[${D}]`)}e.reportError=n;function i(v,p=e.keywordError,O){const{it:S}=v,{gen:T,compositeRule:A,allErrors:g}=S,C=$(v,p,O);y(T,C),A||g||f(S,a.default.vErrors)}e.reportExtraError=i;function c(v,p){v.assign(a.default.errors,p),v.if((0,t._)`${a.default.vErrors} !== null`,()=>v.if(p,()=>v.assign((0,t._)`${a.default.vErrors}.length`,p),()=>v.assign(a.default.vErrors,null)))}e.resetErrorsCount=c;function d({gen:v,keyword:p,schemaValue:O,data:S,errsCount:T,it:A}){if(T===void 0)throw new Error("ajv implementation error");const g=v.name("err");v.forRange("i",T,a.default.errors,C=>{v.const(g,(0,t._)`${a.default.vErrors}[${C}]`),v.if((0,t._)`${g}.instancePath === undefined`,()=>v.assign((0,t._)`${g}.instancePath`,(0,t.strConcat)(a.default.instancePath,A.errorPath))),v.assign((0,t._)`${g}.schemaPath`,(0,t.str)`${A.errSchemaPath}/${p}`),A.opts.verbose&&(v.assign((0,t._)`${g}.schema`,O),v.assign((0,t._)`${g}.data`,S))})}e.extendErrors=d;function y(v,p){const O=v.const("err",p);v.if((0,t._)`${a.default.vErrors} === null`,()=>v.assign(a.default.vErrors,(0,t._)`[${O}]`),(0,t._)`${a.default.vErrors}.push(${O})`),v.code((0,t._)`${a.default.errors}++`)}function f(v,p){const{gen:O,validateName:S,schemaEnv:T}=v;T.$async?O.throw((0,t._)`new ${v.ValidationError}(${p})`):(O.assign((0,t._)`${S}.errors`,p),O.return(!1))}const m={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function $(v,p,O){const{createErrors:S}=v.it;return S===!1?(0,t._)`{}`:j(v,p,O)}function j(v,p,O={}){const{gen:S,it:T}=v,A=[R(T,O),w(v,O)];return b(v,p,A),S.object(...A)}function R({errorPath:v},{instancePath:p}){const O=p?(0,t.str)`${v}${(0,r.getErrorPath)(p,r.Type.Str)}`:v;return[a.default.instancePath,(0,t.strConcat)(a.default.instancePath,O)]}function w({keyword:v,it:{errSchemaPath:p}},{schemaPath:O,parentSchema:S}){let T=S?p:(0,t.str)`${p}/${v}`;return O&&(T=(0,t.str)`${T}${(0,r.getErrorPath)(O,r.Type.Str)}`),[m.schemaPath,T]}function b(v,{params:p,message:O},S){const{keyword:T,data:A,schemaValue:g,it:C}=v,{opts:D,propertyName:M,topSchemaRef:U,schemaPath:W}=C;S.push([m.keyword,T],[m.params,typeof p=="function"?p(v):p||(0,t._)`{}`]),D.messages&&S.push([m.message,typeof O=="function"?O(v):O]),D.verbose&&S.push([m.schema,g],[m.parentSchema,(0,t._)`${U}${W}`],[a.default.data,A]),M&&S.push([m.propertyName,M])}})(Ut);Object.defineProperty(yt,"__esModule",{value:!0});yt.boolOrEmptySchema=yt.topBoolOrEmptySchema=void 0;const Ya=Ut,Za=B,xa=Ve,es={message:"boolean schema is false"};function ts(e){const{gen:t,schema:r,validateName:a}=e;r===!1?Qn(e,!1):typeof r=="object"&&r.$async===!0?t.return(xa.default.data):(t.assign((0,Za._)`${a}.errors`,null),t.return(!0))}yt.topBoolOrEmptySchema=ts;function rs(e,t){const{gen:r,schema:a}=e;a===!1?(r.var(t,!1),Qn(e)):r.var(t,!0)}yt.boolOrEmptySchema=rs;function Qn(e,t){const{gen:r,data:a}=e,n={gen:r,keyword:"false schema",data:a,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Ya.reportError)(n,es,void 0,t)}var qt={},tt={};Object.defineProperty(tt,"__esModule",{value:!0});tt.getRules=tt.isJSONType=void 0;const ns=["string","number","integer","boolean","null","object","array"],as=new Set(ns);function ss(e){return typeof e=="string"&&as.has(e)}tt.isJSONType=ss;function os(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}tt.getRules=os;var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.shouldUseRule=Fe.shouldUseGroup=Fe.schemaHasRulesForType=void 0;function is({schema:e,self:t},r){const a=t.RULES.types[r];return a&&a!==!0&&Yn(e,a)}Fe.schemaHasRulesForType=is;function Yn(e,t){return t.rules.some(r=>Zn(e,r))}Fe.shouldUseGroup=Yn;function Zn(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(a=>e[a]!==void 0))}Fe.shouldUseRule=Zn;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=tt,r=Fe,a=Ut,n=B,i=ee;var c;(function(S){S[S.Correct=0]="Correct",S[S.Wrong=1]="Wrong"})(c=e.DataType||(e.DataType={}));function d(S){const T=y(S.type);if(T.includes("null")){if(S.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!T.length&&S.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');S.nullable===!0&&T.push("null")}return T}e.getSchemaTypes=d;function y(S){const T=Array.isArray(S)?S:S?[S]:[];if(T.every(t.isJSONType))return T;throw new Error("type must be JSONType or JSONType[]: "+T.join(","))}e.getJSONTypes=y;function f(S,T){const{gen:A,data:g,opts:C}=S,D=$(T,C.coerceTypes),M=T.length>0&&!(D.length===0&&T.length===1&&(0,r.schemaHasRulesForType)(S,T[0]));if(M){const U=b(T,g,C.strictNumbers,c.Wrong);A.if(U,()=>{D.length?j(S,T,D):p(S)})}return M}e.coerceAndCheckDataType=f;const m=new Set(["string","number","integer","boolean","null"]);function $(S,T){return T?S.filter(A=>m.has(A)||T==="array"&&A==="array"):[]}function j(S,T,A){const{gen:g,data:C,opts:D}=S,M=g.let("dataType",(0,n._)`typeof ${C}`),U=g.let("coerced",(0,n._)`undefined`);D.coerceTypes==="array"&&g.if((0,n._)`${M} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>g.assign(C,(0,n._)`${C}[0]`).assign(M,(0,n._)`typeof ${C}`).if(b(T,C,D.strictNumbers),()=>g.assign(U,C))),g.if((0,n._)`${U} !== undefined`);for(const H of A)(m.has(H)||H==="array"&&D.coerceTypes==="array")&&W(H);g.else(),p(S),g.endIf(),g.if((0,n._)`${U} !== undefined`,()=>{g.assign(C,U),R(S,U)});function W(H){switch(H){case"string":g.elseIf((0,n._)`${M} == "number" || ${M} == "boolean"`).assign(U,(0,n._)`"" + ${C}`).elseIf((0,n._)`${C} === null`).assign(U,(0,n._)`""`);return;case"number":g.elseIf((0,n._)`${M} == "boolean" || ${C} === null
              || (${M} == "string" && ${C} && ${C} == +${C})`).assign(U,(0,n._)`+${C}`);return;case"integer":g.elseIf((0,n._)`${M} === "boolean" || ${C} === null
              || (${M} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(U,(0,n._)`+${C}`);return;case"boolean":g.elseIf((0,n._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign(U,!1).elseIf((0,n._)`${C} === "true" || ${C} === 1`).assign(U,!0);return;case"null":g.elseIf((0,n._)`${C} === "" || ${C} === 0 || ${C} === false`),g.assign(U,null);return;case"array":g.elseIf((0,n._)`${M} === "string" || ${M} === "number"
              || ${M} === "boolean" || ${C} === null`).assign(U,(0,n._)`[${C}]`)}}}function R({gen:S,parentData:T,parentDataProperty:A},g){S.if((0,n._)`${T} !== undefined`,()=>S.assign((0,n._)`${T}[${A}]`,g))}function w(S,T,A,g=c.Correct){const C=g===c.Correct?n.operators.EQ:n.operators.NEQ;let D;switch(S){case"null":return(0,n._)`${T} ${C} null`;case"array":D=(0,n._)`Array.isArray(${T})`;break;case"object":D=(0,n._)`${T} && typeof ${T} == "object" && !Array.isArray(${T})`;break;case"integer":D=M((0,n._)`!(${T} % 1) && !isNaN(${T})`);break;case"number":D=M();break;default:return(0,n._)`typeof ${T} ${C} ${S}`}return g===c.Correct?D:(0,n.not)(D);function M(U=n.nil){return(0,n.and)((0,n._)`typeof ${T} == "number"`,U,A?(0,n._)`isFinite(${T})`:n.nil)}}e.checkDataType=w;function b(S,T,A,g){if(S.length===1)return w(S[0],T,A,g);let C;const D=(0,i.toHash)(S);if(D.array&&D.object){const M=(0,n._)`typeof ${T} != "object"`;C=D.null?M:(0,n._)`!${T} || ${M}`,delete D.null,delete D.array,delete D.object}else C=n.nil;D.number&&delete D.integer;for(const M in D)C=(0,n.and)(C,w(M,T,A,g));return C}e.checkDataTypes=b;const v={message:({schema:S})=>`must be ${S}`,params:({schema:S,schemaValue:T})=>typeof S=="string"?(0,n._)`{type: ${S}}`:(0,n._)`{type: ${T}}`};function p(S){const T=O(S);(0,a.reportError)(T,v)}e.reportTypeError=p;function O(S){const{gen:T,data:A,schema:g}=S,C=(0,i.schemaRefOrVal)(S,g,"type");return{gen:T,keyword:"type",data:A,schema:g.type,schemaCode:C,schemaValue:C,parentSchema:g,params:{},it:S}}})(qt);var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.assignDefaults=void 0;const ft=B,cs=ee;function us(e,t){const{properties:r,items:a}=e.schema;if(t==="object"&&r)for(const n in r)Cn(e,n,r[n].default);else t==="array"&&Array.isArray(a)&&a.forEach((n,i)=>Cn(e,i,n.default))}dr.assignDefaults=us;function Cn(e,t,r){const{gen:a,compositeRule:n,data:i,opts:c}=e;if(r===void 0)return;const d=(0,ft._)`${i}${(0,ft.getProperty)(t)}`;if(n){(0,cs.checkStrictMode)(e,`default is ignored for: ${d}`);return}let y=(0,ft._)`${d} === undefined`;c.useDefaults==="empty"&&(y=(0,ft._)`${y} || ${d} === null || ${d} === ""`),a.if(y,(0,ft._)`${d} = ${(0,ft.stringify)(r)}`)}var Me={},X={};Object.defineProperty(X,"__esModule",{value:!0});X.validateUnion=X.validateArray=X.usePattern=X.callValidateCode=X.schemaProperties=X.allSchemaProperties=X.noPropertyInData=X.propertyInData=X.isOwnProperty=X.hasPropFunc=X.reportMissingProp=X.checkMissingProp=X.checkReportMissingProp=void 0;const ae=B,Tr=ee,Le=Ve,ls=ee;function ds(e,t){const{gen:r,data:a,it:n}=e;r.if(kr(r,a,t,n.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ae._)`${t}`},!0),e.error()})}X.checkReportMissingProp=ds;function fs({gen:e,data:t,it:{opts:r}},a,n){return(0,ae.or)(...a.map(i=>(0,ae.and)(kr(e,t,i,r.ownProperties),(0,ae._)`${n} = ${i}`)))}X.checkMissingProp=fs;function hs(e,t){e.setParams({missingProperty:t},!0),e.error()}X.reportMissingProp=hs;function xn(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ae._)`Object.prototype.hasOwnProperty`})}X.hasPropFunc=xn;function Rr(e,t,r){return(0,ae._)`${xn(e)}.call(${t}, ${r})`}X.isOwnProperty=Rr;function ms(e,t,r,a){const n=(0,ae._)`${t}${(0,ae.getProperty)(r)} !== undefined`;return a?(0,ae._)`${n} && ${Rr(e,t,r)}`:n}X.propertyInData=ms;function kr(e,t,r,a){const n=(0,ae._)`${t}${(0,ae.getProperty)(r)} === undefined`;return a?(0,ae.or)(n,(0,ae.not)(Rr(e,t,r))):n}X.noPropertyInData=kr;function ea(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}X.allSchemaProperties=ea;function ps(e,t){return ea(t).filter(r=>!(0,Tr.alwaysValidSchema)(e,t[r]))}X.schemaProperties=ps;function ys({schemaCode:e,data:t,it:{gen:r,topSchemaRef:a,schemaPath:n,errorPath:i},it:c},d,y,f){const m=f?(0,ae._)`${e}, ${t}, ${a}${n}`:t,$=[[Le.default.instancePath,(0,ae.strConcat)(Le.default.instancePath,i)],[Le.default.parentData,c.parentData],[Le.default.parentDataProperty,c.parentDataProperty],[Le.default.rootData,Le.default.rootData]];c.opts.dynamicRef&&$.push([Le.default.dynamicAnchors,Le.default.dynamicAnchors]);const j=(0,ae._)`${m}, ${r.object(...$)}`;return y!==ae.nil?(0,ae._)`${d}.call(${y}, ${j})`:(0,ae._)`${d}(${j})`}X.callValidateCode=ys;const $s=(0,ae._)`new RegExp`;function vs({gen:e,it:{opts:t}},r){const a=t.unicodeRegExp?"u":"",{regExp:n}=t.code,i=n(r,a);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,ae._)`${n.code==="new RegExp"?$s:(0,ls.useFunc)(e,n)}(${r}, ${a})`})}X.usePattern=vs;function _s(e){const{gen:t,data:r,keyword:a,it:n}=e,i=t.name("valid");if(n.allErrors){const d=t.let("valid",!0);return c(()=>t.assign(d,!1)),d}return t.var(i,!0),c(()=>t.break()),i;function c(d){const y=t.const("len",(0,ae._)`${r}.length`);t.forRange("i",0,y,f=>{e.subschema({keyword:a,dataProp:f,dataPropType:Tr.Type.Num},i),t.if((0,ae.not)(i),d)})}}X.validateArray=_s;function gs(e){const{gen:t,schema:r,keyword:a,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(y=>(0,Tr.alwaysValidSchema)(n,y))&&!n.opts.unevaluated)return;const c=t.let("valid",!1),d=t.name("_valid");t.block(()=>r.forEach((y,f)=>{const m=e.subschema({keyword:a,schemaProp:f,compositeRule:!0},d);t.assign(c,(0,ae._)`${c} || ${d}`),e.mergeValidEvaluated(m,d)||t.if((0,ae.not)(c))})),e.result(c,()=>e.reset(),()=>e.error(!0))}X.validateUnion=gs;Object.defineProperty(Me,"__esModule",{value:!0});Me.validateKeywordUsage=Me.validSchemaType=Me.funcKeywordCode=Me.macroKeywordCode=void 0;const ye=B,Ze=Ve,ws=X,Es=Ut;function bs(e,t){const{gen:r,keyword:a,schema:n,parentSchema:i,it:c}=e,d=t.macro.call(c.self,n,i,c),y=ta(r,a,d);c.opts.validateSchema!==!1&&c.self.validateSchema(d,!0);const f=r.name("valid");e.subschema({schema:d,schemaPath:ye.nil,errSchemaPath:`${c.errSchemaPath}/${a}`,topSchemaRef:y,compositeRule:!0},f),e.pass(f,()=>e.error(!0))}Me.macroKeywordCode=bs;function Ss(e,t){var r;const{gen:a,keyword:n,schema:i,parentSchema:c,$data:d,it:y}=e;Ns(y,t);const f=!d&&t.compile?t.compile.call(y.self,i,c,y):t.validate,m=ta(a,n,f),$=a.let("valid");e.block$data($,j),e.ok((r=t.valid)!==null&&r!==void 0?r:$);function j(){if(t.errors===!1)b(),t.modifying&&Tn(e),v(()=>e.error());else{const p=t.async?R():w();t.modifying&&Tn(e),v(()=>Ps(e,p))}}function R(){const p=a.let("ruleErrs",null);return a.try(()=>b((0,ye._)`await `),O=>a.assign($,!1).if((0,ye._)`${O} instanceof ${y.ValidationError}`,()=>a.assign(p,(0,ye._)`${O}.errors`),()=>a.throw(O))),p}function w(){const p=(0,ye._)`${m}.errors`;return a.assign(p,null),b(ye.nil),p}function b(p=t.async?(0,ye._)`await `:ye.nil){const O=y.opts.passContext?Ze.default.this:Ze.default.self,S=!("compile"in t&&!d||t.schema===!1);a.assign($,(0,ye._)`${p}${(0,ws.callValidateCode)(e,m,O,S)}`,t.modifying)}function v(p){var O;a.if((0,ye.not)((O=t.valid)!==null&&O!==void 0?O:$),p)}}Me.funcKeywordCode=Ss;function Tn(e){const{gen:t,data:r,it:a}=e;t.if(a.parentData,()=>t.assign(r,(0,ye._)`${a.parentData}[${a.parentDataProperty}]`))}function Ps(e,t){const{gen:r}=e;r.if((0,ye._)`Array.isArray(${t})`,()=>{r.assign(Ze.default.vErrors,(0,ye._)`${Ze.default.vErrors} === null ? ${t} : ${Ze.default.vErrors}.concat(${t})`).assign(Ze.default.errors,(0,ye._)`${Ze.default.vErrors}.length`),(0,Es.extendErrors)(e)},()=>e.error())}function Ns({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function ta(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,ye.stringify)(r)})}function Os(e,t,r=!1){return!t.length||t.some(a=>a==="array"?Array.isArray(e):a==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==a||r&&typeof e>"u")}Me.validSchemaType=Os;function Cs({schema:e,opts:t,self:r,errSchemaPath:a},n,i){if(Array.isArray(n.keyword)?!n.keyword.includes(i):n.keyword!==i)throw new Error("ajv implementation error");const c=n.dependencies;if(c!=null&&c.some(d=>!Object.prototype.hasOwnProperty.call(e,d)))throw new Error(`parent schema must have dependencies of ${i}: ${c.join(",")}`);if(n.validateSchema&&!n.validateSchema(e[i])){const y=`keyword "${i}" value is invalid at path "${a}": `+r.errorsText(n.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(y);else throw new Error(y)}}Me.validateKeywordUsage=Cs;var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.extendSubschemaMode=Ge.extendSubschemaData=Ge.getSubschema=void 0;const Ae=B,ra=ee;function Ts(e,{keyword:t,schemaProp:r,schema:a,schemaPath:n,errSchemaPath:i,topSchemaRef:c}){if(t!==void 0&&a!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const d=e.schema[t];return r===void 0?{schema:d,schemaPath:(0,Ae._)`${e.schemaPath}${(0,Ae.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:d[r],schemaPath:(0,Ae._)`${e.schemaPath}${(0,Ae.getProperty)(t)}${(0,Ae.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,ra.escapeFragment)(r)}`}}if(a!==void 0){if(n===void 0||i===void 0||c===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:a,schemaPath:n,topSchemaRef:c,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Ge.getSubschema=Ts;function Rs(e,t,{dataProp:r,dataPropType:a,data:n,dataTypes:i,propertyName:c}){if(n!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=t;if(r!==void 0){const{errorPath:f,dataPathArr:m,opts:$}=t,j=d.let("data",(0,Ae._)`${t.data}${(0,Ae.getProperty)(r)}`,!0);y(j),e.errorPath=(0,Ae.str)`${f}${(0,ra.getErrorPath)(r,a,$.jsPropertySyntax)}`,e.parentDataProperty=(0,Ae._)`${r}`,e.dataPathArr=[...m,e.parentDataProperty]}if(n!==void 0){const f=n instanceof Ae.Name?n:d.let("data",n,!0);y(f),c!==void 0&&(e.propertyName=c)}i&&(e.dataTypes=i);function y(f){e.data=f,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,f]}}Ge.extendSubschemaData=Rs;function ks(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:a,createErrors:n,allErrors:i}){a!==void 0&&(e.compositeRule=a),n!==void 0&&(e.createErrors=n),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}Ge.extendSubschemaMode=ks;var me={},na=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var a,n,i;if(Array.isArray(t)){if(a=t.length,a!=r.length)return!1;for(n=a;n--!==0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),a=i.length,a!==Object.keys(r).length)return!1;for(n=a;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=a;n--!==0;){var c=i[n];if(!e(t[c],r[c]))return!1}return!0}return t!==t&&r!==r},aa={exports:{}},He=aa.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var a=typeof r=="function"?r:r.pre||function(){},n=r.post||function(){};rr(t,a,n,e,"",e)};He.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};He.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};He.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};He.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function rr(e,t,r,a,n,i,c,d,y,f){if(a&&typeof a=="object"&&!Array.isArray(a)){t(a,n,i,c,d,y,f);for(var m in a){var $=a[m];if(Array.isArray($)){if(m in He.arrayKeywords)for(var j=0;j<$.length;j++)rr(e,t,r,$[j],n+"/"+m+"/"+j,i,n,m,a,j)}else if(m in He.propsKeywords){if($&&typeof $=="object")for(var R in $)rr(e,t,r,$[R],n+"/"+m+"/"+js(R),i,n,m,a,R)}else(m in He.keywords||e.allKeys&&!(m in He.skipKeywords))&&rr(e,t,r,$,n+"/"+m,i,n,m,a)}r(a,n,i,c,d,y,f)}}function js(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var Is=aa.exports;Object.defineProperty(me,"__esModule",{value:!0});me.getSchemaRefs=me.resolveUrl=me.normalizeId=me._getFullPath=me.getFullPath=me.inlineRef=void 0;const Ds=ee,As=na,Ms=Is,Vs=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function zs(e,t=!0){return typeof e=="boolean"?!0:t===!0?!br(e):t?sa(e)<=t:!1}me.inlineRef=zs;const Fs=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function br(e){for(const t in e){if(Fs.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(br)||typeof r=="object"&&br(r))return!0}return!1}function sa(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!Vs.has(r)&&(typeof e[r]=="object"&&(0,Ds.eachItem)(e[r],a=>t+=sa(a)),t===1/0))return 1/0}return t}function oa(e,t="",r){r!==!1&&(t=pt(t));const a=e.parse(t);return ia(e,a)}me.getFullPath=oa;function ia(e,t){return e.serialize(t).split("#")[0]+"#"}me._getFullPath=ia;const Us=/#\/?$/;function pt(e){return e?e.replace(Us,""):""}me.normalizeId=pt;function qs(e,t,r){return r=pt(r),e.resolve(t,r)}me.resolveUrl=qs;const Ls=/^[a-z_][-a-z0-9._]*$/i;function Ks(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:a}=this.opts,n=pt(e[r]||t),i={"":n},c=oa(a,n,!1),d={},y=new Set;return Ms(e,{allKeys:!0},($,j,R,w)=>{if(w===void 0)return;const b=c+j;let v=i[w];typeof $[r]=="string"&&(v=p.call(this,$[r])),O.call(this,$.$anchor),O.call(this,$.$dynamicAnchor),i[j]=v;function p(S){const T=this.opts.uriResolver.resolve;if(S=pt(v?T(v,S):S),y.has(S))throw m(S);y.add(S);let A=this.refs[S];return typeof A=="string"&&(A=this.refs[A]),typeof A=="object"?f($,A.schema,S):S!==pt(b)&&(S[0]==="#"?(f($,d[S],S),d[S]=$):this.refs[S]=b),S}function O(S){if(typeof S=="string"){if(!Ls.test(S))throw new Error(`invalid anchor "${S}"`);p.call(this,`#${S}`)}}}),d;function f($,j,R){if(j!==void 0&&!As($,j))throw m(R)}function m($){return new Error(`reference "${$}" resolves to more than one schema`)}}me.getSchemaRefs=Ks;Object.defineProperty(Ce,"__esModule",{value:!0});Ce.getData=Ce.KeywordCxt=Ce.validateFunctionCode=void 0;const ca=yt,Rn=qt,jr=Fe,or=qt,Hs=dr,Dt=Me,yr=Ge,q=B,G=Ve,Gs=me,Ue=ee,kt=Ut;function Js(e){if(da(e)&&(fa(e),la(e))){Xs(e);return}ua(e,()=>(0,ca.topBoolOrEmptySchema)(e))}Ce.validateFunctionCode=Js;function ua({gen:e,validateName:t,schema:r,schemaEnv:a,opts:n},i){n.code.es5?e.func(t,(0,q._)`${G.default.data}, ${G.default.valCxt}`,a.$async,()=>{e.code((0,q._)`"use strict"; ${kn(r,n)}`),Ws(e,n),e.code(i)}):e.func(t,(0,q._)`${G.default.data}, ${Bs(n)}`,a.$async,()=>e.code(kn(r,n)).code(i))}function Bs(e){return(0,q._)`{${G.default.instancePath}="", ${G.default.parentData}, ${G.default.parentDataProperty}, ${G.default.rootData}=${G.default.data}${e.dynamicRef?(0,q._)`, ${G.default.dynamicAnchors}={}`:q.nil}}={}`}function Ws(e,t){e.if(G.default.valCxt,()=>{e.var(G.default.instancePath,(0,q._)`${G.default.valCxt}.${G.default.instancePath}`),e.var(G.default.parentData,(0,q._)`${G.default.valCxt}.${G.default.parentData}`),e.var(G.default.parentDataProperty,(0,q._)`${G.default.valCxt}.${G.default.parentDataProperty}`),e.var(G.default.rootData,(0,q._)`${G.default.valCxt}.${G.default.rootData}`),t.dynamicRef&&e.var(G.default.dynamicAnchors,(0,q._)`${G.default.valCxt}.${G.default.dynamicAnchors}`)},()=>{e.var(G.default.instancePath,(0,q._)`""`),e.var(G.default.parentData,(0,q._)`undefined`),e.var(G.default.parentDataProperty,(0,q._)`undefined`),e.var(G.default.rootData,G.default.data),t.dynamicRef&&e.var(G.default.dynamicAnchors,(0,q._)`{}`)})}function Xs(e){const{schema:t,opts:r,gen:a}=e;ua(e,()=>{r.$comment&&t.$comment&&ma(e),eo(e),a.let(G.default.vErrors,null),a.let(G.default.errors,0),r.unevaluated&&Qs(e),ha(e),no(e)})}function Qs(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,q._)`${r}.evaluated`),t.if((0,q._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,q._)`${e.evaluated}.props`,(0,q._)`undefined`)),t.if((0,q._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,q._)`${e.evaluated}.items`,(0,q._)`undefined`))}function kn(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,q._)`/*# sourceURL=${r} */`:q.nil}function Ys(e,t){if(da(e)&&(fa(e),la(e))){Zs(e,t);return}(0,ca.boolOrEmptySchema)(e,t)}function la({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function da(e){return typeof e.schema!="boolean"}function Zs(e,t){const{schema:r,gen:a,opts:n}=e;n.$comment&&r.$comment&&ma(e),to(e),ro(e);const i=a.const("_errs",G.default.errors);ha(e,i),a.var(t,(0,q._)`${i} === ${G.default.errors}`)}function fa(e){(0,Ue.checkUnknownRules)(e),xs(e)}function ha(e,t){if(e.opts.jtd)return jn(e,[],!1,t);const r=(0,Rn.getSchemaTypes)(e.schema),a=(0,Rn.coerceAndCheckDataType)(e,r);jn(e,r,!a,t)}function xs(e){const{schema:t,errSchemaPath:r,opts:a,self:n}=e;t.$ref&&a.ignoreKeywordsWithRef&&(0,Ue.schemaHasRulesButRef)(t,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function eo(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Ue.checkStrictMode)(e,"default is ignored in the schema root")}function to(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Gs.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function ro(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function ma({gen:e,schemaEnv:t,schema:r,errSchemaPath:a,opts:n}){const i=r.$comment;if(n.$comment===!0)e.code((0,q._)`${G.default.self}.logger.log(${i})`);else if(typeof n.$comment=="function"){const c=(0,q.str)`${a}/$comment`,d=e.scopeValue("root",{ref:t.root});e.code((0,q._)`${G.default.self}.opts.$comment(${i}, ${c}, ${d}.schema)`)}}function no(e){const{gen:t,schemaEnv:r,validateName:a,ValidationError:n,opts:i}=e;r.$async?t.if((0,q._)`${G.default.errors} === 0`,()=>t.return(G.default.data),()=>t.throw((0,q._)`new ${n}(${G.default.vErrors})`)):(t.assign((0,q._)`${a}.errors`,G.default.vErrors),i.unevaluated&&ao(e),t.return((0,q._)`${G.default.errors} === 0`))}function ao({gen:e,evaluated:t,props:r,items:a}){r instanceof q.Name&&e.assign((0,q._)`${t}.props`,r),a instanceof q.Name&&e.assign((0,q._)`${t}.items`,a)}function jn(e,t,r,a){const{gen:n,schema:i,data:c,allErrors:d,opts:y,self:f}=e,{RULES:m}=f;if(i.$ref&&(y.ignoreKeywordsWithRef||!(0,Ue.schemaHasRulesButRef)(i,m))){n.block(()=>$a(e,"$ref",m.all.$ref.definition));return}y.jtd||so(e,t),n.block(()=>{for(const j of m.rules)$(j);$(m.post)});function $(j){(0,jr.shouldUseGroup)(i,j)&&(j.type?(n.if((0,or.checkDataType)(j.type,c,y.strictNumbers)),In(e,j),t.length===1&&t[0]===j.type&&r&&(n.else(),(0,or.reportTypeError)(e)),n.endIf()):In(e,j),d||n.if((0,q._)`${G.default.errors} === ${a||0}`))}}function In(e,t){const{gen:r,schema:a,opts:{useDefaults:n}}=e;n&&(0,Hs.assignDefaults)(e,t.type),r.block(()=>{for(const i of t.rules)(0,jr.shouldUseRule)(a,i)&&$a(e,i.keyword,i.definition,t.type)})}function so(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(oo(e,t),e.opts.allowUnionTypes||io(e,t),co(e,e.dataTypes))}function oo(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{pa(e.dataTypes,r)||Ir(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),lo(e,t)}}function io(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Ir(e,"use allowUnionTypes to allow union type keyword")}function co(e,t){const r=e.self.RULES.all;for(const a in r){const n=r[a];if(typeof n=="object"&&(0,jr.shouldUseRule)(e.schema,n)){const{type:i}=n.definition;i.length&&!i.some(c=>uo(t,c))&&Ir(e,`missing type "${i.join(",")}" for keyword "${a}"`)}}}function uo(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function pa(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function lo(e,t){const r=[];for(const a of e.dataTypes)pa(t,a)?r.push(a):t.includes("integer")&&a==="number"&&r.push("integer");e.dataTypes=r}function Ir(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Ue.checkStrictMode)(e,t,e.opts.strictTypes)}class ya{constructor(t,r,a){if((0,Dt.validateKeywordUsage)(t,r,a),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=a,this.data=t.data,this.schema=t.schema[a],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ue.schemaRefOrVal)(t,this.schema,a,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",va(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Dt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${a} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",G.default.errors))}result(t,r,a){this.failResult((0,q.not)(t),r,a)}failResult(t,r,a){this.gen.if(t),a?a():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,q.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,q._)`${r} !== undefined && (${(0,q.or)(this.invalid$data(),t)})`)}error(t,r,a){if(r){this.setParams(r),this._error(t,a),this.setParams({});return}this._error(t,a)}_error(t,r){(t?kt.reportExtraError:kt.reportError)(this,this.def.error,r)}$dataError(){(0,kt.reportError)(this,this.def.$dataError||kt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,kt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,a=q.nil){this.gen.block(()=>{this.check$data(t,a),r()})}check$data(t=q.nil,r=q.nil){if(!this.$data)return;const{gen:a,schemaCode:n,schemaType:i,def:c}=this;a.if((0,q.or)((0,q._)`${n} === undefined`,r)),t!==q.nil&&a.assign(t,!0),(i.length||c.validateSchema)&&(a.elseIf(this.invalid$data()),this.$dataError(),t!==q.nil&&a.assign(t,!1)),a.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:a,def:n,it:i}=this;return(0,q.or)(c(),d());function c(){if(a.length){if(!(r instanceof q.Name))throw new Error("ajv implementation error");const y=Array.isArray(a)?a:[a];return(0,q._)`${(0,or.checkDataTypes)(y,r,i.opts.strictNumbers,or.DataType.Wrong)}`}return q.nil}function d(){if(n.validateSchema){const y=t.scopeValue("validate$data",{ref:n.validateSchema});return(0,q._)`!${y}(${r})`}return q.nil}}subschema(t,r){const a=(0,yr.getSubschema)(this.it,t);(0,yr.extendSubschemaData)(a,this.it,t),(0,yr.extendSubschemaMode)(a,t);const n={...this.it,...a,items:void 0,props:void 0};return Ys(n,r),n}mergeEvaluated(t,r){const{it:a,gen:n}=this;a.opts.unevaluated&&(a.props!==!0&&t.props!==void 0&&(a.props=Ue.mergeEvaluated.props(n,t.props,a.props,r)),a.items!==!0&&t.items!==void 0&&(a.items=Ue.mergeEvaluated.items(n,t.items,a.items,r)))}mergeValidEvaluated(t,r){const{it:a,gen:n}=this;if(a.opts.unevaluated&&(a.props!==!0||a.items!==!0))return n.if(r,()=>this.mergeEvaluated(t,q.Name)),!0}}Ce.KeywordCxt=ya;function $a(e,t,r,a){const n=new ya(e,r,t);"code"in r?r.code(n,a):n.$data&&r.validate?(0,Dt.funcKeywordCode)(n,r):"macro"in r?(0,Dt.macroKeywordCode)(n,r):(r.compile||r.validate)&&(0,Dt.funcKeywordCode)(n,r)}const fo=/^\/(?:[^~]|~0|~1)*$/,ho=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function va(e,{dataLevel:t,dataNames:r,dataPathArr:a}){let n,i;if(e==="")return G.default.rootData;if(e[0]==="/"){if(!fo.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);n=e,i=G.default.rootData}else{const f=ho.exec(e);if(!f)throw new Error(`Invalid JSON-pointer: ${e}`);const m=+f[1];if(n=f[2],n==="#"){if(m>=t)throw new Error(y("property/index",m));return a[t-m]}if(m>t)throw new Error(y("data",m));if(i=r[t-m],!n)return i}let c=i;const d=n.split("/");for(const f of d)f&&(i=(0,q._)`${i}${(0,q.getProperty)((0,Ue.unescapeJsonPointer)(f))}`,c=(0,q._)`${c} && ${i}`);return c;function y(f,m){return`Cannot access ${f} ${m} levels up, current level is ${t}`}}Ce.getData=va;var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});class mo extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Lt.default=mo;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});const $r=me;class po extends Error{constructor(t,r,a,n){super(n||`can't resolve reference ${a} from id ${r}`),this.missingRef=(0,$r.resolveUrl)(t,r,a),this.missingSchema=(0,$r.normalizeId)((0,$r.getFullPath)(t,this.missingRef))}}Kt.default=po;var _e={};Object.defineProperty(_e,"__esModule",{value:!0});_e.resolveSchema=_e.getCompilingSchema=_e.resolveRef=_e.compileSchema=_e.SchemaEnv=void 0;const Pe=B,yo=Lt,Ye=Ve,Oe=me,Dn=ee,$o=Ce;class fr{constructor(t){var r;this.refs={},this.dynamicAnchors={};let a;typeof t.schema=="object"&&(a=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Oe.normalizeId)(a==null?void 0:a[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=a==null?void 0:a.$async,this.refs={}}}_e.SchemaEnv=fr;function Dr(e){const t=_a.call(this,e);if(t)return t;const r=(0,Oe.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:a,lines:n}=this.opts.code,{ownProperties:i}=this.opts,c=new Pe.CodeGen(this.scope,{es5:a,lines:n,ownProperties:i});let d;e.$async&&(d=c.scopeValue("Error",{ref:yo.default,code:(0,Pe._)`require("ajv/dist/runtime/validation_error").default`}));const y=c.scopeName("validate");e.validateName=y;const f={gen:c,allErrors:this.opts.allErrors,data:Ye.default.data,parentData:Ye.default.parentData,parentDataProperty:Ye.default.parentDataProperty,dataNames:[Ye.default.data],dataPathArr:[Pe.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:c.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Pe.stringify)(e.schema)}:{ref:e.schema}),validateName:y,ValidationError:d,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Pe.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Pe._)`""`,opts:this.opts,self:this};let m;try{this._compilations.add(e),(0,$o.validateFunctionCode)(f),c.optimize(this.opts.code.optimize);const $=c.toString();m=`${c.scopeRefs(Ye.default.scope)}return ${$}`,this.opts.code.process&&(m=this.opts.code.process(m,e));const R=new Function(`${Ye.default.self}`,`${Ye.default.scope}`,m)(this,this.scope.get());if(this.scope.value(y,{ref:R}),R.errors=null,R.schema=e.schema,R.schemaEnv=e,e.$async&&(R.$async=!0),this.opts.code.source===!0&&(R.source={validateName:y,validateCode:$,scopeValues:c._values}),this.opts.unevaluated){const{props:w,items:b}=f;R.evaluated={props:w instanceof Pe.Name?void 0:w,items:b instanceof Pe.Name?void 0:b,dynamicProps:w instanceof Pe.Name,dynamicItems:b instanceof Pe.Name},R.source&&(R.source.evaluated=(0,Pe.stringify)(R.evaluated))}return e.validate=R,e}catch($){throw delete e.validate,delete e.validateName,m&&this.logger.error("Error compiling schema, function code:",m),$}finally{this._compilations.delete(e)}}_e.compileSchema=Dr;function vo(e,t,r){var a;r=(0,Oe.resolveUrl)(this.opts.uriResolver,t,r);const n=e.refs[r];if(n)return n;let i=wo.call(this,e,r);if(i===void 0){const c=(a=e.localRefs)===null||a===void 0?void 0:a[r],{schemaId:d}=this.opts;c&&(i=new fr({schema:c,schemaId:d,root:e,baseId:t}))}if(i!==void 0)return e.refs[r]=_o.call(this,i)}_e.resolveRef=vo;function _o(e){return(0,Oe.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Dr.call(this,e)}function _a(e){for(const t of this._compilations)if(go(t,e))return t}_e.getCompilingSchema=_a;function go(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function wo(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||hr.call(this,e,t)}function hr(e,t){const r=this.opts.uriResolver.parse(t),a=(0,Oe._getFullPath)(this.opts.uriResolver,r);let n=(0,Oe.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&a===n)return vr.call(this,r,e);const i=(0,Oe.normalizeId)(a),c=this.refs[i]||this.schemas[i];if(typeof c=="string"){const d=hr.call(this,e,c);return typeof(d==null?void 0:d.schema)!="object"?void 0:vr.call(this,r,d)}if(typeof(c==null?void 0:c.schema)=="object"){if(c.validate||Dr.call(this,c),i===(0,Oe.normalizeId)(t)){const{schema:d}=c,{schemaId:y}=this.opts,f=d[y];return f&&(n=(0,Oe.resolveUrl)(this.opts.uriResolver,n,f)),new fr({schema:d,schemaId:y,root:e,baseId:n})}return vr.call(this,r,c)}}_e.resolveSchema=hr;const Eo=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function vr(e,{baseId:t,schema:r,root:a}){var n;if(((n=e.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(const d of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const y=r[(0,Dn.unescapeFragment)(d)];if(y===void 0)return;r=y;const f=typeof r=="object"&&r[this.opts.schemaId];!Eo.has(d)&&f&&(t=(0,Oe.resolveUrl)(this.opts.uriResolver,t,f))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,Dn.schemaHasRulesButRef)(r,this.RULES)){const d=(0,Oe.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=hr.call(this,a,d)}const{schemaId:c}=this.opts;if(i=i||new fr({schema:r,schemaId:c,root:a,baseId:t}),i.schema!==i.root.schema)return i}const bo="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",So="Meta-schema for $data reference (JSON AnySchema extension proposal)",Po="object",No=["$data"],Oo={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Co=!1,To={$id:bo,description:So,type:Po,required:No,properties:Oo,additionalProperties:Co};var Ar={},Sr={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(r,a){a(t)})(Ga,function(r){function a(){for(var u=arguments.length,o=Array(u),h=0;h<u;h++)o[h]=arguments[h];if(o.length>1){o[0]=o[0].slice(0,-1);for(var N=o.length-1,P=1;P<N;++P)o[P]=o[P].slice(1,-1);return o[N]=o[N].slice(1),o.join("")}else return o[0]}function n(u){return"(?:"+u+")"}function i(u){return u===void 0?"undefined":u===null?"null":Object.prototype.toString.call(u).split(" ").pop().split("]").shift().toLowerCase()}function c(u){return u.toUpperCase()}function d(u){return u!=null?u instanceof Array?u:typeof u.length!="number"||u.split||u.setInterval||u.call?[u]:Array.prototype.slice.call(u):[]}function y(u,o){var h=u;if(o)for(var N in o)h[N]=o[N];return h}function f(u){var o="[A-Za-z]",h="[0-9]",N=a(h,"[A-Fa-f]"),P=n(n("%[EFef]"+N+"%"+N+N+"%"+N+N)+"|"+n("%[89A-Fa-f]"+N+"%"+N+N)+"|"+n("%"+N+N)),L="[\\:\\/\\?\\#\\[\\]\\@]",K="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",x=a(L,K),ne=u?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ce=u?"[\\uE000-\\uF8FF]":"[]",Y=a(o,h,"[\\-\\.\\_\\~]",ne);n(o+a(o,h,"[\\+\\-\\.]")+"*"),n(n(P+"|"+a(Y,K,"[\\:]"))+"*");var te=n(n("25[0-5]")+"|"+n("2[0-4]"+h)+"|"+n("1"+h+h)+"|"+n("0?[1-9]"+h)+"|0?0?"+h),ue=n(te+"\\."+te+"\\."+te+"\\."+te),J=n(N+"{1,4}"),se=n(n(J+"\\:"+J)+"|"+ue),fe=n(n(J+"\\:")+"{6}"+se),oe=n("\\:\\:"+n(J+"\\:")+"{5}"+se),qe=n(n(J)+"?\\:\\:"+n(J+"\\:")+"{4}"+se),je=n(n(n(J+"\\:")+"{0,1}"+J)+"?\\:\\:"+n(J+"\\:")+"{3}"+se),Ie=n(n(n(J+"\\:")+"{0,2}"+J)+"?\\:\\:"+n(J+"\\:")+"{2}"+se),dt=n(n(n(J+"\\:")+"{0,3}"+J)+"?\\:\\:"+J+"\\:"+se),Xe=n(n(n(J+"\\:")+"{0,4}"+J)+"?\\:\\:"+se),be=n(n(n(J+"\\:")+"{0,5}"+J)+"?\\:\\:"+J),De=n(n(n(J+"\\:")+"{0,6}"+J)+"?\\:\\:"),Qe=n([fe,oe,qe,je,Ie,dt,Xe,be,De].join("|")),ze=n(n(Y+"|"+P)+"+");n("[vV]"+N+"+\\."+a(Y,K,"[\\:]")+"+"),n(n(P+"|"+a(Y,K))+"*");var Ct=n(P+"|"+a(Y,K,"[\\:\\@]"));return n(n(P+"|"+a(Y,K,"[\\@]"))+"+"),n(n(Ct+"|"+a("[\\/\\?]",ce))+"*"),{NOT_SCHEME:new RegExp(a("[^]",o,h,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(a("[^\\%\\:]",Y,K),"g"),NOT_HOST:new RegExp(a("[^\\%\\[\\]\\:]",Y,K),"g"),NOT_PATH:new RegExp(a("[^\\%\\/\\:\\@]",Y,K),"g"),NOT_PATH_NOSCHEME:new RegExp(a("[^\\%\\/\\@]",Y,K),"g"),NOT_QUERY:new RegExp(a("[^\\%]",Y,K,"[\\:\\@\\/\\?]",ce),"g"),NOT_FRAGMENT:new RegExp(a("[^\\%]",Y,K,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(a("[^]",Y,K),"g"),UNRESERVED:new RegExp(Y,"g"),OTHER_CHARS:new RegExp(a("[^\\%]",Y,x),"g"),PCT_ENCODED:new RegExp(P,"g"),IPV4ADDRESS:new RegExp("^("+ue+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Qe+")"+n(n("\\%25|\\%(?!"+N+"{2})")+"("+ze+")")+"?\\]?$")}}var m=f(!1),$=f(!0),j=function(){function u(o,h){var N=[],P=!0,L=!1,K=void 0;try{for(var x=o[Symbol.iterator](),ne;!(P=(ne=x.next()).done)&&(N.push(ne.value),!(h&&N.length===h));P=!0);}catch(ce){L=!0,K=ce}finally{try{!P&&x.return&&x.return()}finally{if(L)throw K}}return N}return function(o,h){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return u(o,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),R=function(u){if(Array.isArray(u)){for(var o=0,h=Array(u.length);o<u.length;o++)h[o]=u[o];return h}else return Array.from(u)},w=2147483647,b=36,v=1,p=26,O=38,S=700,T=72,A=128,g="-",C=/^xn--/,D=/[^\0-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,U={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},W=b-v,H=Math.floor,de=String.fromCharCode;function re(u){throw new RangeError(U[u])}function we(u,o){for(var h=[],N=u.length;N--;)h[N]=o(u[N]);return h}function Je(u,o){var h=u.split("@"),N="";h.length>1&&(N=h[0]+"@",u=h[1]),u=u.replace(M,".");var P=u.split("."),L=we(P,o).join(".");return N+L}function nt(u){for(var o=[],h=0,N=u.length;h<N;){var P=u.charCodeAt(h++);if(P>=55296&&P<=56319&&h<N){var L=u.charCodeAt(h++);(L&64512)==56320?o.push(((P&1023)<<10)+(L&1023)+65536):(o.push(P),h--)}else o.push(P)}return o}var gt=function(o){return String.fromCodePoint.apply(String,R(o))},at=function(o){return o-48<10?o-22:o-65<26?o-65:o-97<26?o-97:b},V=function(o,h){return o+22+75*(o<26)-((h!=0)<<5)},_=function(o,h,N){var P=0;for(o=N?H(o/S):o>>1,o+=H(o/h);o>W*p>>1;P+=b)o=H(o/W);return H(P+(W+1)*o/(o+O))},I=function(o){var h=[],N=o.length,P=0,L=A,K=T,x=o.lastIndexOf(g);x<0&&(x=0);for(var ne=0;ne<x;++ne)o.charCodeAt(ne)>=128&&re("not-basic"),h.push(o.charCodeAt(ne));for(var ce=x>0?x+1:0;ce<N;){for(var Y=P,te=1,ue=b;;ue+=b){ce>=N&&re("invalid-input");var J=at(o.charCodeAt(ce++));(J>=b||J>H((w-P)/te))&&re("overflow"),P+=J*te;var se=ue<=K?v:ue>=K+p?p:ue-K;if(J<se)break;var fe=b-se;te>H(w/fe)&&re("overflow"),te*=fe}var oe=h.length+1;K=_(P-Y,oe,Y==0),H(P/oe)>w-L&&re("overflow"),L+=H(P/oe),P%=oe,h.splice(P++,0,L)}return String.fromCodePoint.apply(String,h)},E=function(o){var h=[];o=nt(o);var N=o.length,P=A,L=0,K=T,x=!0,ne=!1,ce=void 0;try{for(var Y=o[Symbol.iterator](),te;!(x=(te=Y.next()).done);x=!0){var ue=te.value;ue<128&&h.push(de(ue))}}catch(Tt){ne=!0,ce=Tt}finally{try{!x&&Y.return&&Y.return()}finally{if(ne)throw ce}}var J=h.length,se=J;for(J&&h.push(g);se<N;){var fe=w,oe=!0,qe=!1,je=void 0;try{for(var Ie=o[Symbol.iterator](),dt;!(oe=(dt=Ie.next()).done);oe=!0){var Xe=dt.value;Xe>=P&&Xe<fe&&(fe=Xe)}}catch(Tt){qe=!0,je=Tt}finally{try{!oe&&Ie.return&&Ie.return()}finally{if(qe)throw je}}var be=se+1;fe-P>H((w-L)/be)&&re("overflow"),L+=(fe-P)*be,P=fe;var De=!0,Qe=!1,ze=void 0;try{for(var Ct=o[Symbol.iterator](),En;!(De=(En=Ct.next()).done);De=!0){var bn=En.value;if(bn<P&&++L>w&&re("overflow"),bn==P){for(var Jt=L,Bt=b;;Bt+=b){var Wt=Bt<=K?v:Bt>=K+p?p:Bt-K;if(Jt<Wt)break;var Sn=Jt-Wt,Pn=b-Wt;h.push(de(V(Wt+Sn%Pn,0))),Jt=H(Sn/Pn)}h.push(de(V(Jt,0))),K=_(L,be,se==J),L=0,++se}}}catch(Tt){Qe=!0,ze=Tt}finally{try{!De&&Ct.return&&Ct.return()}finally{if(Qe)throw ze}}++L,++P}return h.join("")},s=function(o){return Je(o,function(h){return C.test(h)?I(h.slice(4).toLowerCase()):h})},l=function(o){return Je(o,function(h){return D.test(h)?"xn--"+E(h):h})},k={version:"2.1.0",ucs2:{decode:nt,encode:gt},decode:I,encode:E,toASCII:l,toUnicode:s},z={};function F(u){var o=u.charCodeAt(0),h=void 0;return o<16?h="%0"+o.toString(16).toUpperCase():o<128?h="%"+o.toString(16).toUpperCase():o<2048?h="%"+(o>>6|192).toString(16).toUpperCase()+"%"+(o&63|128).toString(16).toUpperCase():h="%"+(o>>12|224).toString(16).toUpperCase()+"%"+(o>>6&63|128).toString(16).toUpperCase()+"%"+(o&63|128).toString(16).toUpperCase(),h}function Q(u){for(var o="",h=0,N=u.length;h<N;){var P=parseInt(u.substr(h+1,2),16);if(P<128)o+=String.fromCharCode(P),h+=3;else if(P>=194&&P<224){if(N-h>=6){var L=parseInt(u.substr(h+4,2),16);o+=String.fromCharCode((P&31)<<6|L&63)}else o+=u.substr(h,6);h+=6}else if(P>=224){if(N-h>=9){var K=parseInt(u.substr(h+4,2),16),x=parseInt(u.substr(h+7,2),16);o+=String.fromCharCode((P&15)<<12|(K&63)<<6|x&63)}else o+=u.substr(h,9);h+=9}else o+=u.substr(h,3),h+=3}return o}function Z(u,o){function h(N){var P=Q(N);return P.match(o.UNRESERVED)?P:N}return u.scheme&&(u.scheme=String(u.scheme).replace(o.PCT_ENCODED,h).toLowerCase().replace(o.NOT_SCHEME,"")),u.userinfo!==void 0&&(u.userinfo=String(u.userinfo).replace(o.PCT_ENCODED,h).replace(o.NOT_USERINFO,F).replace(o.PCT_ENCODED,c)),u.host!==void 0&&(u.host=String(u.host).replace(o.PCT_ENCODED,h).toLowerCase().replace(o.NOT_HOST,F).replace(o.PCT_ENCODED,c)),u.path!==void 0&&(u.path=String(u.path).replace(o.PCT_ENCODED,h).replace(u.scheme?o.NOT_PATH:o.NOT_PATH_NOSCHEME,F).replace(o.PCT_ENCODED,c)),u.query!==void 0&&(u.query=String(u.query).replace(o.PCT_ENCODED,h).replace(o.NOT_QUERY,F).replace(o.PCT_ENCODED,c)),u.fragment!==void 0&&(u.fragment=String(u.fragment).replace(o.PCT_ENCODED,h).replace(o.NOT_FRAGMENT,F).replace(o.PCT_ENCODED,c)),u}function ie(u){return u.replace(/^0*(.*)/,"$1")||"0"}function Te(u,o){var h=u.match(o.IPV4ADDRESS)||[],N=j(h,2),P=N[1];return P?P.split(".").map(ie).join("."):u}function st(u,o){var h=u.match(o.IPV6ADDRESS)||[],N=j(h,3),P=N[1],L=N[2];if(P){for(var K=P.toLowerCase().split("::").reverse(),x=j(K,2),ne=x[0],ce=x[1],Y=ce?ce.split(":").map(ie):[],te=ne.split(":").map(ie),ue=o.IPV4ADDRESS.test(te[te.length-1]),J=ue?7:8,se=te.length-J,fe=Array(J),oe=0;oe<J;++oe)fe[oe]=Y[oe]||te[se+oe]||"";ue&&(fe[J-1]=Te(fe[J-1],o));var qe=fe.reduce(function(be,De,Qe){if(!De||De==="0"){var ze=be[be.length-1];ze&&ze.index+ze.length===Qe?ze.length++:be.push({index:Qe,length:1})}return be},[]),je=qe.sort(function(be,De){return De.length-be.length})[0],Ie=void 0;if(je&&je.length>1){var dt=fe.slice(0,je.index),Xe=fe.slice(je.index+je.length);Ie=dt.join(":")+"::"+Xe.join(":")}else Ie=fe.join(":");return L&&(Ie+="%"+L),Ie}else return u}var wt=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Et="".match(/(){0}/)[1]===void 0;function ge(u){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h={},N=o.iri!==!1?$:m;o.reference==="suffix"&&(u=(o.scheme?o.scheme+":":"")+"//"+u);var P=u.match(wt);if(P){Et?(h.scheme=P[1],h.userinfo=P[3],h.host=P[4],h.port=parseInt(P[5],10),h.path=P[6]||"",h.query=P[7],h.fragment=P[8],isNaN(h.port)&&(h.port=P[5])):(h.scheme=P[1]||void 0,h.userinfo=u.indexOf("@")!==-1?P[3]:void 0,h.host=u.indexOf("//")!==-1?P[4]:void 0,h.port=parseInt(P[5],10),h.path=P[6]||"",h.query=u.indexOf("?")!==-1?P[7]:void 0,h.fragment=u.indexOf("#")!==-1?P[8]:void 0,isNaN(h.port)&&(h.port=u.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?P[4]:void 0)),h.host&&(h.host=st(Te(h.host,N),N)),h.scheme===void 0&&h.userinfo===void 0&&h.host===void 0&&h.port===void 0&&!h.path&&h.query===void 0?h.reference="same-document":h.scheme===void 0?h.reference="relative":h.fragment===void 0?h.reference="absolute":h.reference="uri",o.reference&&o.reference!=="suffix"&&o.reference!==h.reference&&(h.error=h.error||"URI is not a "+o.reference+" reference.");var L=z[(o.scheme||h.scheme||"").toLowerCase()];if(!o.unicodeSupport&&(!L||!L.unicodeSupport)){if(h.host&&(o.domainHost||L&&L.domainHost))try{h.host=k.toASCII(h.host.replace(N.PCT_ENCODED,Q).toLowerCase())}catch(K){h.error=h.error||"Host's domain name can not be converted to ASCII via punycode: "+K}Z(h,m)}else Z(h,N);L&&L.parse&&L.parse(h,o)}else h.error=h.error||"URI can not be parsed.";return h}function bt(u,o){var h=o.iri!==!1?$:m,N=[];return u.userinfo!==void 0&&(N.push(u.userinfo),N.push("@")),u.host!==void 0&&N.push(st(Te(String(u.host),h),h).replace(h.IPV6ADDRESS,function(P,L,K){return"["+L+(K?"%25"+K:"")+"]"})),(typeof u.port=="number"||typeof u.port=="string")&&(N.push(":"),N.push(String(u.port))),N.length?N.join(""):void 0}var ot=/^\.\.?\//,it=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,St=/^\/?(?:.|\n)*?(?=\/|$)/;function Re(u){for(var o=[];u.length;)if(u.match(ot))u=u.replace(ot,"");else if(u.match(it))u=u.replace(it,"/");else if(u.match(ct))u=u.replace(ct,"/"),o.pop();else if(u==="."||u==="..")u="";else{var h=u.match(St);if(h){var N=h[0];u=u.slice(N.length),o.push(N)}else throw new Error("Unexpected dot segment condition")}return o.join("")}function $e(u){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=o.iri?$:m,N=[],P=z[(o.scheme||u.scheme||"").toLowerCase()];if(P&&P.serialize&&P.serialize(u,o),u.host&&!h.IPV6ADDRESS.test(u.host)){if(o.domainHost||P&&P.domainHost)try{u.host=o.iri?k.toUnicode(u.host):k.toASCII(u.host.replace(h.PCT_ENCODED,Q).toLowerCase())}catch(x){u.error=u.error||"Host's domain name can not be converted to "+(o.iri?"Unicode":"ASCII")+" via punycode: "+x}}Z(u,h),o.reference!=="suffix"&&u.scheme&&(N.push(u.scheme),N.push(":"));var L=bt(u,o);if(L!==void 0&&(o.reference!=="suffix"&&N.push("//"),N.push(L),u.path&&u.path.charAt(0)!=="/"&&N.push("/")),u.path!==void 0){var K=u.path;!o.absolutePath&&(!P||!P.absolutePath)&&(K=Re(K)),L===void 0&&(K=K.replace(/^\/\//,"/%2F")),N.push(K)}return u.query!==void 0&&(N.push("?"),N.push(u.query)),u.fragment!==void 0&&(N.push("#"),N.push(u.fragment)),N.join("")}function ut(u,o){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},N=arguments[3],P={};return N||(u=ge($e(u,h),h),o=ge($e(o,h),h)),h=h||{},!h.tolerant&&o.scheme?(P.scheme=o.scheme,P.userinfo=o.userinfo,P.host=o.host,P.port=o.port,P.path=Re(o.path||""),P.query=o.query):(o.userinfo!==void 0||o.host!==void 0||o.port!==void 0?(P.userinfo=o.userinfo,P.host=o.host,P.port=o.port,P.path=Re(o.path||""),P.query=o.query):(o.path?(o.path.charAt(0)==="/"?P.path=Re(o.path):((u.userinfo!==void 0||u.host!==void 0||u.port!==void 0)&&!u.path?P.path="/"+o.path:u.path?P.path=u.path.slice(0,u.path.lastIndexOf("/")+1)+o.path:P.path=o.path,P.path=Re(P.path)),P.query=o.query):(P.path=u.path,o.query!==void 0?P.query=o.query:P.query=u.query),P.userinfo=u.userinfo,P.host=u.host,P.port=u.port),P.scheme=u.scheme),P.fragment=o.fragment,P}function Pt(u,o,h){var N=y({scheme:"null"},h);return $e(ut(ge(u,N),ge(o,N),N,!0),N)}function Be(u,o){return typeof u=="string"?u=$e(ge(u,o),o):i(u)==="object"&&(u=ge($e(u,o),o)),u}function Nt(u,o,h){return typeof u=="string"?u=$e(ge(u,h),h):i(u)==="object"&&(u=$e(u,h)),typeof o=="string"?o=$e(ge(o,h),h):i(o)==="object"&&(o=$e(o,h)),u===o}function Gt(u,o){return u&&u.toString().replace(!o||!o.iri?m.ESCAPE:$.ESCAPE,F)}function Ee(u,o){return u&&u.toString().replace(!o||!o.iri?m.PCT_ENCODED:$.PCT_ENCODED,Q)}var We={scheme:"http",domainHost:!0,parse:function(o,h){return o.host||(o.error=o.error||"HTTP URIs must have a host."),o},serialize:function(o,h){var N=String(o.scheme).toLowerCase()==="https";return(o.port===(N?443:80)||o.port==="")&&(o.port=void 0),o.path||(o.path="/"),o}},mn={scheme:"https",domainHost:We.domainHost,parse:We.parse,serialize:We.serialize};function pn(u){return typeof u.secure=="boolean"?u.secure:String(u.scheme).toLowerCase()==="wss"}var Ot={scheme:"ws",domainHost:!0,parse:function(o,h){var N=o;return N.secure=pn(N),N.resourceName=(N.path||"/")+(N.query?"?"+N.query:""),N.path=void 0,N.query=void 0,N},serialize:function(o,h){if((o.port===(pn(o)?443:80)||o.port==="")&&(o.port=void 0),typeof o.secure=="boolean"&&(o.scheme=o.secure?"wss":"ws",o.secure=void 0),o.resourceName){var N=o.resourceName.split("?"),P=j(N,2),L=P[0],K=P[1];o.path=L&&L!=="/"?L:void 0,o.query=K,o.resourceName=void 0}return o.fragment=void 0,o}},yn={scheme:"wss",domainHost:Ot.domainHost,parse:Ot.parse,serialize:Ot.serialize},Da={},$n="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ke="[0-9A-Fa-f]",Aa=n(n("%[EFef]"+ke+"%"+ke+ke+"%"+ke+ke)+"|"+n("%[89A-Fa-f]"+ke+"%"+ke+ke)+"|"+n("%"+ke+ke)),Ma="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Va="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",za=a(Va,'[\\"\\\\]'),Fa="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ua=new RegExp($n,"g"),lt=new RegExp(Aa,"g"),qa=new RegExp(a("[^]",Ma,"[\\.]",'[\\"]',za),"g"),vn=new RegExp(a("[^]",$n,Fa),"g"),La=vn;function pr(u){var o=Q(u);return o.match(Ua)?o:u}var _n={scheme:"mailto",parse:function(o,h){var N=o,P=N.to=N.path?N.path.split(","):[];if(N.path=void 0,N.query){for(var L=!1,K={},x=N.query.split("&"),ne=0,ce=x.length;ne<ce;++ne){var Y=x[ne].split("=");switch(Y[0]){case"to":for(var te=Y[1].split(","),ue=0,J=te.length;ue<J;++ue)P.push(te[ue]);break;case"subject":N.subject=Ee(Y[1],h);break;case"body":N.body=Ee(Y[1],h);break;default:L=!0,K[Ee(Y[0],h)]=Ee(Y[1],h);break}}L&&(N.headers=K)}N.query=void 0;for(var se=0,fe=P.length;se<fe;++se){var oe=P[se].split("@");if(oe[0]=Ee(oe[0]),h.unicodeSupport)oe[1]=Ee(oe[1],h).toLowerCase();else try{oe[1]=k.toASCII(Ee(oe[1],h).toLowerCase())}catch(qe){N.error=N.error||"Email address's domain name can not be converted to ASCII via punycode: "+qe}P[se]=oe.join("@")}return N},serialize:function(o,h){var N=o,P=d(o.to);if(P){for(var L=0,K=P.length;L<K;++L){var x=String(P[L]),ne=x.lastIndexOf("@"),ce=x.slice(0,ne).replace(lt,pr).replace(lt,c).replace(qa,F),Y=x.slice(ne+1);try{Y=h.iri?k.toUnicode(Y):k.toASCII(Ee(Y,h).toLowerCase())}catch(se){N.error=N.error||"Email address's domain name can not be converted to "+(h.iri?"Unicode":"ASCII")+" via punycode: "+se}P[L]=ce+"@"+Y}N.path=P.join(",")}var te=o.headers=o.headers||{};o.subject&&(te.subject=o.subject),o.body&&(te.body=o.body);var ue=[];for(var J in te)te[J]!==Da[J]&&ue.push(J.replace(lt,pr).replace(lt,c).replace(vn,F)+"="+te[J].replace(lt,pr).replace(lt,c).replace(La,F));return ue.length&&(N.query=ue.join("&")),N}},Ka=/^([^\:]+)\:(.*)/,gn={scheme:"urn",parse:function(o,h){var N=o.path&&o.path.match(Ka),P=o;if(N){var L=h.scheme||P.scheme||"urn",K=N[1].toLowerCase(),x=N[2],ne=L+":"+(h.nid||K),ce=z[ne];P.nid=K,P.nss=x,P.path=void 0,ce&&(P=ce.parse(P,h))}else P.error=P.error||"URN can not be parsed.";return P},serialize:function(o,h){var N=h.scheme||o.scheme||"urn",P=o.nid,L=N+":"+(h.nid||P),K=z[L];K&&(o=K.serialize(o,h));var x=o,ne=o.nss;return x.path=(P||h.nid)+":"+ne,x}},Ha=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,wn={scheme:"urn:uuid",parse:function(o,h){var N=o;return N.uuid=N.nss,N.nss=void 0,!h.tolerant&&(!N.uuid||!N.uuid.match(Ha))&&(N.error=N.error||"UUID is not valid."),N},serialize:function(o,h){var N=o;return N.nss=(o.uuid||"").toLowerCase(),N}};z[We.scheme]=We,z[mn.scheme]=mn,z[Ot.scheme]=Ot,z[yn.scheme]=yn,z[_n.scheme]=_n,z[gn.scheme]=gn,z[wn.scheme]=wn,r.SCHEMES=z,r.pctEncChar=F,r.pctDecChars=Q,r.parse=ge,r.removeDotSegments=Re,r.serialize=$e,r.resolveComponents=ut,r.resolve=Pt,r.normalize=Be,r.equal=Nt,r.escapeComponent=Gt,r.unescapeComponent=Ee,Object.defineProperty(r,"__esModule",{value:!0})})})(Sr,Sr.exports);var Ro=Sr.exports;Object.defineProperty(Ar,"__esModule",{value:!0});const ga=Ro;ga.code='require("ajv/dist/runtime/uri").default';Ar.default=ga;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Ce;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=B;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const a=Lt,n=Kt,i=tt,c=_e,d=B,y=me,f=qt,m=ee,$=To,j=Ar,R=(V,_)=>new RegExp(V,_);R.code="new RegExp";const w=["removeAdditional","useDefaults","coerceTypes"],b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},p={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},O=200;function S(V){var _,I,E,s,l,k,z,F,Q,Z,ie,Te,st,wt,Et,ge,bt,ot,it,ct,St,Re,$e,ut,Pt;const Be=V.strict,Nt=(_=V.code)===null||_===void 0?void 0:_.optimize,Gt=Nt===!0||Nt===void 0?1:Nt||0,Ee=(E=(I=V.code)===null||I===void 0?void 0:I.regExp)!==null&&E!==void 0?E:R,We=(s=V.uriResolver)!==null&&s!==void 0?s:j.default;return{strictSchema:(k=(l=V.strictSchema)!==null&&l!==void 0?l:Be)!==null&&k!==void 0?k:!0,strictNumbers:(F=(z=V.strictNumbers)!==null&&z!==void 0?z:Be)!==null&&F!==void 0?F:!0,strictTypes:(Z=(Q=V.strictTypes)!==null&&Q!==void 0?Q:Be)!==null&&Z!==void 0?Z:"log",strictTuples:(Te=(ie=V.strictTuples)!==null&&ie!==void 0?ie:Be)!==null&&Te!==void 0?Te:"log",strictRequired:(wt=(st=V.strictRequired)!==null&&st!==void 0?st:Be)!==null&&wt!==void 0?wt:!1,code:V.code?{...V.code,optimize:Gt,regExp:Ee}:{optimize:Gt,regExp:Ee},loopRequired:(Et=V.loopRequired)!==null&&Et!==void 0?Et:O,loopEnum:(ge=V.loopEnum)!==null&&ge!==void 0?ge:O,meta:(bt=V.meta)!==null&&bt!==void 0?bt:!0,messages:(ot=V.messages)!==null&&ot!==void 0?ot:!0,inlineRefs:(it=V.inlineRefs)!==null&&it!==void 0?it:!0,schemaId:(ct=V.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(St=V.addUsedSchema)!==null&&St!==void 0?St:!0,validateSchema:(Re=V.validateSchema)!==null&&Re!==void 0?Re:!0,validateFormats:($e=V.validateFormats)!==null&&$e!==void 0?$e:!0,unicodeRegExp:(ut=V.unicodeRegExp)!==null&&ut!==void 0?ut:!0,int32range:(Pt=V.int32range)!==null&&Pt!==void 0?Pt:!0,uriResolver:We}}class T{constructor(_={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,_=this.opts={..._,...S(_)};const{es5:I,lines:E}=this.opts.code;this.scope=new d.ValueScope({scope:{},prefixes:b,es5:I,lines:E}),this.logger=H(_.logger);const s=_.validateFormats;_.validateFormats=!1,this.RULES=(0,i.getRules)(),A.call(this,v,_,"NOT SUPPORTED"),A.call(this,p,_,"DEPRECATED","warn"),this._metaOpts=U.call(this),_.formats&&D.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),_.keywords&&M.call(this,_.keywords),typeof _.meta=="object"&&this.addMetaSchema(_.meta),C.call(this),_.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:_,meta:I,schemaId:E}=this.opts;let s=$;E==="id"&&(s={...$},s.id=s.$id,delete s.$id),I&&_&&this.addMetaSchema(s,s[E],!1)}defaultMeta(){const{meta:_,schemaId:I}=this.opts;return this.opts.defaultMeta=typeof _=="object"?_[I]||_:void 0}validate(_,I){let E;if(typeof _=="string"){if(E=this.getSchema(_),!E)throw new Error(`no schema with key or ref "${_}"`)}else E=this.compile(_);const s=E(I);return"$async"in E||(this.errors=E.errors),s}compile(_,I){const E=this._addSchema(_,I);return E.validate||this._compileSchemaEnv(E)}compileAsync(_,I){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:E}=this.opts;return s.call(this,_,I);async function s(Z,ie){await l.call(this,Z.$schema);const Te=this._addSchema(Z,ie);return Te.validate||k.call(this,Te)}async function l(Z){Z&&!this.getSchema(Z)&&await s.call(this,{$ref:Z},!0)}async function k(Z){try{return this._compileSchemaEnv(Z)}catch(ie){if(!(ie instanceof n.default))throw ie;return z.call(this,ie),await F.call(this,ie.missingSchema),k.call(this,Z)}}function z({missingSchema:Z,missingRef:ie}){if(this.refs[Z])throw new Error(`AnySchema ${Z} is loaded but ${ie} cannot be resolved`)}async function F(Z){const ie=await Q.call(this,Z);this.refs[Z]||await l.call(this,ie.$schema),this.refs[Z]||this.addSchema(ie,Z,I)}async function Q(Z){const ie=this._loading[Z];if(ie)return ie;try{return await(this._loading[Z]=E(Z))}finally{delete this._loading[Z]}}}addSchema(_,I,E,s=this.opts.validateSchema){if(Array.isArray(_)){for(const k of _)this.addSchema(k,void 0,E,s);return this}let l;if(typeof _=="object"){const{schemaId:k}=this.opts;if(l=_[k],l!==void 0&&typeof l!="string")throw new Error(`schema ${k} must be string`)}return I=(0,y.normalizeId)(I||l),this._checkUnique(I),this.schemas[I]=this._addSchema(_,E,I,s,!0),this}addMetaSchema(_,I,E=this.opts.validateSchema){return this.addSchema(_,I,!0,E),this}validateSchema(_,I){if(typeof _=="boolean")return!0;let E;if(E=_.$schema,E!==void 0&&typeof E!="string")throw new Error("$schema must be a string");if(E=E||this.opts.defaultMeta||this.defaultMeta(),!E)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const s=this.validate(E,_);if(!s&&I){const l="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(l);else throw new Error(l)}return s}getSchema(_){let I;for(;typeof(I=g.call(this,_))=="string";)_=I;if(I===void 0){const{schemaId:E}=this.opts,s=new c.SchemaEnv({schema:{},schemaId:E});if(I=c.resolveSchema.call(this,s,_),!I)return;this.refs[_]=I}return I.validate||this._compileSchemaEnv(I)}removeSchema(_){if(_ instanceof RegExp)return this._removeAllSchemas(this.schemas,_),this._removeAllSchemas(this.refs,_),this;switch(typeof _){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const I=g.call(this,_);return typeof I=="object"&&this._cache.delete(I.schema),delete this.schemas[_],delete this.refs[_],this}case"object":{const I=_;this._cache.delete(I);let E=_[this.opts.schemaId];return E&&(E=(0,y.normalizeId)(E),delete this.schemas[E],delete this.refs[E]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(_){for(const I of _)this.addKeyword(I);return this}addKeyword(_,I){let E;if(typeof _=="string")E=_,typeof I=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),I.keyword=E);else if(typeof _=="object"&&I===void 0){if(I=_,E=I.keyword,Array.isArray(E)&&!E.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(re.call(this,E,I),!I)return(0,m.eachItem)(E,l=>we.call(this,l)),this;nt.call(this,I);const s={...I,type:(0,f.getJSONTypes)(I.type),schemaType:(0,f.getJSONTypes)(I.schemaType)};return(0,m.eachItem)(E,s.type.length===0?l=>we.call(this,l,s):l=>s.type.forEach(k=>we.call(this,l,s,k))),this}getKeyword(_){const I=this.RULES.all[_];return typeof I=="object"?I.definition:!!I}removeKeyword(_){const{RULES:I}=this;delete I.keywords[_],delete I.all[_];for(const E of I.rules){const s=E.rules.findIndex(l=>l.keyword===_);s>=0&&E.rules.splice(s,1)}return this}addFormat(_,I){return typeof I=="string"&&(I=new RegExp(I)),this.formats[_]=I,this}errorsText(_=this.errors,{separator:I=", ",dataVar:E="data"}={}){return!_||_.length===0?"No errors":_.map(s=>`${E}${s.instancePath} ${s.message}`).reduce((s,l)=>s+I+l)}$dataMetaSchema(_,I){const E=this.RULES.all;_=JSON.parse(JSON.stringify(_));for(const s of I){const l=s.split("/").slice(1);let k=_;for(const z of l)k=k[z];for(const z in E){const F=E[z];if(typeof F!="object")continue;const{$data:Q}=F.definition,Z=k[z];Q&&Z&&(k[z]=at(Z))}}return _}_removeAllSchemas(_,I){for(const E in _){const s=_[E];(!I||I.test(E))&&(typeof s=="string"?delete _[E]:s&&!s.meta&&(this._cache.delete(s.schema),delete _[E]))}}_addSchema(_,I,E,s=this.opts.validateSchema,l=this.opts.addUsedSchema){let k;const{schemaId:z}=this.opts;if(typeof _=="object")k=_[z];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof _!="boolean")throw new Error("schema must be object or boolean")}let F=this._cache.get(_);if(F!==void 0)return F;E=(0,y.normalizeId)(k||E);const Q=y.getSchemaRefs.call(this,_,E);return F=new c.SchemaEnv({schema:_,schemaId:z,meta:I,baseId:E,localRefs:Q}),this._cache.set(F.schema,F),l&&!E.startsWith("#")&&(E&&this._checkUnique(E),this.refs[E]=F),s&&this.validateSchema(_,!0),F}_checkUnique(_){if(this.schemas[_]||this.refs[_])throw new Error(`schema with key or id "${_}" already exists`)}_compileSchemaEnv(_){if(_.meta?this._compileMetaSchema(_):c.compileSchema.call(this,_),!_.validate)throw new Error("ajv implementation error");return _.validate}_compileMetaSchema(_){const I=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,_)}finally{this.opts=I}}}e.default=T,T.ValidationError=a.default,T.MissingRefError=n.default;function A(V,_,I,E="error"){for(const s in V){const l=s;l in _&&this.logger[E](`${I}: option ${s}. ${V[l]}`)}}function g(V){return V=(0,y.normalizeId)(V),this.schemas[V]||this.refs[V]}function C(){const V=this.opts.schemas;if(V)if(Array.isArray(V))this.addSchema(V);else for(const _ in V)this.addSchema(V[_],_)}function D(){for(const V in this.opts.formats){const _=this.opts.formats[V];_&&this.addFormat(V,_)}}function M(V){if(Array.isArray(V)){this.addVocabulary(V);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const _ in V){const I=V[_];I.keyword||(I.keyword=_),this.addKeyword(I)}}function U(){const V={...this.opts};for(const _ of w)delete V[_];return V}const W={log(){},warn(){},error(){}};function H(V){if(V===!1)return W;if(V===void 0)return console;if(V.log&&V.warn&&V.error)return V;throw new Error("logger must implement log, warn and error methods")}const de=/^[a-z_$][a-z0-9_$:-]*$/i;function re(V,_){const{RULES:I}=this;if((0,m.eachItem)(V,E=>{if(I.keywords[E])throw new Error(`Keyword ${E} is already defined`);if(!de.test(E))throw new Error(`Keyword ${E} has invalid name`)}),!!_&&_.$data&&!("code"in _||"validate"in _))throw new Error('$data keyword must have "code" or "validate" function')}function we(V,_,I){var E;const s=_==null?void 0:_.post;if(I&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:l}=this;let k=s?l.post:l.rules.find(({type:F})=>F===I);if(k||(k={type:I,rules:[]},l.rules.push(k)),l.keywords[V]=!0,!_)return;const z={keyword:V,definition:{..._,type:(0,f.getJSONTypes)(_.type),schemaType:(0,f.getJSONTypes)(_.schemaType)}};_.before?Je.call(this,k,z,_.before):k.rules.push(z),l.all[V]=z,(E=_.implements)===null||E===void 0||E.forEach(F=>this.addKeyword(F))}function Je(V,_,I){const E=V.rules.findIndex(s=>s.keyword===I);E>=0?V.rules.splice(E,0,_):(V.rules.push(_),this.logger.warn(`rule ${I} is not defined`))}function nt(V){let{metaSchema:_}=V;_!==void 0&&(V.$data&&this.opts.$data&&(_=at(_)),V.validateSchema=this.compile(_,!0))}const gt={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function at(V){return{anyOf:[V,gt]}}})(Xn);var Mr={},Vr={},zr={};Object.defineProperty(zr,"__esModule",{value:!0});const ko={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};zr.default=ko;var rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.callRef=rt.getValidate=void 0;const jo=Kt,An=X,ve=B,ht=Ve,Mn=_e,Yt=ee,Io={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:a}=e,{baseId:n,schemaEnv:i,validateName:c,opts:d,self:y}=a,{root:f}=i;if((r==="#"||r==="#/")&&n===f.baseId)return $();const m=Mn.resolveRef.call(y,f,n,r);if(m===void 0)throw new jo.default(a.opts.uriResolver,n,r);if(m instanceof Mn.SchemaEnv)return j(m);return R(m);function $(){if(i===f)return nr(e,c,i,i.$async);const w=t.scopeValue("root",{ref:f});return nr(e,(0,ve._)`${w}.validate`,f,f.$async)}function j(w){const b=wa(e,w);nr(e,b,w,w.$async)}function R(w){const b=t.scopeValue("schema",d.code.source===!0?{ref:w,code:(0,ve.stringify)(w)}:{ref:w}),v=t.name("valid"),p=e.subschema({schema:w,dataTypes:[],schemaPath:ve.nil,topSchemaRef:b,errSchemaPath:r},v);e.mergeEvaluated(p),e.ok(v)}}};function wa(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,ve._)`${r.scopeValue("wrapper",{ref:t})}.validate`}rt.getValidate=wa;function nr(e,t,r,a){const{gen:n,it:i}=e,{allErrors:c,schemaEnv:d,opts:y}=i,f=y.passContext?ht.default.this:ve.nil;a?m():$();function m(){if(!d.$async)throw new Error("async schema referenced by sync schema");const w=n.let("valid");n.try(()=>{n.code((0,ve._)`await ${(0,An.callValidateCode)(e,t,f)}`),R(t),c||n.assign(w,!0)},b=>{n.if((0,ve._)`!(${b} instanceof ${i.ValidationError})`,()=>n.throw(b)),j(b),c||n.assign(w,!1)}),e.ok(w)}function $(){e.result((0,An.callValidateCode)(e,t,f),()=>R(t),()=>j(t))}function j(w){const b=(0,ve._)`${w}.errors`;n.assign(ht.default.vErrors,(0,ve._)`${ht.default.vErrors} === null ? ${b} : ${ht.default.vErrors}.concat(${b})`),n.assign(ht.default.errors,(0,ve._)`${ht.default.vErrors}.length`)}function R(w){var b;if(!i.opts.unevaluated)return;const v=(b=r==null?void 0:r.validate)===null||b===void 0?void 0:b.evaluated;if(i.props!==!0)if(v&&!v.dynamicProps)v.props!==void 0&&(i.props=Yt.mergeEvaluated.props(n,v.props,i.props));else{const p=n.var("props",(0,ve._)`${w}.evaluated.props`);i.props=Yt.mergeEvaluated.props(n,p,i.props,ve.Name)}if(i.items!==!0)if(v&&!v.dynamicItems)v.items!==void 0&&(i.items=Yt.mergeEvaluated.items(n,v.items,i.items));else{const p=n.var("items",(0,ve._)`${w}.evaluated.items`);i.items=Yt.mergeEvaluated.items(n,p,i.items,ve.Name)}}}rt.callRef=nr;rt.default=Io;Object.defineProperty(Vr,"__esModule",{value:!0});const Do=zr,Ao=rt,Mo=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Do.default,Ao.default];Vr.default=Mo;var Fr={},Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});const ir=B,Ke=ir.operators,cr={maximum:{okStr:"<=",ok:Ke.LTE,fail:Ke.GT},minimum:{okStr:">=",ok:Ke.GTE,fail:Ke.LT},exclusiveMaximum:{okStr:"<",ok:Ke.LT,fail:Ke.GTE},exclusiveMinimum:{okStr:">",ok:Ke.GT,fail:Ke.LTE}},Vo={message:({keyword:e,schemaCode:t})=>(0,ir.str)`must be ${cr[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,ir._)`{comparison: ${cr[e].okStr}, limit: ${t}}`},zo={keyword:Object.keys(cr),type:"number",schemaType:"number",$data:!0,error:Vo,code(e){const{keyword:t,data:r,schemaCode:a}=e;e.fail$data((0,ir._)`${r} ${cr[t].fail} ${a} || isNaN(${r})`)}};Ur.default=zo;var qr={};Object.defineProperty(qr,"__esModule",{value:!0});const At=B,Fo={message:({schemaCode:e})=>(0,At.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,At._)`{multipleOf: ${e}}`},Uo={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Fo,code(e){const{gen:t,data:r,schemaCode:a,it:n}=e,i=n.opts.multipleOfPrecision,c=t.let("res"),d=i?(0,At._)`Math.abs(Math.round(${c}) - ${c}) > 1e-${i}`:(0,At._)`${c} !== parseInt(${c})`;e.fail$data((0,At._)`(${a} === 0 || (${c} = ${r}/${a}, ${d}))`)}};qr.default=Uo;var Lr={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});function Ea(e){const t=e.length;let r=0,a=0,n;for(;a<t;)r++,n=e.charCodeAt(a++),n>=55296&&n<=56319&&a<t&&(n=e.charCodeAt(a),(n&64512)===56320&&a++);return r}Kr.default=Ea;Ea.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Lr,"__esModule",{value:!0});const xe=B,qo=ee,Lo=Kr,Ko={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,xe.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,xe._)`{limit: ${e}}`},Ho={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Ko,code(e){const{keyword:t,data:r,schemaCode:a,it:n}=e,i=t==="maxLength"?xe.operators.GT:xe.operators.LT,c=n.opts.unicode===!1?(0,xe._)`${r}.length`:(0,xe._)`${(0,qo.useFunc)(e.gen,Lo.default)}(${r})`;e.fail$data((0,xe._)`${c} ${i} ${a}`)}};Lr.default=Ho;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});const Go=X,ur=B,Jo={message:({schemaCode:e})=>(0,ur.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,ur._)`{pattern: ${e}}`},Bo={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Jo,code(e){const{data:t,$data:r,schema:a,schemaCode:n,it:i}=e,c=i.opts.unicodeRegExp?"u":"",d=r?(0,ur._)`(new RegExp(${n}, ${c}))`:(0,Go.usePattern)(e,a);e.fail$data((0,ur._)`!${d}.test(${t})`)}};Hr.default=Bo;var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});const Mt=B,Wo={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,Mt.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Mt._)`{limit: ${e}}`},Xo={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Wo,code(e){const{keyword:t,data:r,schemaCode:a}=e,n=t==="maxProperties"?Mt.operators.GT:Mt.operators.LT;e.fail$data((0,Mt._)`Object.keys(${r}).length ${n} ${a}`)}};Gr.default=Xo;var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});const jt=X,Vt=B,Qo=ee,Yo={message:({params:{missingProperty:e}})=>(0,Vt.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Vt._)`{missingProperty: ${e}}`},Zo={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Yo,code(e){const{gen:t,schema:r,schemaCode:a,data:n,$data:i,it:c}=e,{opts:d}=c;if(!i&&r.length===0)return;const y=r.length>=d.loopRequired;if(c.allErrors?f():m(),d.strictRequired){const R=e.parentSchema.properties,{definedProperties:w}=e.it;for(const b of r)if((R==null?void 0:R[b])===void 0&&!w.has(b)){const v=c.schemaEnv.baseId+c.errSchemaPath,p=`required property "${b}" is not defined at "${v}" (strictRequired)`;(0,Qo.checkStrictMode)(c,p,c.opts.strictRequired)}}function f(){if(y||i)e.block$data(Vt.nil,$);else for(const R of r)(0,jt.checkReportMissingProp)(e,R)}function m(){const R=t.let("missing");if(y||i){const w=t.let("valid",!0);e.block$data(w,()=>j(R,w)),e.ok(w)}else t.if((0,jt.checkMissingProp)(e,r,R)),(0,jt.reportMissingProp)(e,R),t.else()}function $(){t.forOf("prop",a,R=>{e.setParams({missingProperty:R}),t.if((0,jt.noPropertyInData)(t,n,R,d.ownProperties),()=>e.error())})}function j(R,w){e.setParams({missingProperty:R}),t.forOf(R,a,()=>{t.assign(w,(0,jt.propertyInData)(t,n,R,d.ownProperties)),t.if((0,Vt.not)(w),()=>{e.error(),t.break()})},Vt.nil)}}};Jr.default=Zo;var Br={};Object.defineProperty(Br,"__esModule",{value:!0});const zt=B,xo={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,zt.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,zt._)`{limit: ${e}}`},ei={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:xo,code(e){const{keyword:t,data:r,schemaCode:a}=e,n=t==="maxItems"?zt.operators.GT:zt.operators.LT;e.fail$data((0,zt._)`${r}.length ${n} ${a}`)}};Br.default=ei;var Wr={},Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});const ba=na;ba.code='require("ajv/dist/runtime/equal").default';Ht.default=ba;Object.defineProperty(Wr,"__esModule",{value:!0});const _r=qt,he=B,ti=ee,ri=Ht,ni={message:({params:{i:e,j:t}})=>(0,he.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,he._)`{i: ${e}, j: ${t}}`},ai={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:ni,code(e){const{gen:t,data:r,$data:a,schema:n,parentSchema:i,schemaCode:c,it:d}=e;if(!a&&!n)return;const y=t.let("valid"),f=i.items?(0,_r.getSchemaTypes)(i.items):[];e.block$data(y,m,(0,he._)`${c} === false`),e.ok(y);function m(){const w=t.let("i",(0,he._)`${r}.length`),b=t.let("j");e.setParams({i:w,j:b}),t.assign(y,!0),t.if((0,he._)`${w} > 1`,()=>($()?j:R)(w,b))}function $(){return f.length>0&&!f.some(w=>w==="object"||w==="array")}function j(w,b){const v=t.name("item"),p=(0,_r.checkDataTypes)(f,v,d.opts.strictNumbers,_r.DataType.Wrong),O=t.const("indices",(0,he._)`{}`);t.for((0,he._)`;${w}--;`,()=>{t.let(v,(0,he._)`${r}[${w}]`),t.if(p,(0,he._)`continue`),f.length>1&&t.if((0,he._)`typeof ${v} == "string"`,(0,he._)`${v} += "_"`),t.if((0,he._)`typeof ${O}[${v}] == "number"`,()=>{t.assign(b,(0,he._)`${O}[${v}]`),e.error(),t.assign(y,!1).break()}).code((0,he._)`${O}[${v}] = ${w}`)})}function R(w,b){const v=(0,ti.useFunc)(t,ri.default),p=t.name("outer");t.label(p).for((0,he._)`;${w}--;`,()=>t.for((0,he._)`${b} = ${w}; ${b}--;`,()=>t.if((0,he._)`${v}(${r}[${w}], ${r}[${b}])`,()=>{e.error(),t.assign(y,!1).break(p)})))}}};Wr.default=ai;var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});const Pr=B,si=ee,oi=Ht,ii={message:"must be equal to constant",params:({schemaCode:e})=>(0,Pr._)`{allowedValue: ${e}}`},ci={keyword:"const",$data:!0,error:ii,code(e){const{gen:t,data:r,$data:a,schemaCode:n,schema:i}=e;a||i&&typeof i=="object"?e.fail$data((0,Pr._)`!${(0,si.useFunc)(t,oi.default)}(${r}, ${n})`):e.fail((0,Pr._)`${i} !== ${r}`)}};Xr.default=ci;var Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});const It=B,ui=ee,li=Ht,di={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,It._)`{allowedValues: ${e}}`},fi={keyword:"enum",schemaType:"array",$data:!0,error:di,code(e){const{gen:t,data:r,$data:a,schema:n,schemaCode:i,it:c}=e;if(!a&&n.length===0)throw new Error("enum must have non-empty array");const d=n.length>=c.opts.loopEnum;let y;const f=()=>y??(y=(0,ui.useFunc)(t,li.default));let m;if(d||a)m=t.let("valid"),e.block$data(m,$);else{if(!Array.isArray(n))throw new Error("ajv implementation error");const R=t.const("vSchema",i);m=(0,It.or)(...n.map((w,b)=>j(R,b)))}e.pass(m);function $(){t.assign(m,!1),t.forOf("v",i,R=>t.if((0,It._)`${f()}(${r}, ${R})`,()=>t.assign(m,!0).break()))}function j(R,w){const b=n[w];return typeof b=="object"&&b!==null?(0,It._)`${f()}(${r}, ${R}[${w}])`:(0,It._)`${r} === ${b}`}}};Qr.default=fi;Object.defineProperty(Fr,"__esModule",{value:!0});const hi=Ur,mi=qr,pi=Lr,yi=Hr,$i=Gr,vi=Jr,_i=Br,gi=Wr,wi=Xr,Ei=Qr,bi=[hi.default,mi.default,pi.default,yi.default,$i.default,vi.default,_i.default,gi.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},wi.default,Ei.default];Fr.default=bi;var Yr={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.validateAdditionalItems=void 0;const et=B,Nr=ee,Si={message:({params:{len:e}})=>(0,et.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,et._)`{limit: ${e}}`},Pi={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Si,code(e){const{parentSchema:t,it:r}=e,{items:a}=t;if(!Array.isArray(a)){(0,Nr.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Sa(e,a)}};function Sa(e,t){const{gen:r,schema:a,data:n,keyword:i,it:c}=e;c.items=!0;const d=r.const("len",(0,et._)`${n}.length`);if(a===!1)e.setParams({len:t.length}),e.pass((0,et._)`${d} <= ${t.length}`);else if(typeof a=="object"&&!(0,Nr.alwaysValidSchema)(c,a)){const f=r.var("valid",(0,et._)`${d} <= ${t.length}`);r.if((0,et.not)(f),()=>y(f)),e.ok(f)}function y(f){r.forRange("i",t.length,d,m=>{e.subschema({keyword:i,dataProp:m,dataPropType:Nr.Type.Num},f),c.allErrors||r.if((0,et.not)(f),()=>r.break())})}}vt.validateAdditionalItems=Sa;vt.default=Pi;var Zr={},_t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.validateTuple=void 0;const Vn=B,ar=ee,Ni=X,Oi={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Pa(e,"additionalItems",t);r.items=!0,!(0,ar.alwaysValidSchema)(r,t)&&e.ok((0,Ni.validateArray)(e))}};function Pa(e,t,r=e.schema){const{gen:a,parentSchema:n,data:i,keyword:c,it:d}=e;m(n),d.opts.unevaluated&&r.length&&d.items!==!0&&(d.items=ar.mergeEvaluated.items(a,r.length,d.items));const y=a.name("valid"),f=a.const("len",(0,Vn._)`${i}.length`);r.forEach(($,j)=>{(0,ar.alwaysValidSchema)(d,$)||(a.if((0,Vn._)`${f} > ${j}`,()=>e.subschema({keyword:c,schemaProp:j,dataProp:j},y)),e.ok(y))});function m($){const{opts:j,errSchemaPath:R}=d,w=r.length,b=w===$.minItems&&(w===$.maxItems||$[t]===!1);if(j.strictTuples&&!b){const v=`"${c}" is ${w}-tuple, but minItems or maxItems/${t} are not specified or different at path "${R}"`;(0,ar.checkStrictMode)(d,v,j.strictTuples)}}}_t.validateTuple=Pa;_t.default=Oi;Object.defineProperty(Zr,"__esModule",{value:!0});const Ci=_t,Ti={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Ci.validateTuple)(e,"items")};Zr.default=Ti;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});const zn=B,Ri=ee,ki=X,ji=vt,Ii={message:({params:{len:e}})=>(0,zn.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,zn._)`{limit: ${e}}`},Di={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Ii,code(e){const{schema:t,parentSchema:r,it:a}=e,{prefixItems:n}=r;a.items=!0,!(0,Ri.alwaysValidSchema)(a,t)&&(n?(0,ji.validateAdditionalItems)(e,n):e.ok((0,ki.validateArray)(e)))}};xr.default=Di;var en={};Object.defineProperty(en,"__esModule",{value:!0});const Se=B,Zt=ee,Ai={message:({params:{min:e,max:t}})=>t===void 0?(0,Se.str)`must contain at least ${e} valid item(s)`:(0,Se.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Se._)`{minContains: ${e}}`:(0,Se._)`{minContains: ${e}, maxContains: ${t}}`},Mi={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Ai,code(e){const{gen:t,schema:r,parentSchema:a,data:n,it:i}=e;let c,d;const{minContains:y,maxContains:f}=a;i.opts.next?(c=y===void 0?1:y,d=f):c=1;const m=t.const("len",(0,Se._)`${n}.length`);if(e.setParams({min:c,max:d}),d===void 0&&c===0){(0,Zt.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(d!==void 0&&c>d){(0,Zt.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Zt.alwaysValidSchema)(i,r)){let b=(0,Se._)`${m} >= ${c}`;d!==void 0&&(b=(0,Se._)`${b} && ${m} <= ${d}`),e.pass(b);return}i.items=!0;const $=t.name("valid");d===void 0&&c===1?R($,()=>t.if($,()=>t.break())):c===0?(t.let($,!0),d!==void 0&&t.if((0,Se._)`${n}.length > 0`,j)):(t.let($,!1),j()),e.result($,()=>e.reset());function j(){const b=t.name("_valid"),v=t.let("count",0);R(b,()=>t.if(b,()=>w(v)))}function R(b,v){t.forRange("i",0,m,p=>{e.subschema({keyword:"contains",dataProp:p,dataPropType:Zt.Type.Num,compositeRule:!0},b),v()})}function w(b){t.code((0,Se._)`${b}++`),d===void 0?t.if((0,Se._)`${b} >= ${c}`,()=>t.assign($,!0).break()):(t.if((0,Se._)`${b} > ${d}`,()=>t.assign($,!1).break()),c===1?t.assign($,!0):t.if((0,Se._)`${b} >= ${c}`,()=>t.assign($,!0)))}}};en.default=Mi;var Na={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=B,r=ee,a=X;e.error={message:({params:{property:y,depsCount:f,deps:m}})=>{const $=f===1?"property":"properties";return(0,t.str)`must have ${$} ${m} when property ${y} is present`},params:({params:{property:y,depsCount:f,deps:m,missingProperty:$}})=>(0,t._)`{property: ${y},
    missingProperty: ${$},
    depsCount: ${f},
    deps: ${m}}`};const n={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(y){const[f,m]=i(y);c(y,f),d(y,m)}};function i({schema:y}){const f={},m={};for(const $ in y){if($==="__proto__")continue;const j=Array.isArray(y[$])?f:m;j[$]=y[$]}return[f,m]}function c(y,f=y.schema){const{gen:m,data:$,it:j}=y;if(Object.keys(f).length===0)return;const R=m.let("missing");for(const w in f){const b=f[w];if(b.length===0)continue;const v=(0,a.propertyInData)(m,$,w,j.opts.ownProperties);y.setParams({property:w,depsCount:b.length,deps:b.join(", ")}),j.allErrors?m.if(v,()=>{for(const p of b)(0,a.checkReportMissingProp)(y,p)}):(m.if((0,t._)`${v} && (${(0,a.checkMissingProp)(y,b,R)})`),(0,a.reportMissingProp)(y,R),m.else())}}e.validatePropertyDeps=c;function d(y,f=y.schema){const{gen:m,data:$,keyword:j,it:R}=y,w=m.name("valid");for(const b in f)(0,r.alwaysValidSchema)(R,f[b])||(m.if((0,a.propertyInData)(m,$,b,R.opts.ownProperties),()=>{const v=y.subschema({keyword:j,schemaProp:b},w);y.mergeValidEvaluated(v,w)},()=>m.var(w,!0)),y.ok(w))}e.validateSchemaDeps=d,e.default=n})(Na);var tn={};Object.defineProperty(tn,"__esModule",{value:!0});const Oa=B,Vi=ee,zi={message:"property name must be valid",params:({params:e})=>(0,Oa._)`{propertyName: ${e.propertyName}}`},Fi={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:zi,code(e){const{gen:t,schema:r,data:a,it:n}=e;if((0,Vi.alwaysValidSchema)(n,r))return;const i=t.name("valid");t.forIn("key",a,c=>{e.setParams({propertyName:c}),e.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},i),t.if((0,Oa.not)(i),()=>{e.error(!0),n.allErrors||t.break()})}),e.ok(i)}};tn.default=Fi;var mr={};Object.defineProperty(mr,"__esModule",{value:!0});const xt=X,Ne=B,Ui=Ve,er=ee,qi={message:"must NOT have additional properties",params:({params:e})=>(0,Ne._)`{additionalProperty: ${e.additionalProperty}}`},Li={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:qi,code(e){const{gen:t,schema:r,parentSchema:a,data:n,errsCount:i,it:c}=e;if(!i)throw new Error("ajv implementation error");const{allErrors:d,opts:y}=c;if(c.props=!0,y.removeAdditional!=="all"&&(0,er.alwaysValidSchema)(c,r))return;const f=(0,xt.allSchemaProperties)(a.properties),m=(0,xt.allSchemaProperties)(a.patternProperties);$(),e.ok((0,Ne._)`${i} === ${Ui.default.errors}`);function $(){t.forIn("key",n,v=>{!f.length&&!m.length?w(v):t.if(j(v),()=>w(v))})}function j(v){let p;if(f.length>8){const O=(0,er.schemaRefOrVal)(c,a.properties,"properties");p=(0,xt.isOwnProperty)(t,O,v)}else f.length?p=(0,Ne.or)(...f.map(O=>(0,Ne._)`${v} === ${O}`)):p=Ne.nil;return m.length&&(p=(0,Ne.or)(p,...m.map(O=>(0,Ne._)`${(0,xt.usePattern)(e,O)}.test(${v})`))),(0,Ne.not)(p)}function R(v){t.code((0,Ne._)`delete ${n}[${v}]`)}function w(v){if(y.removeAdditional==="all"||y.removeAdditional&&r===!1){R(v);return}if(r===!1){e.setParams({additionalProperty:v}),e.error(),d||t.break();return}if(typeof r=="object"&&!(0,er.alwaysValidSchema)(c,r)){const p=t.name("valid");y.removeAdditional==="failing"?(b(v,p,!1),t.if((0,Ne.not)(p),()=>{e.reset(),R(v)})):(b(v,p),d||t.if((0,Ne.not)(p),()=>t.break()))}}function b(v,p,O){const S={keyword:"additionalProperties",dataProp:v,dataPropType:er.Type.Str};O===!1&&Object.assign(S,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(S,p)}}};mr.default=Li;var rn={};Object.defineProperty(rn,"__esModule",{value:!0});const Ki=Ce,Fn=X,gr=ee,Un=mr,Hi={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:a,data:n,it:i}=e;i.opts.removeAdditional==="all"&&a.additionalProperties===void 0&&Un.default.code(new Ki.KeywordCxt(i,Un.default,"additionalProperties"));const c=(0,Fn.allSchemaProperties)(r);for(const $ of c)i.definedProperties.add($);i.opts.unevaluated&&c.length&&i.props!==!0&&(i.props=gr.mergeEvaluated.props(t,(0,gr.toHash)(c),i.props));const d=c.filter($=>!(0,gr.alwaysValidSchema)(i,r[$]));if(d.length===0)return;const y=t.name("valid");for(const $ of d)f($)?m($):(t.if((0,Fn.propertyInData)(t,n,$,i.opts.ownProperties)),m($),i.allErrors||t.else().var(y,!0),t.endIf()),e.it.definedProperties.add($),e.ok(y);function f($){return i.opts.useDefaults&&!i.compositeRule&&r[$].default!==void 0}function m($){e.subschema({keyword:"properties",schemaProp:$,dataProp:$},y)}}};rn.default=Hi;var nn={};Object.defineProperty(nn,"__esModule",{value:!0});const qn=X,tr=B,Ln=ee,Kn=ee,Gi={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:a,parentSchema:n,it:i}=e,{opts:c}=i,d=(0,qn.allSchemaProperties)(r),y=d.filter(b=>(0,Ln.alwaysValidSchema)(i,r[b]));if(d.length===0||y.length===d.length&&(!i.opts.unevaluated||i.props===!0))return;const f=c.strictSchema&&!c.allowMatchingProperties&&n.properties,m=t.name("valid");i.props!==!0&&!(i.props instanceof tr.Name)&&(i.props=(0,Kn.evaluatedPropsToName)(t,i.props));const{props:$}=i;j();function j(){for(const b of d)f&&R(b),i.allErrors?w(b):(t.var(m,!0),w(b),t.if(m))}function R(b){for(const v in f)new RegExp(b).test(v)&&(0,Ln.checkStrictMode)(i,`property ${v} matches pattern ${b} (use allowMatchingProperties)`)}function w(b){t.forIn("key",a,v=>{t.if((0,tr._)`${(0,qn.usePattern)(e,b)}.test(${v})`,()=>{const p=y.includes(b);p||e.subschema({keyword:"patternProperties",schemaProp:b,dataProp:v,dataPropType:Kn.Type.Str},m),i.opts.unevaluated&&$!==!0?t.assign((0,tr._)`${$}[${v}]`,!0):!p&&!i.allErrors&&t.if((0,tr.not)(m),()=>t.break())})})}}};nn.default=Gi;var an={};Object.defineProperty(an,"__esModule",{value:!0});const Ji=ee,Bi={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:a}=e;if((0,Ji.alwaysValidSchema)(a,r)){e.fail();return}const n=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),e.failResult(n,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};an.default=Bi;var sn={};Object.defineProperty(sn,"__esModule",{value:!0});const Wi=X,Xi={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Wi.validateUnion,error:{message:"must match a schema in anyOf"}};sn.default=Xi;var on={};Object.defineProperty(on,"__esModule",{value:!0});const sr=B,Qi=ee,Yi={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,sr._)`{passingSchemas: ${e.passing}}`},Zi={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Yi,code(e){const{gen:t,schema:r,parentSchema:a,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(n.opts.discriminator&&a.discriminator)return;const i=r,c=t.let("valid",!1),d=t.let("passing",null),y=t.name("_valid");e.setParams({passing:d}),t.block(f),e.result(c,()=>e.reset(),()=>e.error(!0));function f(){i.forEach((m,$)=>{let j;(0,Qi.alwaysValidSchema)(n,m)?t.var(y,!0):j=e.subschema({keyword:"oneOf",schemaProp:$,compositeRule:!0},y),$>0&&t.if((0,sr._)`${y} && ${c}`).assign(c,!1).assign(d,(0,sr._)`[${d}, ${$}]`).else(),t.if(y,()=>{t.assign(c,!0),t.assign(d,$),j&&e.mergeEvaluated(j,sr.Name)})})}}};on.default=Zi;var cn={};Object.defineProperty(cn,"__esModule",{value:!0});const xi=ee,ec={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const n=t.name("valid");r.forEach((i,c)=>{if((0,xi.alwaysValidSchema)(a,i))return;const d=e.subschema({keyword:"allOf",schemaProp:c},n);e.ok(n),e.mergeEvaluated(d)})}};cn.default=ec;var un={};Object.defineProperty(un,"__esModule",{value:!0});const lr=B,Ca=ee,tc={message:({params:e})=>(0,lr.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,lr._)`{failingKeyword: ${e.ifClause}}`},rc={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:tc,code(e){const{gen:t,parentSchema:r,it:a}=e;r.then===void 0&&r.else===void 0&&(0,Ca.checkStrictMode)(a,'"if" without "then" and "else" is ignored');const n=Hn(a,"then"),i=Hn(a,"else");if(!n&&!i)return;const c=t.let("valid",!0),d=t.name("_valid");if(y(),e.reset(),n&&i){const m=t.let("ifClause");e.setParams({ifClause:m}),t.if(d,f("then",m),f("else",m))}else n?t.if(d,f("then")):t.if((0,lr.not)(d),f("else"));e.pass(c,()=>e.error(!0));function y(){const m=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);e.mergeEvaluated(m)}function f(m,$){return()=>{const j=e.subschema({keyword:m},d);t.assign(c,d),e.mergeValidEvaluated(j,c),$?t.assign($,(0,lr._)`${m}`):e.setParams({ifClause:m})}}}};function Hn(e,t){const r=e.schema[t];return r!==void 0&&!(0,Ca.alwaysValidSchema)(e,r)}un.default=rc;var ln={};Object.defineProperty(ln,"__esModule",{value:!0});const nc=ee,ac={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,nc.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};ln.default=ac;Object.defineProperty(Yr,"__esModule",{value:!0});const sc=vt,oc=Zr,ic=_t,cc=xr,uc=en,lc=Na,dc=tn,fc=mr,hc=rn,mc=nn,pc=an,yc=sn,$c=on,vc=cn,_c=un,gc=ln;function wc(e=!1){const t=[pc.default,yc.default,$c.default,vc.default,_c.default,gc.default,dc.default,fc.default,lc.default,hc.default,mc.default];return e?t.push(oc.default,cc.default):t.push(sc.default,ic.default),t.push(uc.default),t}Yr.default=wc;var dn={},fn={};Object.defineProperty(fn,"__esModule",{value:!0});const le=B,Ec={message:({schemaCode:e})=>(0,le.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,le._)`{format: ${e}}`},bc={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Ec,code(e,t){const{gen:r,data:a,$data:n,schema:i,schemaCode:c,it:d}=e,{opts:y,errSchemaPath:f,schemaEnv:m,self:$}=d;if(!y.validateFormats)return;n?j():R();function j(){const w=r.scopeValue("formats",{ref:$.formats,code:y.code.formats}),b=r.const("fDef",(0,le._)`${w}[${c}]`),v=r.let("fType"),p=r.let("format");r.if((0,le._)`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>r.assign(v,(0,le._)`${b}.type || "string"`).assign(p,(0,le._)`${b}.validate`),()=>r.assign(v,(0,le._)`"string"`).assign(p,b)),e.fail$data((0,le.or)(O(),S()));function O(){return y.strictSchema===!1?le.nil:(0,le._)`${c} && !${p}`}function S(){const T=m.$async?(0,le._)`(${b}.async ? await ${p}(${a}) : ${p}(${a}))`:(0,le._)`${p}(${a})`,A=(0,le._)`(typeof ${p} == "function" ? ${T} : ${p}.test(${a}))`;return(0,le._)`${p} && ${p} !== true && ${v} === ${t} && !${A}`}}function R(){const w=$.formats[i];if(!w){O();return}if(w===!0)return;const[b,v,p]=S(w);b===t&&e.pass(T());function O(){if(y.strictSchema===!1){$.logger.warn(A());return}throw new Error(A());function A(){return`unknown format "${i}" ignored in schema at path "${f}"`}}function S(A){const g=A instanceof RegExp?(0,le.regexpCode)(A):y.code.formats?(0,le._)`${y.code.formats}${(0,le.getProperty)(i)}`:void 0,C=r.scopeValue("formats",{key:i,ref:A,code:g});return typeof A=="object"&&!(A instanceof RegExp)?[A.type||"string",A.validate,(0,le._)`${C}.validate`]:["string",A,C]}function T(){if(typeof w=="object"&&!(w instanceof RegExp)&&w.async){if(!m.$async)throw new Error("async format in sync schema");return(0,le._)`await ${p}(${a})`}return typeof v=="function"?(0,le._)`${p}(${a})`:(0,le._)`${p}.test(${a})`}}}};fn.default=bc;Object.defineProperty(dn,"__esModule",{value:!0});const Sc=fn,Pc=[Sc.default];dn.default=Pc;var $t={};Object.defineProperty($t,"__esModule",{value:!0});$t.contentVocabulary=$t.metadataVocabulary=void 0;$t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];$t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Mr,"__esModule",{value:!0});const Nc=Vr,Oc=Fr,Cc=Yr,Tc=dn,Gn=$t,Rc=[Nc.default,Oc.default,(0,Cc.default)(),Tc.default,Gn.metadataVocabulary,Gn.contentVocabulary];Mr.default=Rc;var hn={},Ta={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(Ta);Object.defineProperty(hn,"__esModule",{value:!0});const mt=B,Or=Ta,Jn=_e,kc=ee,jc={message:({params:{discrError:e,tagName:t}})=>e===Or.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,mt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Ic={keyword:"discriminator",type:"object",schemaType:"object",error:jc,code(e){const{gen:t,data:r,schema:a,parentSchema:n,it:i}=e,{oneOf:c}=n;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const d=a.propertyName;if(typeof d!="string")throw new Error("discriminator: requires propertyName");if(a.mapping)throw new Error("discriminator: mapping is not supported");if(!c)throw new Error("discriminator: requires oneOf keyword");const y=t.let("valid",!1),f=t.const("tag",(0,mt._)`${r}${(0,mt.getProperty)(d)}`);t.if((0,mt._)`typeof ${f} == "string"`,()=>m(),()=>e.error(!1,{discrError:Or.DiscrError.Tag,tag:f,tagName:d})),e.ok(y);function m(){const R=j();t.if(!1);for(const w in R)t.elseIf((0,mt._)`${f} === ${w}`),t.assign(y,$(R[w]));t.else(),e.error(!1,{discrError:Or.DiscrError.Mapping,tag:f,tagName:d}),t.endIf()}function $(R){const w=t.name("valid"),b=e.subschema({keyword:"oneOf",schemaProp:R},w);return e.mergeEvaluated(b,mt.Name),w}function j(){var R;const w={},b=p(n);let v=!0;for(let T=0;T<c.length;T++){let A=c[T];A!=null&&A.$ref&&!(0,kc.schemaHasRulesButRef)(A,i.self.RULES)&&(A=Jn.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,A==null?void 0:A.$ref),A instanceof Jn.SchemaEnv&&(A=A.schema));const g=(R=A==null?void 0:A.properties)===null||R===void 0?void 0:R[d];if(typeof g!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${d}"`);v=v&&(b||p(A)),O(g,T)}if(!v)throw new Error(`discriminator: "${d}" must be required`);return w;function p({required:T}){return Array.isArray(T)&&T.includes(d)}function O(T,A){if(T.const)S(T.const,A);else if(T.enum)for(const g of T.enum)S(g,A);else throw new Error(`discriminator: "properties/${d}" must have "const" or "enum"`)}function S(T,A){if(typeof T!="string"||T in w)throw new Error(`discriminator: "${d}" values must be unique strings`);w[T]=A}}}};hn.default=Ic;const Dc="http://json-schema.org/draft-07/schema#",Ac="http://json-schema.org/draft-07/schema#",Mc="Core schema meta-schema",Vc={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},zc=["object","boolean"],Fc={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Uc={$schema:Dc,$id:Ac,title:Mc,definitions:Vc,type:zc,properties:Fc,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const r=Xn,a=Mr,n=hn,i=Uc,c=["/properties"],d="http://json-schema.org/draft-07/schema";class y extends r.default{_addVocabularies(){super._addVocabularies(),a.default.forEach(w=>this.addVocabulary(w)),this.opts.discriminator&&this.addKeyword(n.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const w=this.opts.$data?this.$dataMetaSchema(i,c):i;this.addMetaSchema(w,d,!1),this.refs["http://json-schema.org/schema"]=d}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(d)?d:void 0)}}e.exports=t=y,Object.defineProperty(t,"__esModule",{value:!0}),t.default=y;var f=Ce;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return f.KeywordCxt}});var m=B;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return m._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return m.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return m.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return m.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return m.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return m.CodeGen}});var $=Lt;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return $.default}});var j=Kt;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return j.default}})})(wr,wr.exports);var Ra=wr.exports;const qc=Bn(Ra);var Cr={exports:{}},ka={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(M,U){return{validate:M,compare:U}}e.fullFormats={date:t(i,c),time:t(y,f),"date-time":t($,j),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:b,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:D,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:p,int32:{type:"number",validate:T},int64:{type:"number",validate:A},float:{type:"number",validate:g},double:{type:"number",validate:g},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,c),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,f),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,j),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(M){return M%4===0&&(M%100!==0||M%400===0)}const a=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,n=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(M){const U=a.exec(M);if(!U)return!1;const W=+U[1],H=+U[2],de=+U[3];return H>=1&&H<=12&&de>=1&&de<=(H===2&&r(W)?29:n[H])}function c(M,U){if(M&&U)return M>U?1:M<U?-1:0}const d=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function y(M,U){const W=d.exec(M);if(!W)return!1;const H=+W[1],de=+W[2],re=+W[3],we=W[5];return(H<=23&&de<=59&&re<=59||H===23&&de===59&&re===60)&&(!U||we!=="")}function f(M,U){if(!(M&&U))return;const W=d.exec(M),H=d.exec(U);if(W&&H)return M=W[1]+W[2]+W[3]+(W[4]||""),U=H[1]+H[2]+H[3]+(H[4]||""),M>U?1:M<U?-1:0}const m=/t|\s/i;function $(M){const U=M.split(m);return U.length===2&&i(U[0])&&y(U[1],!0)}function j(M,U){if(!(M&&U))return;const[W,H]=M.split(m),[de,re]=U.split(m),we=c(W,de);if(we!==void 0)return we||f(H,re)}const R=/\/|:/,w=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function b(M){return R.test(M)&&w.test(M)}const v=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function p(M){return v.lastIndex=0,v.test(M)}const O=-(2**31),S=2**31-1;function T(M){return Number.isInteger(M)&&M<=S&&M>=O}function A(M){return Number.isInteger(M)}function g(){return!0}const C=/[^\\]\\Z/;function D(M){if(C.test(M))return!1;try{return new RegExp(M),!0}catch{return!1}}})(ka);var ja={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=Ra,r=B,a=r.operators,n={formatMaximum:{okStr:"<=",ok:a.LTE,fail:a.GT},formatMinimum:{okStr:">=",ok:a.GTE,fail:a.LT},formatExclusiveMaximum:{okStr:"<",ok:a.LT,fail:a.GTE},formatExclusiveMinimum:{okStr:">",ok:a.GT,fail:a.LTE}},i={message:({keyword:d,schemaCode:y})=>r.str`should be ${n[d].okStr} ${y}`,params:({keyword:d,schemaCode:y})=>r._`{comparison: ${n[d].okStr}, limit: ${y}}`};e.formatLimitDefinition={keyword:Object.keys(n),type:"string",schemaType:"string",$data:!0,error:i,code(d){const{gen:y,data:f,schemaCode:m,keyword:$,it:j}=d,{opts:R,self:w}=j;if(!R.validateFormats)return;const b=new t.KeywordCxt(j,w.RULES.all.format.definition,"format");b.$data?v():p();function v(){const S=y.scopeValue("formats",{ref:w.formats,code:R.code.formats}),T=y.const("fmt",r._`${S}[${b.schemaCode}]`);d.fail$data(r.or(r._`typeof ${T} != "object"`,r._`${T} instanceof RegExp`,r._`typeof ${T}.compare != "function"`,O(T)))}function p(){const S=b.schema,T=w.formats[S];if(!T||T===!0)return;if(typeof T!="object"||T instanceof RegExp||typeof T.compare!="function")throw new Error(`"${$}": format "${S}" does not define "compare" function`);const A=y.scopeValue("formats",{key:S,ref:T,code:R.code.formats?r._`${R.code.formats}${r.getProperty(S)}`:void 0});d.fail$data(O(A))}function O(S){return r._`${S}.compare(${f}, ${m}) ${n[$].fail} 0`}},dependencies:["format"]};const c=d=>(d.addKeyword(e.formatLimitDefinition),d);e.default=c})(ja);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ka,a=ja,n=B,i=new n.Name("fullFormats"),c=new n.Name("fastFormats"),d=(f,m={keywords:!0})=>{if(Array.isArray(m))return y(f,m,r.fullFormats,i),f;const[$,j]=m.mode==="fast"?[r.fastFormats,c]:[r.fullFormats,i],R=m.formats||r.formatNames;return y(f,R,$,j),m.keywords&&a.default(f),f};d.get=(f,m="full")=>{const j=(m==="fast"?r.fastFormats:r.fullFormats)[f];if(!j)throw new Error(`Unknown format "${f}"`);return j};function y(f,m,$,j){var R,w;(R=(w=f.opts.code).formats)!==null&&R!==void 0||(w.formats=n._`require("ajv-formats/dist/formats").${j}`);for(const b of m)f.addFormat(b,$[b])}e.exports=t=d,Object.defineProperty(t,"__esModule",{value:!0}),t.default=d})(Cr,Cr.exports);var Lc=Cr.exports;const Kc=Bn(Lc),Ia=new qc;Kc(Ia);const Hc={name:"PluginConfig",props:{name:{type:String,default:""},type:{type:String,default:"scoped"},schemaType:{type:String,default:"route"},readonly:Boolean,isEnabled:Boolean,pluginList:{type:Array,default:()=>[]},initialData:{type:Object,default:()=>({})},onChange:{type:Function,default:()=>function(){}}},data(){return{formOptions:{labelWidth:"90px",labelPosition:"right"},formValues:{content:"{}"},codeEditorConfig:{language:"json",style:{height:"600px"}}}},computed:{drawerTitle(){return"插件配置"}},created(){},methods:{handleOpen(){const e=this.initialData[this.name];this.formValues={...this.formValues,name:this.name,disable:this.isEnabled?!0:e&&!(e!=null&&e.disable),content:JSON.stringify(e??{},null,2),scope:this.type}},validateData(e){const t=r=>(r.properties||(r.properties={}),r.properties.disable={type:"boolean"},r);return new Promise(r=>{const a=this.pluginList.find(c=>c.name===this.name),n=a==null?void 0:a.schema;n.oneOf?((n==null?void 0:n.oneOf)??[]).forEach(d=>{t(d)}):t(n);const i=Ia.compile(n);if(i(e)){r(e);return}for(const c of i.errors){let d="";switch(c.keyword){case"enum":d=`${c.dataPath} ${c.message}：${c.params.allowedValues.join(", ")}`;break;case"minItems":case"type":d=`${c.dataPath} ${c.message}`;break;case"oneOf":case"required":d=`${c.message??""}`;break;default:d=`${c.schemaPath} ${c.message}`}this.$notify.error({title:"非法插件数据",message:d,duration:3e3})}})},onDelete(){},async onSubmit(){try{let e;this.validateData(e).then(t=>{this.onChange({formValues:this.formValues,codeData:t}),this.onClose(!0)})}catch(e){throw this.$message.error(e.message),new Error(e.message)}},onClose(e=!1){Object.assign(this.$data,this.$options.data(this)),this.$emit("update:visible"),this.$emit("close-drawer",e)}}},Gc=Wn("span",{class:"font-title"},Xa("配置 Raw Data"),-1),Jc={style:{flex:"auto"}};function Bc(e,t,r,a,n,i){const c=Xt("el-divider"),d=Xt("CodeEditor"),y=Xt("el-button"),f=Xt("el-drawer");return Ba(),Wa(f,On({title:i.drawerTitle},e.$attrs,{onClose:i.onClose,onOpened:i.handleOpen}),{footer:Rt(()=>[Wn("div",Jc,[Qt(y,{onClick:i.onClose},{default:Rt(()=>[Nn("取 消")]),_:1},8,["onClick"]),Qt(y,{type:"primary",onClick:i.onSubmit},{default:Rt(()=>[Nn("提 交")]),_:1},8,["onClick"])])]),default:Rt(()=>[Qt(c,{"content-position":"left"},{default:Rt(()=>[Gc]),_:1}),Qt(d,On({ref:"codeEditor",modelValue:n.formValues.content,"onUpdate:modelValue":t[0]||(t[0]=m=>n.formValues.content=m)},n.codeEditorConfig),null,16,["modelValue"])]),_:1},16,["title","onClose","onOpened"])}const Xc=Ja(Hc,[["render",Bc]]);export{Xc as default};
