import{_ as H}from"./index-61810bea.js";import{a1 as Q,a2 as X,a3 as Z,a4 as ee,d as U,a5 as te,p as l,m as N,a6 as ae,P as oe,a7 as W,a8 as ne,a9 as I,a as f,r as se,o as le,g,q as r,u as t,aa as ie,ab as ce,_ as re,ac as V,ad as de,f as s,k as h,G as x,x as T,y as L,F as w,i as ue,J as R,K as me,ae as S,af as M}from"./index-96f987ab.js";import{A as _e}from"./index-31d821d1.js";/* empty css              */import{G as pe,a as fe}from"./index-36a6319a.js";import{l as ke,o as ve,s as j}from"./dict-ce3ac239.js";import{_ as be}from"./plugin-vue_export-helper-c27b6911.js";import{A as ge,s as ye,a as he,b as xe}from"./function-call-7909658f.js";import{r as Te,u as we}from"./use-route-a106f139.js";import{T as Pe,a as Ce}from"./index-5871a115.js";import"./index-67b09d1c.js";import"./use-placeholder-9429c211.js";import"./index-a234e89c.js";import"./use-id-d2a1ebc6.js";import"./index-934737db.js";const[Ae,B]=Q("action-bar-icon"),De=X({},Te,{dot:Boolean,text:String,icon:String,color:String,badge:Z,iconClass:ee,badgeProps:Object,iconPrefix:String});var Ie=U({name:Ae,props:De,setup(p,{slots:a}){const d=we();te(ge);const k=()=>{const{dot:u,badge:v,icon:P,color:C,iconClass:i,badgeProps:m,iconPrefix:A}=p;return a.icon?l(ae,N({dot:u,class:B("icon"),content:v},m),{default:a.icon}):l(oe,{tag:"div",dot:u,name:P,badge:v,color:C,class:[B("icon"),i],badgeProps:m,classPrefix:A},null)};return()=>l("div",{role:"button",class:B(),tabindex:0,onClick:d},[k(),a.default?a.default():p.text])}});const Be=W(Ie);W(ye);const G=Object.assign({"./Detail.vue":()=>I(()=>import("./Detail-a2c1d64d.js"),["static/js/Detail-a2c1d64d.js","static/js/index-96f987ab.js","static/css/index-4fa9876d.css","static/js/index-caaea2a8.js","static/js/use-route-a106f139.js","static/css/index-eaabcbd2.css","static/js/plugin-vue_export-helper-c27b6911.js","static/css/Detail-e039c17e.css"]),"./Views.vue":()=>I(()=>import("./Views-d1c8c3e4.js"),["static/js/Views-d1c8c3e4.js","static/js/index-96f987ab.js","static/css/index-4fa9876d.css","static/js/plugin-vue_export-helper-c27b6911.js","static/js/index-357aa49d.js","static/css/Views-8149f817.css"]),"./WorkTrend.vue":()=>I(()=>import("./WorkTrend-4ec0dd95.js"),["static/js/WorkTrend-4ec0dd95.js","static/js/index-96f987ab.js","static/css/index-4fa9876d.css","static/js/plugin-vue_export-helper-c27b6911.js","static/js/index-357aa49d.js","static/css/WorkTrend-855845ba.css"])}),Ne=Object.keys(G).reduce((p,a)=>{const d=a.replace(/^\.\/(.*)\.\w+$/,"$1");return console.log("name:",d),p[d]=ne(G[a]),p},{});const Oe={class:"label st-margin-bottom-8"},$e={class:"value st-tip"},Ee={class:"footer-action"},Ve={class:"content"},Le=U({name:"ListDetail"}),Re=Object.assign(Le,{setup(p){const a=f(3),d=f([{text:"编辑工单",name:"edit",icon:"edit",color:""},{text:"删除工单",name:"delete",icon:"delete",color:""},{text:"更多操作",name:"more",icon:"ellipsis",color:""},{text:"完结工单",name:"finish",icon:"success",color:""},{text:"退回工单",name:"sendBack",icon:"cross",color:""},{text:"撤销工单",name:"revoke",icon:"revoke",color:""},{text:"转他人处理",name:"exchange",icon:"exchange",color:""}]),k=f([{key:"levelText",label:"紧急程度",value:""},{key:"status",label:"工单状态",value:"",formatter:o=>j.get(o)},{key:"initiator",label:"发起人员",value:""},{key:"deptName",label:"发起部门",value:""},{key:"submitter",label:"提交人员",value:""},{key:"createTime",label:"提交时间",value:""}]),u=f([{label:"工单编号",key:"id"},{label:"工单标题",key:"name"},{label:"工单类型",key:"typeText"},{label:"紧急程度",key:"levelText"},{label:"当前状态",key:"status",formatter:o=>j.get(o)},{label:"关联用户",key:"customer",slotValue:!0},{label:"发起人员",key:"initiator"},{label:"发起部门",key:"deptName"},{label:"处理人员",key:"handlingUsers"},{label:"处理部门",key:"handlingDeptName"},{label:"通知他人",key:"otherUser"},{label:"提交时间",key:"createTime"},{label:"处理时间",key:"handlingTime"},{label:"工单内容",key:"content",class:"st-margin-top-10"}]),v=ie(),P=v.query.id,C=v.query.name,i=se({}),m=f("WorkTrend"),A=[{title:"工单动态",name:"WorkTrend"},{title:"工单详情",name:"Detail"},{title:"查看记录",name:"Views"}],q=async()=>{const o=ce({});try{const c={id:P},n=await re.getWorkOrderDetail(c);if(n.code===0){for(const _ in n.data){const y=n.data[_];switch(i[_]=n.data[_],_){case"type":i.typeText=ve.get(y);break;case"level":i.levelText=ke.get(y);break;default:break}}k.value=V(i,k.value),u.value=V(i,u.value),console.log("details:",u)}else de({type:"danger",message:n.message||"请求失败"})}finally{o==null||o.close()}},b=f(!1),O=o=>{b.value=!1;const{id:c,name:n}=i;switch(o.name){case"edit":M.push(`/list-edit/${c}/${n}`);break;case"checked":break;case"delete":he({title:"删除确认",message:"确定要删除该条记录吗？"}).then(()=>{S({message:"模拟删除成功",duration:1e3}),setTimeout(()=>{M.back()},1500)}).catch(()=>{});break;case"more":b.value=!0;break;default:S({message:"模拟操作成功",duration:1e3});break}};return le(()=>{q()}),(o,c)=>{const n=pe,_=fe,y=Pe,F=Ce,K=Be,J=xe,Y=_e,z=H;return s(),g(z,{class:"list-detail",title:t(C)},{default:r(()=>[l(_,{"column-num":3,border:!1},{default:r(()=>[(s(!0),h(w,null,x(t(k),({key:e,label:D,value:$,formatter:E})=>(s(),g(n,{key:e},{default:r(()=>[T("div",Oe,L(D),1),T("div",$e,L(E?E($):$),1)]),_:2},1024))),128))]),_:1}),l(F,{active:t(m),"onUpdate:active":c[0]||(c[0]=e=>R(m)?m.value=e:null),class:"st-margin-top-15","line-height":"0",animated:"",swipeable:""},{default:r(()=>[(s(),h(w,null,x(A,e=>l(y,{key:e.name,"title-class":"st-color-blue",title:e.title,name:e.name},{default:r(()=>[(s(),g(ue(t(Ne)[t(m)]),{data:t(u)},null,8,["data"]))]),_:2},1032,["title","name"])),64))]),_:1},8,["active"]),T("div",Ee,[l(J,{class:"van-hairline--top",placeholder:""},{default:r(()=>[(s(!0),h(w,null,x(t(d).slice(0,t(a)),e=>(s(),g(K,N({key:e.name,style:{flex:"1"}},e,{color:"#999",onClick:D=>O(e)}),null,16,["onClick"]))),128))]),_:1}),l(Y,{show:t(b),"onUpdate:show":c[1]||(c[1]=e=>R(b)?b.value=e:null),title:"更多操作",round:!1,"close-on-click-overlay":!0},{default:r(()=>[T("div",Ve,[l(_,{"column-num":t(a),border:!1,clickable:""},{default:r(()=>[(s(!0),h(w,null,x(t(d).slice(t(a)),e=>(s(),g(n,N({key:e.name},e,{"icon-color":"#999",onClick:me(D=>O(e),["stop"])}),null,16,["onClick"]))),128))]),_:1},8,["column-num"])])]),_:1},8,["show"])])]),_:1},8,["title"])}}}),Ze=be(Re,[["__scopeId","data-v-174efa98"]]);export{Ze as default};
