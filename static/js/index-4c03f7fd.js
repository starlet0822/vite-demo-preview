import{_ as G}from"./index-4f78cf3f.js";import{d as J,a as o,c as Q,o as W,O as H,g as b,q as n,_ as K,f as _,p as a,a0 as X,u as s,J as F,x as p,k as V,G as Y,v as Z,y as d,A as ee,F as te,s as oe,U as se,M as ae,P as ne}from"./index-4a1a9842.js";import{D as le,a as re,L as ie,P as ce}from"./index-aa01dd12.js";import{_ as ue}from"./index-28dbdae4.js";/* empty css              */import"./index-59b7ecd9.js";import{_ as pe}from"./index-5c79e02d.js";import{_ as me}from"./index-75079144.js";import{g as _e}from"./dict-ce3ac239.js";import{_ as de}from"./plugin-vue_export-helper-c27b6911.js";import{S as fe}from"./index-cb74dae9.js";import"./index-d9f0e8c9.js";import"./use-placeholder-9d7764e4.js";import"./use-route-4a788c49.js";import"./use-id-c0fc632f.js";import"./index-13b99f4f.js";import"./index-72d2bc0a.js";import"./use-sync-prop-ref-442228e0.js";import"./index-9f5c4f57.js";import"./utils-65057151.js";import"./index-2264b9e7.js";const ve={class:"list-wrapper"},ge={class:"item-name"},he={class:"item-time"},ye={class:"item-user"},ke=J({name:"work-order"}),we=Object.assign(ke,{setup(xe){se(),o(null);const m=o(1),L=o(20),y=o(0),l=o([]),i=o(!0),f=o(!1),c=o(!1),M=Q(()=>l.value.length?"没有更多了":""),k=o(null),v=o({order:"asc",prop:"createTime"}),w=(r,t)=>{var u;console.log("query:",r),v.value={...v.value,...r},(u=k.value)==null||u.close(),x()},g=async()=>{try{c.value&&(l.value=[],c.value=!1);const r={pageNo:m.value,pageSize:L.value,...v.value},t=await K.getWorkOrderList(r);if(t.code===0){m.value+=1;const{rows:u,total:h}=t.data??{};y.value=h,l.value=m.value===1?u:l.value.concat(u),l.value.length>=y.value&&(f.value=!0)}}catch(r){console.error("捕获异常",r)}finally{i.value=!1}},x=()=>{c.value=!0,f.value=!1,i.value=!0,m.value=1,g()},N=()=>{};W(()=>{g()});const C=new Map([["-1","全部"],["0","处理中"],["1","已完结"],["2","被退回"]]),B=new Map([["0","#2e6cf3"],["1","#ff0000"],["2","#05a081"]]),D=document.querySelector(".todo-list"),I=[{type:"CellField",title:"排序方式",value:"asc",name:"order",attrs:{options:[{label:"升序排序",value:"asc"},{label:"倒序排序",value:"desc"}]}},{type:"CellField",title:"排序字段",value:"createTime",name:"prop",attrs:{options:[{label:"发起时间",value:"createTime"},{label:"工单名称",value:"name"}]}}],T=H("2003-10-08 08:43").isBefore("2003-10-08 08:43","m");console.log("flag:",T);const z=[{type:"InputField",title:"关键词查询",value:"",name:"name",attrs:{placeholder:"输入搜索关键词"}},{type:"RadioField",title:"工单状态",value:"-1",name:"status",attrs:{options:_e(C)}}];return(r,t)=>{const u=ne,h=me,R=pe,S=le,O=re,U=fe,P=ie,j=ue,q=ce,$=G,A=ae("waves");return _(),b($,{class:"work-order-list",title:"工单管理"},{header:n(()=>[a(h,{border:"",fixed:!1,title:"工单管理"},X({_:2},[void 0]),1024)]),default:n(()=>[a(U,{"offset-top":0,"z-index":999},{default:n(()=>[a(O,{ref_key:"menuRef",ref:k,"close-on-click-outside":!1,"close-on-click-overlay":!1,onClosed:N},{default:n(()=>[a(S,{title:"排序"},{default:n(()=>[a(R,{"form-items":I,onConfirm:t[1]||(t[1]=e=>w(e,"sort"))})]),_:1}),a(S,{ref:"filterRef",title:"筛选",teleport:s(D)},{default:n(()=>[a(R,{"form-items":z,onConfirm:t[2]||(t[2]=e=>w(e,"filter"))})]),_:1},8,["teleport"])]),_:1},512)]),_:1}),a(q,{modelValue:s(c),"onUpdate:modelValue":t[4]||(t[4]=e=>F(c)?c.value=e:null),onRefresh:x},{default:n(()=>[a(P,{loading:s(i),"onUpdate:loading":t[3]||(t[3]=e=>F(i)?i.value=e:null),"immediate-check":!1,finished:s(f),"finished-text":s(M),onLoad:g},{default:n(()=>[p("ul",ve,[(_(!0),V(te,null,Y(s(l),(e,E)=>Z((_(),V("li",{key:e.name+E,class:"list-item"},[p("div",null,[p("p",ge,d(e.name),1),p("p",he,"发起时间："+d(e.createTime),1),p("p",ye,"处理人员："+d(e.handlingUsers),1)]),p("div",{class:"item-status",style:ee({color:s(B).get(e.status)})},d(s(C).get(e.status)),5)])),[[A]])),128))])]),_:1},8,["loading","finished","finished-text"]),!s(l).length&&!s(i)?(_(),b(j,{key:0})):oe("",!0)]),_:1},8,["modelValue"])]),_:1})}}}),Ee=de(we,[["__scopeId","data-v-f794327c"]]);export{Ee as default};
