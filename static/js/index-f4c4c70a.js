import{_ as de}from"./index-03d2b5ec.js";import{Z as me,d as G,a as b,cv as fe,c as Y,c5 as _e,aq as ge,cw as he,p as i,av as q,$ as ee,cF as te,cy as oe,cx as ve,cG as pe,cH as be,cr as ke,ax as ye,a3 as we,r as le,cI as N,cJ as re,cK as ie,t as ce,E as L,f as K,k as Se,x as k,y as ne,u as m,q as T,J as P,z as Ce,ah as Ve,g as ae,Q as xe,s as B,v as ze,I as Be,ae as Te,a6 as Pe,co as Ne,a7 as $e,az as se,cL as Ae,W as Ee,M as Fe,S as Ie,al as mt,am as ft}from"./index-5560da19.js";import{A as Me}from"./index-ac0fff36.js";import{C as Le}from"./index-462a24ae.js";import{F as Re}from"./index-ef67e059.js";import{o as Ue,S as De}from"./style-2d69cb93.js";import{_ as ue}from"./plugin-vue_export-helper-c27b6911.js";import{p as je}from"./index-5e3aa364.js";import{B as He}from"./index-e0efa64a.js";import"./index-0e6beb51.js";import"./use-placeholder-87cf9818.js";import"./use-route-23f883a9.js";import"./use-id-e390e938.js";import"./popper-f3391c26.js";const[Je,F]=me("slider"),Oe={min:q(0),max:q(100),step:q(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:ee,buttonSize:ee,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}};var Xe=G({name:Je,props:Oe,emits:["change","dragEnd","dragStart","update:modelValue"],setup(t,{emit:y,slots:h}){let l,u,f;const w=b(),_=[b(),b()],d=b(),C=fe(),v=Y(()=>Number(t.max)-Number(t.min)),c=Y(()=>{const e=t.vertical?"width":"height";return{background:t.inactiveColor,[e]:_e(t.barHeight)}}),p=e=>t.range&&Array.isArray(e),R=()=>{const{modelValue:e,min:n}=t;return p(e)?`${(e[1]-e[0])*100/v.value}%`:`${(e-Number(n))*100/v.value}%`},U=()=>{const{modelValue:e,min:n}=t;return p(e)?`${(e[0]-Number(n))*100/v.value}%`:"0%"},D=Y(()=>{const n={[t.vertical?"height":"width"]:R(),background:t.activeColor};d.value&&(n.transition="none");const o=()=>t.vertical?t.reverse?"bottom":"top":t.reverse?"right":"left";return n[o()]=U(),n}),$=e=>{const n=+t.min,o=+t.max,a=+t.step;e=ye(e,n,o);const s=Math.round((e-n)/a)*a;return be(n,s)},j=()=>{const e=t.modelValue;p(e)?f=e.map($):f=$(e)},x=e=>{var n,o;const a=(n=e[0])!=null?n:Number(t.min),s=(o=e[1])!=null?o:Number(t.max);return a>s?[s,a]:[a,s]},S=(e,n)=>{p(e)?e=x(e).map($):e=$(e),te(e,t.modelValue)||y("update:modelValue",e),n&&!te(e,f)&&y("change",e)},Q=e=>{if(e.stopPropagation(),t.disabled||t.readonly)return;j();const{min:n,reverse:o,vertical:a,modelValue:s}=t,r=oe(w),E=()=>a?o?r.bottom-e.clientY:e.clientY-r.top:o?r.right-e.clientX:e.clientX-r.left,O=a?r.height:r.width,z=Number(n)+E()/O*v.value;if(p(s)){const[I,M]=s,X=(I+M)/2;z<=X?S([z,M],!0):S([I,z],!0)}else S(z,!0)},W=e=>{t.disabled||t.readonly||(C.start(e),u=t.modelValue,j(),d.value="start")},H=e=>{if(t.disabled||t.readonly)return;d.value==="start"&&y("dragStart",e),ve(e,!0),C.move(e),d.value="dragging";const n=oe(w),o=t.vertical?C.deltaY.value:C.deltaX.value,a=t.vertical?n.height:n.width;let s=o/a*v.value;if(t.reverse&&(s=-s),p(f)){const r=t.reverse?1-l:l;u[r]=f[r]+s}else u=f+s;S(u)},J=e=>{t.disabled||t.readonly||(d.value==="dragging"&&(S(u,!0),y("dragEnd",e)),d.value="")},Z=e=>typeof e=="number"?F("button-wrapper",["left","right"][e]):F("button-wrapper",t.reverse?"left":"right"),V=(e,n)=>{const o=d.value==="dragging";if(typeof n=="number"){const a=h[n===0?"left-button":"right-button"];let s;if(o&&Array.isArray(u)&&(s=u[0]>u[1]?l^1:l),a)return a({value:e,dragging:o,dragIndex:s})}return h.button?h.button({value:e,dragging:o}):i("div",{class:F("button"),style:ke(t.buttonSize)},null)},A=e=>{const n=typeof e=="number"?t.modelValue[e]:t.modelValue;return i("div",{ref:_[e??0],role:"slider",class:Z(e),tabindex:t.disabled?void 0:0,"aria-valuemin":t.min,"aria-valuenow":n,"aria-valuemax":t.max,"aria-disabled":t.disabled||void 0,"aria-readonly":t.readonly||void 0,"aria-orientation":t.vertical?"vertical":"horizontal",onTouchstartPassive:o=>{typeof e=="number"&&(l=e),W(o)},onTouchend:J,onTouchcancel:J,onClick:pe},[V(n,e)])};return S(t.modelValue),ge(()=>t.modelValue),_.forEach(e=>{he("touchmove",H,{target:e})}),()=>i("div",{ref:w,style:c.value,class:F({vertical:t.vertical,disabled:t.disabled}),onClick:Q},[i("div",{class:F("bar"),style:D.value},[t.range?[A(0),A(1)]:A()])])}});const Ye=we(Xe);const qe={class:"picker-fontSize-wrapper"},Ke={class:"setting-box st-bg-white"},Ge={class:Ce(["st-flex-center"])},Qe={class:"slider"},We={class:"custom-button"},Ze=G({name:"PickerFontSize"}),et=Object.assign(Ze,{emits:["change"],setup(t,{emit:y}){const h=le({fontSize:+N.get("fontSize")||re,fontTypes:ie}),{fontSize:l,fontTypes:u}=ce(h),f=L("setSize"),w=_=>{console.log(_),N.set("fontSize",_),localStorage.setItem("fontSize",_),f(_+"px"),y("change",_)};return(_,d)=>{const C=Ye;return K(),Se("div",qe,[k("div",Ke,[k("div",Ge,ne(m(u).get(+m(l))),1),k("div",Qe,[i(C,{modelValue:m(l),"onUpdate:modelValue":d[0]||(d[0]=v=>P(l)?l.value=v:null),max:16,min:12,step:2,onChange:w},{button:T(()=>[k("div",We,ne(m(l)),1)]),_:1},8,["modelValue"])])])])}}}),tt=ue(et,[["__scopeId","data-v-7c9c5aae"]]);const ot={class:"content"},nt={class:"st-margin-top-10"};const at={class:"st-margin-top-10"},st={class:"st-margin-top-10"},lt={class:"st-flex-center st-margin-top-15"},rt={class:"color-wrapper"},it=G({name:"Setting"}),ct=Object.assign(it,{setup(t){Te(o=>({cfa9ae0e:m(l)}));const y=L("setThemeColor");L("themeColor");const h=b(!1),l=b(N.get("themeColor")||Ve),u=o=>{console.log("主题色",o),y(o)};Pe();const f=xe(),w=Ne(),_=L("setTheme"),d=b(N.get("darkMode")==="dark"),C=o=>{_(o?"dark":"light"),d.value=o,N.set("darkMode",o?"dark":"light")},v="//cdn.jsdelivr.net/npm/eruda";let c=[...document.scripts].find(o=>o.src===v);const p=b(window.activeEruda),R=async o=>{U(o)},U=o=>{const a={defaults:{theme:o?"Dark":"Light"}};o?(console.log("开启eruda",c),c?(console.log("存在eruda脚本时，直接初始化eruda"),eruda.init(a)):(console.log("不存在eruda脚本时，需要创建标签"),$e("初始化中"),new Promise((s,r)=>{c=document.createElement("script"),c.type="text/javascript",c.onload=function(){eruda.init(a),window.activeEruda=!0,s(""),se()},c.onerror=function(E){r(E),se()},c.src=v,document.head.appendChild(c)}))):(console.log("关闭eruda",c),c&&c.remove(),window.eruda&&(eruda==null||eruda.destroy()))},D=le({title:f.currentRoute.value.meta.title,screenLock:!1,showFontSize:!1,fontSize:N.get("fontSize")||re,fontTypes:ie}),{title:$,screenLock:j,showFontSize:x,fontSize:S,fontTypes:Q}=ce(D);b(!1);const W=()=>{x.value=!0},H=o=>{S.value=o},J=()=>{Ie({message:"敬请期待~"})},Z=()=>{h.value=!0},V=b(!1),A=[{name:"退出登录",color:"#ee0a24"}],e=async o=>{console.log("item:",o),V.value=!1,await n()},n=async()=>{await w.dispatch("logout"),await w.dispatch("cacheViews/clearView"),await f.replace("/login"),Ae.emit("resetPageStack")};return(o,a)=>{const s=Le,r=Ee,E=De,O=Re,z=He,I=Me,M=de,X=Fe("waves");return K(),ae(M,{class:"page-wrapper",title:"我的设置"},{default:T(()=>[k("div",ot,[k("div",nt,[i(s,{center:"","is-link":"",title:"个人资料",to:"/edit-baseinfo"}),B("",!0),i(r,{show:m(x),"onUpdate:show":a[0]||(a[0]=g=>P(x)?x.value=g:null),position:"bottom","z-index":9999,closeable:!1},{default:T(()=>[i(tt,{onChange:H})]),_:1},8,["show"]),B("",!0),B("",!0),B("",!0),i(O,{name:"eruda",label:"eruda调试","input-align":"right",center:""},{input:T(()=>[i(E,{modelValue:m(p),"onUpdate:modelValue":a[2]||(a[2]=g=>P(p)?p.value=g:null),size:m(je)(18),onChange:R},null,8,["modelValue","size"])]),_:1})]),k("div",at,[i(s,{center:"",title:"导航栏设置","is-link":"",to:"/setting-tabbar"}),B("",!0)]),k("div",st,[B("",!0)]),k("div",lt,[ze((K(),ae(z,{block:"",style:{width:"80%"},type:"primary",onClick:a[3]||(a[3]=g=>V.value=!0)},{default:T(()=>[Be(" 退出登录 ")]),_:1})),[[X]])])]),i(I,{show:m(V),"onUpdate:show":a[4]||(a[4]=g=>P(V)?V.value=g:null),actions:A,"cancel-text":"取消",description:"确定要退出当前账号？","close-on-click-overlay":!1,onSelect:e},null,8,["show"]),i(r,{show:m(h),"onUpdate:show":a[6]||(a[6]=g=>P(h)?h.value=g:null)},{default:T(()=>[k("div",rt,[i(m(Ue),{pureColor:m(l),"onUpdate:pureColor":a[5]||(a[5]=g=>P(l)?l.value=g:null),"is-widget":!0,"disable-alpha":"",format:"hex","picker-type":"chrome","use-type":"pure",onPureColorChange:u},null,8,["pureColor"])])]),_:1},8,["show"])]),_:1})}}}),xt=ue(ct,[["__scopeId","data-v-260cf050"]]);export{xt as default};
