import{f as N,k as S,F as ne,G as ue,p as a,x as L,y as ie,U as I,aa as O,c as E,a as c,r as U,o as M,Z as W,b as z,q as f,u as l,s as _,J as b,I as A,ae as G,W as J,_ as Z,$ as j}from"./index-9dbeec4c.js";/* empty css              */import{P as H}from"./index-4f3dc014.js";import"./index-9ed074f4.js";import{F as K}from"./index-69c1563e.js";import"./calendar-2a6ff73f.js";import{_ as Q}from"./plugin-vue_export-helper-c27b6911.js";import{I as ke}from"./index-c811d812.js";import{o as w,l as x}from"./dict-ce3ac239.js";import{B as X}from"./index-0d39f338.js";import{F as Y}from"./index-319534d5.js";const ee={class:"form-wrapper"};const oe={class:"footer-action"},te={__name:"OrderDetail",props:{id:String,title:String},setup(se){const v=I(),g=O();E(()=>{var o;return(o=g.meta)==null?void 0:o.title});const m=c([]);let d="";const u=c(!1),p=c([]),k=[],y=[];for(const[o,e]of w.entries())y.push({value:o,text:e});for(const[o,e]of x.entries())k.push({value:o,text:e});const q=c(),r=U({customer:"",type:"",typeText:"",name:"",content:"",level:"",handlingUsers:"",noticUsers:[]}),i={customer:[{required:!0,message:"请选择关联客户"}],type:[{required:!0,message:"请选择工单类型"}],name:[{required:!0,message:"请填写工单标题"}],level:[{required:!0,message:"请选择紧急状态"}],handlingUsers:[{required:!0,message:"请选择处理人员"}],noticUsers:[{required:!0,message:"请选择通知人员"}]},le=U([]),re=()=>{v.push("/common/picker-user")},B=async o=>{console.log("submit",o),await G({message:"模拟保存成功",duration:1e3}),setTimeout(()=>{v.back()},1500)},$=o=>{console.log("failed",o);const[e]=o.errors;J({message:e.message})},V=o=>{d=o,o==="type"&&(p.value=y),o==="level"&&(p.value=k),u.value=!0},R=({selectedOptions:o})=>{var e,s;console.log(d,o,(e=o[0])==null?void 0:e.value),r[d]=(s=o[0])==null?void 0:s.text,h()},h=()=>{u.value=!1},C=o=>o,F=async()=>{const{code:o,data:e}=await Z.getWorkOrderDetail({id:g.params.id});if(o===0)for(const s in e){let n=e[s];s==="type"&&(n=w.get(n)),s==="level"&&(n=x.get(n)),r[s]=n}};return M(()=>{F(),W.on("select-users",o=>{console.log("users:",o)})}),z(()=>{}),(o,e)=>{const s=K,n=X,P=Y,T=H,D=j;return N(),S("div",ee,[a(P,{ref_key:"formRef",ref:q,"label-align":"left","input-align":"right",autocomplete:"false","show-error":!1,center:"","show-error-message":!1,"scroll-to-error":!1,onSubmit:B,onFailed:$},{default:f(()=>[_("",!0),a(s,{modelValue:l(r).type,"onUpdate:modelValue":e[1]||(e[1]=t=>l(r).type=t),name:"type",label:"工单类型",placeholder:"点击选择","is-link":"",required:"",readonly:!0,formatter:C,rules:i.type,onClick:e[2]||(e[2]=t=>V("type"))},null,8,["modelValue","rules"]),a(s,{modelValue:l(r).name,"onUpdate:modelValue":e[3]||(e[3]=t=>l(r).name=t),name:"name",label:"工单标题",placeholder:"点击填写",required:"",rules:i.name},null,8,["modelValue","rules"]),a(s,{modelValue:l(r).content,"onUpdate:modelValue":e[4]||(e[4]=t=>l(r).content=t),type:"textarea",rows:"3",autosize:"","show-word-limit":"",maxlength:"200",name:"content","label-align":"top","input-align":"left",label:"工单内容",placeholder:"请输入工单内容",rules:i.content},null,8,["modelValue","rules"]),a(s,{modelValue:l(r).level,"onUpdate:modelValue":e[5]||(e[5]=t=>l(r).level=t),class:"st-margin-top-15",name:"level",label:"紧急状态",placeholder:"点击选择","is-link":"",required:"",readonly:"",rules:i.level,onClick:e[6]||(e[6]=t=>V("level"))},null,8,["modelValue","rules"]),_("",!0),_("",!0),L("div",oe,[a(n,{round:"",block:"",type:"primary","native-type":"submit"},{default:f(()=>[A("提交")]),_:1})])]),_:1},512),a(D,{show:l(u),"onUpdate:show":e[10]||(e[10]=t=>b(u)?u.value=t:null),position:"bottom","close-on-click-overlay":!0},{default:f(()=>[a(T,{ref:"pickerRef",modelValue:l(m),"onUpdate:modelValue":e[9]||(e[9]=t=>b(m)?m.value=t:null),class:"picker","show-toolbar":"",columns:l(p),onConfirm:R,onCancel:h},null,8,["modelValue","columns"])]),_:1},8,["show"])])}}},Ue=Q(te,[["__scopeId","data-v-af3d2d14"]]);export{Ue as O};
