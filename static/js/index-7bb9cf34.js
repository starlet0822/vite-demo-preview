import{d as k,c as I,u as r,f as i,k as p,x as e,p as h,F as $,G as x,y as b,g as B,P as S,Q as V,R as N,a as g,J as O,U as R}from"./index-96f987ab.js";import"./index-caaea2a8.js";import"./index-4da2c942.js";import{S as W}from"./index-d9279171.js";import{_ as H}from"./index-fc1fc2c9.js";import{_ as C}from"./plugin-vue_export-helper-c27b6911.js";import{a as J}from"./function-call-7909658f.js";import"./use-route-a106f139.js";import"./use-id-d2a1ebc6.js";import"./index-a234e89c.js";import"./use-placeholder-9429c211.js";const w=c=>(V("data-v-ae3be9fc"),c=c(),N(),c),L={key:0,class:"history-words"},j={class:"history-header"},D=w(()=>e("div",{class:"title"},"搜索历史",-1)),F={class:"actions"},U={class:"word-list"},A=["onClick"],E={class:"ellipsis"},G=k({name:"HistoryWord"}),M=Object.assign(G,{props:{historys:{type:Array,default:()=>[]}},emits:["select","remove"],setup(c,{emit:l}){const m=c,o=I(()=>m.historys),a=()=>{J({title:"温馨提示",message:"确定删除全部历史记录吗？"}).then(()=>{l("remove")}).catch(()=>{})},u=_=>{l("select",_)};return(_,y)=>{const d=S,t=H;return r(o)&&r(o).length?(i(),p("section",L,[e("div",j,[D,e("div",F,[h(d,{class:"delete-icon",name:"delete-o",onClick:a})])]),e("ul",U,[(i(!0),p($,null,x(r(o),s=>(i(),p("li",{key:s,class:"word-item",onClick:n=>u(s)},[e("div",E,b(s),1)],8,A))),128))])])):(i(),B(t,{key:1,description:"暂无搜索历史"}))}}}),P=C(M,[["__scopeId","data-v-ae3be9fc"]]);const Q={class:"search-page"},T={class:"search__header"},q={class:"search__wrap van-hairline--bottom"},z={class:"search__input"},K={class:"search__content"},X=k({name:"search"}),Y=Object.assign(X,{setup(c){const l=R(),m=JSON.parse(localStorage.getItem("search_history_list"))||[],o=g(m),a=g(""),u=()=>{l.back()},_=t=>{d(t)},y=()=>{o.value=[],localStorage.removeItem("search_history_list")},d=t=>{a.value=t;let s=[];const n=localStorage.getItem("search_history_list");if(console.log("history:",n),n){s=[...JSON.parse(n)];const v=s.includes(t);s.unshift(t),v&&(s=[...new Set(s)])}else s=[t];o.value=s.filter(Boolean),localStorage.setItem("search_history_list",JSON.stringify(o.value))};return(t,s)=>{const n=S,v=W;return i(),p("div",Q,[e("div",T,[e("div",q,[e("div",{class:"search__left",onClick:s[0]||(s[0]=f=>u())},[h(n,{class:"back-icon",name:"arrow-left",color:"#1989fa"})]),e("div",z,[h(v,{modelValue:r(a),"onUpdate:modelValue":s[1]||(s[1]=f=>O(a)?a.value=f:null),modelModifiers:{trim:!0},autofocus:"",shape:"round",placeholder:"请输入搜索关键词"},null,8,["modelValue"])]),e("div",{class:"search__right",onClick:s[2]||(s[2]=f=>_(r(a)))},"搜索")])]),e("div",K,[h(P,{historys:r(o),onSelect:d,onRemove:y},null,8,["historys"])])])}}}),_s=C(Y,[["__scopeId","data-v-37890d98"]]);export{_s as default};
