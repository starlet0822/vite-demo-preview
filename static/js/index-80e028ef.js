import{a4 as Ni}from"./index-2d318566.js";var ot=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},na=function(r,t){if(!ot(r))return r;for(var e=[],a=0;a<r.length;a++){var i=r[a];t(i,a)&&e.push(i)}return e},Fi={}.toString,Pt=function(r,t){return Fi.call(r)==="[object "+t+"]"};const k=function(r){return Pt(r,"Function")};var M=function(r){return r==null};const T=function(r){return Array.isArray?Array.isArray(r):Pt(r,"Array")},X=function(r){var t=typeof r;return r!==null&&t==="object"||t==="function"};function x(r,t){if(r){var e;if(T(r))for(var a=0,i=r.length;a<i&&(e=t(r[a],a),e!==!1);a++);else if(X(r)){for(var n in r)if(r.hasOwnProperty(n)&&(e=t(r[n],n),e===!1))break}}}var Li=Object.keys?function(r){return Object.keys(r)}:function(r){var t=[];return x(r,function(e,a){k(r)&&a==="prototype"||t.push(a)}),t};function Bi(r,t){var e=Li(t),a=e.length;if(M(r))return!a;for(var i=0;i<a;i+=1){var n=e[i];if(t[n]!==r[n]||!(n in r))return!1}return!0}var Ye=function(r){return typeof r=="object"&&r!==null},It=function(r){if(!Ye(r)||!Pt(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var t=r;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(r)===t};function Ri(r,t){if(!T(r))return null;var e;if(k(t)&&(e=t),It(t)&&(e=function(i){return Bi(i,t)}),e){for(var a=0;a<r.length;a+=1)if(e(r[a]))return r[a]}return null}const zi=function(r){if(T(r))return r.reduce(function(t,e){return Math.max(t,e)},r[0])},Gi=function(r){if(T(r))return r.reduce(function(t,e){return Math.min(t,e)},r[0])};var Xi=function(r){var t=r.filter(function(s){return!isNaN(s)});if(!t.length)return{min:0,max:0};if(T(r[0])){for(var e=[],a=0;a<r.length;a++)e=e.concat(r[a]);t=e}var i=zi(t),n=Gi(t);return{min:n,max:i}};const N=function(r){return Pt(r,"String")};function sa(r,t){t===void 0&&(t=new Map);var e=[];if(Array.isArray(r))for(var a=0,i=r.length;a<i;a++){var n=r[a];t.has(n)||(e.push(n),t.set(n,!0))}return e}function ct(r){if(ot(r))return r[0]}function K(r){if(ot(r)){var t=r;return t[t.length-1]}}var Pe=function(r,t){var e=t.toString(),a=e.indexOf(".");if(a===-1)return Math.round(r);var i=e.substr(a+1).length;return i>20&&(i=20),parseFloat(r.toFixed(i))},R=function(r){return Pt(r,"Number")},Hi=Object.values?function(r){return Object.values(r)}:function(r){var t=[];return x(r,function(e,a){k(r)&&a==="prototype"||t.push(e)}),t};const oa=function(r){return M(r)?"":r.toString()};var la=function(r){var t=oa(r);return t.charAt(0).toLowerCase()+t.substring(1)};function st(r,t){return!r||!t?r:r.replace(/\\?\{([^{}]+)\}/g,function(e,a){return e.charAt(0)==="\\"?e.slice(1):t[a]===void 0?"":t[a]})}var lt=function(r){var t=oa(r);return t.charAt(0).toUpperCase()+t.substring(1)},$i={}.toString,Vi=function(r){return $i.call(r).replace(/^\[object /,"").replace(/]$/,"")},ha=function(r){return Pt(r,"Boolean")},pe=function(r){return Pt(r,"Date")},ji=Object.prototype,Wi=function(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||ji;return r===e};function Ce(r,t){for(var e in t)t.hasOwnProperty(e)&&e!=="constructor"&&t[e]!==void 0&&(r[e]=t[e])}function y(r,t,e,a){return t&&Ce(r,t),e&&Ce(r,e),a&&Ce(r,a),r}const qi=function(r,t){if(!k(r))throw new TypeError("Expected a function");var e=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var n=t?t.apply(this,a):a[0],s=e.cache;if(s.has(n))return s.get(n);var o=r.apply(this,a);return s.set(n,o),o};return e.cache=new Map,e};var Ui=5;function fa(r,t,e,a){e=e||0,a=a||Ui;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n!==null&&It(n)?(It(r[i])||(r[i]={}),e<a?fa(r[i],n,e+1,a):r[i]=t[i]):T(n)?(r[i]=[],r[i]=r[i].concat(n)):n!==void 0&&(r[i]=n)}}var F=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var a=0;a<t.length;a+=1)fa(r,t[a]);return r},ua=function(r,t){if(!ot(r))return-1;var e=Array.prototype.indexOf;if(e)return e.call(r,t);for(var a=-1,i=0;i<r.length;i++)if(r[i]===t){a=i;break}return a},Zi=Object.prototype.hasOwnProperty;function Ji(r){if(M(r))return!0;if(ot(r))return!r.length;var t=Vi(r);if(t==="Map"||t==="Set")return!r.size;if(Wi(r))return!Object.keys(r).length;for(var e in r)if(Zi.call(r,e))return!1;return!0}var Ne=function(r,t){if(r===t)return!0;if(!r||!t||N(r)||N(t))return!1;if(ot(r)||ot(t)){if(r.length!==t.length)return!1;for(var e=!0,a=0;a<r.length&&(e=Ne(r[a],t[a]),!!e);a++);return e}if(Ye(r)||Ye(t)){var i=Object.keys(r),n=Object.keys(t);if(i.length!==n.length)return!1;for(var e=!0,a=0;a<i.length&&(e=Ne(r[i[a]],t[i[a]]),!!e);a++);return e}return!1},Ki=function(r,t){if(!ot(r))return r;for(var e=[],a=0;a<r.length;a++){var i=r[a];e.push(t(i,a))}return e};function va(r){return M(r)?0:ot(r)?r.length:Object.keys(r).length}var Fe=function(r,t){return Fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])},Fe(r,t)};function at(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Fe(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Le=function(){return Le=Object.assign||function(t){for(var e,a=1,i=arguments.length;a<i;a++){e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},Le.apply(this,arguments)};function ca(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var a=Array(r),i=0,t=0;t<e;t++)for(var n=arguments[t],s=0,o=n.length;s<o;s++,i++)a[i]=n[s];return a}var Zt;qi(function(r,t){t===void 0&&(t={});var e=t.fontSize,a=t.fontFamily,i=t.fontWeight,n=t.fontStyle,s=t.fontVariant;return Zt||(Zt=document.createElement("canvas").getContext("2d")),Zt.font=[n,s,i,e+"px",a].join(" "),Zt.measureText(N(r)?r:"").width},function(r,t){return t===void 0&&(t={}),ca([r],Hi(t)).join("")});function ga(r){for(var t=[],e=0,a=r.length;e<a;e++)t=t.concat(r[e]);return t}function da(r,t){for(var e=[],a={},i=0,n=r.length;i<n;i++){var s=r[i],o=s[t];M(o)||(T(o)?x(o,function(l){a[l]||(e.push(l),a[l]=!0)}):a[o]||(e.push(o),a[o]=!0))}return e}function Be(r,t){for(var e=null,a=0,i=r.length;a<i;a++){var n=r[a],s=n[t];if(!M(s)){T(s)?e=s[0]:e=s;break}}return e}function pa(r,t){if(!t)return{0:r};for(var e=function(f){for(var h="_",u=0,v=t.length;u<v;u++)h+=f[t[u]]&&f[t[u]].toString();return h},a={},i=0,n=r.length;i<n;i++){var s=r[i],o=e(s);a[o]?a[o].push(s):a[o]=[s]}return a}function ma(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return[r];var a=pa(r,t),i=[];if(t.length===1&&e[t[0]]){var n=e[t[0]];x(n,function(o){o="_"+o,i.push(a[o])})}else for(var s in a)i.push(a[s]);return i}function me(r,t){if(r){var e=r.indexOf(t);e!==-1&&r.splice(e,1)}}function Je(r){if(!r.length)return{min:0,max:0};var t=Math.max.apply(null,r),e=Math.min.apply(null,r);return{min:e,max:t}}const Qi=Object.freeze(Object.defineProperty({__proto__:null,firstValue:Be,getRange:Je,group:ma,groupToMap:pa,merge:ga,remove:me,values:da},Symbol.toStringTag,{value:"Module"}));var tn=function(){var r=!1;try{var t=Object.defineProperty({},"passive",{get(){r=!0}});window.addEventListener("e",null,t)}catch{}return r}(),ya=tn?{passive:!0}:!1,en=typeof wx=="object"&&typeof wx.getSystemInfoSync=="function",rn=typeof my=="object"&&typeof my.getSystemInfoSync=="function",an=!1,nn=typeof window<"u"&&typeof window.document<"u"&&typeof window.sessionStorage<"u";function xa(r){return!r||typeof r!="object"?!1:r.nodeType===1&&r.nodeName?!0:!!r.isCanvasElement}function _a(){return window&&window.devicePixelRatio||1}function qt(r,t){return r.currentStyle?r.currentStyle[t]:document.defaultView.getComputedStyle(r,null).getPropertyValue(t)}function Ke(r){var t=qt(r,"width");return t==="auto"&&(t=r.offsetWidth),parseFloat(t)}function Qe(r){var t=qt(r,"height");return t==="auto"&&(t=r.offsetHeight),parseFloat(t)}function Sa(r){return r?document.getElementById(r):null}function Re(r,t){var e=t.get("el");if(!e)return r;var{top:a,left:i}=e.getBoundingClientRect(),n=parseFloat(qt(e,"padding-left")),s=parseFloat(qt(e,"padding-top")),o=r.x-i-n,l=r.y-a-s;return{x:o,y:l}}function Ma(r,t,e){r.addEventListener(t,e,ya)}function Pa(r,t,e){r.removeEventListener(t,e,ya)}function gr(r,t){var e=t.get("landscape");if(!e)return r;if(k(e))return e(r,t);var a=t.get("height"),i=r.y,n=a-r.x;return{x:i,y:n}}function At(r,t){var e=r.touches;if(!e){var a=Re({x:r.clientX,y:r.clientY},t);return[gr(a,t)]}e.length||(e=r.changedTouches||[]);for(var i=[],n=0,s=e.length;n<s;n++){var o=e[n],{x:l,y:f,clientX:h,clientY:u}=o,v=void 0;R(l)||R(f)?v={x:l,y:f}:v=Re({x:h,y:u},t),i.push(gr(v,t))}return i}function tr(r,t){var e=t.get("canvas"),a=At(r,e),i=a[0]||{};return{type:r.type,chart:t,native:r,x:i.x,y:i.y}}function ze(r,t,e){return e||(e=document.createElement("canvas").getContext("2d")),e.font=t||"12px sans-serif",e.measureText(r)}function sn(r,t){r=Object.assign({},r),t=Object.assign({},t);var e=Object.getOwnPropertyNames(r),a=Object.getOwnPropertyNames(t);if(e.length!==a.length)return!1;for(var i=0,n=e.length;i<n;i++){var s=e[i];if(r[s]!==t[s])return!1}return!0}function V(r){var t,e,a,i;return R(r)||N(r)?t=a=i=e=r:T(r)&&(t=r[0],e=M(r[1])?r[0]:r[1],a=M(r[2])?r[0]:r[2],i=M(r[3])?e:r[3]),[t,e,a,i]}function le(r,t){return r===void 0?!0:typeof r=="string"?r.indexOf(t)!==-1:!1}function Ht(r){return N(r)&&(r.indexOf("T")>0?r=new Date(r).getTime():r=new Date(r.replace(/-/gi,"/")).getTime()),pe(r)&&(r=r.getTime()),r}const on=Object.freeze(Object.defineProperty({__proto__:null,Array:Qi,addEventListener:Ma,convertPoints:At,createEvent:tr,deepMix:F,directionEnabled:le,each:x,find:Ri,getDomById:Sa,getHeight:Qe,getPixelRatio:_a,getRelativePosition:Re,getStyle:qt,getWidth:Ke,isArray:T,isBoolean:ha,isBrowser:nn,isCanvasElement:xa,isDate:pe,isEqual:Ne,isFunction:k,isMy:rn,isNil:M,isNode:an,isNumber:R,isObject:X,isObjectValueEqual:sn,isPlainObject:It,isString:N,isWx:en,lowerFirst:la,measureText:ze,mix:y,parsePadding:V,removeEventListener:Pa,substitute:st,toTimeStamp:Ht,uniq:sa,upperFirst:lt},Symbol.toStringTag,{value:"Module"}));var dr="#E8E8E8",ln="#808080",pt={label:{fill:ln,fontSize:10},line:{stroke:dr,lineWidth:1},grid:{type:"line",stroke:dr,lineWidth:1,lineDash:[2]},tickLine:null,labelOffset:7.5},hn={fontFamily:'"Helvetica Neue", "San Francisco", Helvetica, Tahoma, Arial, "PingFang SC", "Hiragino Sans GB", "Heiti SC", "Microsoft YaHei", sans-serif',defaultColor:"#1890FF",pixelRatio:1,padding:"auto",appendPadding:15,colors:["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],shapes:{line:["line","dash"],point:["circle","hollowCircle"]},sizes:[4,10],axis:{common:pt,bottom:y({},pt,{grid:null}),left:y({},pt,{line:null}),right:y({},pt,{line:null}),circle:y({},pt,{line:null}),radius:y({},pt,{labelOffset:4})},shape:{line:{lineWidth:2,lineJoin:"round",lineCap:"round"},point:{lineWidth:0,size:3},area:{fillOpacity:.1}},_defaultAxis:pt};const rt={general:{title:"这是一个图表，",withTitle:"这是一个关于“{title}”的图表。"},coord:{cartesian:"X轴是{xLabel}Y轴是{yLabel}"},scale:{linear:"数值型，数据最小值为{min}，最大值为{max}；",cat:"分类型, 分类类型有：{values}；",timeCat:"时间型，时间范围从{start}到{end}；"},geometry:{prefix:"共有{count}种分类组成，",oneData:"第{index}类是{name}，数据是{values};",partData:"第{index}类是{name}，共有{count}项数据，前{part}项是{values};",allData:"第{index}类是{name}，有{count}项数据，分别是{values};"},legend:{prefix:"图例分类有："}};var b={version:"3.8.13",scales:{},widthRatio:{column:1/2,rose:.999999,multiplePie:3/4},lineDash:[4,4],lang:rt};b.setTheme=function(r){F(b,r)};b.setTheme(hn);var Ge="afterinit",fn="beforerender",un="afterrender",vn="beforedatachange",$t="afterdatachange",Xe="_aftersizechange",cn="_aftergeominit",gn="beforegeomdraw",dn="aftergeomdraw",pn="clear",mn="clearinner",yn="repaint";class er{constructor(){this.__events={}}on(t,e){if(!(!t||!e)){var a=this.__events[t]||[];a.push(e),this.__events[t]=a}}emit(t,e){var a=this;if(X(t)&&(e=t,t=e&&e.type),!!t){var i=this.__events[t];!i||!i.length||i.forEach(function(n){n.call(a,e)})}}off(t,e){var a=this.__events,i=a[t];if(!(!i||!i.length)){if(!e){delete a[t];return}for(var n=0,s=i.length;n<s;n++)i[n]===e&&(i.splice(n,1),n--)}}}let Ca=class extends er{getDefaultCfg(){return{}}constructor(t){super();var e={},a=this.getDefaultCfg();this._attrs=e,y(e,a,t)}get(t){return this._attrs[t]}set(t,e){this._attrs[t]=e}destroy(){this._attrs={},this.destroyed=!0}};class xn{constructor(t){y(this,t),this._init()}_init(){var t=this,e=t.start,a=t.end,i=Math.min(e.x,a.x),n=Math.max(e.x,a.x),s=Math.min(e.y,a.y),o=Math.max(e.y,a.y);this.tl={x:i,y:s},this.tr={x:n,y:s},this.bl={x:i,y:o},this.br={x:n,y:o},this.width=n-i,this.height=o-s}reset(t,e){this.start=t,this.end=e,this._init()}isInRange(t,e){X(t)&&(e=t.y,t=t.x);var a=this.tl,i=this.br;return a.x<=t&&t<=i.x&&a.y<=e&&e<=i.y}}var B={generateDefault(){return[1,0,0,1,0,0]},isChanged(r){return r[0]!==1||r[1]!==0||r[2]!==0||r[3]!==1||r[4]!==0||r[5]!==0},multiply(r,t){var e=r[0]*t[0]+r[2]*t[1],a=r[1]*t[0]+r[3]*t[1],i=r[0]*t[2]+r[2]*t[3],n=r[1]*t[2]+r[3]*t[3],s=r[0]*t[4]+r[2]*t[5]+r[4],o=r[1]*t[4]+r[3]*t[5]+r[5];return[e,a,i,n,s,o]},scale(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[0],r[2]=t[2]*e[1],r[3]=t[3]*e[1],r[4]=t[4],r[5]=t[5],r},rotate(r,t,e){var a=Math.cos(e),i=Math.sin(e),n=t[0]*a+t[2]*i,s=t[1]*a+t[3]*i,o=t[0]*-i+t[2]*a,l=t[1]*-i+t[3]*a;return r[0]=n,r[1]=s,r[2]=o,r[3]=l,r[4]=t[4],r[5]=t[5],r},translate(r,t,e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4]+t[0]*e[0]+t[2]*e[1],r[5]=t[5]+t[1]*e[0]+t[3]*e[1],r},transform(r,t){for(var e=[].concat(r),a=0,i=t.length;a<i;a++){var n=t[a];switch(n[0]){case"t":B.translate(e,e,[n[1],n[2]]);break;case"s":B.scale(e,e,[n[1],n[2]]);break;case"r":B.rotate(e,e,n[1]);break}}return e}};const A={create(){return[0,0]},length(r){var t=r[0],e=r[1];return Math.sqrt(t*t+e*e)},normalize(r,t){var e=this.length(t);return e===0?(r[0]=0,r[1]=0):(r[0]=t[0]/e,r[1]=t[1]/e),r},add(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r},sub(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r},scale(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r},dot(r,t){return r[0]*t[0]+r[1]*t[1]},direction(r,t){return r[0]*t[1]-t[0]*r[1]},angle(r,t){var e=this.dot(r,t)/(this.length(r)*this.length(t));return Math.acos(e)},angleTo(r,t,e){var a=this.angle(r,t),i=this.direction(r,t)>=0;return e?i?Math.PI*2-a:a:i?a:Math.PI*2-a},zero(r){return r[0]===0&&r[1]===0},distance(r,t){var e=t[0]-r[0],a=t[1]-r[1];return Math.sqrt(e*e+a*a)},clone(r){return[r[0],r[1]]},min(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r},max(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r},transformMat2d(r,t,e){var a=t[0],i=t[1];return r[0]=e[0]*a+e[2]*i+e[4],r[1]=e[1]*a+e[3]*i+e[5],r}};var _n=[1,0,0,1,0,0];let Ot=class{_initDefaultCfg(){}constructor(t){this._initDefaultCfg(),y(this,t);var e,a;this.plot?(e=this.plot.bl,a=this.plot.tr,this.start=e,this.end=a):(e=this.start,a=this.end),this.init(e,a)}_scale(t,e){var a=this.matrix,i=this.center;B.translate(a,a,[i.x,i.y]),B.scale(a,a,[t,e]),B.translate(a,a,[-i.x,-i.y])}init(t,e){this.matrix=[].concat(_n),this.center={x:(e.x-t.x)/2+t.x,y:(e.y-t.y)/2+t.y},this.scale&&this._scale(this.scale[0],this.scale[1])}convertPoint(t){var{x:e,y:a}=this._convertPoint(t);if(!B.isChanged(this.matrix))return{x:e,y:a};var i=[e,a];return A.transformMat2d(i,i,this.matrix),{x:i[0],y:i[1]}}invertPoint(t){return this._invertPoint(t)}_convertPoint(t){return t}_invertPoint(t){return t}reset(t){this.plot=t;var{bl:e,tr:a}=t;this.start=e,this.end=a,this.init(e,a)}};class wa extends Ot{_initDefaultCfg(){this.type="cartesian",this.transposed=!1,this.isRect=!0}init(t,e){super.init(t,e),this.x={start:t.x,end:e.x},this.y={start:t.y,end:e.y}}_convertPoint(t){var e=this,a=e.transposed,i=a?"y":"x",n=a?"x":"y",s=e.x,o=e.y;return{x:s.start+(s.end-s.start)*t[i],y:o.start+(o.end-o.start)*t[n]}}_invertPoint(t){var e=this,a=e.transposed,i=a?"y":"x",n=a?"x":"y",s=e.x,o=e.y,l={};return l[i]=(t.x-s.start)/(s.end-s.start),l[n]=(t.y-o.start)/(o.end-o.start),l}}Ot.Cartesian=wa;Ot.Rect=wa;function pr(r,t){return N(t)?t:r.invert(r.scale(t))}class ye{constructor(t){var e=this;this.type="base",this.name=null,this.method=null,this.values=[],this.scales=[],this.linear=null;var a=null,i=this.callback;if(t.callback){var n=t.callback;a=function(){for(var o=arguments.length,l=new Array(o),f=0;f<o;f++)l[f]=arguments[f];var h=n(...l);return M(h)&&(h=i.apply(e,l)),h}}y(this,t),a&&y(this,{callback:a})}_getAttrValue(t,e){var a=this.values;if(t.isCategory&&!this.linear){var i=t.translate(e);return a[i%a.length]}var n=t.scale(e);return this.getLinearValue(n)}getLinearValue(t){var e=this.values,a=e.length-1,i=Math.floor(a*t),n=a*t-i,s=e[i],o=i===a?s:e[i+1],l=s+(o-s)*n;return l}callback(t){var e=this,a=e.scales[0],i=null;return a.type==="identity"?i=a.value:i=e._getAttrValue(a,t),i}getNames(){for(var t=this.scales,e=this.names,a=Math.min(t.length,e.length),i=[],n=0;n<a;n++)i.push(e[n]);return i}getFields(){var t=this.scales,e=[];return x(t,function(a){e.push(a.field)}),e}getScale(t){var e=this.scales,a=this.names,i=a.indexOf(t);return e[i]}mapping(){for(var t=this.scales,e=this.callback,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];var s=i;if(e){for(var o=0,l=i.length;o<l;o++)i[o]=this._toOriginParam(i[o],t[o]);s=e.apply(this,i)}return s=[].concat(s),s}_toOriginParam(t,e){var a=t;if(!e.isLinear)if(T(t)){a=[];for(var i=0,n=t.length;i<n;i++)a.push(pr(e,t[i]))}else a=pr(e,t);return a}}class Sn extends ye{constructor(t){super(t),this.names=["x","y"],this.type="position"}mapping(t,e){var a=this.scales,i=this.coord,n=a[0],s=a[1],o,l,f;if(M(t)||M(e))return[];if(T(e)&&T(t)){o=[],l=[];for(var h=0,u=0,v=t.length,c=e.length;h<v&&u<c;h++,u++)f=i.convertPoint({x:n.scale(t[h]),y:s.scale(e[u])}),o.push(f.x),l.push(f.y)}else if(T(e))t=n.scale(t),l=[],x(e,function(d){d=s.scale(d),f=i.convertPoint({x:t,y:d}),o&&o!==f.x?(T(o)||(o=[o]),o.push(f.x)):o=f.x,l.push(f.y)});else if(T(t))e=s.scale(e),o=[],x(t,function(d){d=n.scale(d),f=i.convertPoint({x:d,y:e}),l&&l!==f.y?(T(l)||(l=[l]),l.push(f.y)):l=f.y,o.push(f.x)});else{t=n.scale(t),e=s.scale(e);var g=i.convertPoint({x:t,y:e});o=g.x,l=g.y}return[o,l]}}let Mn=class extends ye{constructor(t){super(t),this.names=["shape"],this.type="shape",this.gradient=null}getLinearValue(t){var e=this.values,a=Math.round((e.length-1)*t);return e[a]}};class Pn extends ye{constructor(t){super(t),this.names=["size"],this.type="size",this.gradient=null}}function we(r,t,e,a){var i=r[a]+(t[a]-r[a])*e;return i}function ba(r){return"#"+be(r[0])+be(r[1])+be(r[2])}function be(r){return r=Math.round(r),r=r.toString(16),r.length===1&&(r="0"+r),r}function Cn(r,t){var e=r.length-1,a=Math.floor(e*t),i=e*t-a,n=r[a],s=a===e?n:r[a+1],o=ba([we(n,s,i,0),we(n,s,i,1),we(n,s,i,2)]);return o}function wn(r){var t=[];return t.push(parseInt(r.substr(1,2),16)),t.push(parseInt(r.substr(3,2),16)),t.push(parseInt(r.substr(5,2),16)),t}var Jt={black:"#000000",blue:"#0000ff",grey:"#808080",green:"#008000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",red:"#ff0000",white:"#ffffff",yellow:"#ffff00"};function bn(r){if(Jt[r])return Jt[r];if(r[0]==="#"){if(r.length===7)return r;var t=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,i,n,s){return"#"+i+i+n+n+s+s});return Jt[r]=t,t}var e=r.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e.shift(),e=ba(e),Jt[r]=e,e}function Tn(r){var t=[];return N(r)&&(r=r.split("-")),x(r,function(e){e.indexOf("#")===-1&&(e=bn(e)),t.push(wn(e))}),function(e){return Cn(t,e)}}class Dn extends ye{constructor(t){super(t),this.names=["color"],this.type="color",this.gradient=null,N(this.values)&&(this.linear=!0)}getLinearValue(t){var e=this.gradient;if(!e){var a=this.values;e=Tn(a),this.gradient=e}return e(t)}}const An=Object.freeze(Object.defineProperty({__proto__:null,Color:Dn,Position:Sn,Shape:Mn,Size:Pn},Symbol.toStringTag,{value:"Module"}));var Y={},In={_coord:null,draw(r,t){this.drawShape&&this.drawShape(r,t)},setCoord(r){this._coord=r},parsePoint(r){var t=this._coord;return t.isPolar&&(r.x===1&&(r.x=.9999999),r.y===1&&(r.y=.9999999)),t.convertPoint(r)},parsePoints(r){if(!r)return!1;var t=this,e=[];return r.forEach(function(a){e.push(t.parsePoint(a))}),e}},En={defaultShapeType:null,setCoord(r){this._coord=r},getShape(r){var t=this;T(r)&&(r=r[0]);var e=t[r]||t[t.defaultShapeType];return e._coord=t._coord,e},getShapePoints(r,t){var e=this.getShape(r),a=e.getPoints||e.getShapePoints||this.getDefaultPoints,i=a(t);return i},getDefaultPoints(){return[]},drawShape(r,t,e){var a=this.getShape(r);return t.color||(t.color=b.colors[0]),a.draw(t,e)}};Y.registerFactory=function(r,t){var e=lt(r),a=y({},En,t);return Y[e]=a,a.name=r,a};Y.registerShape=function(r,t,e){var a=lt(r),i=Y[a],n=y({},In,e);return i[t]=n,n};Y.registShape=Y.registerShape;Y.getShapeFactory=function(r){var t=this;r=r||"point";var e=lt(r);return t[e]};function Te(r,t){for(var e in t)t.hasOwnProperty(e)&&e!=="constructor"&&t[e]!==void 0&&(r[e]=t[e])}var On=function(t,e,a,i){return e&&Te(t,e),a&&Te(t,a),i&&Te(t,i),t},kn=On,Yn=kn,Nn=function(){var r=t.prototype;r._initDefaultCfg=function(){this.adjustNames=["x","y"]};function t(e){this._initDefaultCfg(),Yn(this,e)}return r.processAdjust=function(){},t}(),xe=Nn;const mr=Ni(xe);function yr(r){var{type:t,values:e}=r;if(t==="linear")return st(rt.scale.linear,r);if(t==="cat")return st(rt.scale.cat,{values:e.slice(0,10).join(" ")});if(t==="timeCat"){var a=r.getText(e[0]),i=r.getText(e[e.length-1]);return st(rt.scale.timeCat,{start:a,end:i})}return""}function Fn(r,t,e){var{type:a}=r;return rt.coord[a]?st(rt.coord[a],{xLabel:yr(t),yLabel:yr(e)}):""}function xr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,a)}return e}function _r(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?xr(Object(e),!0).forEach(function(a){Ln(r,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):xr(Object(e)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(e,a))})}return r}function Ln(r,t,e){return t=Bn(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Bn(r){var t=Rn(r,"string");return typeof t=="symbol"?t:String(t)}function Rn(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var zn=["color","size","shape"],tt="_origin",Kt="_originY";function Sr(r){return T(r)?r:N(r)?r.split("*"):[r]}class H extends Ca{getDefaultCfg(){return{type:null,data:null,attrs:{},scales:{},container:null,styleOptions:null,chart:null,shapeType:"",generatePoints:!1,attrOptions:{},sortable:!1,startOnZero:!0,visible:!0,connectNulls:!1,ignoreEmptyGroup:!1,isInit:!1}}init(){var t=this,e=t.get("isInit");e||(t._initAttrs(),t._processData(),t.set("isInit",!0))}_getGroupScales(){var t=this,e=[];return x(zn,function(a){var i=t.getAttr(a);if(i){var n=i.scales;x(n,function(s){s&&s.isCategory&&e.indexOf(s)===-1&&e.push(s)})}}),e}_groupData(t){var e=this,a=e.get("colDefs"),i=e._getGroupScales();if(i.length){var n={},s=[];return x(i,function(o){var l=o.field;s.push(l),a&&a[l]&&a[l].values&&(n[o.field]=a[l].values)}),ma(t,s,n)}return[t]}_setAttrOptions(t,e){var a=this.get("attrOptions");a[t]=e;var i=this.get("attrs");Object.keys(i).length&&this._createAttr(t,e)}_createAttrOption(t,e,a,i){var n={};n.field=e,a?k(a)?n.callback=a:n.values=a:n.values=i,this._setAttrOptions(t,n)}_createAttr(t,e){var a=this,i=a.get("attrs"),n=a.get("coord"),s=lt(t),o=Sr(e.field);t==="position"&&(e.coord=n);for(var l=[],f=0,h=o.length;f<h;f++){var u=o[f],v=a._createScale(u);l.push(v)}if(t==="position"){var c=l[1];n.type==="polar"&&n.transposed&&a.hasAdjust("stack")&&c.values.length&&c.change({nice:!1,min:0,max:Math.max.apply(null,c.values)})}e.scales=l;var g=new An[s](e);return i[t]=g,g}_initAttrs(){var t=this,e=t.get("attrOptions");for(var a in e)e.hasOwnProperty(a)&&this._createAttr(a,e[a])}_createScale(t){var e=this.get("scales"),a=e[t];return a||(a=this.get("chart").createScale(t),e[t]=a),a}_processData(){var t=this,e=this.get("data"),a=[],i=this._groupData(e);if(this.get("ignoreEmptyGroup")){var n=this.getYScale();i=i.filter(function(h){return h.some(function(u){return typeof u[n.field]<"u"})})}for(var s=0,o=i.length;s<o;s++){var l=i[s],f=t._saveOrigin(l);this.hasAdjust("dodge")&&t._numberic(f),a.push(f)}return t.get("adjust")&&t._adjustData(a),t.get("sortable")&&t._sort(a),t.emit("afterprocessdata",{dataArray:a}),t.set("mappingData",a),t.set("dataArray",a),a}_saveOrigin(t){for(var e=[],a=0,i=t.length;a<i;a++){var n=t[a],s={};for(var o in n)s[o]=n[o];s[tt]=n,e.push(s)}return e}_numberic(t){for(var e=this.getAttr("position"),a=e.scales,i=0,n=t.length;i<n;i++)for(var s=t[i],o=Math.min(2,a.length),l=0;l<o;l++){var f=a[l];if(f.isCategory){var h=f.field;s[h]=f.translate(s[h])}}}_adjustData(t){var e=this,a=e.get("adjust");if(a){var i=lt(a.type);if(!mr[i])throw new Error("not support such adjust : "+a);var n=e.getXScale(),s=e.getYScale(),o=y({xField:n.field,yField:s.field},a),l=new mr[i](o);l.processAdjust(t),i==="Stack"&&e._updateStackRange(s.field,s,t)}}_updateStackRange(t,e,a){for(var i=ga(a),n=e.min,s=e.max,o=0,l=i.length;o<l;o++){var f=i[o],h=Math.min.apply(null,f[t]),u=Math.max.apply(null,f[t]);h<n&&(n=h),u>s&&(s=u)}(n<e.min||s>e.max)&&e.change({min:n,max:s})}_sort(t){var e=this,a=e.getXScale(),{field:i,type:n}=a;n!=="identity"&&a.values.length>1&&x(t,function(s){s.sort(function(o,l){return n==="timeCat"?Ht(o[tt][i])-Ht(l[tt][i]):a.translate(o[tt][i])-a.translate(l[tt][i])})}),e.set("hasSorted",!0),e.set("dataArray",t)}paint(){var t=this,e=t.get("mappingData"),a=[],i=t.getShapeFactory();i.setCoord(t.get("coord")),t._beforeMapping(e);for(var n=0,s=e.length;n<s;n++){var o=e[n];if(o.length){var l=t._mapping(o);a.push(l),t.draw(l,i)}}t.set("dataArray",a),this.generateAria()}getShapeFactory(){var t=this.get("shapeFactory");if(!t){var e=this.get("shapeType");t=Y.getShapeFactory(e),this.set("shapeFactory",t)}return t}_mapping(t){var e=this,a=e.get("attrs"),i=e.getYScale().field,n={},s=new Array(t.length);for(var o in a)if(a.hasOwnProperty(o))for(var l=a[o],f=l.names,h=l.scales,u=0,v=t.length;u<v;u++){var c=t[u],g=_r(_r({},c),s[u]);if(g[Kt]=c[i],l.type==="position")for(var d=e._getAttrValues(l,c),p=0,m=d.length;p<m;p++){var _=d[p],C=f[p];g[C]=T(_)&&_.length===1?_[0]:_}else{var S=f[0],P=h[0].field,w=c[P],I="".concat(S).concat(w),D=n[I];D||(D=e._getAttrValues(l,c),n[I]=D),g[S]=D[0]}s[u]=g}return s}_getAttrValues(t,e){for(var a=t.scales,i=[],n=0,s=a.length;n<s;n++){var o=a[n],l=o.field;o.type==="identity"?i.push(o.value):i.push(e[l])}var f=t.mapping(...i);return f}getAttrValue(t,e){var a=this.getAttr(t),i=null;if(a){var n=this._getAttrValues(a,e);i=n[0]}return i}_beforeMapping(t){var e=this;e.get("generatePoints")&&e._generatePoints(t)}isInCircle(){var t=this.get("coord");return t&&t.isPolar}getCallbackCfg(t,e,a){if(!t)return e;var i={},n=t.map(function(s){return a[s]});return x(e,function(s,o){k(s)?i[o]=s.apply(null,n):i[o]=s}),i}getDrawCfg(t){var e=this,a=e.isInCircle(),i={origin:t,x:t.x,y:t.y,color:t.color,size:t.size,shape:t.shape,isInCircle:a,opacity:t.opacity},n=e.get("styleOptions");return n&&n.style&&(i.style=e.getCallbackCfg(n.fields,n.style,t[tt])),e.get("generatePoints")&&(i.points=t.points,i.nextPoints=t.nextPoints),a&&(i.center=e.get("coord").center),i}draw(t,e){var a=this,i=a.get("container"),n=a.getYScale();x(t,function(s,o){if(!(n&&M(s._origin[n.field]))){s.index=o;var l=a.getDrawCfg(s),f=s.shape;a.drawShape(f,s,l,i,e)}})}drawShape(t,e,a,i,n){var s=n.drawShape(t,a,i);s&&x([].concat(s),function(o){o.set("origin",e)})}_generatePoints(t){var e=this,a=e.getShapeFactory(),i=e.getAttr("shape");x(t,function(n){for(var s=0,o=n.length;s<o;s++){var l=n[s],f=e.createShapePointsCfg(l),h=i?e._getAttrValues(i,l):null,u=a.getShapePoints(h,f);l.points=u}}),x(t,function(n,s){var o=t[s+1];o&&(n[0].nextPoints=o[0].points)})}generateAria(){var t=this.get("container"),e=t.get("aria");if(e){var a=[],i=this.get("coord"),n=this.getXScale(),s=this.getYScale(),o=Fn(i,n,s);a.push(o);var{prefix:l,oneData:f,partData:h,allData:u}=rt.geometry,v=this.get("dataArray"),c=v.length,g=this._getGroupScales()[0];if(g){var d=st(l,{count:c});a.push(d),x(v,function(p,m){var _=p.length;if(_){var C=p[0]._origin;if(_===1)a.push(st(f,{index:m+1,count:_,name:C[g.field],values:C[s.field]}));else{var S=_>5?h:u,P=p.slice(0,5).map(function(w){var{_origin:I}=w,D=n.getText(I[n.field]),L=s.getText(I[s.field]);return"".concat(D,":").concat(L)});a.push(st(S,{index:m+1,count:_,part:3,name:C[g.field],values:P.join(" ")}))}}})}t.set("ariaLabel",a.join(""))}}createShapePointsCfg(t){var e=this.getXScale(),a=this.getYScale(),i=this._normalizeValues(t[e.field],e),n;return a?n=this._normalizeValues(t[a.field],a):n=t.y?t.y:.1,{x:i,y:n,y0:a?a.scale(this.getYMinValue()):void 0}}getYMinValue(){var t=this.getYScale(),{min:e,max:a}=t,i;return this.get("startOnZero")?a<=0&&e<=0?i=a:i=e>=0?e:0:i=e,i}_normalizeValues(t,e){var a=[];if(T(t))for(var i=0,n=t.length;i<n;i++){var s=t[i];a.push(e.scale(s))}else a=e.scale(t);return a}getAttr(t){return this.get("attrs")[t]}getXScale(){return this.getAttr("position").scales[0]}getYScale(){return this.getAttr("position").scales[1]}hasAdjust(t){return this.get("adjust")&&this.get("adjust").type===t}_getSnap(t,e,a){var i=0,n,s=this.getYScale().field;if(this.hasAdjust("stack")&&t.field===s){n=[],a.forEach(function(h){n.push(h[Kt])});for(var o=n.length;i<o&&!(n[0][0]>e);i++){if(n[n.length-1][1]<=e){i=n.length-1;break}if(n[i][0]<=e&&n[i][1]>e)break}}else{n=t.values,n.sort(function(h,u){return h-u});for(var l=n.length;i<l&&!(l<=1||(n[0]+n[1])/2>e||(n[i-1]+n[i])/2<=e&&(n[i+1]+n[i])/2>e);i++)if((n[n.length-2]+n[n.length-1])/2<=e){i=n.length-1;break}}var f=n[i];return f}getSnapRecords(t){var e=this,a=e.get("coord"),i=e.getXScale(),n=e.getYScale(),s=i.field,o=e.get("dataArray");this.get("hasSorted")||this._sort(o);var l=[],f=a.invertPoint(t),h=f.x;if(e.isInCircle()&&!a.transposed&&h>(1+i.rangeMax())/2&&(h=i.rangeMin()),i.isCategory){var u=i.rangeMin(),v=i.rangeMax();h<u&&(h=u),h>v&&(h=v)}var c=i.invert(h);i.isCategory||(c=e._getSnap(i,c));var g=[];if(o.forEach(function(p){p.forEach(function(m){var _=M(m[tt])?m[s]:m[tt][s];e._isEqual(_,c,i)&&g.push(m)})}),this.hasAdjust("stack")&&a.isPolar&&a.transposed){if(h>=0&&h<=1){var d=n.invert(f.y);d=e._getSnap(n,d,g),g.forEach(function(p){(T(d)?p[Kt].toString()===d.toString():p[Kt]===d)&&l.push(p)})}}else l=g;return l}getRecords(t){var e=this,a=this.getXScale(),i=this.get("dataArray"),n=a.field;return i.map(function(s){for(var o=s.length,l=o-1;l>=0;l--){var f=s[l],h=M(f[tt])?f[n]:f[tt][n];if(e._isEqual(h,t,a))return f}return null})}_isEqual(t,e,a){return a.type==="timeCat"?Ht(t)===e:e===t}position(t){return this._setAttrOptions("position",{field:t}),this}color(t,e){return this._createAttrOption("color",t,e,b.colors),this}size(t,e){return this._createAttrOption("size",t,e,b.sizes),this}shape(t,e){var a=this.get("type"),i=b.shapes[a]||[];return this._createAttrOption("shape",t,e,i),this}style(t,e){var a=this.get("styleOptions");a||(a={},this.set("styleOptions",a)),X(t)&&(e=t,t=null);var i;return t&&(i=Sr(t)),a.fields=i,a.style=e,this}adjust(t){return N(t)&&(t={type:t}),this.set("adjust",t),this}animate(t){return this.set("animateCfg",t),this}changeData(t){this.set("data",t),this.set("scales",{}),this.get("isInit")&&(this.set("isInit",!1),this.init())}clearInner(){var t=this.get("container");t&&t.clear()}reset(){this.set("isInit",!1),this.set("attrs",{}),this.set("attrOptions",{}),this.set("adjust",null),this.clearInner()}clear(){this.clearInner()}destroy(){this.set("isInit",!1),this.clear(),super.destroy()}_display(t){this.set("visible",t);var e=this.get("container"),a=e.get("canvas");e.set("visible",t),a.draw()}show(){this._display(!0)}hide(){this._display(!1)}}var Ta={};function Da(r){return Ta[r]}function j(r,t){Ta[r]=t}var dt=function(){function r(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return r.prototype.translate=function(t){return t},r.prototype.change=function(t){y(this.__cfg__,t),this.init()},r.prototype.clone=function(){return this.constructor(this.__cfg__)},r.prototype.getTicks=function(){var t=this;return Ki(this.ticks,function(e,a){return X(e)?e:{text:t.getText(e,a),tickValue:e,value:t.scale(e)}})},r.prototype.getText=function(t,e){var a=this.formatter,i=a?a(t,e):t;return M(i)||!k(i.toString)?"":i.toString()},r.prototype.getConfig=function(t){return this.__cfg__[t]},r.prototype.init=function(){y(this,this.__cfg__),this.setDomain(),Ji(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},r.prototype.initCfg=function(){},r.prototype.setDomain=function(){},r.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if(N(t)){var a=Da(t);if(!a)throw new Error("There is no method to to calculate ticks!");e=a(this)}else k(t)&&(e=t(this));return e},r.prototype.rangeMin=function(){return this.range[0]},r.prototype.rangeMax=function(){return this.range[1]},r.prototype.calcPercent=function(t,e,a){return R(t)?(t-e)/(a-e):NaN},r.prototype.calcValue=function(t,e,a){return e+t*(a-e)},r}(),rr=function(r){at(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var a=this.translateIndexMap.get(e);return a===void 0&&(a=R(e)?e:NaN),a},t.prototype.scale=function(e){var a=this.translate(e),i=this.calcPercent(a,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var a=this.max-this.min,i=this.calcPercent(e,this.rangeMin(),this.rangeMax()),n=Math.round(a*i)+this.min;return n<this.min||n>this.max?NaN:this.values[n]},t.prototype.getText=function(e){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];var n=e;return R(e)&&!this.values.includes(e)&&(n=this.values[n]),r.prototype.getText.apply(this,ca([n],a))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(M(this.getConfig("min"))&&(this.min=0),M(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(dt),Aa=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,ut="\\d\\d?",ft="\\d\\d",Gn="\\d{3}",Xn="\\d{4}",Vt="[^\\s]+",Ia=/\[([^]*?)\]/gm;function Ea(r,t){for(var e=[],a=0,i=r.length;a<i;a++)e.push(r[a].substr(0,t));return e}var Mr=function(r){return function(t,e){var a=e[r].map(function(n){return n.toLowerCase()}),i=a.indexOf(t.toLowerCase());return i>-1?i:null}};function gt(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var a=0,i=t;a<i.length;a++){var n=i[a];for(var s in n)r[s]=n[s]}return r}var Oa=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ka=["January","February","March","April","May","June","July","August","September","October","November","December"],Hn=Ea(ka,3),$n=Ea(Oa,3),ar={dayNamesShort:$n,dayNames:Oa,monthNamesShort:Hn,monthNames:ka,amPm:["am","pm"],DoFn:function(r){return r+["th","st","nd","rd"][r%10>3?0:(r-r%10!==10?1:0)*r%10]}},he=gt({},ar),Ya=function(r){return he=gt(he,r)},Pr=function(r){return r.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},G=function(r,t){for(t===void 0&&(t=2),r=String(r);r.length<t;)r="0"+r;return r},Vn={D:function(r){return String(r.getDate())},DD:function(r){return G(r.getDate())},Do:function(r,t){return t.DoFn(r.getDate())},d:function(r){return String(r.getDay())},dd:function(r){return G(r.getDay())},ddd:function(r,t){return t.dayNamesShort[r.getDay()]},dddd:function(r,t){return t.dayNames[r.getDay()]},M:function(r){return String(r.getMonth()+1)},MM:function(r){return G(r.getMonth()+1)},MMM:function(r,t){return t.monthNamesShort[r.getMonth()]},MMMM:function(r,t){return t.monthNames[r.getMonth()]},YY:function(r){return G(String(r.getFullYear()),4).substr(2)},YYYY:function(r){return G(r.getFullYear(),4)},h:function(r){return String(r.getHours()%12||12)},hh:function(r){return G(r.getHours()%12||12)},H:function(r){return String(r.getHours())},HH:function(r){return G(r.getHours())},m:function(r){return String(r.getMinutes())},mm:function(r){return G(r.getMinutes())},s:function(r){return String(r.getSeconds())},ss:function(r){return G(r.getSeconds())},S:function(r){return String(Math.round(r.getMilliseconds()/100))},SS:function(r){return G(Math.round(r.getMilliseconds()/10),2)},SSS:function(r){return G(r.getMilliseconds(),3)},a:function(r,t){return r.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(r,t){return r.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(r){var t=r.getTimezoneOffset();return(t>0?"-":"+")+G(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(r){var t=r.getTimezoneOffset();return(t>0?"-":"+")+G(Math.floor(Math.abs(t)/60),2)+":"+G(Math.abs(t)%60,2)}},Cr=function(r){return+r-1},wr=[null,ut],br=[null,Vt],Tr=["isPm",Vt,function(r,t){var e=r.toLowerCase();return e===t.amPm[0]?0:e===t.amPm[1]?1:null}],Dr=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(r){var t=(r+"").match(/([+-]|\d\d)/gi);if(t){var e=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?e:-e}return 0}],jn={D:["day",ut],DD:["day",ft],Do:["day",ut+Vt,function(r){return parseInt(r,10)}],M:["month",ut,Cr],MM:["month",ft,Cr],YY:["year",ft,function(r){var t=new Date,e=+(""+t.getFullYear()).substr(0,2);return+(""+(+r>68?e-1:e)+r)}],h:["hour",ut,void 0,"isPm"],hh:["hour",ft,void 0,"isPm"],H:["hour",ut],HH:["hour",ft],m:["minute",ut],mm:["minute",ft],s:["second",ut],ss:["second",ft],YYYY:["year",Xn],S:["millisecond","\\d",function(r){return+r*100}],SS:["millisecond",ft,function(r){return+r*10}],SSS:["millisecond",Gn],d:wr,dd:wr,ddd:br,dddd:br,MMM:["month",Vt,Mr("monthNamesShort")],MMMM:["month",Vt,Mr("monthNames")],a:Tr,A:Tr,ZZ:Dr,Z:Dr},fe={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Na=function(r){return gt(fe,r)},Fa=function(r,t,e){if(t===void 0&&(t=fe.default),e===void 0&&(e={}),typeof r=="number"&&(r=new Date(r)),Object.prototype.toString.call(r)!=="[object Date]"||isNaN(r.getTime()))throw new Error("Invalid Date pass to format");t=fe[t]||t;var a=[];t=t.replace(Ia,function(n,s){return a.push(s),"@@@"});var i=gt(gt({},he),e);return t=t.replace(Aa,function(n){return Vn[n](r,i)}),t.replace(/@@@/g,function(){return a.shift()})};function La(r,t,e){if(e===void 0&&(e={}),typeof t!="string")throw new Error("Invalid format in fecha parse");if(t=fe[t]||t,r.length>1e3)return null;var a=new Date,i={year:a.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},n=[],s=[],o=t.replace(Ia,function(S,P){return s.push(Pr(P)),"@@@"}),l={},f={};o=Pr(o).replace(Aa,function(S){var P=jn[S],w=P[0],I=P[1],D=P[3];if(l[w])throw new Error("Invalid format. "+w+" specified twice in format");return l[w]=!0,D&&(f[D]=!0),n.push(P),"("+I+")"}),Object.keys(f).forEach(function(S){if(!l[S])throw new Error("Invalid format. "+S+" is required in specified format")}),o=o.replace(/@@@/g,function(){return s.shift()});var h=r.match(new RegExp(o,"i"));if(!h)return null;for(var u=gt(gt({},he),e),v=1;v<h.length;v++){var c=n[v-1],g=c[0],d=c[2],p=d?d(h[v],u):+h[v];if(p==null)return null;i[g]=p}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var m;if(i.timezoneOffset==null){m=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var _=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],v=0,C=_.length;v<C;v++)if(l[_[v][0]]&&i[_[v][0]]!==m[_[v][1]]())return null}else if(m=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return m}var Ba={format:Fa,parse:La,defaultI18n:ar,setGlobalDateI18n:Ya,setGlobalDateMasks:Na};const Wn=Object.freeze(Object.defineProperty({__proto__:null,assign:gt,default:Ba,defaultI18n:ar,format:Fa,parse:La,setGlobalDateI18n:Ya,setGlobalDateMasks:Na},Symbol.toStringTag,{value:"Module"}));function qn(r){return function(t,e,a,i){for(var n=M(a)?0:a,s=M(i)?t.length:i;n<s;){var o=n+s>>>1;r(t[o])>e?s=o:n=o+1}return n}}var Ar="format";function Ra(r,t){var e=Wn[Ar]||Ba[Ar];return e(r,t)}function ue(r){return N(r)&&(r.indexOf("T")>0?r=new Date(r).getTime():r=new Date(r.replace(/-/gi,"/")).getTime()),pe(r)&&(r=r.getTime()),r}var J=1e3,_t=60*J,St=60*_t,nt=24*St,jt=nt*31,Ir=nt*365,Lt=[["HH:mm:ss",J],["HH:mm:ss",J*10],["HH:mm:ss",J*30],["HH:mm",_t],["HH:mm",_t*10],["HH:mm",_t*30],["HH",St],["HH",St*6],["HH",St*12],["YYYY-MM-DD",nt],["YYYY-MM-DD",nt*4],["YYYY-WW",nt*7],["YYYY-MM",jt],["YYYY-MM",jt*4],["YYYY-MM",jt*6],["YYYY",nt*380]];function Un(r,t,e){var a=(t-r)/e,i=qn(function(s){return s[1]})(Lt,a)-1,n=Lt[i];return i<0?n=Lt[0]:i>=Lt.length&&(n=K(Lt)),n}var Zn=function(r){at(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="timeCat",e}return t.prototype.translate=function(e){e=ue(e);var a=this.values.indexOf(e);return a===-1&&(R(e)&&e<this.values.length?a=e:a=NaN),a},t.prototype.getText=function(e,a){var i=this.translate(e);if(i>-1){var n=this.values[i],s=this.formatter;return n=s?s(n,a):Ra(n,this.mask),n}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var e=this.values;x(e,function(a,i){e[i]=ue(a)}),e.sort(function(a,i){return a-i}),r.prototype.setDomain.call(this)},t}(rr),_e=function(r){at(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isContinuous=!0,e}return t.prototype.scale=function(e){if(M(e))return NaN;var a=this.rangeMin(),i=this.rangeMax(),n=this.max,s=this.min;if(n===s)return a;var o=this.getScalePercent(e);return a+o*(i-a)},t.prototype.init=function(){r.prototype.init.call(this);var e=this.ticks,a=ct(e),i=K(e);a<this.min&&(this.min=a),i>this.max&&(this.max=i),M(this.minLimit)||(this.min=a),M(this.maxLimit)||(this.max=i)},t.prototype.setDomain=function(){var e=Xi(this.values),a=e.min,i=e.max;M(this.min)&&(this.min=a),M(this.max)&&(this.max=i),this.min>this.max&&(this.min=a,this.max=i)},t.prototype.calculateTicks=function(){var e=this,a=r.prototype.calculateTicks.call(this);return this.nice||(a=na(a,function(i){return i>=e.min&&i<=e.max})),a},t.prototype.getScalePercent=function(e){var a=this.max,i=this.min;return(e-i)/(a-i)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(dt),za=function(r){at(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return t.prototype.invert=function(e){var a=this.getInvertPercent(e);return this.min+a*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(_e);function vt(r,t){var e=Math.E,a;return t>=0?a=Math.pow(e,Math.log(t)/r):a=Math.pow(e,Math.log(-t)/r)*-1,a}function W(r,t){return r===1?1:Math.log(t)/Math.log(r)}function Ga(r,t,e){M(e)&&(e=Math.max.apply(null,r));var a=e;return x(r,function(i){i>0&&i<a&&(a=i)}),a===e&&(a=e/t),a>1&&(a=1),a}var Jn=function(r){at(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="log",e}return t.prototype.invert=function(e){var a=this.base,i=W(a,this.max),n=this.rangeMin(),s=this.rangeMax()-n,o,l=this.positiveMin;if(l){if(e===0)return 0;o=W(a,l/a);var f=1/(i-o)*s;if(e<f)return e/f*l}else o=W(a,this.min);var h=(e-n)/s,u=h*(i-o)+o;return Math.pow(a,u)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){r.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");e===0&&(this.positiveMin=Ga(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var a=this.max,i=this.min;if(a===i||e<=0)return 0;var n=this.base,s=this.positiveMin;s&&(i=s*1/n);var o;return e<s?o=e/s/(W(n,a)-W(n,i)):o=(W(n,e)-W(n,i))/(W(n,a)-W(n,i)),o},t}(_e),Kn=function(r){at(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="pow",e}return t.prototype.invert=function(e){var a=this.getInvertPercent(e),i=this.exponent,n=vt(i,this.max),s=vt(i,this.min),o=a*(n-s)+s,l=o>=0?1:-1;return Math.pow(o,i)*l},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var a=this.max,i=this.min;if(a===i)return 0;var n=this.exponent,s=(vt(n,e)-vt(n,i))/(vt(n,a)-vt(n,i));return s},t}(_e),Qn=function(r){at(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="time",e}return t.prototype.getText=function(e,a){var i=this.translate(e),n=this.formatter;return n?n(i,a):Ra(i,this.mask)},t.prototype.scale=function(e){var a=e;return(N(a)||pe(a))&&(a=this.translate(a)),r.prototype.scale.call(this,a)},t.prototype.translate=function(e){return ue(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,a=this.getConfig("min"),i=this.getConfig("max");if((!M(a)||!R(a))&&(this.min=this.translate(this.min)),(!M(i)||!R(i))&&(this.max=this.translate(this.max)),e&&e.length){var n=[],s=1/0,o=s,l=0;x(e,function(f){var h=ue(f);if(isNaN(h))throw new TypeError("Invalid Time: "+f+" in time scale!");s>h?(o=s,s=h):o>h&&(o=h),l<h&&(l=h),n.push(h)}),e.length>1&&(this.minTickInterval=o-s),M(a)&&(this.min=s),M(i)&&(this.max=l)}},t}(za),Xa=function(r){at(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="quantize",e}return t.prototype.invert=function(e){var a=this.ticks,i=a.length,n=this.getInvertPercent(e),s=Math.floor(n*(i-1));if(s>=i-1)return K(a);if(s<0)return ct(a);var o=a[s],l=a[s+1],f=s/(i-1),h=(s+1)/(i-1);return o+(n-f)/(h-f)*(l-o)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var e=r.prototype.calculateTicks.call(this);return this.nice||(K(e)!==this.max&&e.push(this.max),ct(e)!==this.min&&e.unshift(this.min)),e},t.prototype.getScalePercent=function(e){var a=this.ticks;if(e<ct(a))return 0;if(e>K(a))return 1;var i=0;return x(a,function(n,s){if(e>=n)i=s;else return!1}),i/(a.length-1)},t}(_e),ts=function(r){at(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="quantile",e}return t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(Xa),Ha={};function kt(r){return Ha[r]}function it(r,t){if(kt(r))throw new Error("type '"+r+"' existed.");Ha[r]=t}var es=function(r){at(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&R(e)?e:this.range[0]},t.prototype.invert=function(e){var a=this.range;return e<a[0]||e>a[1]?NaN:this.values[0]},t}(dt);function $a(r){var t=r.values,e=r.tickInterval,a=r.tickCount,i=r.showLast;if(R(e)){var n=na(t,function(g,d){return d%e===0}),s=K(t);return i&&K(n)!==s&&n.push(s),n}var o=t.length,l=r.min,f=r.max;if(M(l)&&(l=0),M(f)&&(f=t.length-1),!R(a)||a>=o)return t.slice(l,f+1);if(a<=0||f<=0)return[];for(var h=a===1?o:Math.floor(o/(a-1)),u=[],v=l,c=0;c<a&&!(v>=f);c++)v=Math.min(l+c*h,f),c===a-1&&i?u.push(t[f]):u.push(t[v]);return u}function rs(r){var t=r.min,e=r.max,a=r.nice,i=r.tickCount,n=new as;return n.domain([t,e]),a&&n.nice(i),n.ticks(i)}var De=5,Er=Math.sqrt(50),Or=Math.sqrt(10),kr=Math.sqrt(2),as=function(){function r(){this._domain=[0,1]}return r.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},r.prototype.nice=function(t){var e,a;t===void 0&&(t=De);var i=this._domain.slice(),n=0,s=this._domain.length-1,o=this._domain[n],l=this._domain[s],f;return l<o&&(e=[l,o],o=e[0],l=e[1],a=[s,n],n=a[0],s=a[1]),f=ne(o,l,t),f>0?(o=Math.floor(o/f)*f,l=Math.ceil(l/f)*f,f=ne(o,l,t)):f<0&&(o=Math.ceil(o*f)/f,l=Math.floor(l*f)/f,f=ne(o,l,t)),f>0?(i[n]=Math.floor(o/f)*f,i[s]=Math.ceil(l/f)*f,this.domain(i)):f<0&&(i[n]=Math.ceil(o*f)/f,i[s]=Math.floor(l*f)/f,this.domain(i)),this},r.prototype.ticks=function(t){return t===void 0&&(t=De),is(this._domain[0],this._domain[this._domain.length-1],t||De)},r}();function is(r,t,e){var a,i=-1,n,s,o;if(t=+t,r=+r,e=+e,r===t&&e>0)return[r];if((a=t<r)&&(n=r,r=t,t=n),(o=ne(r,t,e))===0||!isFinite(o))return[];if(o>0)for(r=Math.ceil(r/o),t=Math.floor(t/o),s=new Array(n=Math.ceil(t-r+1));++i<n;)s[i]=(r+i)*o;else for(r=Math.floor(r*o),t=Math.ceil(t*o),s=new Array(n=Math.ceil(r-t+1));++i<n;)s[i]=(r-i)/o;return a&&s.reverse(),s}function ne(r,t,e){var a=(t-r)/Math.max(0,e),i=Math.floor(Math.log(a)/Math.LN10),n=a/Math.pow(10,i);return i>=0?(n>=Er?10:n>=Or?5:n>=kr?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(n>=Er?10:n>=Or?5:n>=kr?2:1)}function Yr(r,t,e){var a;return e==="ceil"?a=Math.ceil(r/t):e==="floor"?a=Math.floor(r/t):a=Math.round(r/t),a*t}function ir(r,t,e){var a=Yr(r,e,"floor"),i=Yr(t,e,"ceil");a=Pe(a,e),i=Pe(i,e);for(var n=[],s=Math.max((i-a)/(Math.pow(2,12)-1),e),o=a;o<=i;o=o+s){var l=Pe(o,s);n.push(l)}return{min:a,max:i,ticks:n}}function nr(r,t,e){var a,i=r.minLimit,n=r.maxLimit,s=r.min,o=r.max,l=r.tickCount,f=l===void 0?5:l,h=M(i)?M(t)?s:t:i,u=M(n)?M(e)?o:e:n;if(h>u&&(a=[h,u],u=a[0],h=a[1]),f<=2)return[h,u];for(var v=(u-h)/(f-1),c=[],g=0;g<f;g++)c.push(h+v*g);return c}function ns(r){var t=r.min,e=r.max,a=r.tickInterval,i=r.minLimit,n=r.maxLimit,s=rs(r);return!M(i)||!M(n)?nr(r,ct(s),K(s)):a?ir(t,e,a).ticks:s}function yt(r){return Math.abs(r)<1e-15?r:parseFloat(r.toFixed(15))}var ss=[1,5,2,2.5,4,3],Nr=Number.EPSILON*100;function os(r,t){return(r%t+t)%t}function ls(r){return Math.round(r*1e12)/1e12}function hs(r,t,e,a,i,n){var s=va(t),o=ua(t,r),l=0,f=os(a,n);return(f<Nr||n-f<Nr)&&a<=0&&i>=0&&(l=1),1-o/(s-1)-e+l}function fs(r,t,e){var a=va(t),i=ua(t,r),n=1;return 1-i/(a-1)-e+n}function us(r,t,e,a,i,n){var s=(r-1)/(n-i),o=(t-1)/(Math.max(n,a)-Math.min(e,i));return 2-Math.max(s/o,o/s)}function vs(r,t){return r>=t?2-(r-1)/(t-1):1}function cs(r,t,e,a){var i=t-r;return 1-.5*(Math.pow(t-a,2)+Math.pow(r-e,2))/Math.pow(.1*i,2)}function gs(r,t,e){var a=t-r;if(e>a){var i=(e-a)/2;return 1-Math.pow(i,2)/Math.pow(.1*a,2)}return 1}function ds(){return 1}function ps(r,t,e,a,i,n){e===void 0&&(e=5),a===void 0&&(a=!0),i===void 0&&(i=ss),n===void 0&&(n=[.25,.2,.5,.05]);var s=e<0?0:Math.round(e);if(Number.isNaN(r)||Number.isNaN(t)||typeof r!="number"||typeof t!="number"||!s)return{min:0,max:0,ticks:[]};if(t-r<1e-15||s===1)return{min:r,max:t,ticks:[r]};if(t-r>1e148){var o=e||5,l=(t-r)/o;return{min:r,max:t,ticks:Array(o).fill(null).map(function(cr,Yi){return yt(r+l*Yi)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},h=1;h<1/0;){for(var u=0;u<i.length;u+=1){var v=i[u],c=fs(v,i,h);if(n[0]*c+n[1]+n[2]+n[3]<f.score){h=1/0;break}for(var g=2;g<1/0;){var d=vs(g,s);if(n[0]*c+n[1]+n[2]*d+n[3]<f.score)break;for(var p=(t-r)/(g+1)/h/v,m=Math.ceil(Math.log10(p));m<1/0;){var _=h*v*Math.pow(10,m),C=gs(r,t,_*(g-1));if(n[0]*c+n[1]*C+n[2]*d+n[3]<f.score)break;var S=Math.floor(t/_)*h-(g-1)*h,P=Math.ceil(r/_)*h;if(S<=P)for(var o=P-S,w=0;w<=o;w+=1){var I=S+w,D=I*(_/h),L=D+_*(g-1),$=_,ht=hs(v,i,h,D,L,$),q=cs(r,t,D,L),U=us(g,s,r,t,D,L),Z=ds(),Ct=n[0]*ht+n[1]*q+n[2]*U+n[3]*Z;Ct>f.score&&(!a||D<=r&&L>=t)&&(f.lmin=D,f.lmax=L,f.lstep=$,f.score=Ct)}m+=1}g+=1}}h+=1}var Yt=yt(f.lmax),Nt=yt(f.lmin),Ft=yt(f.lstep),wt=Math.floor(ls((Yt-Nt)/Ft))+1,Q=new Array(wt);Q[0]=yt(Nt);for(var u=1;u<wt;u++)Q[u]=yt(Q[u-1]+Ft);return{min:Math.min(r,ct(Q)),max:Math.max(t,K(Q)),ticks:Q}}function ms(r){var t=r.min,e=r.max,a=r.tickCount,i=r.nice,n=r.tickInterval,s=r.minLimit,o=r.maxLimit,l=ps(t,e,a,i).ticks;return!M(s)||!M(o)?nr(r,ct(l),K(l)):n?ir(t,e,n).ticks:l}function ys(r){var t=r.base,e=r.tickCount,a=r.min,i=r.max,n=r.values,s,o=W(t,i);if(a>0)s=Math.floor(W(t,a));else{var l=Ga(n,t,i);s=Math.floor(W(t,l))}for(var f=o-s,h=Math.ceil(f/e),u=[],v=s;v<o+h;v=v+h)u.push(Math.pow(t,v));return a<=0&&u.unshift(0),u}function Va(r,t,e){if(e===void 0&&(e=5),r===t)return{max:t,min:r,ticks:[r]};var a=e<0?0:Math.round(e);if(a===0)return{max:t,min:r,ticks:[]};var i=1.5,n=.5+1.5*i,s=t-r,o=s/a,l=Math.pow(10,Math.floor(Math.log10(o))),f=l;2*l-o<i*(o-f)&&(f=2*l,5*l-o<n*(o-f)&&(f=5*l,10*l-o<i*(o-f)&&(f=10*l)));for(var h=Math.ceil(t/f),u=Math.floor(r/f),v=Math.max(h*f,t),c=Math.min(u*f,r),g=Math.floor((v-c)/f)+1,d=new Array(g),p=0;p<g;p++)d[p]=yt(c+p*f);return{min:c,max:v,ticks:d}}function xs(r){var t=r.exponent,e=r.tickCount,a=Math.ceil(vt(t,r.max)),i=Math.floor(vt(t,r.min)),n=Va(i,a,e).ticks;return n.map(function(s){var o=s>=0?1:-1;return Math.pow(s,t)*o})}function _s(r,t){var e=r.length*t;return t===1?r[r.length-1]:t===0?r[0]:e%1!==0?r[Math.ceil(e)-1]:r.length%2===0?(r[e-1]+r[e])/2:r[e]}function Ss(r){var t=r.tickCount,e=r.values;if(!e||!e.length)return[];for(var a=e.slice().sort(function(o,l){return o-l}),i=[],n=0;n<t;n++){var s=n/(t-1);i.push(_s(a,s))}return i}function Ms(r){var t=r.min,e=r.max,a=r.tickCount,i=r.tickInterval,n=r.minLimit,s=r.maxLimit,o=Va(t,e,a).ticks;return!M(n)||!M(s)?nr(r,ct(o),K(o)):i?ir(t,e,i).ticks:o}function Ps(r){var t=r.min,e=r.max,a=r.minTickInterval,i=r.tickInterval,n=r.tickCount;if(i)n=Math.ceil((e-t)/i);else{i=Un(t,e,n)[1];var s=(e-t)/i,o=s/n;o>1&&(i=i*Math.ceil(o)),a&&i<a&&(i=a)}i=Math.max(Math.floor((e-t)/(Math.pow(2,12)-1)),i);for(var l=[],f=t;f<e+i;f+=i)l.push(f);return l}function Cs(r){var t=$a(Le({showLast:!0},r));return t}function ve(r){return new Date(r).getFullYear()}function ws(r){return new Date(r,0,1).getTime()}function He(r){return new Date(r).getMonth()}function bs(r,t){var e=ve(r),a=ve(t),i=He(r),n=He(t);return(a-e)*12+(n-i)%12}function Ts(r,t){return new Date(r,t,1).getTime()}function Ds(r,t){return Math.ceil((t-r)/nt)}function As(r,t){return Math.ceil((t-r)/St)}function Is(r,t){return Math.ceil((t-r)/(60*1e3))}function Es(r){var t=r.min,e=r.max,a=r.minTickInterval,i=r.tickCount,n=r.tickInterval,s=[];n||(n=(e-t)/i,a&&n<a&&(n=a)),n=Math.max(Math.floor((e-t)/(Math.pow(2,12)-1)),n);var o=ve(t);if(n>Ir)for(var l=ve(e),f=Math.ceil(n/Ir),h=o;h<=l+f;h=h+f)s.push(ws(h));else if(n>jt)for(var u=Math.ceil(n/jt),v=He(t),c=bs(t,e),h=0;h<=c+u;h=h+u)s.push(Ts(o,h+v));else if(n>nt)for(var g=new Date(t),d=g.getFullYear(),p=g.getMonth(),m=g.getDate(),_=Math.ceil(n/nt),C=Ds(t,e),h=0;h<C+_;h=h+_)s.push(new Date(d,p,m+h).getTime());else if(n>St)for(var g=new Date(t),d=g.getFullYear(),p=g.getMonth(),_=g.getDate(),S=g.getHours(),P=Math.ceil(n/St),w=As(t,e),h=0;h<=w+P;h=h+P)s.push(new Date(d,p,_,S+h).getTime());else if(n>_t)for(var I=Is(t,e),D=Math.ceil(n/_t),h=0;h<=I+D;h=h+D)s.push(t+h*_t);else{var L=n;L<J&&(L=J);for(var $=Math.floor(t/J)*J,ht=Math.ceil((e-t)/J),q=Math.ceil(L/J),h=0;h<ht+q;h=h+q)s.push($+h*J)}return s.length>=512&&console.warn("Notice: current ticks length("+s.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+n+") is too small, increase the value to solve the problem!"),s}j("cat",$a);j("time-cat",Cs);j("wilkinson-extended",ms);j("r-pretty",Ms);j("time",Ps);j("time-pretty",Es);j("log",ys);j("pow",xs);j("quantile",Ss);j("d3-linear",ns);it("cat",rr);it("category",rr);it("identity",es);it("linear",za);it("log",Jn);it("pow",Kn);it("time",Qn);it("timeCat",Zn);it("quantize",Xa);it("quantile",ts);const ja=function(r){var{values:t,tickCount:e}=r;if(!e||t.length<=1)return t;for(var a=parseInt(t.length/(e-1))||1,i=[],n=0;n<t.length;n=n+a)i.push(t[n]);var s=t[t.length-1];return i[i.length-1]!==s&&(i.length>=e?i[i.length-1]=s:i.push(s)),i};var xt=[1,1.2,1.5,2,2.2,2.4,2.5,3,4,5,6,7.5,8,10],Os=5;const ks=function(r){var{tickCount:t,tickInterval:e}=r||{},{min:a,max:i}=r||{};a=isNaN(a)?0:a,i=isNaN(i)?0:i;var n=t&&t>=2?t:Os,s=e||Ns({tickCount:n,max:i,min:a}),o=Math.floor(a/s)*s;if(e){var l=Math.abs(Math.ceil((i-o)/e))+1;n=Math.max(n,l)}var f=[],h=0,u=$e(s);if(a<0&&i>0&&n===2)return[se(o,u),se(Math.ceil(i/s)*s,u)];for(;h<n;)f.push(se(o+h*s,u)),h++;return f};var Ys=12;function Fr(r){r=Math.abs(r);var t=1;if(r===0)return t;if(r<1){for(var e=0;r<1;)t=t/10,r=r*10,e++;return t.toString().length>Ys&&(t=parseFloat(t.toFixed(e))),t}for(;r>10;)t=t*10,r=r/10;return t}function Ns(r){var{tickCount:t,min:e,max:a}=r;if(e===a)return 1*Fr(a);for(var i=(a-e)/(t-1),n=Fr(i),s=i/n,o=a/n,l=e/n,f=0,h=0;h<xt.length;h++){var u=xt[h];if(s<=u){f=h;break}}var v=e<0&&a>0&&t===2?xt[f]:Wa(f,t,l,o),c=$e(v)+$e(n);return se(v*n,c)}function Wa(r,t,e,a){for(var i=!1,n=xt[r],s=r;s<xt.length;s++)if(Fs({interval:xt[s],tickCount:t,max:a,min:e})){n=xt[s],i=!0;break}return i?n:10*Wa(0,t,e/10,a/10)}function Fs(r){var{interval:t,tickCount:e,max:a,min:i}=r,n=Math.floor(i/t)*t;return n+(e-1)*t>=a}function $e(r){var t=r.toString(),e=t.indexOf("."),a=t.indexOf("e-"),i=a>=0?parseInt(t.substr(a+2),10):t.substr(e+1).length;return i>20&&(i=20),i}function se(r,t){return parseFloat(r.toFixed(t))}var Ls=kt("linear"),Bs=kt("identity"),qa=kt("category"),Rs=kt("timeCat");j("cat",ja);j("time-cat",ja);j("wilkinson-extended",ks);dt.Linear=Ls;dt.Identity=Bs;dt.Category=qa;dt.Cat=qa;dt.TimeCat=Rs;function zs(r){if(!r.isPolar)return!1;var t=r.startAngle,e=r.endAngle;return!(!M(t)&&!M(e)&&e-t<Math.PI*2)}function Lr(r){Object.keys(r).forEach(function(t){delete r[t]})}class Gs{constructor(t){this.defs={},this.scales={},y(this,t)}setFieldDef(t,e){var{defs:a}=this;X(t)?y(a,t):a[t]=e,this.updateScales()}_getDef(t){var e=this.defs,a=null;return(b.scales[t]||e[t])&&(a=y({},b.scales[t]),x(e[t],function(i,n){M(i)?delete a[n]:a[n]=i})),a}_getDefaultType(t,e,a){if(a&&a.type)return a.type;var i="linear",n=Be(e,t);return T(n)&&(n=n[0]),N(n)&&(i="cat"),i}_getScaleDef(t,e,a,i){var n;i&&i.values?n=i.values:n=da(a,e);var s={field:e,values:n};if(t!=="cat"&&t!=="timeCat"){if(!i||!(i.min&&i.max)){var{min:o,max:l}=Je(n);s.min=o,s.max=l,s.nice=!0}}else s.isRounding=!1;return s}_adjustRange(t,e){var{range:a,values:i}=e;if(t==="linear"||a||!i)return e;var n=i.length;if(n===1)e.range=[.5,1];else{var{chart:s}=this,o=s.get("coord"),l=b.widthRatio.multiplePie,f=0;zs(o)?o.transposed?(f=1/n*l,e.range=[f/2,1-f/2]):e.range=[0,1-1/n]:(f=1/n*.5,e.range=[f,1-f])}return e}_getScaleCfg(t,e){var a=this,i=a._getDef(t);if(!e||!e.length)return i&&i.type?(i.field=t,{type:i.type,cfg:i}):{type:"identity",cfg:{value:t,field:t.toString(),values:[t]}};var n=e[0],s=n[t];if(s===null&&(s=Be(e,t)),R(t)||M(s)&&!i)return{type:"identity",cfg:{value:t,field:t.toString(),values:[t]}};var o=a._getDefaultType(t,e,i),l=a._getScaleDef(o,t,e,i);return i&&y(l,i),l=this._adjustRange(o,l),{type:o,cfg:l}}createScale(t,e){var{scales:a}=this,{type:i,cfg:n}=this._getScaleCfg(t,e),s=a[t];if(s&&s.type===i)return s.change(n),s;var o=kt(i),l=new o(n);return a[t]=l,l}_updateScale(t){var{field:e}=t,a=this.chart._getScaleData(e),{cfg:i}=this._getScaleCfg(e,a);t.change(i)}updateScales(){var t=this,{scales:e}=this;x(e,function(a){t._updateScale(a)})}adjustStartZero(t){var{defs:e}=this,{field:a,min:i,max:n}=t;e[a]&&e[a].min||(i>0?t.change({min:0}):n<0&&t.change({max:0}))}clear(){Lr(this.defs),Lr(this.scales),this.data=null}}class Ut{_initDefaultCfg(){this.ticks=[],this.tickLine={},this.offsetFactor=1,this.frontContainer=null,this.backContainer=null,this.gridPoints=[]}constructor(t){this._initDefaultCfg(),y(this,t),this.draw()}draw(){var{line:t,tickLine:e,label:a,grid:i}=this;i&&this.drawGrid(i),e&&this.drawTicks(e),t&&this.drawLine(t),a&&this.drawLabels()}drawTicks(t){var e=this,a=e.ticks,i=t.length,n=e.getContainer(t.top);x(a,function(s){var o=e.getOffsetPoint(s.value),l=e.getSidePoint(o,i),f=n.addShape("line",{className:"axis-tick",attrs:y({x1:o.x,y1:o.y,x2:l.x,y2:l.y},t)});f._id=e._id+"-ticks"})}drawLabels(){var t=this,e=t.labelOffset,a=t.labels;x(a,function(i){var n=t.getContainer(i.get("top")),s=t.getOffsetPoint(i.get("value")),{x:o,y:l}=t.getSidePoint(s,e);i.attr(y({x:o,y:l},t.getTextAlignInfo(s,e),i.get("textStyle"))),i._id=t._id+"-"+i.attr("text"),n.add(i)})}drawLine(){}drawGrid(t){var e=this,{gridPoints:a,ticks:i}=e,n=t,s=a.length;x(a,function(o,l){if(k(t)){var f=i[l]||{},h=t(f.text,l,s);n=h?y({},b._defaultAxis.grid,h):null}if(n){var u=n.type,v=o.points,c=e.getContainer(n.top),g;if(u==="arc"){var{center:d,startAngle:p,endAngle:m}=e,_=A.length([v[0].x-d.x,v[0].y-d.y]);g=c.addShape("Arc",{className:"axis-grid",attrs:y({x:d.x,y:d.y,startAngle:p,endAngle:m,r:_},n)})}else g=c.addShape("Polyline",{className:"axis-grid",attrs:y({points:v},n)});g._id=o._id}})}getOffsetPoint(){}getAxisVector(){}getOffsetVector(t,e){var a=this,i=a.getAxisVector(t),n=A.normalize([],i),s=a.offsetFactor,o=[n[1]*-1*s,n[0]*s];return A.scale([],o,e)}getSidePoint(t,e){var a=this,i=a.getOffsetVector(t,e);return{x:t.x+i[0],y:t.y+i[1]}}getTextAlignInfo(t,e){var a=this,i=a.getOffsetVector(t,e),n,s;return i[0]>0?n="left":i[0]<0?n="right":n="center",i[1]>0?s="top":i[1]<0?s="bottom":s="middle",{textAlign:n,textBaseline:s}}getContainer(t){var{frontContainer:e,backContainer:a}=this;return t?e:a}}let Xs=class extends Ut{_initDefaultCfg(){super._initDefaultCfg(),this.start=null,this.end=null}getOffsetPoint(t){var{start:e,end:a}=this;return{x:e.x+(a.x-e.x)*t,y:e.y+(a.y-e.y)*t}}getAxisVector(){var{start:t,end:e}=this;return[e.x-t.x,e.y-t.y]}drawLine(t){var e=this.getContainer(t.top),{start:a,end:i}=this;e.addShape("line",{className:"axis-line",attrs:y({x1:a.x,y1:a.y,x2:i.x,y2:i.y},t)})}};Ut.Line=Xs;function Hs(r){var t=r.slice(0);if(t.length>0){var e=t[0],a=t[t.length-1];e.value!==0&&t.unshift({value:0}),a.value!==1&&t.push({value:1})}return t}class $s{constructor(t){this.axisCfg={},this.frontPlot=null,this.backPlot=null,this.axes={},y(this,t)}_isHide(t){var e=this.axisCfg;return!e||e[t]===!1}_getLinePosition(t,e,a,i){var n="",s=t.field,o=this.axisCfg;return o[s]&&o[s].position?n=o[s].position:e==="x"?n=i?"left":"bottom":e==="y"&&(n=a?"right":"left",i&&(n="bottom")),n}_getLineCfg(t,e,a){var i,n,s=1;return e==="x"?(i={x:0,y:0},n={x:1,y:0}):a==="right"?(i={x:1,y:0},n={x:1,y:1}):(i={x:0,y:0},n={x:0,y:1},s=-1),t.transposed&&(s*=-1),{offsetFactor:s,start:t.convertPoint(i),end:t.convertPoint(n)}}_getCircleCfg(t){return{startAngle:t.startAngle,endAngle:t.endAngle,center:t.center,radius:t.circleRadius}}_getRadiusCfg(t){var e=t.transposed,a,i;return e?(a={x:0,y:0},i={x:1,y:0}):(a={x:0,y:0},i={x:0,y:1}),{offsetFactor:-1,start:t.convertPoint(a),end:t.convertPoint(i)}}_getAxisCfg(t,e,a,i,n){var s=this,o=this,l=this.axisCfg,f=e.getTicks(),h=F({ticks:f,frontContainer:this.frontPlot,backContainer:this.backPlot},n,l[e.field]),u=[],v=h.label,c=f.length,g=0,d=0,p=v;return x(f,function(m,_){if(k(v)){var C=v(m.text,_,c);p=C?y({},b._defaultAxis.label,C):null}if(p){var S={};p.textAlign&&(S.textAlign=p.textAlign),p.textBaseline&&(S.textBaseline=p.textBaseline);var P=p.top?s.frontPlot:s.backPlot,w=P.addShape("text",{className:"axis-label",aria:!1,attrs:y({x:0,y:0,text:m.text,fontFamily:o.chart.get("canvas").get("fontFamily")},p),value:m.value,textStyle:S,top:p.top,context:o.chart.get("canvas").get("context")});u.push(w);var{width:I,height:D}=w.getBBox();g=Math.max(g,I),d=Math.max(d,D)}}),h.labels=u,h.maxWidth=g,h.maxHeight=d,h}_createAxis(t,e,a,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",s=this,o=t.type,l=t.transposed,f,h,u;if(o==="cartesian"||o==="rect"){var v=s._getLinePosition(e,i,n,l);u=b.axis[v],u.position=v,f="Line",h=v}else i==="x"&&!l||i==="y"&&l?(u=b.axis.circle,f="Circle",h="circle"):(u=b.axis.radius,f="Line",h="radius");var c=s._getAxisCfg(t,e,a,i,u);c.type=f,c.dimType=i,c.verticalScale=a,c.index=n,this.axes[h]=c}createAxis(t,e,a){var i=this;e&&!i._isHide(e.field)&&i._createAxis(t,e,a[0],"x"),x(a,function(P,w){i._isHide(P.field)||i._createAxis(t,P,e,"y",w)});var n=this.axes,s=i.chart;if(s._isAutoPadding()){var o=V(s.get("padding")),l=V(s.get("appendPadding")),f=s.get("legendRange")||{top:0,right:0,bottom:0,left:0},h=[o[0]==="auto"?f.top+l[0]*2:o[0],o[1]==="auto"?f.right+l[1]:o[1],o[2]==="auto"?f.bottom+l[2]:o[2],o[3]==="auto"?f.left+l[3]:o[3]];if(t.isPolar){var u=n.circle;if(u){var{maxHeight:v,maxWidth:c,labelOffset:g}=u;h[0]+=v+g,h[1]+=c+g,h[2]+=v+g,h[3]+=c+g}}else{if(n.right&&o[1]==="auto"){var{maxWidth:d,labelOffset:p}=n.right;h[1]+=d+p}if(n.left&&o[3]==="auto"){var{maxWidth:m,labelOffset:_}=n.left;h[3]+=m+_}if(n.bottom&&o[2]==="auto"){var{maxHeight:C,labelOffset:S}=n.bottom;h[2]+=C+S}}s.set("_padding",h),s._updateLayout(h)}x(n,function(P){var{type:w,grid:I,verticalScale:D,ticks:L,dimType:$,position:ht,index:q}=P,U;if(t.isPolar?w==="Line"?U=i._getRadiusCfg(t):w==="Circle"&&(U=i._getCircleCfg(t)):U=i._getLineCfg(t,$,ht),I&&D){var Z=[],Ct=Hs(D.getTicks());x(L,function(Yt){var Nt=[];x(Ct,function(Ft){var wt=$==="x"?Yt.value:Ft.value,Q=$==="x"?Ft.value:Yt.value;if(wt>=0&&wt<=1&&Q>=0&&Q<=1){var cr=t.convertPoint({x:wt,y:Q});Nt.push(cr)}}),Z.push({points:Nt,_id:"axis-"+$+q+"-grid-"+Yt.tickValue})}),P.gridPoints=Z,t.isPolar&&(P.center=t.center,P.startAngle=t.startAngle,P.endAngle=t.endAngle)}U._id="axis-"+$,M(q)||(U._id="axis-"+$+q),new Ut[w](y(P,U))})}clear(){this.axes={},this.frontPlot.clear(),this.backPlot.clear()}}function Bt(r,t,e){return t=Vs(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Vs(r){var t=js(r,"string");return typeof t=="symbol"?t:String(t)}function js(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var Br=function(t,e){var a=e.x-t.x,i=e.y-t.y;return Math.abs(a)>Math.abs(i)?a>0?"right":"left":i>0?"down":"up"},Qt=function(t,e){var a=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return Math.sqrt(a*a+i*i)},Ws=function(t,e){var a=t.x+(e.x-t.x)/2,i=t.y+(e.y-t.y)/2;return{x:a,y:i}},Rr=250;class qs{constructor(t){var e=this,{canvas:a,el:i}=t;Bt(this,"_click",function(n){var s=At(n,e.canvas);n.points=s,e.emitEvent("click",n)}),Bt(this,"_start",function(n){var s=At(n,e.canvas);s&&(n.points=s,e.emitEvent("touchstart",n),e.reset(),e.startTime=Date.now(),e.startPoints=s,s.length>1?(e.startDistance=Qt(s[0],s[1]),e.center=Ws(s[0],s[1])):e.pressTimeout=setTimeout(function(){var o="press",l="none";n.direction=l,e.emitStart(o,n),e.emitEvent(o,n),e.eventType=o,e.direction=l},Rr))}),Bt(this,"_move",function(n){var s=At(n,e.canvas);if(s){e.clearPressTimeout(),n.points=s,e.emitEvent("touchmove",n);var o=e.startPoints;if(o)if(s.length>1){var l=e.startDistance,f=Qt(s[0],s[1]);n.zoom=f/l,n.center=e.center,e.emitStart("pinch",n),e.emitEvent("pinch",n)}else{var h=s[0].x-o[0].x,u=s[0].y-o[0].y,v=e.direction||Br(o[0],s[0]);e.direction=v;var c=e.getEventType(s);n.direction=v,n.deltaX=h,n.deltaY=u,e.emitStart(c,n),e.emitEvent(c,n);var g=e.lastMoveTime,d=Date.now();d-g>0&&(e.prevMoveTime=g,e.prevMovePoints=e.lastMovePoints,e.lastMoveTime=d,e.lastMovePoints=s)}}}),Bt(this,"_end",function(n){var s=At(n,e.canvas);n.points=s,e.emitEnd(n),e.emitEvent("touchend",n);var o=e.lastMoveTime,l=Date.now();if(l-o<100){var f=e.prevMoveTime||e.startTime,h=o-f;if(h>0){var u=e.prevMovePoints||e.startPoints,v=e.lastMovePoints,c=Qt(u[0],v[0])/h;c>.3&&(n.velocity=c,n.direction=Br(u[0],v[0]),e.emitEvent("swipe",n))}}e.reset();var g=n.touches;g&&g.length>0&&e._start(n)}),Bt(this,"_cancel",function(n){e.emitEvent("touchcancel",n),e.reset()}),this.canvas=a,this.delegateEvent(i),this.processEvent={}}delegateEvent(t){t.addEventListener("click",this._click),t.addEventListener("touchstart",this._start),t.addEventListener("touchmove",this._move),t.addEventListener("touchend",this._end),t.addEventListener("touchcancel",this._cancel)}emitEvent(t,e){var a=this.canvas;a.emit(t,e)}getEventType(t){var{eventType:e,canvas:a,startTime:i,startPoints:n}=this;if(e)return e;var s,o=a.__events.pan;if(!o||!o.length)s="press";else{var l=Date.now();l-i>Rr&&Qt(n[0],t[0])<10?s="press":s="pan"}return this.eventType=s,s}enable(t){this.processEvent[t]=!0}isProcess(t){return this.processEvent[t]}emitStart(t,e){this.isProcess(t)||(this.enable(t),this.emitEvent("".concat(t,"start"),e))}emitEnd(t){var e=this,a=this.processEvent;Object.keys(a).forEach(function(i){e.emitEvent("".concat(i,"end"),t),delete a[i]})}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=0)}reset(){this.clearPressTimeout(),this.startTime=0,this.startPoints=null,this.startDistance=0,this.direction=null,this.eventType=null,this.pinch=!1,this.prevMoveTime=0,this.prevMovePoints=null,this.lastMoveTime=0,this.lastMovePoints=null}}class Us extends er{constructor(t){super(),this.context=t,this.width=0,this.height=0,this.style={},this.currentStyle={},this.attrs={},this.isCanvasElement=!0}getContext(){return this.context}getBoundingClientRect(){var t=this.width,e=this.height;return{top:0,right:t,bottom:e,left:0}}setAttribute(t,e){this.attrs[t]=e}addEventListener(t,e){this.on(t,e)}removeEventListener(t,e){this.off(t,e)}dispatchEvent(t,e){this.emit(t,e)}}function Zs(r){if(!r||r.nodeType!==1||!r.nodeName||r.nodeName.toLowerCase()!=="canvas")return!1;var t=!1;try{r.addEventListener("eventTest",function(){t=!0}),r.dispatchEvent(new Event("eventTest"))}catch{t=!1}return t}const Js={create(r){return r?Zs(r.canvas)?r.canvas:new Us(r):null}};function Ks(r,t){return(r%t+t)%t}function Ua(r,t){x(r,function(e){e=e.split(":"),t.addColorStop(Number(e[0]),e[1])})}function Qs(r,t,e){var a=r.split(" "),i=a[0].slice(2,a[0].length-1);i=Ks(parseFloat(i)*Math.PI/180,Math.PI*2);var n=a.slice(1),{minX:s,minY:o,maxX:l,maxY:f}=t.getBBox(),h,u;i>=0&&i<.5*Math.PI?(h={x:s,y:o},u={x:l,y:f}):.5*Math.PI<=i&&i<Math.PI?(h={x:l,y:o},u={x:s,y:f}):Math.PI<=i&&i<1.5*Math.PI?(h={x:l,y:f},u={x:s,y:o}):(h={x:s,y:f},u={x:l,y:o});var v=Math.tan(i),c=v*v,g=(u.x-h.x+v*(u.y-h.y))/(c+1)+h.x,d=v*(u.x-h.x+v*(u.y-h.y))/(c+1)+h.y,p=e.createLinearGradient(h.x,h.y,g,d);return Ua(n,p),p}function to(r,t,e){var a=r.split(" "),i=a[0].slice(2,a[0].length-1);i=i.split(",");var n=parseFloat(i[0]),s=parseFloat(i[1]),o=parseFloat(i[2]),l=a.slice(1);if(o===0){var f=l[l.length-1];return f.split(":")[1]}var{width:h,height:u,minX:v,minY:c}=t.getBBox(),g=Math.sqrt(h*h+u*u)/2,d=e.createRadialGradient(v+h*n,c+u*s,o*g,v+h/2,c+u/2,g);return Ua(l,d),d}function eo(r,t,e){if(r[1]==="(")try{var a=r[0];if(a==="l")return Qs(r,t,e);if(a==="r")return to(r,t,e)}catch(i){console.error("error in parsing gradient string, please check if there are any extra whitespaces."),console.error(i)}return r}var ro={stroke:"strokeStyle",fill:"fillStyle",opacity:"globalAlpha"},ao=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","shadow"],io=["circle","sector","polygon","rect","polyline"];class Za{_initProperties(){this._attrs={zIndex:0,visible:!0,destroyed:!1}}constructor(t){this._initProperties(),y(this._attrs,t);var e=this._attrs.attrs;e&&this.initAttrs(e),this.initTransform()}get(t){return this._attrs[t]}set(t,e){this._attrs[t]=e}isGroup(){return this.get("isGroup")}isShape(){return this.get("isShape")}initAttrs(t){this.attr(y(this.getDefaultAttrs(),t))}getDefaultAttrs(){return{}}_setAttr(t,e){var a=this._attrs.attrs;if(t==="clip")e=this._setAttrClip(e);else{var i=ro[t];i&&(a[i]=e)}a[t]=e}_getAttr(t){return this._attrs.attrs[t]}_setAttrClip(t){return t&&io.indexOf(t._attrs.type)>-1?(t.get("canvas")===null&&(t=Object.assign({},t)),t.set("parent",this.get("parent")),t.set("context",this.get("context")),t):null}attr(t,e){var a=this;if(a.get("destroyed"))return null;var i=arguments.length;if(i===0)return a._attrs.attrs;if(X(t)){this._attrs.bbox=null;for(var n in t)a._setAttr(n,t[n]);return a._afterAttrsSet&&a._afterAttrsSet(),a}return i===2?(this._attrs.bbox=null,a._setAttr(t,e),a._afterAttrsSet&&a._afterAttrsSet(),a):a._getAttr(t)}getParent(){return this.get("parent")}draw(t){this.get("destroyed")||this.get("visible")&&(this.setContext(t),this.drawInner(t),this.restoreContext(t))}setContext(t){var e=this._attrs.attrs.clip;t.save(),e&&(e.resetTransform(t),e.createPath(t),t.clip()),this.resetContext(t),this.resetTransform(t)}restoreContext(t){t.restore()}resetContext(t){var e=this._attrs.attrs;for(var a in e)if(ao.indexOf(a)>-1){var i=e[a];(a==="fillStyle"||a==="strokeStyle")&&i&&(i=eo(i,this,t)),a==="lineDash"&&t.setLineDash&&T(i)?t.setLineDash(i):t[a]=i}}hasFill(){return this.get("canFill")&&this._attrs.attrs.fillStyle}hasStroke(){return this.get("canStroke")&&this._attrs.attrs.strokeStyle}drawInner(){}show(){return this.set("visible",!0),this}hide(){return this.set("visible",!1),this}isVisible(){return this.get("visible")}getAriaLabel(){var{destroyed:t,visible:e,isShape:a,aria:i}=this._attrs;if(!(t||!e||a&&!i))return this._getAriaLabel()}_getAriaLabel(){return this._attrs.ariaLabel}_removeFromParent(){var t=this.get("parent");if(t){var e=t.get("children");me(e,this)}return this}remove(t){t?this.destroy():this._removeFromParent()}destroy(){var t=this.get("destroyed");if(t)return null;this._removeFromParent(),this._attrs={},this.set("destroyed",!0)}getBBox(){return{minX:0,maxX:0,minY:0,maxY:0,width:0,height:0}}initTransform(){var t=this._attrs.attrs||{};t.matrix||(t.matrix=[1,0,0,1,0,0]),this._attrs.attrs=t}getMatrix(){return this._attrs.attrs.matrix}setMatrix(t){this._attrs.attrs.matrix=[t[0],t[1],t[2],t[3],t[4],t[5]]}transform(t){var e=this._attrs.attrs.matrix;return this._attrs.attrs.matrix=B.transform(e,t),this}setTransform(t){return this._attrs.attrs.matrix=[1,0,0,1,0,0],this.transform(t)}translate(t,e){var a=this._attrs.attrs.matrix;B.translate(a,a,[t,e])}rotate(t){var e=this._attrs.attrs.matrix;B.rotate(e,e,t)}scale(t,e){var a=this._attrs.attrs.matrix;B.scale(a,a,[t,e])}moveTo(t,e){var a=this._attrs.x||0,i=this._attrs.y||0;this.translate(t-a,e-i),this.set("x",t),this.set("y",e)}apply(t){var e=this._attrs.attrs.matrix;return A.transformMat2d(t,t,e),this}resetTransform(t){var e=this._attrs.attrs.matrix;B.isChanged(e)&&t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}isDestroyed(){return this.get("destroyed")}}class O extends Za{_initProperties(){this._attrs={zIndex:0,visible:!0,destroyed:!1,isShape:!0,attrs:{}}}getType(){return this._attrs.type}drawInner(t){var e=this,a=e.get("attrs");e.createPath(t);var i=t.globalAlpha;if(e.hasFill()){var n=a.fillOpacity;!M(n)&&n!==1?(t.globalAlpha=n,t.fill(),t.globalAlpha=i):t.fill()}if(e.hasStroke()){var s=a.lineWidth;if(s>0){var o=a.strokeOpacity;!M(o)&&o!==1&&(t.globalAlpha=o),t.stroke()}}}getBBox(){var t=this._attrs.bbox;return t||(t=this.calculateBox(),t&&(t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY),this._attrs.bbox=t),t}calculateBox(){return null}createPath(){}}function no(r,t,e){if(r=V(r),!r[0]&&!r[1]&&!r[2]&&!r[3])return r;var a=Math.max(r[0]+r[1],r[2]+r[3]),i=Math.max(r[0]+r[3],r[1]+r[2]),n=Math.min(t/a,e/i);return n<1?r.map(function(s){return s*n}):r}let sr=class extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="rect"}getDefaultAttrs(){return{x:0,y:0,width:0,height:0,radius:0,lineWidth:0}}createRadiusPath(t,e,a,i,n,s){s=no(s,i,n),t.moveTo(e+s[0],a),t.lineTo(e+i-s[1],a),t.arc(e+i-s[1],a+s[1],s[1],-Math.PI/2,0,!1),t.lineTo(e+i,a+n-s[2]),t.arc(e+i-s[2],a+n-s[2],s[2],0,Math.PI/2,!1),t.lineTo(e+s[3],a+n),t.arc(e+s[3],a+n-s[3],s[3],Math.PI/2,Math.PI,!1),t.lineTo(e,a+s[0]),t.arc(e+s[0],a+s[0],s[0],Math.PI,Math.PI*3/2,!1),t.closePath()}createPath(t){var e=this,a=e.get("attrs"),{x:i,y:n,width:s,height:o,radius:l}=a;t.beginPath(),!l||!(s*o)?t.rect(i,n,s,o):this.createRadiusPath(t,i,n,s,o,l)}calculateBox(){var t=this.get("attrs"),{x:e,y:a,width:i,height:n}=t;return{minX:e,minY:a,maxX:e+i,maxY:a+n}}};var Ae={};class so extends sr{_initProperties(){super._initProperties(),this._attrs.canFill=!1,this._attrs.canStroke=!1,this._attrs.loading=!1,this._attrs.image=null,this._attrs.type="image"}draw(t){var e=this;if(!this.get("loading")){var a=this.get("image");if(a){super.draw(t);return}var i=this.get("attrs"),{src:n}=i;if(n&&window.Image){var s=this.get("cacheImage");if(s&&Ae[n]){this.set("image",Ae[n]),this.draw(t);return}this.set("loading",!0);var o=new Image;o.crossOrigin="",o.onload=function(){e.set("loading",!1),e.set("image",o),e.draw(t)},o.src=n,s&&(Ae[n]=o)}}}createPath(t){var e=this.get("image");this.drawImage(t,e)}drawImage(t,e){var{attrs:a,destroyed:i}=this._attrs;if(!i){var{x:n,y:s,width:o,height:l,sx:f,sy:h,swidth:u,sheight:v,radius:c,fillOpacity:g}=a;c&&(t.save(),this.createRadiusPath(t,n,s,o,l,c),t.clip());var d=t.globalAlpha;M(g)||(t.globalAlpha=g),!M(f)&&!M(h)&&!M(u)&&!M(v)?t.drawImage(e,f,h,u,v,n,s,o,l):t.drawImage(e,n,s,o,l),t.globalAlpha=d,c&&t.restore()}}}let oo=class extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="circle"}getDefaultAttrs(){return{x:0,y:0,r:0,lineWidth:0}}createPath(t){var e=this.get("attrs"),{x:a,y:i,r:n}=e;t.beginPath(),t.arc(a,i,n,0,Math.PI*2,!1),t.closePath()}calculateBox(){var t=this.get("attrs"),{x:e,y:a,r:i}=t;return{minX:e-i,maxX:e+i,minY:a-i,maxY:a+i}}};var te=A.create(),ee=A.create(),re=A.create();function lo(r,t,e,a,i){var n=zr(i,r.x,t.x,e.x,a.x),s=zr(i,r.y,t.y,e.y,a.y);return{x:n,y:s}}function zr(r,t,e,a,i){var n=r*r,s=n*r;return t+(-t*3+r*(3*t-t*r))*r+(3*e+r*(-6*e+e*3*r))*r+(a*3-a*3*r)*n+i*s}function ho(r){for(var t=1/0,e=-1/0,a=1/0,i=-1/0,n={x:r[0],y:r[1]},s={x:r[2],y:r[3]},o={x:r[4],y:r[5]},l={x:r[6],y:r[7]},f=0;f<100;f++){var h=lo(n,s,o,l,f/100);h.x<t&&(t=h.x),h.x>e&&(e=h.x),h.y<a&&(a=h.y),h.y>i&&(i=h.y)}return{minX:t,minY:a,maxX:e,maxY:i}}function ce(r,t){if(r.length!==0){for(var e=r[0],a=e.x,i=e.x,n=e.y,s=e.y,o=r.length,l=1;l<o;l++)e=r[l],a=Math.min(a,e.x),i=Math.max(i,e.x),n=Math.min(n,e.y),s=Math.max(s,e.y);return t=t/2||0,{minX:a-t,minY:n-t,maxX:i+t,maxY:s+t}}}function fo(r,t,e,a,i){return i=i/2||0,{minX:Math.min(r,e)-i,minY:Math.min(t,a)-i,maxX:Math.max(r,e)+i,maxY:Math.max(t,a)+i}}function Ve(r,t,e,a,i,n){var s=Math.abs(a-i);if(s%(Math.PI*2)<1e-4&&s>1e-4)return{minX:r-e,minY:t-e,maxX:r+e,maxY:t+e};te[0]=Math.cos(a)*e+r,te[1]=Math.sin(a)*e+t,ee[0]=Math.cos(i)*e+r,ee[1]=Math.sin(i)*e+t;var o=[0,0],l=[0,0];if(A.min(o,te,ee),A.max(l,te,ee),a=a%(Math.PI*2),a<0&&(a=a+Math.PI*2),i=i%(Math.PI*2),i<0&&(i=i+Math.PI*2),a>i&&!n?i+=Math.PI*2:a<i&&n&&(a+=Math.PI*2),n){var f=i;i=a,a=f}for(var h=0;h<i;h+=Math.PI/2)h>a&&(re[0]=Math.cos(h)*e+r,re[1]=Math.sin(h)*e+t,A.min(o,re,o),A.max(l,re,l));return{minX:o[0],minY:o[1],maxX:l[0],maxY:l[1]}}function uo(r,t){for(var e=1/0,a=-1/0,i=1/0,n=-1/0,s=0,o=r.length;s<o;s++){var l=ho(r[s]);l.minX<e&&(e=l.minX),l.maxX>a&&(a=l.maxX),l.minY<i&&(i=l.minY),l.maxY>n&&(n=l.maxY)}return t=t/2||0,{minX:e-t,minY:i-t,maxX:a+t,maxY:n+t}}let vo=class extends O{_initProperties(){super._initProperties(),this._attrs.canStroke=!0,this._attrs.type="line"}getDefaultAttrs(){return{x1:0,y1:0,x2:0,y2:0,lineWidth:1}}createPath(t){var e=this.get("attrs"),{x1:a,y1:i,x2:n,y2:s}=e;t.beginPath(),t.moveTo(a,i),t.lineTo(n,s)}calculateBox(){var t=this.get("attrs"),{x1:e,y1:a,x2:i,y2:n,lineWidth:s}=t;return fo(e,a,i,n,s)}},co=class extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="polygon"}getDefaultAttrs(){return{points:null,lineWidth:0}}createPath(t){var e=this,a=e.get("attrs"),i=a.points;t.beginPath();for(var n=0,s=i.length;n<s;n++){var o=i[n];n===0?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y)}t.closePath()}calculateBox(){var t=this.get("attrs"),{points:e}=t;return ce(e)}};function bt(r){return[r.x,r.y]}function go(r,t,e,a){var i=[],n,s,o=!!a,l,f,h,u,v,c;if(o){for(l=[1/0,1/0],f=[-1/0,-1/0],c=0,v=r.length;c<v;c++)h=bt(r[c]),A.min(l,l,h),A.max(f,f,h);A.min(l,l,a[0]),A.max(f,f,a[1])}for(c=0,u=r.length;c<u;c++){if(h=bt(r[c]),e)n=bt(r[c?c-1:u-1]),s=bt(r[(c+1)%u]);else if(c===0||c===u-1){i.push([h[0],h[1]]);continue}else n=bt(r[c-1]),s=bt(r[c+1]);var g=A.sub([],s,n);A.scale(g,g,t);var d=A.distance(h,n),p=A.distance(h,s),m=d+p;m!==0&&(d/=m,p/=m);var _=A.scale([],g,-d),C=A.scale([],g,p),S=A.add([],h,_),P=A.add([],h,C);o&&(A.max(S,S,l),A.min(S,S,f),A.max(P,P,l),A.min(P,P,f)),i.push([S[0],S[1]]),i.push([P[0],P[1]])}return e&&i.push(i.shift()),i}function ge(r,t,e){for(var a=!!t,i=go(r,.4,a,e),n=r.length,s=[],o,l,f,h=0;h<n-1;h++)o=i[h*2],l=i[h*2+1],f=r[h+1],s.push(["C",o[0],o[1],l[0],l[1],f.x,f.y]);return a&&(o=i[n],l=i[n+1],f=r[0],s.push(["C",o[0],o[1],l[0],l[1],f.x,f.y])),s}function Gr(r){for(var t=[],e=0,a=r.length;e<a;e++){var i=r[e];!isNaN(i.x)&&!isNaN(i.y)&&t.push(i)}return t}class po extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="polyline"}getDefaultAttrs(){return{points:null,lineWidth:1,smooth:!1}}createPath(t){var e=this,a=e.get("attrs"),{points:i,smooth:n}=a,s=Gr(i);if(t.beginPath(),s.length)if(t.moveTo(s[0].x,s[0].y),n)for(var o=[[0,0],[1,1]],l=ge(s,!1,o),f=0,h=l.length;f<h;f++){var u=l[f];t.bezierCurveTo(u[1],u[2],u[3],u[4],u[5],u[6])}else{var v,c;for(v=1,c=s.length-1;v<c;v++)t.lineTo(s[v].x,s[v].y);t.lineTo(s[c].x,s[c].y)}}calculateBox(){var t=this.get("attrs"),{points:e,smooth:a,lineWidth:i}=t,n=Gr(e);if(n.length<=1)return ce(n,i);if(a){for(var s=[],o=[[0,0],[1,1]],l=ge(n,!1,o),f=0,h=l.length;f<h;f++){var u=l[f];if(f===0)s.push([n[0].x,n[0].y,u[1],u[2],u[3],u[4],u[5],u[6]]);else{var v=l[f-1];s.push([v[5],v[6],u[1],u[2],u[3],u[4],u[5],u[6]])}}return uo(s,i)}return ce(n,i)}}let mo=class extends O{_initProperties(){super._initProperties(),this._attrs.canStroke=!0,this._attrs.canFill=!0,this._attrs.type="arc"}getDefaultAttrs(){return{x:0,y:0,r:0,startAngle:0,endAngle:Math.PI*2,anticlockwise:!1,lineWidth:1}}createPath(t){var e=this.get("attrs"),{x:a,y:i,r:n,startAngle:s,endAngle:o,anticlockwise:l}=e;t.beginPath(),s!==o&&t.arc(a,i,n,s,o,l)}calculateBox(){var t=this.get("attrs"),{x:e,y:a,r:i,startAngle:n,endAngle:s,anticlockwise:o}=t;return Ve(e,a,i,n,s,o)}};class yo extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="sector"}getDefaultAttrs(){return{x:0,y:0,lineWidth:0,r:0,r0:0,startAngle:0,endAngle:Math.PI*2,anticlockwise:!1}}createPath(t){var e=this.get("attrs"),{x:a,y:i,startAngle:n,endAngle:s,r:o,r0:l,anticlockwise:f}=e;t.beginPath();var h=Math.cos(n),u=Math.sin(n);t.moveTo(h*l+a,u*l+i),t.lineTo(h*o+a,u*o+i),(Math.abs(s-n)>1e-4||n===0&&s<0)&&(t.arc(a,i,o,n,s,f),t.lineTo(Math.cos(s)*l+a,Math.sin(s)*l+i),l!==0&&t.arc(a,i,l,s,n,!f)),t.closePath()}calculateBox(){var t=this.get("attrs"),{x:e,y:a,r:i,r0:n,startAngle:s,endAngle:o,anticlockwise:l}=t,f=Ve(e,a,i,s,o,l),h=Ve(e,a,n,s,o,l);return{minX:Math.min(f.minX,h.minX),minY:Math.min(f.minY,h.minY),maxX:Math.max(f.maxX,h.maxX),maxY:Math.max(f.maxY,h.maxY)}}}var xo={calcRotatedBox(r){var{width:t,height:e,rotate:a}=r,i=Math.abs(a);return{width:Math.abs(t*Math.cos(i)+e*Math.sin(i)),height:Math.abs(e*Math.cos(i)+t*Math.sin(i))}}},Ie=0,ae={},_o=5e3;let So=class extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="text"}getDefaultAttrs(){return{lineWidth:0,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null}}_getFontStyle(){var t=this._attrs.attrs,{fontSize:e,fontFamily:a,fontWeight:i,fontStyle:n,fontVariant:s}=t;return"".concat(n," ").concat(s," ").concat(i," ").concat(e,"px ").concat(a)}_afterAttrsSet(){var t=this._attrs.attrs;if(t.font=this._getFontStyle(),t.text){var e=t.text,a=null,i=1;N(e)&&e.indexOf(`
`)!==-1&&(a=e.split(`
`),i=a.length),t.lineCount=i,t.textArr=a}this.set("attrs",t)}_getTextHeight(){var t=this._attrs.attrs;if(t.height)return t.height;var e=t.lineCount,a=t.fontSize*1;if(e>1){var i=this._getSpaceingY();return a*e+i*(e-1)}return a}_getSpaceingY(){var t=this._attrs.attrs,e=t.lineHeight,a=t.fontSize*1;return e?e-a:a*.14}drawInner(t){var e=this,a=e._attrs.attrs,i=a.text,n=a.x,s=a.y;if(!(M(i)||isNaN(n)||isNaN(s))){var o=a.textArr,l=a.fontSize*1,f=e._getSpaceingY();a.rotate&&(t.translate(n,s),t.rotate(a.rotate),n=0,s=0);var h=a.textBaseline,u;o&&(u=e._getTextHeight());var v;if(e.hasFill()){var c=a.fillOpacity;if(!M(c)&&c!==1&&(t.globalAlpha=c),o)for(var g=0,d=o.length;g<d;g++){var p=o[g];v=s+g*(f+l)-u+l,h==="middle"&&(v+=u-l-(u-l)/2),h==="top"&&(v+=u-l),t.fillText(p,n,v)}else t.fillText(i,n,s)}if(e.hasStroke())if(o)for(var m=0,_=o.length;m<_;m++){var C=o[m];v=s+m*(f+l)-u+l,h==="middle"&&(v+=u-l-(u-l)/2),h==="top"&&(v+=u-l),t.strokeText(C,n,v)}else t.strokeText(i,n,s)}}_getAriaLabel(){return this._attrs.attrs.text}calculateBox(){var t=this,e=t._attrs.attrs,{x:a,y:i,textAlign:n,textBaseline:s}=e,o=t._getTextWidth();if(!o)return{minX:a,minY:i,maxX:a,maxY:i};var l=t._getTextHeight();if(e.rotate){var f=xo.calcRotatedBox({width:o,height:l,rotate:e.rotate});o=f.width,l=f.height}var h={x:a,y:i-l};return n&&(n==="end"||n==="right"?h.x-=o:n==="center"&&(h.x-=o/2)),s&&(s==="top"?h.y+=l:s==="middle"&&(h.y+=l/2)),{minX:h.x,minY:h.y,maxX:h.x+o,maxY:h.y+l}}_getTextWidth(){var t=this._attrs.attrs;if(t.width)return t.width;var e=t.text,a=this.get("context");if(!M(e)){var i=t.font,n=t.textArr,s=e+""+i;if(ae[s])return ae[s];var o=0;if(n)for(var l=0,f=n.length;l<f;l++){var h=n[l];o=Math.max(o,ze(h,i,a).width)}else o=ze(e,i,a).width;return Ie>_o&&(Ie=0,ae={}),Ie++,ae[s]=o,o}}};class Mo extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.createPath=null,this._attrs.type="custom"}createPath(t){var e=this.get("createPath");e&&e.call(this,t)}calculateBox(){var t=this.get("calculateBox");return t&&t.call(this)}}var Po={circle(r,t,e,a){a.arc(r,t,e,0,Math.PI*2,!1)},square(r,t,e,a){a.moveTo(r-e,t-e),a.lineTo(r+e,t-e),a.lineTo(r+e,t+e),a.lineTo(r-e,t+e),a.closePath()}};class Co extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="marker"}getDefaultAttrs(){return{x:0,y:0,lineWidth:0}}createPath(t){var e=this.get("attrs"),{x:a,y:i,radius:n}=e,s=e.symbol||"circle",o;k(s)?o=s:o=Po[s],t.beginPath(),o(a,i,n,t,this)}calculateBox(){var t=this.get("attrs"),{x:e,y:a,radius:i}=t;return{minX:e-i,minY:a-i,maxX:e+i,maxY:a+i}}}O.Rect=sr;O.Image=so;O.Circle=oo;O.Line=vo;O.Polygon=co;O.Polyline=po;O.Arc=mo;O.Sector=yo;O.Text=So;O.Custom=Mo;O.Marker=Co;var Xr={},je="_INDEX";function wo(r){return function(t,e){var a=r(t,e);return a===0?t[je]-e[je]:a}}const Ja={getGroupClass(){},getChildren(){return this.get("children")},addShape(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=Xr[r];e||(e=lt(r),Xr[r]=e);var a=new O[e](t);return this.add(a),a},addGroup(r){var t=this.getGroupClass(),e=new t(r);return this.add(e),e},contain(r){var t=this.get("children");return t.indexOf(r)>-1},sort(){for(var r=this.get("children"),t=0,e=r.length;t<e;t++){var a=r[t];a[je]=t}return r.sort(wo(function(i,n){return i.get("zIndex")-n.get("zIndex")})),this},drawChildren(r){for(var t=this.get("children"),e=0,a=t.length;e<a;e++){var i=t[e];i.draw(r)}return this},clear(){for(var r=this.get("children");r.length!==0;)r[r.length-1].remove(!0);return this},add(r){var t=this,e=t.get("children");T(r)||(r=[r]);for(var a=0,i=r.length;a<i;a++){var n=r[a],s=n.get("parent");if(s){var o=s.get("children");me(o,n)}t._setEvn(n),e.push(n)}return t},_setEvn(r){var t=this,{context:e,canvas:a,aria:i}=t._attrs,{isGroup:n,type:s}=r._attrs;r._attrs.parent=t,r._attrs.context=e,r._attrs.canvas=a,i&&r._attrs.aria!==!1&&(r._attrs.aria=i),s==="text"&&a&&a.get("fontFamily")&&(r._attrs.attrs.fontFamily=r._attrs.attrs.fontFamily||a.get("fontFamily"));var o=r._attrs.attrs.clip;if(o&&(o._attrs.parent=t,o._attrs.context=e,o._attrs.canvas=a),n)for(var l=r._attrs.children,f=0,h=l.length;f<h;f++)r._setEvn(l[f])},_getAriaLabel(){var{aria:r,ariaLabel:t,children:e}=this._attrs;if(r){var a=[];if(e&&e.length)for(var i=0,n=e.length;i<n;i++){var s=e[i].getAriaLabel();s&&a.push(s)}var o=a.join(" ");return t&&o?"".concat(t," ").concat(o," "):t||o}}};class Et extends sr{_initProperties(){this._attrs={type:"group",zIndex:0,visible:!0,destroyed:!1,isGroup:!0,canFill:!0,canStroke:!0,attrs:{},children:[]}}getBBox(){for(var t=this,e=1/0,a=-1/0,i=1/0,n=-1/0,s=t.get("children"),o=0,l=s.length;o<l;o++){var f=s[o];if(f.get("visible")){var h=f.getBBox();if(!h)continue;var u=[h.minX,h.minY],v=[h.minX,h.maxY],c=[h.maxX,h.minY],g=[h.maxX,h.maxY],d=f.attr("matrix");A.transformMat2d(u,u,d),A.transformMat2d(v,v,d),A.transformMat2d(c,c,d),A.transformMat2d(g,g,d),e=Math.min(u[0],v[0],c[0],g[0],e),a=Math.max(u[0],v[0],c[0],g[0],a),i=Math.min(u[1],v[1],c[1],g[1],i),n=Math.max(u[1],v[1],c[1],g[1],n)}}return{minX:e,minY:i,maxX:a,maxY:n,x:e,y:i,width:a-e,height:n-i}}createPath(t){var e=this.get("attrs");!e.fillStyle&&!e.strokeStyle||super.createPath(t)}drawInner(t){super.drawInner(t),this.drawChildren(t)}destroy(){this.get("destroyed")||(this.clear(),super.destroy())}}y(Et.prototype,Ja,{getGroupClass(){return Et}});var We=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame:function(r){return setTimeout(r,16)};class or extends er{get(t){return this._attrs[t]}set(t,e){this._attrs[t]=e}constructor(t){super();var{title:e}=t,a=e?st(rt.general.withTitle,{title:e}):rt.general.title;this._attrs=y({type:"canvas",children:[],ariaLabel:a},t),this._initPixelRatio(),this._initCanvas()}_initPixelRatio(){var t=this.get("pixelRatio");t||this.set("pixelRatio",_a())}beforeDraw(){var t=this._attrs.context,e=this._attrs.el;t&&t.clearRect&&t.clearRect(0,0,e.width,e.height)}_initCanvas(){var t=this,e=t.get("el"),a=t.get("context");if(!e&&!a)throw new Error("Please specify the id, el or context of the chart!");var i;e?i=N(e)?Sa(e):e:i=Js.create(a),a&&i&&!i.getContext&&(i.getContext=function(){return a});var n=t.get("width");n||(n=Ke(i));var s=t.get("height");s||(s=Qe(i)),t.set("canvas",this),t.set("el",i),t.set("context",a||i.getContext("2d")),t.changeSize(n,s);var o=new qs({canvas:this,el:i});t.set("eventController",o)}changeSize(t,e){var a=this.get("pixelRatio"),i=this.get("el");if(i.style&&(i.style.width=t+"px",i.style.height=e+"px"),xa(i)&&(i.width=t*a,i.height=e*a,a!==1)){var n=this.get("context");n.scale(a,a)}this.set("width",t),this.set("height",e)}getWidth(){var t=this.get("pixelRatio"),e=this.get("width");return e*t}getHeight(){var t=this.get("pixelRatio"),e=this.get("height");return e*t}getPointByClient(t,e){var a=this.get("el"),i=a.getBoundingClientRect(),n=i.right-i.left,s=i.bottom-i.top;return{x:(t-i.left)*(a.width/n),y:(e-i.top)*(a.height/s)}}_beginDraw(){this._attrs.toDraw=!0}_endDraw(){this._attrs.toDraw=!1}draw(){var t=this;function e(){t.set("animateHandler",We(function(){t.set("animateHandler",void 0),t.get("toDraw")&&e()})),t.beforeDraw();try{var a=t._attrs.context;t.drawChildren(a),a.draw&&a.draw(),t.setAriaLabel()}catch(i){console.warn("error in draw canvas, detail as:"),console.warn(i),t._endDraw()}t._endDraw()}t.get("destroyed")||(t.get("animateHandler")?this._beginDraw():e())}setAriaLabel(){var{el:t}=this._attrs,e=this._getAriaLabel();e&&t.setAttribute&&t.setAttribute("aria-label",e)}destroy(){if(!this.get("destroyed")){var t=this.get("el");t.width=0,t.height=0,this.clear(),this._attrs={},this.set("destroyed",!0)}}isDestroyed(){return this.get("destroyed")}}y(or.prototype,Ja,{getGroupClass(){return Et}});var Ka={};function bo(r,t){Ka[r]=t}function Qa(r){var t=Ka[r];return t||{Canvas:or,Group:Et,Shape:O}}function ti(r){var{renderer:t}=r,e=Qa(t);return new e.Canvas(r)}const To=Object.freeze(Object.defineProperty({__proto__:null,Canvas:or,Group:Et,Matrix:B,Shape:O,Vector2:A,createCanvas:ti,getEngine:Qa,registerEngine:bo},Symbol.toStringTag,{value:"Module"}));function lr(r){var t=r.start,e=r.end,a=e.x-t.x,i=Math.abs(e.y-t.y),n=10,s;if(r.isPolar){var{circleRadius:o,center:l,startAngle:f,endAngle:h}=r;s=new O.Sector({attrs:{x:l.x,y:l.y,r:o,r0:0,startAngle:f,endAngle:h}})}else s=new O.Rect({attrs:{x:t.x,y:e.y-n,width:a,height:i+2*n}});return s.isClip=!0,s}function qe(r,t){var{x:e,y:a}=r,{tl:i,tr:n,br:s}=t;return e>=i.x&&e<=n.x&&a>=i.y&&a<=s.y}const Do=Object.freeze(Object.defineProperty({__proto__:null,getClip:lr,isPointInPlot:qe},Symbol.toStringTag,{value:"Module"}));function Hr(r,t){return r-t}function Ao(r,t){var e=!1;return x(r,function(a){var i=[].concat(a.values),n=[].concat(t.values);if(a.type===t.type&&a.field===t.field&&i.sort(Hr).toString()===n.sort(Hr).toString()){e=!0;return}}),e}class E extends Ca{static initPlugins(){return{_plugins:[],_cacheId:0,register(t){var e=this._plugins;[].concat(t).forEach(function(a){e.indexOf(a)===-1&&e.push(a)}),this._cacheId++},unregister(t){var e=this._plugins;[].concat(t).forEach(function(a){var i=e.indexOf(a);i!==-1&&e.splice(i,1)}),this._cacheId++},clear(){this._plugins=[],this._cacheId++},count(){return this._plugins.length},getAll(){return this._plugins},notify(t,e,a){var i=this.descriptors(t),n=i.length,s,o,l,f,h;for(s=0;s<n;++s)if(o=i[s],l=o.plugin,h=l[e],typeof h=="function"&&(f=[t].concat(a||[]),h.apply(l,f)===!1))return!1;return!0},descriptors(t){var e=t._plugins||(t._plugins={});if(e.id===this._cacheId)return e.descriptors;var a=[],i=[];return this._plugins.concat(t&&t.get("plugins")||[]).forEach(function(n){var s=a.indexOf(n);s===-1&&(a.push(n),i.push({plugin:n}))}),e.descriptors=i,e.id=this._cacheId,i}}}getDefaultCfg(){return{id:null,renderer:"canvas",rendered:!1,padding:b.padding,data:null,scales:{},geoms:[],colDefs:null,pixelRatio:b.pixelRatio,filters:null,appendPadding:b.appendPadding}}_syncYScales(){var t=this.get("syncY");if(t){var e=this.get("geoms"),a=[],i=[],n=[];x(e,function(s){var o=s.getYScale();o.isLinear&&(a.push(o),i.push(o.min),n.push(o.max))}),i=Math.min.apply(null,i),n=Math.max.apply(null,n),x(a,function(s){s.change({min:i}),s.change({max:n})})}}_getFieldsForLegend(){var t=[],e=this.get("geoms");return x(e,function(a){var i=a.get("attrOptions"),n=i.color;if(n&&n.field&&N(n.field)){var s=n.field.split("*");x(s,function(o){t.indexOf(o)===-1&&t.push(o)})}}),t}_getScaleData(t){var e=this.get("data"),a=this.get("filteredData");if(a.length){var i=this._getFieldsForLegend();i.indexOf(t)===-1&&(e=a)}return e}_adjustScale(){for(var t=this,e=t.get("scaleController"),a=this.get("geoms"),i=0;i<a.length;i++){var n=a[i];if(n.get("type")==="interval"){var s=n.getYScale();e.adjustStartZero(s)}}}_removeGeoms(){for(var t=this.get("geoms");t.length>0;){var e=t.shift();e.destroy()}}_clearGeoms(){for(var t=this.get("geoms"),e=0,a=t.length;e<a;e++){var i=t[e];i.clear()}}_clearInner(){this._clearGeoms(),E.plugins.notify(this,"clearInner"),this.emit(mn),this.get("axisController")&&this.get("axisController").clear()}_initFilteredData(){var t=this.get("filters"),e=this.get("data")||[];t&&(e=e.filter(function(a){var i=!0;return x(t,function(n,s){if(n&&(i=n(a[s],a),!i))return!1}),i})),this.set("filteredData",e)}_changeGeomsData(){for(var t=this.get("geoms"),e=this.get("filteredData"),a=0,i=t.length;a<i;a++){var n=t[a];n.changeData(e)}}_initGeom(t){if(!t.get("isInit")){var e=this.get("coord"),a=this.get("filteredData"),i=this.get("colDefs"),n=this.get("middlePlot");t.set("chart",this),t.set("container",n.addGroup()),t.set("data",a),t.set("coord",e),t.set("colDefs",i),t.init(),this.emit(cn,t)}}_initGeoms(){for(var t=this.get("geoms"),e=0,a=t.length;e<a;e++)this._initGeom(t[e])}_initCoord(){var t=this.get("plotRange"),e=y({type:"cartesian"},this.get("coordCfg"),{plot:t}),a=e.type,i=Ot[lt(a)],n=new i(e);this.set("coord",n)}_initLayout(){var t=this.get("_padding");t||(t=this.get("margin")||this.get("padding"),t=V(t));var e=t[0]==="auto"?0:t[0],a=t[1]==="auto"?0:t[1],i=t[2]==="auto"?0:t[2],n=t[3]==="auto"?0:t[3],s=this.get("width"),o=this.get("height"),l={x:n,y:e},f={x:s-a,y:o-i},h=this.get("plot");if(h){h.reset(l,f);return}var u=new xn({start:l,end:f});this.set("plotRange",u),this.set("plot",u)}_initCanvas(){var t=this;try{var e=ti({renderer:t.get("renderer"),el:t.get("el")||t.get("id"),context:t.get("context"),pixelRatio:t.get("pixelRatio"),width:t.get("width"),height:t.get("height"),fontFamily:b.fontFamily,aria:t.get("aria"),title:t.get("title"),landscape:t.get("landscape")});t.set("canvas",e),t.set("el",e.get("el")),t.set("width",e.get("width")),t.set("height",e.get("height"))}catch(a){throw a}E.plugins.notify(t,"afterCanvasInit")}_initLayers(){var t=this.get("canvas");this.set("backPlot",t.addGroup()),this.set("middlePlot",t.addGroup({zIndex:10})),this.set("frontPlot",t.addGroup({zIndex:20}))}_initEvents(){var t=this;this.on($t,function(){t._initFilteredData(),t._changeGeomsData()}),this.on(Xe,function(){t._initLayout();var e=t.get("coord");e&&e.reset(t.get("plot"))})}_initScaleController(){var t=new Gs({chart:this});this.set("colDefs",t.defs),this.set("scales",t.scales),this.set("scaleController",t)}_clearScaleController(){var t=this.get("scaleController");t.clear()}_init(){var t=this;t._initCanvas(),t._initLayout(),t._initLayers(),t._initEvents(),t._initScaleController(),t.set("axisController",new $s({frontPlot:t.get("frontPlot").addGroup({className:"axisContainer"}),backPlot:t.get("backPlot").addGroup({className:"axisContainer"}),chart:t})),E.plugins.notify(t,"init")}constructor(t){super(t);var e=this;x(H,function(a,i){var n=la(i);e[n]=function(s){var o=new a(s);return e.addGeom(o),o}}),e._init()}init(){this._initFilteredData(),this._initCoord(),E.plugins.notify(this,"beforeGeomInit"),this._initGeoms(),this._syncYScales(),this._adjustScale(),this.emit(Ge)}source(t,e){return this.set("data",t),e&&this.scale(e),this}scale(t,e){var a=this.get("scaleController");return a.setFieldDef(t,e),this}axis(t,e){var a=this.get("axisController");return t?(a.axisCfg=a.axisCfg||{},a.axisCfg[t]=e):a.axisCfg=null,this}coord(t,e){var a;return X(t)?a=t:(a=e||{},a.type=t||"cartesian"),this.set("coordCfg",a),this}filter(t,e){var a=this.get("filters")||{};a[t]=e,this.set("filters",a),this.get("rendered")&&this.emit($t,this.get("data"))}render(){var t=this.get("rendered"),e=this.get("canvas"),a=this.get("geoms");t?(this._initGeoms(),this._adjustScale()):(this.init(),this.set("rendered",!0)),this.emit(fn),E.plugins.notify(this,"beforeGeomDraw"),this._renderAxis();var i=this.get("middlePlot");if(this.get("limitInPlot")&&!i.attr("clip")){var n=this.get("coord"),s=lr(n);s.set("canvas",i.get("canvas")),i.attr("clip",s)}this.emit(gn);for(var o=0,l=a.length;o<l;o++){var f=a[o];f.paint()}return this.emit(dn),E.plugins.notify(this,"afterGeomDraw"),e.sort(),this.get("frontPlot").sort(),E.plugins.notify(this,"beforeCanvasDraw"),e.draw(),this.emit(un),this}clear(){E.plugins.notify(this,"clear"),this.emit(pn),this._clearInner(),this._removeGeoms(),this._clearScaleController(),this.set("legendItems",null),this.set("filters",null),this.set("isUpdate",!1),this.set("_padding",null),this.set("rendered",!1);var t=this.get("canvas");return t.draw(),this}repaint(){var t=this.get("rendered");t&&(this.set("isUpdate",!0),this.set("legendItems",null),E.plugins.notify(this,"repaint"),this._clearInner(),this.emit(yn),this.render())}changeData(t){this.emit(vn,t),this.set("data",t),E.plugins.notify(this,"changeData"),this.emit($t,t),this.set("_padding",null),this.repaint()}changeSize(t,e){t?this.set("width",t):t=this.get("width"),e?this.set("height",e):e=this.get("height");var a=this.get("canvas");return a.changeSize(t,e),this.emit(Xe,{width:t,height:e}),this.repaint(),this}destroy(){this.clear();var t=this.get("canvas");t.destroy(),E.plugins.notify(this,"afterCanvasDestroyed"),this._interactions&&x(this._interactions,function(e){e.destroy()}),super.destroy()}getPosition(t){for(var e=this,a=e.get("coord"),i=e.getXScale(),n=i.field,s=e.getYScales(),o=s[0],l=o.field,f=0,h=s.length;f<h;f++){var u=s[f],v=u.field;if(t[v]){o=u,l=v;break}}var c=i.scale(t[n]),g=o.scale(t[l]);return a.convertPoint({x:c,y:g})}getRecord(t){var e=this,a=e.get("coord"),i=e.getXScale(),n=e.getYScales()[0],s=a.invertPoint(t),o={};return o[i.field]=i.invert(s.x),o[n.field]=n.invert(s.y),o}getSnapRecords(t){var e=this.get("geoms")[0],a=[];return e&&(a=e.getSnapRecords(t)),a}createScale(t){var e=this._getScaleData(t),a=this.get("scaleController");return a.createScale(t,e)}addGeom(t){var e=this.get("geoms");e.push(t)}getXScale(){var t=this,e=t.get("geoms"),a=e[0].getXScale();return a}getYScales(){var t=this.get("geoms"),e=[];return x(t,function(a){var i=a.getYScale();e.indexOf(i)===-1&&e.push(i)}),e}getLegendItems(){if(this.get("legendItems"))return this.get("legendItems");var t={},e=[],a=this.get("geoms");return x(a,function(i){var n=i.getAttr("color");if(n){var s=n.getScale("color");if(s.isCategory&&!Ao(e,s)){e.push(s);var o=s.field,l=s.getTicks(),f=[];x(l,function(h){var u=h.text,v=u,c=h.value,g=s.invert(c),d=n.mapping(g).join("")||b.defaultColor,p={fill:d,radius:3,symbol:"circle",stroke:"#fff"};f.push({name:v,dataValue:g,checked:!0,marker:p})}),t[o]=f}}}),this.set("legendItems",t),t}registerPlugins(t){var e=this,a=e.get("plugins")||[];T(a)||(a=[a]),[].concat(t).forEach(function(i){a.indexOf(i)===-1&&(i.init&&i.init(e),a.push(i))}),E.plugins._cacheId++,e.set("plugins",a)}_renderAxis(){var t=this.get("axisController"),e=this.getXScale(),a=this.getYScales(),i=this.get("coord");E.plugins.notify(this,"beforeRenderAxis"),t.createAxis(i,e,a)}_isAutoPadding(){if(this.get("_padding"))return!1;var t=this.get("padding");return T(t)?t.indexOf("auto")!==-1:t==="auto"}_updateLayout(t){var e=this.get("width"),a=this.get("height"),i={x:t[3],y:t[0]},n={x:e-t[1],y:a-t[2]},s=this.get("plot"),o=this.get("coord");s.reset(i,n),o.reset(s)}landscape(t){var e=this.get("canvas");e.set("landscape",t)}}E.plugins=E.initPlugins();var Io=function(){return null};b.version;function ei(r){var t=[],e=r.x,a=r.y;return a=T(a)?a:[a],a.forEach(function(i,n){var s={x:T(e)?e[n]:e,y:i};t.push(s)}),t}function ri(r,t,e){if(!r.length)return[];var a=[],i=[],n;return x(r,function(s){n=s._origin?s._origin[t]:s[t],e?M(n)||i.push(s):T(n)&&M(n[0])||M(n)?i.length&&(a.push(i),i=[]):i.push(s)}),i.length&&a.push(i),a}var Eo=["circle","hollowCircle","rect"];Y.registerFactory("point",{defaultShapeType:"circle",getDefaultPoints(r){return ei(r)}});function Oo(r){var t={lineWidth:0,stroke:r.color,fill:r.color};return r.size&&(t.size=r.size),y(t,r.style),y({},b.shape.point,t)}function ko(r,t,e){if(r.size!==0){var a=Oo(r),i=a.r||a.size,n=r.x,s=T(r.y)?r.y:[r.y];e==="hollowCircle"&&(a.lineWidth=1,a.fill=null);for(var o=0,l=s.length;o<l;o++)return e==="rect"?t.addShape("Rect",{className:"point",attrs:y({x:n-i,y:s[o]-i,width:i*2,height:i*2},a)}):t.addShape("Circle",{className:"point",attrs:y({x:n,y:s[o],r:i},a)})}}x(Eo,function(r){Y.registerShape("point",r,{draw(t,e){return ko(t,e,r)}})});let Yo=class extends H{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="point",t.shapeType="point",t.generatePoints=!1,t}draw(t,e){var a=this,i=a.get("container");x(t,function(n){var s=n.shape,o=a.getDrawCfg(n);if(T(n.y)){var l=a.hasAdjust("stack");x(n.y,function(f,h){o.y=f,(!l||h!==0)&&a.drawShape(s,n,o,i,e)})}else M(n.y)||a.drawShape(s,n,o,i,e)})}};H.Point=Yo;Y.registerFactory("line",{defaultShapeType:"line"});function No(r){var t={strokeStyle:r.color};return r.size>=0&&(t.lineWidth=r.size),y(t,r.style),y({},b.shape.line,t)}function Fo(r,t,e,a){var i=r.points;if(i.length&&T(i[0].y)){for(var n=[],s=[],o=0,l=i.length;o<l;o++){var f=i[o],h=ei(f);s.push(h[0]),n.push(h[1])}if(r.isInCircle&&(n.push(n[0]),s.push(s[0])),r.isStack)return t.addShape("Polyline",{className:"line",attrs:y({points:n,smooth:a},e)});var u=t.addShape("Polyline",{className:"line",attrs:y({points:n,smooth:a},e)}),v=t.addShape("Polyline",{className:"line",attrs:y({points:s,smooth:a},e)});return[u,v]}return r.isInCircle&&i.push(i[0]),t.addShape("Polyline",{className:"line",attrs:y({points:i,smooth:a},e)})}var Lo=["line","smooth","dash"];x(Lo,function(r){Y.registerShape("line",r,{draw(t,e){var a=r==="smooth",i=No(t);return r==="dash"&&(i.lineDash=b.lineDash),Fo(t,e,i,a)}})});class ai extends H{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="path",t.shapeType="line",t}getDrawCfg(t){var e=super.getDrawCfg(t);return e.isStack=this.hasAdjust("stack"),e}draw(t,e){var a=this,i=a.get("container"),n=a.getYScale(),s=a.get("connectNulls"),o=ri(t,n.field,s),l=this.getDrawCfg(t[0]);l.origin=t,x(o,function(f,h){l.splitedIndex=h,l.points=f,a.drawShape(l.shape,t[0],l,i,e)})}}H.Path=ai;let Bo=class extends ai{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="line",t.sortable=!0,t}};H.Line=Bo;function $r(r,t){return Math.abs(r-t)<1e-5}function Vr(r){return!isNaN(r)&&!M(r)}function jr(r){for(var t=[],e=0,a=r.length;e<a;e++){var i=r[e];Vr(i.x)&&Vr(i.y)&&t.push(i)}return t}function Ro(r,t){var e=!0;return x(r,function(a){if(!$r(a.x,t.x)||!$r(a.y,t.y))return e=!1,!1}),e}function zo(r,t,e,a,i){var n,s=r.concat(t);return i?n=e.addShape("Custom",{className:"area",attrs:y({points:s},a),createPath(o){var l=[[0,0],[1,1]],f=jr(this._attrs.attrs.points),h=f.length,u=f.slice(0,h/2),v=f.slice(h/2,h),c=ge(u,!1,l);o.beginPath(),o.moveTo(u[0].x,u[0].y);for(var g=0,d=c.length;g<d;g++){var p=c[g];o.bezierCurveTo(p[1],p[2],p[3],p[4],p[5],p[6])}if(v.length){var m=ge(v,!1,l);o.lineTo(v[0].x,v[0].y);for(var _=0,C=m.length;_<C;_++){var S=m[_];o.bezierCurveTo(S[1],S[2],S[3],S[4],S[5],S[6])}}o.closePath()},calculateBox(){var o=jr(this._attrs.attrs.points);return ce(o)}}):n=e.addShape("Polyline",{className:"area",attrs:y({points:s},a)}),n}function Go(r,t,e){var a=this,i=r.points,n=[],s=[];x(i,function(l){s.push(l[0]),n.push(l[1])});var o=y({fillStyle:r.color},b.shape.area,r.style);return s.reverse(),n=a.parsePoints(n),s=a.parsePoints(s),r.isInCircle&&(n.push(n[0]),s.unshift(s[s.length-1]),Ro(s,r.center)&&(s=[])),zo(n,s,t,o,e)}Y.registerFactory("area",{defaultShapeType:"area",getDefaultPoints(r){var t=r.x,e=r.y,a=r.y0;e=T(e)?e:[a,e];var i=[];return i.push({x:t,y:e[0]},{x:t,y:e[1]}),i}});var Xo=["area","smooth"];x(Xo,function(r){Y.registerShape("area",r,{draw(t,e){var a=r==="smooth";return Go.call(this,t,e,a)}})});class Ho extends H{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="area",t.shapeType="area",t.generatePoints=!0,t.sortable=!0,t}draw(t,e){var a=this,i=a.get("container"),n=this.getDrawCfg(t[0]),s=a.getYScale(),o=a.get("connectNulls"),l=ri(t,s.field,o);n.origin=t,x(l,function(f,h){n.splitedIndex=h;var u=f.map(function(v){return v.points});n.points=u,a.drawShape(n.shape,t[0],n,i,e)})}}H.Area=Ho;var ii={initEvent(){var r=this,t=this.get("chart");t&&t.on(Xe,function(){r.set("_width",null)})},getDefaultSize(){var r=this.get("defaultSize");if(!r){var t=this.get("coord"),e=this.getXScale(),a=this.get("dataArray"),i=sa(e.values),n=i.length,s=e.range,o=1/n,l=1;t&&t.isPolar?t.transposed&&n>1?l=b.widthRatio.multiplePie:l=b.widthRatio.rose:(e.isLinear&&(o*=s[1]-s[0]),l=b.widthRatio.column),o*=l,this.hasAdjust("dodge")&&(o=o/a.length),r=o,this.set("defaultSize",r)}return r},getDimWidth(r){var t=this.get("coord"),e=t.convertPoint({x:0,y:0}),a=t.convertPoint({x:r==="x"?1:0,y:r==="x"?0:1}),i=0;return e&&a&&(i=Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2))),i},_getWidth(){var r=this.get("_width");if(!r){var t=this.get("coord");t&&t.isPolar&&!t.transposed?r=(t.endAngle-t.startAngle)*t.circleRadius:r=this.getDimWidth("x"),this.set("_width",r)}return r},_toNormalizedSize(r){var t=this._getWidth();return r/t},_toCoordSize(r){var t=this._getWidth();return t*r},getNormalizedSize(r){var t=this.getAttrValue("size",r);return M(t)?t=this.getDefaultSize():t=this._toNormalizedSize(t),t},getSize(r){var t=this.getAttrValue("size",r);if(M(t)){var e=this.getDefaultSize();t=this._toCoordSize(e)}return t}};function ni(r){var{x:t,y:e,y0:a,size:i}=r,n=a,s=e;T(e)&&(s=e[1],n=e[0]);var o,l;return T(t)?(o=t[0],l=t[1]):(o=t-i/2,l=t+i/2),[{x:o,y:n},{x:o,y:s},{x:l,y:s},{x:l,y:n}]}function $o(r){for(var t=[],e=[],a=0,i=r.length;a<i;a++){var n=r[a];t.push(n.x),e.push(n.y)}var s=Math.min.apply(null,t),o=Math.min.apply(null,e),l=Math.max.apply(null,t),f=Math.max.apply(null,e);return{x:s,y:o,width:l-s,height:f-o}}function Vo(r,t){var e=(r.x-t.x)/2+t.x,a=(r.y-t.y)/2+t.y;return{x:e,y:a}}Y.registerFactory("interval",{defaultShapeType:"rect",getDefaultPoints(r){return ni(r)}});Y.registerShape("interval","rect",{draw(r,t){var e=this.parsePoints(r.points),a=y({fill:r.color},b.shape.interval,r.style);if(r.isInCircle){var i=e.slice(0);this._coord.transposed&&(i=[e[0],e[3],e[2],e[1]]);var{x:n,y:s}=r.center,o=[1,0],l=[i[0].x-n,i[0].y-s],f=[i[1].x-n,i[1].y-s],h=[i[2].x-n,i[2].y-s],u=A.angleTo(o,f),v=A.angleTo(o,h),c=A.length(l),g=A.length(f);return u>=1.5*Math.PI&&(u=u-2*Math.PI),v>=1.5*Math.PI&&(v=v-2*Math.PI),t.addShape("Sector",{className:"interval",attrs:y({x:n,y:s,r:g,r0:c,startAngle:u,endAngle:v},a)})}var d=$o(e);return t.addShape("rect",{className:"interval",attrs:y(d,a)})}});["pyramid","funnel"].forEach(function(r){Y.registerShape("interval",r,{getPoints(t){return t.size=t.size*2,ni(t)},draw(t,e){var a=this.parsePoints(t.points),i=this.parsePoints(t.nextPoints),n=null;i?n=[a[0],a[1],i[1],i[0]]:(n=[a[0],a[1]],r==="pyramid"?n.push(Vo(a[2],a[3])):n.push(a[2],a[3]));var s=y({fill:t.color,points:n},b.shape.interval,t.style);return e.addShape("polygon",{className:"interval",attrs:s})}})});class jo extends H{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="interval",t.shapeType="interval",t.generatePoints=!0,t}constructor(t){super(t),y(this,ii)}init(){super.init(),this.initEvent()}createShapePointsCfg(t){var e=super.createShapePointsCfg(t);return e.size=this.getNormalizedSize(t),e}clearInner(){super.clearInner(),this.set("defaultSize",null)}}H.Interval=jo;Y.registerFactory("polygon",{defaultShapeType:"polygon",getDefaultPoints(r){for(var t=[],{x:e,y:a}=r,i=0,n=e.length;i<n;i++)t.push({x:e[i],y:a[i]});return t}});Y.registerShape("polygon","polygon",{draw(r,t){var e=this.parsePoints(r.points),a=y({fill:r.color,points:e},r.style);return t.addShape("Polygon",{className:"polygon",attrs:a})}});class Wo extends H{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}createShapePointsCfg(t){var e=super.createShapePointsCfg(t),a=this,i=e.x,n=e.y,s;if(!(T(i)&&T(n))){var o=a.getXScale(),l=a.getYScale(),f=o.values?o.values.length:o.ticks.length,h=l.values?l.values.length:l.ticks.length,u=.5*1/f,v=.5*1/h;o.isCategory&&l.isCategory?(i=[i-u,i-u,i+u,i+u],n=[n-v,n+v,n+v,n-v]):T(i)?(s=i,i=[s[0],s[0],s[1],s[1]],n=[n-v/2,n+v/2,n+v/2,n-v/2]):T(n)&&(s=n,n=[s[0],s[1],s[1],s[0]],i=[i-u/2,i-u/2,i+u/2,i+u/2]),e.x=i,e.y=n}return e}}H.Polygon=Wo;function qo(r){var t=r.sort(function(n,s){return n<s?1:-1}),e=t.length;if(e<4)for(var a=t[e-1],i=0;i<4-e;i++)t.push(a);return t}function Uo(r,t,e){var a=qo(t),i=[{x:r,y:a[0]},{x:r,y:a[1]},{x:r-e/2,y:a[2]},{x:r-e/2,y:a[1]},{x:r+e/2,y:a[1]},{x:r+e/2,y:a[2]},{x:r,y:a[2]},{x:r,y:a[3]}];return i}Y.registerFactory("schema",{});Y.registerShape("schema","candle",{getPoints(r){return Uo(r.x,r.y,r.size)},draw(r,t){var e=this.parsePoints(r.points),a=y({stroke:r.color,fill:r.color,lineWidth:1},r.style);return t.addShape("Custom",{className:"schema",attrs:a,createPath(i){i.beginPath(),i.moveTo(e[0].x,e[0].y),i.lineTo(e[1].x,e[1].y),i.moveTo(e[2].x,e[2].y);for(var n=3;n<6;n++)i.lineTo(e[n].x,e[n].y);i.closePath(),i.moveTo(e[6].x,e[6].y),i.lineTo(e[7].x,e[7].y)}})}});class Zo extends H{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}constructor(t){super(t),y(this,ii)}init(){super.init(),this.initEvent()}createShapePointsCfg(t){var e=super.createShapePointsCfg(t);return e.size=this.getNormalizedSize(t),e}clearInner(){super.clearInner(),this.set("defaultSize",null)}}H.Schema=Zo;var Jo={}.toString,Ko=function(t,e){return Jo.call(t)==="[object "+e+"]"},si=Ko,Qo=si,tl=Array.isArray?Array.isArray:function(r){return Qo(r,"Array")},Se=tl,el=function(t){return t==null},rl=el;function al(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var il=Se,nl=rl,oi=xe,sl=function(r){al(t,r);function t(){return r.apply(this,arguments)||this}var e=t.prototype;return e._initDefaultCfg=function(){this.xField=null,this.yField=null},e.processAdjust=function(i){this.processStack(i)},e.processStack=function(i){var n=this,s=n.xField,o=n.yField,l=i.length,f={positive:{},negative:{}};n.reverseOrder&&(i=i.slice(0).reverse());for(var h=0;h<l;h++)for(var u=i[h],v=0,c=u.length;v<c;v++){var g=u[v],d=g[s]||0,p=g[o],m=d.toString();if(p=il(p)?p[1]:p,!nl(p)){var _=p>=0?"positive":"negative";f[_][m]||(f[_][m]=0),g[o]=[f[_][m],p+f[_][m]],f[_][m]+=p}}},t}(oi);oi.Stack=sl;var ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ll=function(t){var e=typeof t>"u"?"undefined":ol(t);return t!==null&&e==="object"||e==="function"},hl=ll,fl=hl,ul=Se,vl=function(t,e){if(t){var a=void 0;if(ul(t))for(var i=0,n=t.length;i<n&&(a=e(t[i],i),a!==!1);i++);else if(fl(t)){for(var s in t)if(t.hasOwnProperty(s)&&(a=e(t[s],s),a===!1))break}}},hr=vl;function cl(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var li=xe,gl=hr,dl=1/2,pl=1/2,ml=function(r){cl(t,r);function t(){return r.apply(this,arguments)||this}var e=t.prototype;return e._initDefaultCfg=function(){this.marginRatio=dl,this.dodgeRatio=pl,this.adjustNames=["x","y"]},e.getDodgeOffset=function(i,n,s){var o=this,l=i.pre,f=i.next,h=f-l,u=h*o.dodgeRatio/s,v=o.marginRatio*u,c=1/2*(h-s*u-(s-1)*v)+((n+1)*u+n*v)-1/2*u-1/2*h;return(l+f)/2+c},e.processAdjust=function(i){var n=this,s=i.length,o=n.xField;gl(i,function(l,f){for(var h=0,u=l.length;h<u;h++){var v=l[h],c=v[o],g={pre:u===1?c-1:c-.5,next:u===1?c+1:c+.5},d=n.getDodgeOffset(g,f,s);v[o]=d}})},t}(li);li.Dodge=ml;var yl=si,xl=function(t){return yl(t,"Function")},_l=xl,Sl=Se,Wr=_l,Ml=hr,Pl=function(t,e){if(Sl(t)){var a=t[0],i=void 0;Wr(e)?i=e(t[0]):i=t[0][e];var n=void 0;return Ml(t,function(s){Wr(e)?n=e(s):n=s[e],n>i&&(a=s,i=n)}),a}},Cl=Pl,wl=function(t){for(var e=[],a=0;a<t.length;a++)e=e.concat(t[a]);return e},bl=wl;function Tl(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var ie=hr,Dl=Cl,Rt=Se,Al={merge:bl},hi=xe,Il=function(r){Tl(t,r);function t(){return r.apply(this,arguments)||this}var e=t.prototype;return e._initDefaultCfg=function(){this.xField=null,this.yField=null,this.cacheMax=null,this.adjustNames=["y"],this.groupFields=null},e._getMax=function(i){var n=this,s=n.mergeData,o=Dl(s,function(h){var u=h[i];return Rt(u)?Math.max.apply(null,u):u}),l=o[i],f=Rt(l)?Math.max.apply(null,l):l;return f},e._getXValuesMax=function(){var i=this,n=i.yField,s=i.xField,o={},l=i.mergeData;return ie(l,function(f){var h=f[s],u=f[n],v=Rt(u)?Math.max.apply(null,u):u;o[h]=o[h]||0,o[h]<v&&(o[h]=v)}),o},e.processAdjust=function(i){var n=this,s=Al.merge(i);n.mergeData=s,n._processSymmetric(i),n.mergeData=null},e._processSymmetric=function(i){var n=this,s=n.xField,o=n.yField,l=n._getMax(o),f=i[0][0],h;f&&Rt(f[o])&&(h=n._getXValuesMax()),ie(i,function(u){ie(u,function(v){var c=v[o],g;if(Rt(c)){var d=v[s],p=h[d];g=(l-p)/2;var m=[];ie(c,function(_){m.push(g+_)}),v[o]=m}else g=(l-c)/2,v[o]=[g,c+g]})})},t}(hi);hi.Symmetric=Il;class El extends Ot{_initDefaultCfg(){this.type="polar",this.startAngle=-Math.PI/2,this.endAngle=Math.PI*3/2,this.inner=0,this.innerRadius=0,this.isPolar=!0,this.transposed=!1,this.center=null,this.radius=null}init(t,e){super.init(t,e);var a=this,i=a.inner||a.innerRadius,n=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y),o,l;a.startAngle===-Math.PI&&a.endAngle===0?(o=Math.min(n/2,s),l={x:(t.x+e.x)/2,y:t.y}):(o=Math.min(n,s)/2,l={x:(t.x+e.x)/2,y:(t.y+e.y)/2});var f=a.radius;f>0&&f<=1&&(o=o*f),this.x={start:a.startAngle,end:a.endAngle},this.y={start:o*i,end:o},this.center=l,this.circleRadius=o}_convertPoint(t){var e=this,a=e.center,i=e.transposed,n=i?"y":"x",s=i?"x":"y",o=e.x,l=e.y,f=o.start+(o.end-o.start)*t[n],h=l.start+(l.end-l.start)*t[s];return{x:a.x+Math.cos(f)*h,y:a.y+Math.sin(f)*h}}_invertPoint(t){var e=this,{center:a,transposed:i,x:n,y:s}=e,o=i?"y":"x",l=i?"x":"y",f=[1,0,0,1,0,0];B.rotate(f,f,n.start);var h=[1,0];A.transformMat2d(h,h,f),h=[h[0],h[1]];var u=[t.x-a.x,t.y-a.y];if(A.zero(u))return{x:0,y:0};var v=A.angleTo(h,u,n.end<n.start);Math.abs(v-Math.PI*2)<.001&&(v=0);var c=A.length(u),g=v/(n.end-n.start);g=n.end-n.start>0?g:-g;var d=(c-s.start)/(s.end-s.start),p={};return p[o]=g,p[l]=d,p}}Ot.Polar=El;class Ol extends Ut{_initDefaultCfg(){super._initDefaultCfg(),this.startAngle=-Math.PI/2,this.endAngle=Math.PI*3/2,this.radius=null,this.center=null}getOffsetPoint(t){var{startAngle:e,endAngle:a}=this,i=e+(a-e)*t;return this._getCirclePoint(i)}_getCirclePoint(t,e){var a=this,i=a.center;return e=e||a.radius,{x:i.x+Math.cos(t)*e,y:i.y+Math.sin(t)*e}}getTextAlignInfo(t,e){var a=this,i=a.getOffsetVector(t,e),n,s="middle";return i[0]>0?n="left":i[0]<0?n="right":(n="center",i[1]>0?s="top":i[1]<0&&(s="bottom")),{textAlign:n,textBaseline:s}}getAxisVector(t){var e=this.center,a=this.offsetFactor;return[(t.y-e.y)*a,(t.x-e.x)*-1*a]}drawLine(t){var{center:e,radius:a,startAngle:i,endAngle:n}=this,s=this.getContainer(t.top);s.addShape("arc",{className:"axis-line",attrs:y({x:e.x,y:e.y,r:a,startAngle:i,endAngle:n},t)})}}Ut.Circle=Ol;var qr={min:0,median:.5,max:1};class z{_initDefaultCfg(){}constructor(t){this._initDefaultCfg(),F(this,t)}_getNormalizedValue(t,e){var a;return M(qr[t])?a=e.scale(t):a=qr[t],a}parsePercentPoint(t,e){var a=parseFloat(e[0])/100,i=parseFloat(e[1])/100,n=t.start,s=t.end,o=Math.abs(n.x-s.x),l=Math.abs(n.y-s.y),f=o*a+Math.min(n.x,s.x),h=l*i+Math.min(n.y,s.y);return{x:f,y:h}}parsePoint(t,e){var a=this,i=a.xScale,n=a.yScales;if(k(e)&&(e=e(i,n)),N(e[0])&&e[0].indexOf("%")!==-1&&!isNaN(e[0].slice(0,-1)))return this.parsePercentPoint(t,e);var s=a._getNormalizedValue(e[0],i),o=a._getNormalizedValue(e[1],n[0]),l=t.convertPoint({x:s,y:o});return a.limitInPlot?s>=0&&s<=1&&o>=0&&o<=1?l:null:l}render(){}repaint(){this.remove();var{coord:t,container:e,canvas:a}=this;e&&!e.isDestroyed()&&(this.render(t,e),a.draw())}remove(){var{element:t}=this;t&&t.remove(!0)}changeVisible(t){var e=this;e.visible=t;var a=e.element;a&&(a.set?a.set("visible",t):a.style.display=t?"":"none")}}class kl extends z{_initDefaultCfg(){this.type="arc",this.start=[],this.end=[],this.style={stroke:"#999",lineWidth:1}}render(t,e){var a=this,i=a.parsePoint(t,a.start),n=a.parsePoint(t,a.end);if(!(!i||!n)){var s=t.center,o=Math.sqrt((i.x-s.x)*(i.x-s.x)+(i.y-s.y)*(i.y-s.y)),l=Math.atan2(i.y-s.y,i.x-s.x),f=Math.atan2(n.y-s.y,n.x-s.x),h=e.addShape("arc",{className:"guide-arc",attrs:y({x:s.x,y:s.y,r:o,startAngle:l,endAngle:f},a.style)});return a.element=h,h}}}z.Arc=kl;function Yl(r,t,e,a){var i=[];return r==="left"&&t==="top"?(i[0]=0,i[1]=0):r==="right"&&t==="top"?(i[0]=-e,i[1]=0):r==="left"&&t==="bottom"?(i[0]=0,i[1]=Math.floor(-a)):r==="right"&&t==="bottom"?(i[0]=Math.floor(-e),i[1]=Math.floor(-a)):r==="right"&&t==="middle"?(i[0]=Math.floor(-e),i[1]=Math.floor(-a/2)):r==="left"&&t==="middle"?(i[0]=0,i[1]=Math.floor(-a/2)):r==="center"&&t==="bottom"?(i[0]=Math.floor(-e/2),i[1]=Math.floor(-a)):r==="center"&&t==="top"?(i[0]=Math.floor(-e/2),i[1]=0):(i[0]=Math.floor(-e/2),i[1]=Math.floor(-a/2)),i}function Ee(r,t){for(var e in t)t.hasOwnProperty(e)&&(r.style[e]=t[e]);return r}function Ur(r){var t=document.createElement("div");return r=r.replace(/(^\s*)|(\s*$)/g,""),t.innerHTML=""+r,t.childNodes[0]}class Nl extends z{_initDefaultCfg(){this.type="html",this.position=null,this.alignX="center",this.alignY="middle",this.offsetX=null,this.offsetY=null,this.html=null}render(t,e){var a=this,i=a.parsePoint(t,a.position);if(i){var n=Ur(a.html);n=Ee(n,{position:"absolute",top:Math.floor(i.y)+"px",left:Math.floor(i.x)+"px",visibility:"hidden"});var s=e.get("canvas").get("el"),o=s.parentNode;o=Ee(o,{position:"relative"});var l=Ur('<div class="guideWapper" style="position: absolute;top: 0; left: 0;"></div>');o.appendChild(l),l.appendChild(n);var f=s.offsetTop,h=s.offsetLeft,{alignX:u,alignY:v,offsetX:c,offsetY:g}=a,d=Ke(n),p=Qe(n),m=Yl(u,v,d,p);i.x=i.x+m[0]+h,i.y=i.y+m[1]+f,c&&(i.x+=c),g&&(i.y+=g),Ee(n,{top:Math.floor(i.y)+"px",left:Math.floor(i.x)+"px",visibility:"visible"}),a.element=l}}remove(){var t=this.element;t&&t.parentNode&&t.parentNode.removeChild(t)}}z.Html=Nl;class Fl extends z{_initDefaultCfg(){this.type="line",this.start=[],this.end=[],this.style={stroke:"#000",lineWidth:1}}render(t,e){var a=[];if(a[0]=this.parsePoint(t,this.start),a[1]=this.parsePoint(t,this.end),!(!a[0]||!a[1])){var i=e.addShape("Line",{className:"guide-line",attrs:y({x1:a[0].x,y1:a[0].y,x2:a[1].x,y2:a[1].y},this.style)});return this.element=i,i}}}z.Line=Fl;class Ll extends z{_initDefaultCfg(){this.type="rect",this.start=[],this.end=[],this.style={fill:"#CCD7EB",opacity:.4}}render(t,e){var a=this.parsePoint(t,this.start),i=this.parsePoint(t,this.end);if(!(!a||!i)){var n=e.addShape("rect",{className:"guide-rect",attrs:y({x:Math.min(a.x,i.x),y:Math.min(a.y,i.y),width:Math.abs(i.x-a.x),height:Math.abs(a.y-i.y)},this.style)});return this.element=n,n}}}z.Rect=Ll;class Bl extends z{_initDefaultCfg(){this.type="text",this.position=null,this.content=null,this.style={fill:"#000"},this.offsetX=0,this.offsetY=0}render(t,e){var a=this.position,i=this.parsePoint(t,a);if(i){var{content:n,style:s,offsetX:o,offsetY:l}=this;o&&(i.x+=o),l&&(i.y+=l);var f=e.addShape("text",{className:"guide-text",attrs:y({x:i.x,y:i.y,text:n},s)});return this.element=f,f}}}z.Text=Bl;class Rl extends z{_initDefaultCfg(){this.type="tag",this.position=null,this.content=null,this.direct="tl",this.autoAdjust=!0,this.offsetX=0,this.offsetY=0,this.side=4,this.background={padding:5,radius:2,fill:"#1890FF"},this.textStyle={fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle"},this.withPoint=!0,this.pointStyle={fill:"#1890FF",r:3,lineWidth:1,stroke:"#fff"}}_getDirect(t,e,a,i){var n=this.direct,s=this.side,o=t.get("canvas"),l=o.get("width"),f=o.get("height"),{x:h,y:u}=e,v=n[0],c=n[1];v==="t"&&u-s-i<0?v="b":v==="b"&&u+s+i>f&&(v="t");var g=v==="c"?s:0;return c==="l"&&h-g-a<0?c="r":c==="r"&&h+g+a>l?c="l":c==="c"&&(a/2+h+g>l?c="l":h-a/2-g<0&&(c="r")),n=v+c,n}render(t,e){var a=this.parsePoint(t,this.position);if(a&&!(isNaN(a.x)||isNaN(a.y))){var{content:i,background:n,textStyle:s}=this,o=[],l=e.addGroup({className:"guide-tag"});if(this.withPoint){var f=l.addShape("Circle",{className:"guide-tag-point",attrs:y({x:a.x,y:a.y},this.pointStyle)});o.push(f)}var h=l.addGroup(),u=h.addShape("text",{className:"guide-tag-text",zIndex:1,attrs:y({x:0,y:0,text:i},s)});o.push(u);var v=u.getBBox(),c=V(n.padding),g=v.width+c[1]+c[3],d=v.height+c[0]+c[2],p=v.minY-c[0],m=v.minX-c[3],_=h.addShape("rect",{className:"guide-tag-bg",zIndex:-1,attrs:y({x:m,y:p,width:g,height:d},n)});o.push(_);var C=this.autoAdjust?this._getDirect(e,a,g,d):this.direct,S=this.side,P=a.x+this.offsetX,w=a.y+this.offsetY,I,D=V(n.radius);C==="tl"?(I=[{x:g+m-S-1,y:d+p-1},{x:g+m,y:d+p-1},{x:g+m,y:d+S+p}],D[2]=0,P=P-g,w=w-S-d):C==="cl"?(I=[{x:g+m-1,y:(d-S)/2+p-1},{x:g+m-1,y:(d+S)/2+p+1},{x:g+S+m,y:d/2+p}],P=P-g-S,w=w-d/2):C==="bl"?(I=[{x:g+m,y:-S+p},{x:g+m-S-1,y:p+1},{x:g+m,y:p+1}],D[1]=0,P=P-g,w=w+S):C==="bc"?(I=[{x:g/2+m,y:-S+p},{x:(g-S)/2+m-1,y:p+1},{x:(g+S)/2+m+1,y:p+1}],P=P-g/2,w=w+S):C==="br"?(I=[{x:m,y:p-S},{x:m,y:p+1},{x:m+S+1,y:p+1}],D[0]=0,w=w+S):C==="cr"?(I=[{x:m-S,y:d/2+p},{x:m+1,y:(d-S)/2+p-1},{x:m+1,y:(d+S)/2+p+1}],P=P+S,w=w-d/2):C==="tr"?(I=[{x:m,y:d+S+p},{x:m,y:d+p-1},{x:S+m+1,y:d+p-1}],D[3]=0,w=w-d-S):C==="tc"&&(I=[{x:(g-S)/2+m-1,y:d+p-1},{x:(g+S)/2+m+1,y:d+p-1},{x:g/2+m,y:d+S+p}],P=P-g/2,w=w-d-S);var L=h.addShape("Polygon",{className:"guide-tag-side",zIndex:0,attrs:{points:I,fill:n.fill}});return o.push(L),_.attr("radius",D),h.moveTo(P-m,w-p),h.sort(),this.element=l,o}}}z.Tag=Rl;class zl extends z{_initDefaultCfg(){this.type="point",this.position=null,this.offsetX=0,this.offsetY=0,this.style={fill:"#1890FF",r:3,lineWidth:1,stroke:"#fff"}}render(t,e){var a=this.parsePoint(t,this.position);if(!a)return null;var i=e.addShape("Circle",{className:"guide-point",attrs:y({x:a.x+this.offsetX,y:a.y+this.offsetY},this.style)});return this.element=i,i}}z.Point=zl;var Gl=3;class Ue{getDefaultCfg(){return{showTitle:!1,title:null,items:null,titleGap:12,itemGap:10,itemMarginBottom:12,itemFormatter:null,itemWidth:null,wordSpace:6,x:0,y:0,layout:"horizontal",joinString:": "}}constructor(t){F(this,this.getDefaultCfg(),t),this._init(),this._renderTitle(),this._renderItems()}_init(){var t=this.parent;if(t){var e=t.addGroup({zIndex:this.zIndex||0});this.container=e;var a=e.addGroup();this.wrapper=a;var i=a.addGroup({className:"itemsGroup"});this.itemsGroup=i}}_renderTitle(t){t=t||this.title;var e=this.titleShape,a=0;if(this.showTitle&&t){if(e&&!e.get("destroyed"))e.attr("text",t);else{var{wrapper:i,titleStyle:n}=this;e=i.addShape("text",{className:"title",attrs:y({x:0,y:0,text:t},n)}),this.titleShape=e}a=e.getBBox().height+this.titleGap}this._titleHeight=a}_renderItems(t){var e=this;t=t||e.items,t&&(e.reversed&&t.reverse(),x(t,function(a,i){e._addItem(a,i)}),t.length>1&&this._adjustItems(),this._renderBackground())}_renderBackground(){var t=this.background;if(t){var e=this.container,a=this.wrapper,{minX:i,minY:n,width:s,height:o}=a.getBBox(),l=t.padding||[0,0,0,0];l=V(l);var f=y({x:i-l[3],y:n-l[0],width:s+l[1]+l[3],height:o+l[0]+l[2]},t),h=this.backShape;h?h.attr(f):h=e.addShape("Rect",{zIndex:-1,attrs:f}),this.backShape=h,e.sort()}}_addItem(t){var e=this.itemsGroup,a=e.addGroup({name:t.name,value:t.value,dataValue:t.dataValue,checked:t.checked}),{unCheckStyle:i,unCheckColor:n,nameStyle:s,valueStyle:o,wordSpace:l}=this,{marker:f,value:h}=t,u=0;if(n&&(i.fill=n),f){var v=f.radius||Gl,c=y({x:v,y:this._titleHeight},f);t.checked===!1&&y(c,i);var g=a.addShape("marker",{className:"item-marker",attrs:c});u+=g.getBBox().width+l}var d,p=t.name;if(p){var m=this.joinString||"";p=h?p+m:p,d=a.addShape("text",{className:"name",attrs:y({x:u,y:this._titleHeight,text:this._formatItemValue(p)},s,t.checked===!1?i:null)})}if(h){var _=u;d&&(_+=d.getBBox().width),a.addShape("text",{className:"value",attrs:y({x:_,y:this._titleHeight,text:h},o,t.checked===!1?i:null)})}return a}_formatItemValue(t){var e=this.itemFormatter;return e&&(t=e.call(this,t)),t}_getMaxItemWidth(){var t,e=this.itemWidth;if(R(e)||M(e))return e;if(e==="auto"){for(var a=this.itemsGroup,i=a.get("children"),n=i.length,s=0,o=0;o<n;o++){var{width:l}=i[o].getBBox();s=Math.max(s,l)}var f=this.maxLength,h=this.itemGap,u=(f-h)/2,v=(f-h*2)/3;return n===2?t=Math.max(s,u):s<=v?t=v:s<=u?t=u:t=s,t}}_adjustHorizontal(){for(var{maxLength:t,itemsGroup:e}=this,a=e.get("children"),{itemGap:i,itemMarginBottom:n}=this,s=this._titleHeight,o=0,l=0,f,h,u=this._getMaxItemWidth(),v=[],c=0,g=a.length;c<g;c++){var d=a[c],p=d.getBBox(),m=p.height,_=p.width;f=u||_,h=m+n,f-(t-l)>1e-4&&(o++,l=0),d.moveTo(l,o*h),v.push({x:l,y:o*h+s-m/2,width:_*1.375,height:m*1.375}),l+=f+i}this.legendHitBoxes=v}_adjustVertical(){for(var{maxLength:t,itemsGroup:e}=this,{itemGap:a,itemMarginBottom:i,itemWidth:n}=this,s=this._titleHeight,o=e.get("children"),l=0,f,h,u=0,v=0,c=[],g=0,d=o.length;g<d;g++){var p=o[g],m=p.getBBox();f=m.width,h=m.height,R(n)?u=n+a:f>u&&(u=f+a),t-l<h?(l=0,v+=u,p.moveTo(v,0),c.push({x:v,y:s-h/2,width:f*1.375,height:h*1.375})):(p.moveTo(v,l),c.push({x:v,y:l-h/2+s,width:f*1.375,height:h*1.375})),l+=h+i}this.legendHitBoxes=c}_adjustItems(){var t=this.layout;t==="horizontal"?this._adjustHorizontal():this._adjustVertical()}moveTo(t,e){this.x=t,this.y=e;var a=this.container;return a&&a.moveTo(t,e),this}setItems(t){this.clearItems(),this._renderItems(t)}setTitle(t){this._renderTitle(t)}clearItems(){var t=this.itemsGroup;t.clear()}getWidth(){var t=this.container,e=t.getBBox();return e.width}getHeight(){var t=this.container,e=t.getBBox();return e.height}show(){var t=this.container;t.show()}hide(){var t=this.container;t.hide()}clear(){var t=this.container;t.clear(),t.remove(!0)}}class Zr{getDefaultCfg(){return{x:0,y:0,content:"",textStyle:{fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle",fontFamily:"Arial"},background:{radius:1,fill:"rgba(0, 0, 0, 0.65)",padding:[3,5]},width:0,height:0,className:""}}constructor(t){F(this,this.getDefaultCfg(),t),this._init();var{content:e,x:a,y:i}=this;M(e)||this.updateContent(e),this.updatePosition(a,i)}_init(){var{content:t,textStyle:e,background:a,className:i,visible:n,context:s}=this,o=new Et({context:s,className:i,zIndex:0,visible:n}),l=o.addShape("Text",{className:i+"-text",zIndex:1,attrs:y({text:t,x:0,y:0},e)}),f=o.addShape("Rect",{className:i+"-bg",zIndex:-1,attrs:y({x:0,y:0,width:0,height:0},a)});o.sort(),this.container=o,this.textShape=l,this.backgroundShape=f}_getBBox(){var t=this.textShape,e=this.background,a=t.getBBox(),i=V(e.padding),n=a.width+i[1]+i[3],s=a.height+i[0]+i[2],o=a.minX-i[3],l=a.minY-i[0];return{x:o,y:l,width:n,height:s}}updateContent(t){var{textShape:e,backgroundShape:a}=this;if(!M(t)){X(t)||(t={text:t}),e.attr(t);var{x:i,y:n,width:s,height:o}=this._getBBox(),l=this.width||s,f=this.height||o;a.attr({x:i,y:n,width:l,height:f}),this._width=l,this._height=f,this.content=t.text}}updatePosition(t,e){var a=this.container,{x:i,y:n}=this._getBBox();a.moveTo(t-i,e-n),this.x=t-i,this.y=e-n}getWidth(){return this._width}getHeight(){return this._height}show(){this.container.show()}hide(){this.container.hide()}clear(){var t=this.container;t.clear(),t.remove(!0),this.container=null,this.textShape=null,this.backgroundShape=null}}var Tt=4;let fi=class{getDefaultCfg(){return{showCrosshairs:!1,crosshairsStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},crosshairsType:"y",showXTip:!1,showYTip:!1,xTip:null,xTipBackground:{radius:1,fill:"rgba(0, 0, 0, 0.65)",padding:[3,5]},xTipTextStyle:{fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle"},yTip:null,yTipBackground:{radius:1,fill:"rgba(0, 0, 0, 0.65)",padding:[3,5]},yTipTextStyle:{fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle"},background:null,layout:"horizontal",offsetX:0,offsetY:0}}constructor(t){F(this,this.getDefaultCfg(),t);var{frontPlot:e,custom:a}=this;if(!a){var i=new Ue(y({parent:e,zIndex:3},t));this.container=i;var{fixed:n,background:s}=this;n||(this.tooltipArrow=e.addShape("Polygon",{className:"tooltip-arrow",visible:!1,zIndex:2,attrs:y({points:[]},s)}))}if(this.showXTip){var{xTipBackground:o,xTipTextStyle:l}=this,f=new Zr({context:e.get("context"),className:"xTip",background:o,textStyle:l,visible:!1});e.add(f.container),this.xTipBox=f}if(this.showYTip){var{yTipBackground:h,yTipTextStyle:u}=this,v=new Zr({context:e.get("context"),className:"yTip",background:h,textStyle:u,visible:!1});e.add(v.container),this.yTipBox=v}this.showCrosshairs&&this._renderCrosshairs(),e.sort()}setContent(t,e){if(this.title=t,this.items=e,!this.custom){var a=this.container;a.setTitle(t),a.setItems(e)}}setYTipContent(t){var e=this.yTip;k(e)?t=e(t):t=y({text:t},e),this.yTipBox&&this.yTipBox.updateContent(t)}setYTipPosition(t){var e=this.plotRange,a=this.crosshairsShapeX;if(this.showYTip){var i=this.yTipBox,n=i.getHeight(),s=i.getWidth(),o=e.tl.x-s,l=t-n/2;l<=e.tl.y&&(l=e.tl.y),l+n>=e.br.y&&(l=e.br.y-n),o<0&&(o=e.tl.x,a&&a.attr("x1",e.tl.x+s)),i.updatePosition(o,l)}}setXTipContent(t){var e=this.xTip;k(e)?t=e(t):t=y({text:t},e),this.xTipBox&&this.xTipBox.updateContent(t)}setXTipPosition(t){var{showXTip:e,canvas:a,plotRange:i,xTipBox:n,crosshairsShapeY:s}=this;if(e){var o=a.get("height"),l=n.getWidth(),f=n.getHeight(),h=t-l/2,u=i.br.y;h<=i.tl.x&&(h=i.tl.x),h+l>=i.tr.x&&(h=i.tr.x-l),o-u<f&&(u-=f),n.updatePosition(h,u),s&&s.attr("y1",u)}}setXCrosshairPosition(t){this.crosshairsShapeX&&this.crosshairsShapeX.moveTo(0,t)}setYCrosshairPosition(t){this.crosshairsShapeY&&this.crosshairsShapeY.moveTo(t,0)}setPosition(t){var{container:e,plotRange:a,offsetX:i,offsetY:n,fixed:s,tooltipArrow:o}=this;if(e){var l=e.container.getBBox(),{minX:f,minY:h,width:u,height:v}=l,{tl:c,tr:g}=a,d=0,p=c.y-v-Tt+n;if(p<0&&(p=0),s){var m=(c.x+g.x)/2;d=m-u/2+i}else{var _;if(t.length>1?_=(t[0].x+t[t.length-1].x)/2:_=t[0].x,d=_-u/2+i,d<c.x&&(d=c.x),d+u>g.x&&(d=g.x-u),o){var C=p+v;o.attr("points",[{x:_-3,y:C},{x:_+3,y:C},{x:_,y:C+Tt}]);var S=e.backShape,P=V(S.attr("radius"));_===c.x?(P[3]=0,o.attr("points",[{x:c.x,y:C},{x:c.x+Tt,y:C},{x:c.x,y:C+Tt}])):_===g.x&&(P[2]=0,o.attr("points",[{x:g.x-Tt,y:C},{x:g.x,y:C},{x:g.x,y:C+Tt}])),S.attr("radius",P)}}e.moveTo(d-f,p-h)}}setMarkers(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=this,{items:a,style:i,type:n}=t,s=e._getMarkerGroup(n);if(n==="circle")for(var o=0,l=a.length;o<l;o++){var f=a[o];s.addShape("marker",{className:"tooltip-circle-marker",attrs:y({x:f.x,y:f.y,stroke:f.color},i)})}else s.addShape("rect",{className:"tooltip-rect-marker",attrs:i})}clearMarkers(){var t=this.markerGroup;t&&t.clear()}show(){var t=this.crosshairsShapeX,e=this.crosshairsShapeY,a=this.markerGroup,i=this.container,n=this.tooltipArrow,s=this.xTipBox,o=this.yTipBox,l=this.canvas;t&&t.show(),e&&e.show(),a&&a.show(),i&&i.show(),n&&n.show(),s&&s.show(),o&&o.show(),l.draw()}hide(){var t=this.crosshairsShapeX,e=this.crosshairsShapeY,a=this.markerGroup,i=this.container,n=this.tooltipArrow,s=this.xTipBox,o=this.yTipBox;t&&t.hide(),e&&e.hide(),a&&a.hide(),i&&i.hide(),n&&n.hide(),s&&s.hide(),o&&o.hide()}destroy(){var t=this.crosshairsShapeX,e=this.crosshairsShapeY,a=this.markerGroup,i=this.container,n=this.tooltipArrow,s=this.xTipBox,o=this.yTipBox;t&&t.remove(!0),e&&e.remove(!0),a&&a.remove(!0),n&&n.remove(!0),i&&i.clear(),s&&s.clear(),o&&o.clear(),this.destroyed=!0}_getMarkerGroup(t){var e=this.markerGroup;return e?e.clear():(t==="circle"?(e=this.frontPlot.addGroup({zIndex:1}),this.frontPlot.sort()):e=this.backPlot.addGroup(),this.markerGroup=e),e}_renderCrosshairs(){var{crosshairsType:t,crosshairsStyle:e,frontPlot:a,plotRange:i}=this,{tl:n,br:s}=i;le(t,"x")&&(this.crosshairsShapeX=a.addShape("Line",{className:"tooltip-crosshairs-x",zIndex:0,visible:!1,attrs:y({x1:n.x,y1:0,x2:s.x,y2:0},e)})),le(t,"y")&&(this.crosshairsShapeY=a.addShape("Line",{className:"tooltip-crosshairs-y",zIndex:0,visible:!1,attrs:y({x1:0,y1:s.y,x2:0,y2:n.y},e)}))}};function Jr(r,t,e){return t=Xl(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Xl(r){var t=Hl(r,"string");return typeof t=="symbol"?t:String(t)}function Hl(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}b.tooltip=F({triggerOn:"press",triggerOff:"pressend",alwaysShow:!1,showTitle:!1,showCrosshairs:!1,crosshairsStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},showTooltipMarker:!0,background:{radius:1,fill:"rgba(0, 0, 0, 0.65)",padding:[3,5]},titleStyle:{fontSize:12,fill:"#fff",textAlign:"start",textBaseline:"top"},nameStyle:{fontSize:12,fill:"rgba(255, 255, 255, 0.65)",textAlign:"start",textBaseline:"middle"},valueStyle:{fontSize:12,fill:"#fff",textAlign:"start",textBaseline:"middle"},showItemMarker:!0,itemMarkerStyle:{radius:3,symbol:"circle",lineWidth:1,stroke:"#fff"},layout:"horizontal",snap:!1},b.tooltip||{});function ui(r){var t=r.getAttr("color");if(t){var e=t.getScale(t.type);if(e.isLinear)return e}var a=r.getXScale(),i=r.getYScale();return i||a}function $l(r,t){var e,a,i=r._getGroupScales();if(i.length&&x(i,function(o){return a=o,!1}),a){var n=a.field;e=a.getText(t[n])}else{var s=ui(r);e=s.alias||s.field}return e}function Vl(r,t){var e=ui(r);return e.getText(t[e.field])}function jl(r,t){var e=r.getAttr("position"),a=e.getFields()[0],i=r.get("scales")[a];return i.getText(t[i.field])}function Wl(r,t){var e=-1;return x(r,function(a,i){if(a.title===t.title&&a.name===t.name&&a.value===t.value&&a.color===t.color)return e=i,!1}),e}function ql(r){var t=[];return x(r,function(e){var a=Wl(t,e);a===-1?t.push(e):t[a]=e}),t}function Ul(r,t){return JSON.stringify(r)===JSON.stringify(t)}class Zl{constructor(t){var e=this;Jr(this,"handleShowEvent",function(n){var s=e.chart;if(e.enable){var o=s.get("plotRange"),l=tr(n,s);if(!qe(l,o)&&!e._tooltipCfg.alwaysShow){e.hideTooltip();return}var f=e.timeStamp,h=+new Date;h-f>16&&(e.showTooltip(l),e.timeStamp=h)}}),Jr(this,"handleHideEvent",function(){e.enable&&e.hideTooltip()}),this.enable=!0,this.cfg={},this.tooltip=null,this.chart=null,this.timeStamp=0,y(this,t);var a=this.chart,i=a.get("canvas");this.canvas=i,this.canvasDom=i.get("el")}_setCrosshairsCfg(){var t=this,e=t.chart,a=y({},b.tooltip),i=e.get("geoms"),n=[];x(i,function(o){var l=o.get("type");n.indexOf(l)===-1&&n.push(l)});var s=e.get("coord").type;return i.length&&(s==="cartesian"||s==="rect")&&n.length===1&&["line","area","path","point"].indexOf(n[0])!==-1&&y(a,{showCrosshairs:!0}),a}_getMaxLength(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{layout:e,plotRange:a}=t;return e==="horizontal"?a.br.x-a.bl.x:a.bl.y-a.tr.y}render(){var t=this;if(!t.tooltip){var e=t.chart,a=e.get("canvas"),i=e.get("frontPlot").addGroup({className:"tooltipContainer",zIndex:10}),n=e.get("backPlot").addGroup({className:"tooltipContainer"}),s=e.get("plotRange"),o=e.get("coord"),l=t._setCrosshairsCfg(),f=t.cfg,h=F({plotRange:s,frontPlot:i,backPlot:n,canvas:a,fixed:o.transposed||o.isPolar},l,f);h.maxLength=t._getMaxLength(h),this._tooltipCfg=h;var u=new fi(h);t.tooltip=u,h.alwaysShow&&t.prePoint&&this.showTooltip(t.prePoint),t.bindEvents()}}clear(){var t=this.tooltip;t&&(t.destroy(),this.unBindEvents()),this.tooltip=null,this._lastActive=null}_getTooltipMarkerStyle(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{type:e,items:a}=t,i=this._tooltipCfg;if(e==="rect"){var n,s,o,l,f=this.chart,{tl:h,br:u}=f.get("plotRange"),v=f.get("coord"),c=a[0],g=a[a.length-1],d=c.width;v.transposed?(n=h.x,s=g.y-d*.75,o=u.x-h.x,l=c.y-g.y+1.5*d):(n=c.x-d*.75,s=h.y,o=g.x-c.x+1.5*d,l=u.y-h.y),t.style=y({x:n,y:s,width:o,height:l,fill:"#CCD6EC",opacity:.3},i.tooltipMarkerStyle)}else t.style=y({radius:4,fill:"#fff",lineWidth:2},i.tooltipMarkerStyle);return t}_setTooltip(t,e){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.prePoint=t;var i=this._lastActive,n=this.tooltip,s=this._tooltipCfg;e=ql(e);var o=this.chart,l=o.get("coord"),f=o.getYScales()[0],h=s.snap;if(h===!1&&f.isLinear){var u=l.invertPoint(t),v=o.get("plotRange"),c,g;qe(t,v)&&(l.transposed?(c=f.invert(u.x),g=t.x,n.setXTipContent(c),n.setXTipPosition(g),n.setYCrosshairPosition(g)):(c=f.invert(u.y),g=t.y,n.setYTipContent(c),n.setYTipPosition(g),n.setXCrosshairPosition(g)))}if(s.onShow&&s.onShow({x:t.x,y:t.y,tooltip:n,items:e,tooltipMarkerCfg:a}),Ul(i,e)){if(h===!1&&(le(s.crosshairsType,"y")||s.showYTip)){var d=this.chart.get("canvas");d.draw()}return}this._lastActive=e;var p=s.onChange;p&&p({x:t.x,y:t.y,tooltip:n,items:e,tooltipMarkerCfg:a});var m=e[0],_=m.title||m.name,C=m.x;if(e.length>1&&(C=(e[0].x+e[e.length-1].x)/2),n.setContent(_,e,l.transposed),n.setPosition(e,t),l.transposed){var S=m.y;e.length>1&&(S=(e[0].y+e[e.length-1].y)/2),n.setYTipContent(_),n.setYTipPosition(S),n.setXCrosshairPosition(S),h&&(n.setXTipContent(m.value),n.setXTipPosition(C),n.setYCrosshairPosition(C))}else n.setXTipContent(_),n.setXTipPosition(C),n.setYCrosshairPosition(C),h&&(n.setYTipContent(m.value),n.setYTipPosition(m.y),n.setXCrosshairPosition(m.y));var P=a.items;s.showTooltipMarker&&P.length?(a=this._getTooltipMarkerStyle(a),n.setMarkers(a)):n.clearMarkers(),n.show()}showTooltip(t){var e=this,a=e.chart,i,n=[],s=[],o=e._tooltipCfg,{showItemMarker:l,itemMarkerStyle:f,alwaysShow:h}=o,u;l&&(u=f);var v=a.get("geoms"),c=a.get("coord");if(x(v,function(d){if(d.get("visible")){var p=d.get("type"),m=d.getSnapRecords(t),_=d.get("adjust");if(p==="interval"&&_&&_.type==="symmetric")return;x(m,function(C){var{x:S,y:P,_origin:w,color:I}=C;if((S||!isNaN(S))&&(P||!isNaN(P))){var D={x:S,y:T(P)?P[1]:P,color:I||b.defaultColor,origin:w,name:$l(d,w),value:Vl(d,w),title:jl(d,w)};u&&(D.marker=y({fill:I||b.defaultColor},u)),s.push(D),["line","area","path"].indexOf(p)!==-1?(i="circle",n.push(D)):p==="interval"&&(c.type==="cartesian"||c.type==="rect")&&(i="rect",D.width=d.getSize(C._origin),n.push(D))}})}}),s.length){var g={items:n,type:i};e._setTooltip(t,s,g);return}h||e.hideTooltip()}hideTooltip(){var t=this._tooltipCfg;this._lastActive=null;var e=this.tooltip;if(e){e.hide(),t.onHide&&t.onHide({tooltip:e});var a=this.chart.get("canvas");a.draw()}}_handleEvent(t,e,a){var i=this.canvas;x([].concat(t),function(n){a==="bind"?i.on(n,e):i.off(n,e)})}bindEvents(){var t=this._tooltipCfg,{triggerOn:e,triggerOff:a,alwaysShow:i}=t;e&&this._handleEvent(e,this.handleShowEvent,"bind"),i||this._handleEvent(a,this.handleHideEvent,"bind")}unBindEvents(){var t=this._tooltipCfg,{triggerOn:e,triggerOff:a,alwaysShow:i}=t;e&&this._handleEvent(e,this.handleShowEvent,"unBind"),i||this._handleEvent(a,this.handleHideEvent,"unBind")}}function vi(r){var t=new Zl({chart:r});r.set("tooltipController",t),r.tooltip=function(e,a){return X(e)&&(a=e,e=!0),t.enable=e,a&&(t.cfg=a),this}}function ci(r){var t=r.get("tooltipController");t.render(),r.showTooltip=function(e){return t.showTooltip(e),this},r.hideTooltip=function(){return t.hideTooltip(),this}}function gi(r){var t=r.get("tooltipController");t.clear()}const Jl={init:vi,afterGeomDraw:ci,clearInner:gi},Kl=Object.freeze(Object.defineProperty({__proto__:null,afterGeomDraw:ci,clearInner:gi,default:Jl,init:vi},Symbol.toStringTag,{value:"Module"}));b.guide=F({line:{style:{stroke:"#a3a3a3",lineWidth:1},top:!0},text:{style:{fill:"#787878",textAlign:"center",textBaseline:"middle"},offsetX:0,offsetY:0,top:!0},rect:{style:{fill:"#fafafa"},top:!1},arc:{style:{stroke:"#a3a3a3"},top:!0},html:{offsetX:0,offsetY:0,alignX:"center",alignY:"middle"},tag:{top:!0,offsetX:0,offsetY:0,side:4,background:{padding:5,radius:2,fill:"#1890FF"},textStyle:{fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle"}},point:{top:!0,offsetX:0,offsetY:0,style:{fill:"#fff",r:3,lineWidth:2,stroke:"#1890ff"}}},b.guide||{});class Ql{constructor(t){this.guides=[],this.xScale=null,this.yScales=null,this.guideShapes=[],y(this,t)}_toString(t){return k(t)&&(t=t(this.xScale,this.yScales)),t=t.toString(),t}_getId(t,e){var a=e.id;if(!a){var i=e.type;i==="arc"||i==="line"||i==="rect"?a=this._toString(e.start)+"-"+this._toString(e.end):a=this._toString(e.position)}return a}paint(t){var e=this,{chart:a,guides:i,xScale:n,yScales:s}=e,o=[];x(i,function(l,f){l.xScale=n,l.yScales=s;var h;l.type==="regionFilter"?l.chart=a:h=l.top?e.frontPlot:e.backPlot,l.coord=t,l.container=h,l.canvas=a.get("canvas");var u=l.render(t,h);if(u){var v=e._getId(u,l);[].concat(u).forEach(function(c){c._id=c.get("className")+"-"+v,c.set("index",f),o.push(c)})}}),e.guideShapes=o}clear(){return this.reset(),this.guides=[],this}reset(){var t=this.guides;x(t,function(e){e.remove()})}_createGuide(t,e){var a=lt(t),i=new z[a](F({},b.guide[t],e));return this.guides.push(i),i}line(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("line",t)}text(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("text",t)}arc(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("arc",t)}html(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("html",t)}rect(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("rect",t)}tag(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("tag",t)}point(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("point",t)}regionFilter(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("regionFilter",t)}}function di(r){var t=new Ql({frontPlot:r.get("frontPlot").addGroup({zIndex:20,className:"guideContainer"}),backPlot:r.get("backPlot").addGroup({className:"guideContainer"})});r.set("guideController",t),r.guide=function(){return t}}function pi(r){var t=r.get("guideController");if(t.guides.length){var e=r.getXScale(),a=r.getYScales(),i=r.get("coord");t.xScale=e,t.yScales=a,t.chart=r,t.paint(i)}}function mi(r){r.get("guideController").clear()}function yi(r){r.get("guideController").reset()}const th={init:di,afterGeomDraw:pi,clear:mi,repaint:yi},eh=Object.freeze(Object.defineProperty({__proto__:null,afterGeomDraw:pi,clear:mi,default:th,init:di,repaint:yi},Symbol.toStringTag,{value:"Module"}));function rh(r,t,e){return t=ah(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function ah(r){var t=ih(r,"string");return typeof t=="symbol"?t:String(t)}function ih(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var Kr=12,Qr=3,zt={itemMarginBottom:12,itemGap:10,showTitle:!1,titleStyle:{fontSize:12,fill:"#808080",textAlign:"start",textBaseline:"top"},nameStyle:{fill:"#808080",fontSize:12,textAlign:"start",textBaseline:"middle"},valueStyle:{fill:"#000000",fontSize:12,textAlign:"start",textBaseline:"middle"},unCheckStyle:{fill:"#bfbfbf"},itemWidth:"auto",wordSpace:6,selectedMode:"multiple"};b.legend=F({common:zt,right:y({position:"right",layout:"vertical"},zt),left:y({position:"left",layout:"vertical"},zt),top:y({position:"top",layout:"horizontal"},zt),bottom:y({position:"bottom",layout:"horizontal"},zt)},b.legend||{});function nh(r,t){var e=0;switch(t=V(t),r){case"top":e=t[0];break;case"right":e=t[1];break;case"bottom":e=t[2];break;case"left":e=t[3];break}return e}class sh{constructor(t){var e=this;rh(this,"handleEvent",function(i){var n=e;function s(C,S){var P=null,w=n.legends;return x(w,function(I){x(I,function(D){var{itemsGroup:L,legendHitBoxes:$}=D,ht=L.get("children");if(ht.length){var q=D.x,U=D.y;x($,function(Z,Ct){if(C>=Z.x+q&&C<=Z.x+Z.width+q&&S>=Z.y+U&&S<=Z.height+Z.y+U)return P={clickedItem:ht[Ct],clickedLegend:D},!1})}})}),P}var o=n.chart,{x:l,y:f}=tr(i,o),h=s(l,f);if(h&&h.clickedLegend.clickable!==!1){var{clickedItem:u,clickedLegend:v}=h;if(v.onClick)i.clickedItem=u,v.onClick(i);else if(!v.custom){var c=u.get("checked"),g=u.get("dataValue"),{filteredVals:d,field:p,selectedMode:m}=v,_=m==="single";_?o.filter(p,function(C){return C===g}):(c?d.push(g):me(d,g),o.filter(p,function(C){return d.indexOf(C)===-1})),o.repaint()}}}),this.legendCfg={},this.enable=!0,this.position="top",y(this,t);var a=this.chart;this.canvasDom=a.get("canvas").get("el"),this.clear()}addLegend(t,e,a){var i=this,n=i.legendCfg,s=t.field,o=n[s];if(o===!1)return null;if(o&&o.custom)i.addCustomLegend(s);else{var l=n.position||i.position;o&&o.position&&(l=o.position),t.isCategory&&i._addCategoryLegend(t,e,l,a)}}addCustomLegend(t){var e=this,a=e.legendCfg;t&&a[t]&&(a=a[t]);var i=a.position||e.position,n=e.legends;n[i]=n[i]||[];var s=a.items;if(!s)return null;var o=e.container;x(s,function(f){It(f.marker)?f.marker.radius=f.marker.radius||Qr:f.marker={symbol:f.marker||"circle",fill:f.fill,radius:Qr},f.checked=M(f.checked)?!0:f.checked,f.name=f.name||f.value});var l=new Ue(F({},b.legend[i],a,{maxLength:e._getMaxLength(i),items:s,parent:o}));n[i].push(l)}clear(){var t=this.legends;x(t,function(e){x(e,function(a){a.clear()})}),this.legends={},this.unBindEvents()}_isFiltered(t,e,a){var i=!1;return x(e,function(n){if(i=i||t.getText(n)===t.getText(a),i)return!1}),i}_getMaxLength(t){var e=this.chart,a=V(e.get("appendPadding"));return t==="right"||t==="left"?e.get("height")-(a[0]+a[2]):e.get("width")-(a[1]+a[3])}_addCategoryLegend(t,e,a,i){var n=this,{legendCfg:s,legends:o,container:l,chart:f}=n,h=t.field;o[a]=o[a]||[];var u="circle";s[h]&&s[h].marker?u=s[h].marker:s.marker&&(u=s.marker),x(e,function(d){It(u)?y(d.marker,u):d.marker.symbol=u,i&&(d.checked=!n._isFiltered(t,i,d.dataValue))});var v=f.get("legendItems");v[h]=e;var c=F({},b.legend[a],s[h]||s,{maxLength:n._getMaxLength(a),items:e,field:h,filteredVals:i,parent:l});c.showTitle&&F(c,{title:t.alias||t.field});var g=new Ue(c);return o[a].push(g),g}_alignLegend(t,e,a){var i=this,{tl:n,bl:s}=i.plotRange,o=i.chart,l=t.offsetX||0,f=t.offsetY||0,h=o.get("width"),u=o.get("height"),v=V(o.get("appendPadding")),c=t.getHeight(),g=t.getWidth(),d=0,p=0;if(a==="left"||a==="right"){var m=t.verticalAlign||"middle",_=Math.abs(n.y-s.y);d=a==="left"?v[3]:h-g-v[1],p=(_-c)/2+n.y,m==="top"?p=n.y:m==="bottom"&&(p=s.y-c),e&&(p=e.get("y")-c-Kr)}else{var C=t.align||"left";if(d=v[3],C==="center"?d=h/2-g/2:C==="right"&&(d=h-(g+v[1])),p=a==="top"?v[0]+Math.abs(t.container.getBBox().minY):u-c,e){var S=e.getWidth();d=e.x+S+Kr}}a==="bottom"&&f>0&&(f=0),a==="right"&&l>0&&(l=0),t.moveTo(d+l,p+f)}alignLegends(){var t=this,e=t.legends;return x(e,function(a,i){x(a,function(n,s){var o=a[s-1];t._alignLegend(n,o,i)})}),t}bindEvents(){var t=this.legendCfg,e=t.triggerOn||"touchstart";Ma(this.canvasDom,e,this.handleEvent)}unBindEvents(){var t=this.legendCfg,e=t.triggerOn||"touchstart";Pa(this.canvasDom,e,this.handleEvent)}}function xi(r){var t=new sh({container:r.get("backPlot").addGroup(),plotRange:r.get("plotRange"),chart:r});r.set("legendController",t),r.legend=function(e,a){var i=t.legendCfg;return t.enable=!0,ha(e)?(t.enable=e,i=a||{}):X(e)?i=e:i[e]=a,t.legendCfg=i,this}}function _i(r){var t=r.get("legendController");if(!t.enable)return null;var{legendCfg:e,container:a}=t;if(e&&e.custom)t.addCustomLegend();else{var i=r.getLegendItems(),n=r.get("scales"),s=r.get("filters");x(i,function(f,h){var u=n[h],v=u.values,c;s&&s[h]?c=v.filter(function(g){return!s[h](g)}):c=[],t.addLegend(u,f,c)})}e&&e.clickable!==!1&&t.bindEvents();var o=t.legends,l={top:0,right:0,bottom:0,left:0};x(o,function(f,h){var u=0;x(f,function(v){var c=v.getWidth(),g=v.getHeight();h==="top"||h==="bottom"?(u=Math.max(u,g),v.offsetY>0&&(u+=v.offsetY)):(u=Math.max(u,c),v.offsetX>0&&(u+=v.offsetX))}),l[h]=u+nh(h,r.get("appendPadding"))}),r.set("legendRange",l),Object.keys(o).length?a.set("ariaLabel",rt.legend.prefix):a.set("ariaLabel",null)}function Si(r){var t=r.get("legendController");t.alignLegends()}function Mi(r){var t=r.get("legendController");t.clear(),r.set("legendRange",null)}const oh={init:xi,beforeGeomDraw:_i,afterGeomDraw:Si,clearInner:Mi},lh=Object.freeze(Object.defineProperty({__proto__:null,afterGeomDraw:Si,beforeGeomDraw:_i,clearInner:Mi,default:oh,init:xi},Symbol.toStringTag,{value:"Module"}));var Oe=typeof performance=="object"&&performance.now?performance:Date;class hh{constructor(){this.anims=[],this.time=null,this.playing=!1,this.canvas=[]}play(){var t=this;t.time=Oe.now(),t.playing=!0;function e(){t.playing&&(We(e),t.update())}We(e)}stop(){this.playing=!1,this.time=null,this.canvas=[]}pushAnim(t){this.playing||this.play();var{delay:e,duration:a}=t,i=this.time+e,n=i+a;t.startTime=i,t.endTime=n,this.anims.push(t)}update(){var t=Oe.now();if(this.canvas=[],!this.anims.length){this.stop();return}for(var e=0;e<this.anims.length;e++){var a=this.anims[e];if(!(t<a.startTime||a.hasEnded)){var i=a.shape;if(i.get("destroyed")){this.anims.splice(e,1),e--;continue}var{startState:n,endState:s,interpolate:o,duration:l}=a;t>=a.startTime&&!a.hasStarted&&(a.hasStarted=!0,a.onStart&&a.onStart());var f=(t-a.startTime)/l;if(f=Math.max(0,Math.min(f,1)),f=a.easing(f),a.onFrame)a.onFrame(f);else for(var h in o){var u=o[h],v=u(f),c=void 0;if(h==="points"){c=[];for(var g=Math.max(n.points.length,s.points.length),d=0;d<g;d+=2)c.push({x:v[d],y:v[d+1]})}else c=v;i._attrs.attrs[h]=c,i._attrs.bbox=null}var p=i.get("canvas");this.canvas.indexOf(p)===-1&&this.canvas.push(p),a.onUpdate&&a.onUpdate(f),t>=a.endTime&&!a.hasEnded&&(a.hasEnded=!0,a.onEnd&&a.onEnd()),f===1&&(this.anims.splice(e,1),e--)}}this.canvas.map(function(m){return m.draw(),m}),this.time=Oe.now()}}function Pi(r){return r}function fh(r){return r*r}function uh(r){return r*(2-r)}function vh(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)}function ch(r){return r*r*r}function gh(r){return--r*r*r+1}function dh(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)}function ph(r){var t,e=.1,a=.4;return r===0?0:r===1?1:(!e||e<1?(e=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/e),-(e*Math.pow(2,10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/a)))}function mh(r){var t,e=.1,a=.4;return r===0?0:r===1?1:(!e||e<1?(e=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/e),e*Math.pow(2,-10*r)*Math.sin((r-t)*(2*Math.PI)/a)+1)}function yh(r){var t,e=.1,a=.4;return r===0?0:r===1?1:(!e||e<1?(e=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/e),(r*=2)<1?-.5*(e*Math.pow(2,10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/a)):e*Math.pow(2,-10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/a)*.5+1)}function xh(r){var t=1.70158;return r*r*((t+1)*r-t)}function _h(r){var t=1.70158;return(r=r-1)*r*((t+1)*r+t)+1}function Sh(r){var t=2.5949095;return(r*=2)<1?.5*(r*r*((t+1)*r-t)):.5*((r-=2)*r*((t+1)*r+t)+2)}function Ci(r){return 1-fr(1-r)}function fr(r){return(r/=1)<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375}function Mh(r){return r<.5?Ci(r*2)*.5:fr(r*2-1)*.5+.5}const Ph=Object.freeze(Object.defineProperty({__proto__:null,backIn:xh,backInOut:Sh,backOut:_h,bounceIn:Ci,bounceInOut:Mh,bounceOut:fr,cubicIn:ch,cubicInOut:dh,cubicOut:gh,elasticIn:ph,elasticInOut:yh,elasticOut:mh,linear:Pi,quadraticIn:fh,quadraticInOut:vh,quadraticOut:uh},Symbol.toStringTag,{value:"Module"}));function ta(r){for(var t=[],e=0,a=r.length;e<a;e++)r[e]&&(t.push(r[e].x),t.push(r[e].y));return t}function wi(r,t){return r=+r,t-=r,function(e){return r+t*e}}function ea(r,t){var e=t?t.length:0,a=r?Math.min(e,r.length):0,i=new Array(a),n=new Array(e),s;for(s=0;s<a;++s)i[s]=wi(r[s],t[s]);for(;s<e;++s)n[s]=t[s];return function(o){for(s=0;s<a;++s)n[s]=i[s](o);return n}}class Ch{constructor(t,e,a){this.hasStarted=!1,this.hasEnded=!1,this.shape=t,this.source=e,this.timeline=a,this.animate=null}to(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.delay||0,a=t.attrs||{},i=t.duration||1e3,n;typeof t.easing=="function"?n=t.easing:n=Ph[t.easing]||Pi;var s={shape:this.shape,delay:e,duration:i,easing:n},o={};for(var l in a){var f=this.source[l],h=a[l];l==="points"?(f=ta(f),h=ta(h),o.points=ea(f,h),this.source.points=f,a.points=h):l==="matrix"?o.matrix=ea(f,h):o[l]=wi(f,h)}return s.interpolate=o,s.startState=this.source,s.endState=a,this.timeline.pushAnim(s),this.animate=s,this}onFrame(t){return this.animate&&(this.animate.onFrame=function(e){t(e)}),this}onStart(t){return this.animate&&(this.animate.onStart=function(){t()}),this}onUpdate(t){return this.animate&&(this.animate.onUpdate=function(e){t(e)}),this}onEnd(t){return this.animate&&(this.animate.onEnd=function(){t()}),this}}function ra(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,a)}return e}function aa(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ra(Object(e),!0).forEach(function(a){wh(r,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ra(Object(e)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(e,a))})}return r}function wh(r,t,e){return t=bh(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function bh(r){var t=Th(r,"string");return typeof t=="symbol"?t:String(t)}function Th(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var Dh={appear:{duration:450,easing:"quadraticOut"},update:{duration:300,easing:"quadraticOut"},enter:{duration:300,easing:"quadraticOut"},leave:{duration:350,easing:"quadraticIn"}},Mt={defaultCfg:{},Action:{},getAnimation(r,t,e){var a=this.defaultCfg[r];if(a){var i=a[e];if(k(i))return i(t)}return!1},getAnimateCfg(r,t){var e=Dh[t],a=this.defaultCfg[r];return a&&a.cfg&&a.cfg[t]?F({},e,a.cfg[t]):e},registerAnimation(r,t){this.Action||(this.Action={}),this.Action=aa(aa({},this.Action),{},{[r]:t})}};function Ah(r){var t=r.start,e=r.end;return{start:t,end:e,width:e.x-t.x,height:Math.abs(e.y-t.y)}}function bi(r,t,e){var a;r.apply(t);var i=t[0],n=t[1];if(e==="x"){r.transform([["t",i,n],["s",.01,1],["t",-i,-n]]);var s=r.getMatrix();a=B.transform(s,[["t",i,n],["s",100,1],["t",-i,-n]])}else if(e==="y"){r.transform([["t",i,n],["s",1,.01],["t",-i,-n]]);var o=r.getMatrix();a=B.transform(o,[["t",i,n],["s",1,100],["t",-i,-n]])}else if(e==="xy"){r.transform([["t",i,n],["s",.01,.01],["t",-i,-n]]);var l=r.getMatrix();a=B.transform(l,[["t",i,n],["s",100,100],["t",-i,-n]])}return a}function Ih(r,t,e){var a={};return r.delay&&(a.delay=k(r.delay)?r.delay(t,e):r.delay),a.easing=r.easing,a.duration=r.duration,a.delay=r.delay,a}function Me(r,t,e,a){var i=r._id,n=r.get("index"),{easing:s,delay:o,duration:l}=Ih(e,n,i),f=r.animate().to({attrs:t,duration:l,delay:o,easing:s});a&&f.onEnd(function(){a()})}function Gt(r,t){var e=M(r.attr("fillOpacity"))?1:r.attr("fillOpacity"),a=M(r.attr("strokeOpacity"))?1:r.attr("strokeOpacity");r.attr("fillOpacity",0),r.attr("strokeOpacity",0);var i={fillOpacity:e,strokeOpacity:a};Me(r,i,t)}const Eh=Object.freeze(Object.defineProperty({__proto__:null,fadeIn:Gt},Symbol.toStringTag,{value:"Module"}));function ur(r,t,e,a,i){var{start:n,end:s,width:o,height:l}=Ah(e),f,h,u=new O.Rect({attrs:{x:n.x,y:s.y,width:o,height:l}});i==="y"?(f=n.x+o/2,h=a.y<n.y?a.y:n.y):i==="x"?(f=a.x>n.x?a.x:n.x,h=n.y+l/2):i==="xy"&&(e.isPolar?(f=e.center.x,h=e.center.y):(f=(n.x+s.x)/2,h=(n.y+s.y)/2));var v=bi(u,[f,h],i);u.isClip=!0,u.endState={matrix:v},u.set("canvas",r.get("canvas")),r.attr("clip",u);var c=function(){r.attr("clip",null),u.remove(!0)};Me(u,u.endState,t,c)}function vr(r,t,e){for(var a=r.get("children"),i,n,s,o=0,l=a.length;o<l;o++){var f=a[o],h=f.getBBox();i=(h.minX+h.maxX)/2,n=(h.minY+h.maxY)/2,s=bi(f,[i,n],e),Me(f,{matrix:s},t)}}function Ti(r,t,e,a){ur(r,t,e,a,"x")}function Di(r,t,e,a){ur(r,t,e,a,"y")}function Xt(r,t,e,a){ur(r,t,e,a,"xy")}function Oh(r,t){vr(r,t,"x")}function kh(r,t){vr(r,t,"y")}function Ai(r,t){vr(r,t,"xy")}function Dt(r,t,e){var a=lr(e);a.set("canvas",r.get("canvas")),r.attr("clip",a);var i=function(){r.attr("clip",null),a.remove(!0)},n={};if(e.isPolar){var{startAngle:s,endAngle:o}=e;n.endAngle=o,a.attr("endAngle",s)}else{var{start:l,end:f}=e,h=Math.abs(l.x-f.x),u=Math.abs(l.y-f.y);e.isTransposed?(a.attr("height",0),n.height=u):(a.attr("width",0),n.width=h)}Me(a,n,t,i)}const Yh=Object.freeze(Object.defineProperty({__proto__:null,groupScaleInX:Ti,groupScaleInXY:Xt,groupScaleInY:Di,groupWaveIn:Dt,shapesScaleInX:Oh,shapesScaleInXY:Ai,shapesScaleInY:kh},Symbol.toStringTag,{value:"Module"}));var de;Za.prototype.animate=function(){var r=y({},this.get("attrs"));return new Ch(this,r,de)};E.prototype.animate=function(r){return this.set("animate",r),this};Mt.Action=Eh;Mt.defaultCfg={interval:{enter(r){return r.isPolar&&r.transposed?function(t){t.set("zIndex",-1);var e=t.get("parent");e.sort()}:Gt}},area:{enter(r){return r.isPolar?null:Gt}},line:{enter(r){return r.isPolar?null:Gt}},path:{enter(r){return r.isPolar?null:Gt}}};var ia={line(r){return r.isPolar?Xt:Dt},area(r){return r.isPolar?Xt:Dt},path(r){return r.isPolar?Xt:Dt},point(){return Ai},interval(r){var t;return r.isPolar?(t=Xt,r.transposed&&(t=Dt)):t=r.transposed?Ti:Di,t},schema(){return Dt}};function Nh(r,t){var e={};for(var a in t)(R(r[a])&&r[a]!==t[a]||T(r[a])&&JSON.stringify(r[a])!==JSON.stringify(t[a]))&&(e[a]=t[a]);return e}function Fh(r,t,e){var a=r.get("type"),i="geom"+e+"-"+a,n=r.getXScale(),s=r.getYScale(),o=n.field||"x",l=s.field||"y",f=t[l],h;n.isIdentity?h=n.value:h=t[o],a==="interval"||a==="schema"?i+="-"+h:a==="line"||a==="area"||a==="path"?i+="-"+a:i+=n.isCategory?"-"+h:"-"+h+"-"+f;var u=r._getGroupScales();return x(u,function(v){var c=v.field;v.type!=="identity"&&(i+="-"+t[c])}),i}function Lh(r,t,e){var a=[];return x(r,function(i,n){var s=i.get("container"),o=s.get("children"),l=i.get("type"),f=M(i.get("animateCfg"))?Ze(l,t):i.get("animateCfg");f!==!1&&x(o,function(h,u){h.get("className")===l&&(h._id=Fh(i,h.get("origin")._origin,n),h.set("coord",e),h.set("animateCfg",f),h.set("index",u),a.push(h))}),i.set("shapes",o)}),a}function Bh(r){for(var t={},e=0,a=r.length;e<a;e++){var i=r[e];if(!(!i._id||i.isClip)){var n=i._id;t[n]={_id:n,type:i.get("type"),attrs:y({},i._attrs.attrs),className:i.get("className"),geomType:i.get("className"),index:i.get("index"),coord:i.get("coord"),animateCfg:i.get("animateCfg")}}}return t}function Wt(r,t,e,a){var i;return k(a)?i=a:N(a)?i=Mt.Action[a]:i=Mt.getAnimation(r,t,e),i}function oe(r,t,e){if(e===!1||X(e)&&e[t]===!1)return!1;var a=Mt.getAnimateCfg(r,t);return e&&e[t]?F({},a,e[t]):a}function Rh(r,t,e){var a,i,n=[],s=[];x(t,function(o){var l=r[o._id];l?(o.set("cacheShape",l),n.push(o),delete r[o._id]):s.push(o)}),x(r,function(o){var{className:l,coord:f,_id:h,attrs:u,index:v,type:c}=o;if(i=oe(l,"leave",o.animateCfg),i===!1)return!0;if(a=Wt(l,f,"leave",i.animation),k(a)){var g=e.addShape(c,{attrs:u,index:v,canvas:e,className:l});g._id=h,a(g,i,f)}}),x(n,function(o){var l=o.get("className");if(i=oe(l,"update",o.get("animateCfg")),i===!1)return!0;var f=o.get("coord"),h=o.get("cacheShape").attrs,u=Nh(h,o._attrs.attrs);if(Object.keys(u).length)if(a=Wt(l,f,"update",i.animation),k(a))a(o,i,f);else{var v={};x(u,function(c,g){v[g]=h[g]}),o.attr(v),o.animate().to({attrs:u,duration:i.duration,easing:i.easing,delay:i.delay}).onEnd(function(){o.set("cacheShape",null)})}}),x(s,function(o){var l=o.get("className"),f=o.get("coord");if(i=oe(l,"enter",o.get("animateCfg")),i===!1)return!0;if(a=Wt(l,f,"enter",i.animation),k(a))if(l==="interval"&&f.isPolar&&f.transposed){var h=o.get("index"),u=n[h-1];a(o,i,u)}else a(o,i,f)})}function Ze(r,t){if(!r)return null;var e=t.get("animate");return r.indexOf("guide-tag")>-1&&(r="guide-tag"),X(e)?e[r]:e===!1?!1:null}function Ii(){de=new hh,de.play()}function Ei(r){if(r.get("animate")!==!1){var t=r.get("isUpdate"),e=r.get("canvas"),a=r.get("coord"),i=r.get("geoms"),n=e.get("caches")||[];n.length===0&&(t=!1);var s=Lh(i,r,a),{frontPlot:o,backPlot:l}=r.get("axisController"),f=o.get("children").concat(l.get("children")),h=[];r.get("guideController")&&(h=r.get("guideController").guideShapes);var u=[];if(f.concat(h).forEach(function(g){var d=g.get("className"),p=Ze(d,r);g.set("coord",a),g.set("animateCfg",p),u.push(g),s.push(g)}),e.set("caches",Bh(s)),t)Rh(n,s,e);else{var v,c;x(i,function(g){var d=g.get("type"),p=M(g.get("animateCfg"))?Ze(d,r):g.get("animateCfg");if(p!==!1){if(v=oe(d,"appear",p),c=Wt(d,a,"appear",v.animation),k(c)){var m=g.get("shapes");x(m,function(P){c(P,v,a)})}else if(ia[d]){c=Yh[v.animation]||ia[d](a);var _=g.getYScale(),C=a.convertPoint({x:0,y:_.scale(g.getYMinValue())}),S=g.get("container");c&&c(S,v,a,C)}}}),x(u,function(g){var d=g.get("animateCfg"),p=g.get("className");if(d&&d.appear){var m=Mt.getAnimateCfg(p,"appear"),_=F({},m,d.appear),C=Wt(p,a,"appear",_.animation);k(C)&&C(g,_,a)}})}}}function Oi(){de.stop()}const zh={afterCanvasInit:Ii,beforeCanvasDraw:Ei,afterCanvasDestroyed:Oi},Gh=Object.freeze(Object.defineProperty({__proto__:null,afterCanvasDestroyed:Oi,afterCanvasInit:Ii,beforeCanvasDraw:Ei,default:zh},Symbol.toStringTag,{value:"Module"}));E._Interactions={};E.registerInteraction=function(r,t){E._Interactions[r]=t};E.getInteraction=function(r){return E._Interactions[r]};E.prototype.interaction=function(r,t){var e=this._interactions||{};e[r]&&e[r].destroy();var a=E.getInteraction(r),i=new a(t,this);return e[r]=i,this._interactions=e,this};E.prototype.clearInteraction=function(r){var t=this._interactions;if(t)return r?(t[r]&&t[r].destroy(),delete t[r]):x(t,function(e,a){e.destroy(),delete t[a]}),this};function mt(r,t,e){return t=Xh(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Xh(r){var t=Hh(r,"string");return typeof t=="symbol"?t:String(t)}function Hh(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function $h(r,t){if(r.length!==t.length)return!1;var e=r.length-1;return r[0]===t[0]&&r[e]===t[e]}var ke=[0,1];class Vh{constructor(t){var e=this;mt(this,"chart",null),mt(this,"values",null),mt(this,"range",ke),mt(this,"startRange",ke),mt(this,"minCount",10),mt(this,"_afterinit",function(){var a=e.getPinchScale(),i=[].concat(a.values);e.values=i,e.minScale||(e.minScale=e.minCount/i.length),e.range!==ke&&(e.updateRange(e.range),e.updateTicks())}),mt(this,"_afterdatachange",function(){e.updateRange(e.range)}),this.chart=t,this._initEvent(t)}_initEvent(t){t.on(Ge,this._afterinit),t.on($t,this._afterdatachange)}getPinchScale(){var{chart:t}=this,e=t.getXScale();return e}getFollowScale(){var{chart:t}=this,e=t.getYScales()||[];return e[0]}start(){var{range:t}=this,e=this.getPinchScale(),[a,i]=t;this.startRange=[a,i],this.lastTickCount=e.tickCount}doZoom(t,e,a){var{startRange:i,minScale:n}=this,[s,o]=i,l=1-a,f=o-s,h=f*l,u=h*t,v=h*e,c=Math.max(0,s-u),g=Math.min(1,o+v),d=[c,g];g-c<n||this.updateRange(d)}doMove(t){if(t){var{startRange:e}=this,[a,i]=e,n=i-a,s=n*t,o=a-s,l=i-s,f;o<0?f=[0,n]:l>1?f=[1-n,1]:f=[o,l],this.updateRange(f)}}updateRange(t){var{values:e}=this,[a,i]=t;a=Math.max(0,a),i=Math.min(1,i),this.range=[a,i];var n=e.length,s=a*n,o=i*n,l=e.slice(s,o);this.repaint(l)}repaint(t){var{chart:e}=this,a=this.getPinchScale(),{values:i,ticks:n}=a;$h(i,t)||(this.updateScale(a,{ticks:n,values:t}),this.updateFollowScale(a,t),e.repaint())}updateFollowScale(t,e){var{chart:a}=this,i=this.getFollowScale(),{field:n,type:s}=t,{field:o}=i,l=[],f={};e.forEach(function(c){f[c]=!0});var h=a.get("data");h.forEach(function(c){if(s==="timeCat"){var g=Ht(c[n]);f[g]&&l.push(c[o])}});var{min:u,max:v}=Je(l);this.updateScale(i,{min:u,max:v,nice:!0})}updateScale(t,e){t&&t.change(e)}updateTicks(){var{chart:t,values:e}=this,a=this.getPinchScale(),{values:i,tickCount:n}=a,s=Math.round(n*e.length/i.length),o=Da("cat"),l=o({tickCount:s,values:e});this.updateScale(a,{ticks:l,values:i}),t.repaint()}destroy(){var{chart:t}=this;t.off(Ge,this._afterinit),t.off($t,this._afterdatachange)}}function et(r,t,e){return t=jh(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function jh(r){var t=Wh(r,"string");return typeof t=="symbol"?t:String(t)}function Wh(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}class ki{getDefaultCfg(){return{}}getInteractionContext(t){var e=t.get("interactionContext");return e||(e=new Vh(t),t.set("interactionContext",e),e)}constructor(t,e){var a=this;et(this,"type",""),et(this,"startEvent","touchstart"),et(this,"processEvent","touchmove"),et(this,"endEvent","touchend"),et(this,"resetEvent",null),et(this,"context",null),et(this,"_start",function(n){a.preStart&&a.preStart(n),a.start(n),a.onStart&&a.onStart(n)}),et(this,"_process",function(n){a.preProcess&&a.preProcess(n),a.process(n),a.onProcess&&a.onProcess(n)}),et(this,"_end",function(n){a.preEnd&&a.preEnd(n),a.end(n),a.onEnd&&a.onEnd(n)}),et(this,"_reset",function(n){a.preReset&&a.preReset(n),a.reset(n),a.onReset&&a.onReset(n)}),y(this,this.getDefaultCfg(),t),this.context=this.getInteractionContext(e),this.chart=e;var{range:i}=this;i&&(this.context.range=i),this._bindEvents(e)}_bindEvents(t){var{startEvent:e,processEvent:a,endEvent:i,resetEvent:n}=this,s=t.get("canvas");s.on(e,this._start),s.on(a,this._process),s.on(i,this._end),s.on(n,this._reset)}_clearEvents(){var{chart:t,startEvent:e,processEvent:a,endEvent:i,resetEvent:n}=this,s=t.get("canvas");s.off(e,this._start),s.off(a,this._process),s.off(i,this._end),s.off(n,this._start)}start(){}process(){}end(){}reset(){}destroy(){this.context.destroy(),this._clearEvents()}}class qh extends ki{getDefaultCfg(){return{type:"pan",startEvent:"panstart",processEvent:"pan",endEvent:"panend"}}start(){var{context:t}=this;t.start()}process(t){var{direction:e,deltaX:a}=t;if(!(e==="up"||e==="down")){t.preventDefault&&t.preventDefault();var{context:i}=this,n=i.chart,s=n.get("coord"),{start:o,end:l}=s,f=l.x-o.x,h=a/f;i.doMove(h)}}}class Uh extends ki{getDefaultCfg(){return{type:"pinch",startEvent:"pinchstart",processEvent:"pinch",endEvent:"pinchend"}}constructor(t,e){super(t,e);var{context:a}=this;y(a,t)}start(){var{context:t}=this;t.start()}process(t){t.preventDefault&&t.preventDefault();var{zoom:e,center:a}=t,{context:i}=this,{chart:n}=i,s=n.get("coord"),{start:o,end:l}=s,f=l.x-o.x,h=Math.abs(a.x-o.x),u=Math.abs(l.x-a.x),v=h/f,c=u/f;i.doZoom(v,c,e)}end(){var{context:t}=this;t.updateTicks()}}E.registerInteraction("pan",qh);E.registerInteraction("pinch",Uh);var Zh={Marker:O.Marker,Tooltip:fi};E.plugins.register([Kl,lh,eh,Gh]);const vf={Component:Zh,Global:b,Chart:E,Shape:Y,G:To,Util:on,Helper:Do,track:Io,Animate:Mt};export{E as C,vf as F};
