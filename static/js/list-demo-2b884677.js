import{_ as W}from"./index-fe03fbb2.js";import{_ as T}from"./plugin-vue_export-helper-c27b6911.js";import{ab as X,d as $,c4 as V,p as l,af as A,ag as Y,I as C,am as Z,o as O,f as h,k as y,x as S,y as z,s as U,a1 as I,c5 as ee,a as w,r as j,w as K,t as q,M as te,F as x,G as D,q as b,z as G,g as F,v as N,a5 as J,a6 as H,B as ae,u as L,J as M,S as oe}from"./index-bf5293ec.js";import{D as ne,a as le,L as se,P as re}from"./index-e5c57768.js";import{T as ie}from"./index-ce933308.js";/* empty css              */import"./index-dd8bc5ba.js";import"./index-9b4749b7.js";import{S as ce}from"./index-c1e042d3.js";import{C as de,a as ue}from"./index-e1cf19df.js";import{C as fe}from"./index-071fe42d.js";import{S as he}from"./index-12d71349.js";import{I as _e}from"./index-629ebaff.js";import"./index-190fcdfb.js";import"./use-route-27ae2cd1.js";import"./use-id-3c752574.js";import"./index-3b4d3a26.js";const[pe,f]=X("card"),me={tag:String,num:A,desc:String,thumb:String,title:String,price:A,centered:Boolean,lazyLoad:Boolean,currency:Y("¥"),thumbLink:String,originPrice:A};var ve=$({name:pe,props:me,emits:["clickThumb"],setup(e,{slots:o,emit:s}){const m=()=>{if(o.title)return o.title();if(e.title)return l("div",{class:[f("title"),"van-multi-ellipsis--l2"]},[e.title])},d=()=>{if(o.tag||e.tag)return l("div",{class:f("tag")},[o.tag?o.tag():l(ie,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},g=()=>o.thumb?o.thumb():l(_e,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),u=()=>{if(o.thumb||e.thumb)return l("a",{href:e.thumbLink,class:f("thumb"),onClick:i=>s("clickThumb",i)},[g(),d()])},p=()=>{if(o.desc)return o.desc();if(e.desc)return l("div",{class:[f("desc"),"van-ellipsis"]},[e.desc])},k=()=>{const i=e.price.toString().split(".");return l("div",null,[l("span",{class:f("price-currency")},[e.currency]),l("span",{class:f("price-integer")},[i[0]]),C("."),l("span",{class:f("price-decimal")},[i[1]])])};return()=>{var i,t,n;const a=o.num||V(e.num),c=o.price||V(e.price),r=o["origin-price"]||V(e.originPrice),_=a||c||r||o.bottom,B=c&&l("div",{class:f("price")},[o.price?o.price():k()]),P=r&&l("div",{class:f("origin-price")},[o["origin-price"]?o["origin-price"]():`${e.currency} ${e.originPrice}`]),E=a&&l("div",{class:f("num")},[o.num?o.num():`x${e.num}`]),R=o.footer&&l("div",{class:f("footer")},[o.footer()]),v=_&&l("div",{class:f("bottom")},[(i=o["price-top"])==null?void 0:i.call(o),B,P,E,(t=o.bottom)==null?void 0:t.call(o)]);return l("div",{class:f()},[l("div",{class:f("header")},[u(),l("div",{class:f("content",{centered:e.centered})},[l("div",null,[m(),p(),(n=o.tags)==null?void 0:n.call(o)]),v])]),R])}}});const ge=Z(ve);const ke={key:0,class:"list-total"},ye={class:"total-num"},be=$({name:"ListTotal"}),we=Object.assign(be,{props:{total:{type:[String,Number],default:0}},setup(e){return O(()=>{}),(o,s)=>+e.total>0?(h(),y("div",ke,[C(" 共 "),S("span",ye,z(e.total),1),C(" 条数据 ")])):U("",!0)}}),Ce=T(we,[["__scopeId","data-v-0fb6ac85"]]);const Se=$({name:"FilterMenus",components:{},props:{activeColor:{type:String,default:I},filterMenu:{type:Array,default:()=>[{field:"status",label:"状态",value:"",multiple:!1,data:[{label:"不限",value:"-1"},{label:"上架",value:"0"},{label:"下架",value:"1"}]}],validator(e){return ee(e)}}},emits:["close","confirm"],setup(e,{emit:o}){const s=w(null),m=w([0,1]),d=j({list:[]}),g=()=>{},u=({value:t,selectedOptions:n,tabIndex:a},c)=>{console.log(t,a,n,n.map(_=>_.value)),console.log("pItem:",c);const r=c.showAllLevels;c.value=r?n.map(_=>_.value).join("/"):t};K(()=>e.filterMenu,(t,n)=>{t!==n&&(d.list=t,d.list.forEach(a=>{if(a.data&&a.data.length&&(a.data.forEach(r=>{r.checked=!1}),a.hasOwnProperty("canAll")&&a.canAll)){const r={label:"全选",value:"all",checked:!1};a.data.unshift(r)}}))},{deep:!0,immediate:!0});const p=(t,n,a,c)=>{if(console.log(" 点击选择项",t,n,a,c),console.log(t.value),t.value==="all"&&(t.checked=!t.checked,t.label=t.checked?"反选":"全选",a.data.forEach(r=>r.checked=t.checked)),t.value!=="all"){t.checked=!t.checked;const r=a.data.filter(_=>_.value!=="all"&&_.checked).length;console.log("非全部按钮已选中的个数",r),a.hasOwnProperty("canAll")&&a.canAll===!0&&(a.data[0].checked=r===a.data.length-1,a.data[0].label=r===a.data.length-1?"反选":"全选")}a.hasOwnProperty("multiple")&&!a.multiple&&(t.value!=="all"&&d.list[c].data.forEach(r=>r.checked=!1),t.checked=!t.checked)},k=()=>{d.list.forEach(t=>{t.type&&t.type==="tree"&&(t.valueShow="",t.value=""),t.data&&t.data.length&&t.data.forEach(n=>{n.checked=!1,n.value==="all"&&(n.label="全选")})})},i=()=>{const t={};d.list.forEach(a=>{if(a.data&&a.data.length){const c=a.data.reduce((r,_)=>(_.value!=="all"&&_.checked&&r.push(_.value),r),[]);a.type==="tree"&&a.value!==""&&(t[a.field]=a.value),c.join(",")!==""&&(t[a.field]=c.join(","))}}),console.log("result",t);const n=Object.keys(t).length!==0;o("confirm",t,n)};return{...q(d),container:s,activeArr:m,onFinish:u,handleClickBtn:g,filterLabelSelect:p,filterReset:k,filterConfirm:i}}}),$e=e=>(J("data-v-10473434"),e=e(),H(),e),Le={ref:"container",class:"filter-menus-wrapper st-bg-white"},Fe={class:"filter-list"},Te={key:0,class:"st-flex-wrap st-padding-box"},Be=["onClick"],Pe=$e(()=>S("div",null,null,-1)),Re={class:"filter-button-box st-flex-ai"};function Ve(e,o,s,m,d,g){const u=fe,p=de,k=ue,i=te("waves");return h(),y("div",Le,[S("div",Fe,[(h(!0),y(x,null,D(e.list,(t,n)=>(h(),y("div",{key:n,class:"filter-item"},[l(k,{modelValue:e.activeArr,"onUpdate:modelValue":o[1]||(o[1]=a=>e.activeArr=a),border:!1},{default:b(()=>[l(p,{name:n,title:t.label,value:`${e.activeArr.includes(n)?"收起":"展开"}`},{default:b(()=>[t.type!=="tree"?(h(),y("div",Te,[(h(!0),y(x,null,D(t.data,(a,c)=>(h(),y("div",{key:c,class:G([{checked:a.checked},"filter-item-label st-line-16 van-ellipsis"]),onClick:r=>e.filterLabelSelect(a,c,t,n)},z(a.label),11,Be))),128))])):(h(),F(u,{key:n,ref_for:!0,ref:"cascaderRef",modelValue:t.value,"onUpdate:modelValue":a=>t.value=a,"field-names":{text:"label",value:"value",children:"children"},options:t.data,"active-color":e.activeColor,class:"cascader-tree",placeholder:"请选择",onClose:o[0]||(o[0]=a=>e.show=!1),onFinish:a=>e.onFinish(a,t,n)},{title:b(()=>[Pe]),_:2},1032,["modelValue","onUpdate:modelValue","options","active-color","onFinish"]))]),_:2},1032,["name","title","value"])]),_:2},1032,["modelValue"])]))),128))]),S("div",Re,[N((h(),y("div",{class:"filter-button-reset st-flex-center st-flex-1",onClick:o[2]||(o[2]=(...t)=>e.filterReset&&e.filterReset(...t))},[C(" 清空 ")])),[[i]]),N((h(),y("div",{class:"filter-button-confirm st-flex-center st-flex-1 st-color-white",onClick:o[3]||(o[3]=(...t)=>e.filterConfirm&&e.filterConfirm(...t))},[C(" 确定 ")])),[[i]])])],512)}const Ae=T(Se,[["render",Ve],["__scopeId","data-v-10473434"]]);const xe=$({name:"SearchFilter",props:{placeholder:{type:String,default:"搜索关键词"},filter:{type:Boolean,default:!1},shape:{type:String,default:"square",validator(e){return["square","round"].includes(e)}}},emits:["search","confirm"],setup(e,{emit:o}){const s=j({keyword:"",showFilter:!0,isChecked:!1,dropdownItemRef:null,keywordListRef:null,showKeywordList:!1}),m=(i,t)=>{s.dropdownItemRef.toggle(),console.log("筛选结果：",i,t),s.isChecked=t,o("confirm",i)},d=()=>{s.showKeywordList=!0,s.showFilter=!1},g=()=>{s.showKeywordList=!1,s.showFilter=!0},u=()=>{o("search",s.keyword)},p=()=>{};K(()=>s.keyword,(i,t)=>{});const k=i=>{s.keyword=i};return{...q(s),onFocus:d,onBlur:g,onSearch:u,searchConfirm:p,handleFilterConfirm:m,handleKeywordSearch:k}}}),De=e=>(J("data-v-7f600c48"),e=e(),H(),e),je={class:"search-filter-wrapper st-flex-ai st-bg-white van-hairline--bottom"},Ee=De(()=>S("div",{class:G("")},"筛选",-1));function Ne(e,o,s,m,d,g){const u=Ae,p=ne,k=le,i=ce;return h(),y("div",je,[l(i,{modelValue:e.keyword,"onUpdate:modelValue":o[0]||(o[0]=t=>e.keyword=t),modelModifiers:{trim:!0},shape:e.shape,"show-action":!0,class:"search-box st-flex-1",autocomplete:"off",placeholder:e.placeholder,"action-text":"",onBlur:e.onBlur,onFocus:e.onFocus,onSearch:e.onSearch},{action:b(()=>[(h(),F(k,{key:0,"active-color":"#333333","z-index":"999"},{default:b(()=>[l(p,{ref:"dropdownItemRef"},{title:b(()=>[Ee]),default:b(()=>[l(u,{onConfirm:e.handleFilterConfirm},null,8,["onConfirm"])]),_:1},512)]),_:1}))]),_:1},8,["modelValue","shape","placeholder","onBlur","onFocus","onSearch"])])}const Me=T(xe,[["render",Ne],["__scopeId","data-v-7f600c48"]]);const Oe=$({name:"ListDemo"}),ze=Object.assign(Oe,{setup(e){const o=w(null);O(async()=>{await ae(),console.log("backTopRef",o.value)}),w(0);const s=w([]),m=w([]);j({status:"-1"});const d=w(!1),g=w(!1),u=w(!1),p=()=>{setTimeout(()=>{u.value&&(m.value=s.value=[],u.value=!1);for(let n=1;n<=10;n++){const a={title:"商品"+n,tag:n%2===0?"上架":"下架",status:n%2===0?"0":"1",price:(n*2).toFixed(2),desc:n%2===0?"我是上架的宝贝":"我是下架的宝贝",thumb:"https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg"};m.value.push(a),s.value.push(a)}d.value=!1,s.value.length>=50&&(g.value=!0)},1e3)};p();const k=()=>{g.value=!1,d.value=!0,p()},i=n=>{if(console.log("handleSearch",n),n.trim()!==""){const a=new RegExp(n,"gi"),c=m.value.filter(r=>a.test(r.title));s.value=c}else s.value=m.value},t=n=>{oe({message:`筛选参数：${JSON.stringify(n)}`})};return(n,a)=>{const c=Me,r=he,_=ge,B=se,P=re,E=Ce,R=W;return h(),F(R,{class:"page-wrapper"},{default:b(()=>[l(r,{"offset-top":46,"z-index":99},{default:b(()=>[l(c,{placeholder:"搜索商品",onSearch:i,onConfirm:t})]),_:1}),l(P,{modelValue:L(u),"onUpdate:modelValue":a[1]||(a[1]=v=>M(u)?u.value=v:null),onRefresh:k},{default:b(()=>[l(B,{loading:L(d),"onUpdate:loading":a[0]||(a[0]=v=>M(d)?d.value=v:null),finished:L(g),"finished-text":"没有更多了",onLoad:p},{default:b(()=>[(h(!0),y(x,null,D(L(s),(v,Q)=>(h(),F(_,{key:v.title+Q,tag:v.tag,price:v.price,desc:v.desc,title:v.title,thumb:v.thumb,class:"st-bg-white"},null,8,["tag","price","desc","title","thumb"]))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"]),U("",!0)]),_:1})}}}),lt=T(ze,[["__scopeId","data-v-054ec726"]]);export{lt as default};
