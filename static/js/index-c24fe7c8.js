import{d as k,c as I,u as r,f as i,k as p,x as e,p as h,F as $,G as x,y as B,g as V,X as S,al as b,am as N,a as g,J as O,Q as W}from"./index-5560da19.js";import"./index-462a24ae.js";import"./index-ef67e059.js";import{S as H}from"./index-c2f99ee5.js";import{_ as J}from"./index-c420e702.js";import{_ as C}from"./plugin-vue_export-helper-c27b6911.js";import{a as R}from"./function-call-2fade5d0.js";import"./use-route-23f883a9.js";import"./use-id-e390e938.js";import"./index-e0efa64a.js";import"./use-placeholder-87cf9818.js";const w=c=>(b("data-v-1dec3700"),c=c(),N(),c),L={key:0,class:"history-words"},j={class:"history-header"},D=w(()=>e("div",{class:"title"},"搜索历史",-1)),F={class:"actions"},A={class:"word-list"},E=["onClick"],G={class:"ellipsis"},M=k({name:"HistoryWord"}),Q=Object.assign(M,{props:{historys:{type:Array,default:()=>[]}},emits:["select","remove"],setup(c,{emit:l}){const m=c,o=I(()=>m.historys),a=()=>{R({title:"温馨提示",message:"确定删除全部历史记录吗？"}).then(()=>{l("remove")}).catch(()=>{})},u=_=>{l("select",_)};return(_,f)=>{const d=S,t=J;return r(o)&&r(o).length?(i(),p("section",L,[e("div",j,[D,e("div",F,[h(d,{class:"delete-icon",name:"delete-o",onClick:a})])]),e("ul",A,[(i(!0),p($,null,x(r(o),s=>(i(),p("li",{key:s,class:"word-item",onClick:n=>u(s)},[e("div",G,B(s),1)],8,E))),128))])])):(i(),V(t,{key:1,description:"暂无搜索历史"}))}}}),T=C(Q,[["__scopeId","data-v-1dec3700"]]);const U={class:"search-page"},X={class:"search__header"},q={class:"search__wrap van-hairline--bottom"},z={class:"search__input"},K={class:"search__content"},P=k({name:"search"}),Y=Object.assign(P,{setup(c){const l=W(),m=JSON.parse(localStorage.getItem("search_history_list"))||[],o=g(m),a=g(""),u=()=>{l.back()},_=t=>{d(t)},f=()=>{o.value=[],localStorage.removeItem("search_history_list")},d=t=>{a.value=t;let s=[];const n=localStorage.getItem("search_history_list");if(console.log("history:",n),n){s=[...JSON.parse(n)];const v=s.includes(t);s.unshift(t),v&&(s=[...new Set(s)])}else s=[t];o.value=s.filter(Boolean),localStorage.setItem("search_history_list",JSON.stringify(o.value))};return(t,s)=>{const n=S,v=H;return i(),p("div",U,[e("div",X,[e("div",q,[e("div",{class:"search__left",onClick:s[0]||(s[0]=y=>u())},[h(n,{class:"back-icon",name:"arrow-left",color:"#1989fa"})]),e("div",z,[h(v,{modelValue:r(a),"onUpdate:modelValue":s[1]||(s[1]=y=>O(a)?a.value=y:null),modelModifiers:{trim:!0},autofocus:"",shape:"round",placeholder:"请输入搜索关键词"},null,8,["modelValue"])]),e("div",{class:"search__right",onClick:s[2]||(s[2]=y=>_(r(a)))},"搜索")])]),e("div",K,[h(T,{historys:r(o),onSelect:d,onRemove:f},null,8,["historys"])])])}}}),_s=C(Y,[["__scopeId","data-v-37890d98"]]);export{_s as default};
