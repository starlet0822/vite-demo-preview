!function(){function o(o,t){return function(o){if(Array.isArray(o))return o}(o)||function(o,e){var t=null==o?null:"undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(null!=t){var n,i,a,r,l=[],c=!0,s=!1;try{if(a=(t=t.call(o)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=a.call(t)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){s=!0,i=u}finally{try{if(!c&&null!=t.return&&(r=t.return(),Object(r)!==r))return}finally{if(s)throw i}}return l}}(o,t)||function(o,t){if(!o)return;if("string"==typeof o)return e(o,t);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(o,t)}(o,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(o,e){(null==e||e>o.length)&&(e=o.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=o[t];return n}System.register(["./index-legacy-2ba5397d.js","./index-legacy-023a71ff.js","./index-legacy-dad89d04.js"],(function(e,t){"use strict";var n,i,a,r,l,c,s,u,v,m,f,g,d,h,p,y,w,x,b,Z,X,P,Y,C,I,S,z,H,W,j,R,A,D,O,T,B,N,M,$,E,U;return{setters:[function(o){n=o.Z,i=o.d,a=o.c4,r=o.$,l=o.r,c=o.cv,s=o.a,u=o.c,v=o.w,m=o.cw,f=o.p,g=o.cx,d=o.ax,h=o.cm,p=o.ak,y=o.cy,w=o.cz,x=o.cA,b=o.ap,Z=o.o,X=o.cB,P=o.cC,Y=o.B,C=o.m,I=o.au,S=o.W,z=o.at,H=o.as,W=o.av,j=o.a0,R=o.ar,A=o.ce,D=o.X,O=o.ct,T=o.c9,B=o._,N=o.cD,M=o.cE},function(o){$=o.S,E=o.a},function(o){U=o.I}],execute:function(){var t,k=function(o){return Math.sqrt(Math.pow(o[0].clientX-o[1].clientX,2)+Math.pow(o[0].clientY-o[1].clientY,2))},L=n("image-preview")[1],q=i({props:{src:String,show:Boolean,active:Number,minZoom:a(r),maxZoom:a(r),rootWidth:a(Number),rootHeight:a(Number),disableZoom:Boolean},emits:["scale","close","longPress"],setup:function(o,e){var t,n,i,a,r,b,Z,X,P=e.emit,Y=e.slots,C=l({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),I=c(),S=s(),z=s(),H=s(!1),W=s(!1),j=0,R=u((function(){var o=C.scale,e=C.moveX,t=C.moveY,n=C.moving,i=C.zooming,a=C.initializing,r={transitionDuration:i||n||a?"0s":".3s"};return(1!==o||W.value)&&(r.transform="matrix(".concat(o,", 0, 0, ").concat(o,", ").concat(e,", ").concat(t,")")),r})),A=u((function(){if(C.imageRatio){var e=o.rootWidth,t=o.rootHeight,n=H.value?t/C.imageRatio:e;return Math.max(0,(C.scale*n-e)/2)}return 0})),D=u((function(){if(C.imageRatio){var e=o.rootWidth,t=o.rootHeight,n=H.value?t:e*C.imageRatio;return Math.max(0,(C.scale*n-t)/2)}return 0})),O=function(e,t){var n;if((e=d(e,+o.minZoom,+o.maxZoom+1))!==C.scale){var i=e/C.scale;if(C.scale=e,t){var a=y(null==(n=S.value)?void 0:n.$el),r={x:.5*a.width,y:.5*a.height},l=C.moveX-(t.x-a.left-r.x)*(i-1),c=C.moveY-(t.y-a.top-r.y)*(i-1);C.moveX=d(l,-A.value,A.value),C.moveY=d(c,-D.value,D.value)}else C.moveX=0,C.moveY=W.value?j:0;P("scale",{scale:e,index:o.active})}},T=function(){O(1)},B=!1,N=function(e){var l=e.touches;if(2!==(t=l.length)||!o.disableZoom){var c=I.offsetX;I.start(e),n=C.moveX,i=C.moveY,X=Date.now(),B=!1,C.moving=1===t&&(1!==C.scale||W.value),C.zooming=2===t&&!c.value,C.zooming&&(a=C.scale,r=k(l))}},M=function(){if(!(t>1)){var o,e=I.offsetX,n=I.offsetY,i=Date.now()-X;e.value<w&&n.value<w&&(i<250?Z?(clearTimeout(Z),Z=null,o=C.scale>1?1:2,O(o,2===o||W.value?{x:I.startX.value,y:I.startY.value}:void 0)):Z=setTimeout((function(){P("close"),Z=null}),250):i>x&&P("longPress"))}},E=function(e){var t=!1;if((C.moving||C.zooming)&&(t=!0,C.moving&&n===C.moveX&&i===C.moveY&&(t=!1),!e.touches.length)){C.zooming&&(C.moveX=d(C.moveX,-A.value,A.value),C.moveY=d(C.moveY,-D.value,D.value),C.zooming=!1),C.moving=!1,n=0,i=0,a=1,C.scale<1&&T();var r=+o.maxZoom;C.scale>r&&O(r,b)}g(e,t),M(),I.reset()},q=function(){var e=o.rootWidth,t=o.rootHeight,n=t/e,i=C.imageRatio;H.value=C.imageRatio>n&&i<2.6,W.value=C.imageRatio>n&&i>=2.6,W.value&&(j=(i*e-t)/2,C.moveY=j,C.initializing=!0,h((function(){C.initializing=!1}))),T()},F=function(o){var e=o.target,t=e.naturalWidth,n=e.naturalHeight;C.imageRatio=n/t,q()};return v((function(){return o.active}),T),v((function(){return o.show}),(function(o){o||T()})),v((function(){return[o.rootWidth,o.rootHeight]}),q),m("touchmove",(function(o){var e=o.touches;if(I.move(o),C.moving){var t=I.deltaX,l=I.deltaY,c=t.value+n,s=l.value+i;if((c>A.value||c<-A.value)&&!B&&I.isHorizontal())return void(C.moving=!1);B=!0,g(o,!0),C.moveX=d(c,-A.value,A.value),C.moveY=d(s,-D.value,D.value)}if(C.zooming&&(g(o,!0),2===e.length)){var u=k(e),v=a*u/r;b=function(o){return{x:(o[0].clientX+o[1].clientX)/2,y:(o[0].clientY+o[1].clientY)/2}}(e),O(v,b)}}),{target:u((function(){var o;return null==(o=z.value)?void 0:o.$el}))}),function(){var e={loading:function(){return f(p,{type:"spinner"},null)}};return f($,{ref:z,class:L("swipe-item"),onTouchstartPassive:N,onTouchend:E,onTouchcancel:E},{default:function(){return[Y.image?f("div",{class:L("image-wrap")},[Y.image({src:o.src})]):f(U,{ref:S,src:o.src,fit:"contain",class:L("image",{vertical:H.value}),style:R.value,onLoad:F},e)]}})}}}),F=o(n("image-preview"),2),V=F[0],_=F[1],G=["show","teleport","transition","overlayStyle","closeOnPopstate"],J={show:Boolean,loop:z,images:H(),minZoom:W(1/3),maxZoom:W(3),overlay:z,closeable:Boolean,showIndex:z,className:j,closeIcon:R("clear"),transition:String,beforeClose:Function,overlayClass:j,overlayStyle:Object,swipeDuration:W(300),startPosition:W(0),showIndicators:Boolean,closeOnPopstate:z,closeIconPosition:R("top-right"),teleport:[String,Object]},K=i({name:V,props:J,emits:["scale","close","closed","change","longPress","update:show"],setup:function(o,e){var t=e.emit,n=e.slots,i=s(),a=l({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),r=function(){if(i.value){var o=y(i.value.$el);a.rootWidth=o.width,a.rootHeight=o.height,i.value.resize()}},c=function(o){return t("scale",o)},u=function(o){return t("update:show",o)},m=function(){O(o.beforeClose,{args:[a.active],done:function(){return u(!1)}})},g=function(o){o!==a.active&&(a.active=o,t("change",o))},d=function(){if(o.showIndex)return f("div",{class:_("index")},[n.index?n.index({index:a.active}):"".concat(a.active+1," / ").concat(o.images.length)])},h=function(){if(n.cover)return f("div",{class:_("cover")},[n.cover()])},p=function(){a.disableZoom=!0},w=function(){a.disableZoom=!1},x=function(){if(o.closeable)return f(D,{role:"button",name:o.closeIcon,class:[_("close-icon",o.closeIconPosition),A],onClick:m},null)},z=function(){return t("closed")},H=function(o,e){var t;return null==(t=i.value)?void 0:t.swipeTo(o,e)};return b({swipeTo:H}),Z(r),v([X,P],r),v((function(){return o.startPosition}),(function(o){return g(+o)})),v((function(){return o.show}),(function(e){var n=o.images,i=o.startPosition;e?(g(+i),Y((function(){r(),H(+i,{immediate:!0})}))):t("close",{index:a.active,url:n[a.active]})})),function(){return f(S,C({class:[_(),o.className],overlayClass:[_("overlay"),o.overlayClass],onClosed:z,"onUpdate:show":u},I(o,G)),{default:function(){return[x(),f(E,{ref:i,lazyRender:!0,loop:o.loop,class:_("swipe"),duration:o.swipeDuration,initialSwipe:o.startPosition,showIndicators:o.showIndicators,indicatorColor:"white",onChange:g,onDragEnd:w,onDragStart:p},{default:function(){return[o.images.map((function(e,i){return f(q,{src:e,show:o.show,active:a.active,maxZoom:o.maxZoom,minZoom:o.minZoom,rootWidth:a.rootWidth,rootHeight:a.rootHeight,disableZoom:a.disableZoom,onScale:c,onClose:m,onLongPress:function(){return t("longPress",{index:i})}},{image:n.image})}))]}}),d(),h()]}})}}}),Q={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"};e("s",(function(o){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(T)return t||(e=N({setup:function(){var o=M(),e=o.state,t=o.toggle,n=function(){e.images=[]};return function(){return f(K,C(e,{onClosed:n,"onUpdate:show":t}),null)}}}),t=e.instance),o=Array.isArray(o)?{images:o,startPosition:n}:o,t.open(B({},Q,o)),t}))}}}))}();
