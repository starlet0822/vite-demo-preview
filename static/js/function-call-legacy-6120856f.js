!function(){function o(o,t){return function(o){if(Array.isArray(o))return o}(o)||function(o,e){var t=null==o?null:"undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(null!=t){var n,i,a,r,l=[],c=!0,s=!1;try{if(a=(t=t.call(o)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=a.call(t)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){s=!0,i=u}finally{try{if(!c&&null!=t.return&&(r=t.return(),Object(r)!==r))return}finally{if(s)throw i}}return l}}(o,t)||function(o,t){if(!o)return;if("string"==typeof o)return e(o,t);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(o,t)}(o,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(o,e){(null==e||e>o.length)&&(e=o.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=o[t];return n}System.register(["./index-legacy-b2c7c465.js","./index-legacy-f1b2bb58.js","./index-legacy-165d9efe.js"],(function(e,t){"use strict";var n,i,a,r,l,c,s,u,v,m,f,g,d,h,p,y,w,b,x,Z,P,S,X,Y,C,I,z,H,j,R,W,A,D,O,T,B,M,N,$,q,E;return{setters:[function(o){n=o.a1,i=o.d,a=o.cq,r=o.a3,l=o.r,c=o.cv,s=o.a,u=o.c,v=o.w,m=o.cd,f=o.p,g=o.cw,d=o.aw,h=o.cm,p=o.aq,y=o.cx,w=o.cy,b=o.cz,x=o.ci,Z=o.o,P=o.cA,S=o.cB,X=o.B,Y=o.m,C=o.c5,I=o.$,z=o.av,H=o.c9,j=o.at,R=o.a4,W=o.as,A=o.cC,D=o.P,O=o.ct,T=o.ca,B=o.a2,M=o.cD,N=o.cE},function(o){$=o.S,q=o.a},function(o){E=o.I}],execute:function(){var t,U=function(o){return Math.sqrt(Math.pow(o[0].clientX-o[1].clientX,2)+Math.pow(o[0].clientY-o[1].clientY,2))},L=n("image-preview")[1],k=i({props:{src:String,show:Boolean,active:Number,minZoom:a(r),maxZoom:a(r),rootWidth:a(Number),rootHeight:a(Number),disableZoom:Boolean},emits:["scale","close","longPress"],setup:function(o,e){var t,n,i,a,r,x,Z,P,S=e.emit,X=e.slots,Y=l({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),C=c(),I=s(),z=s(),H=s(!1),j=s(!1),R=0,W=u((function(){var o=Y.scale,e=Y.moveX,t=Y.moveY,n=Y.moving,i=Y.zooming,a=Y.initializing,r={transitionDuration:i||n||a?"0s":".3s"};return(1!==o||j.value)&&(r.transform="matrix(".concat(o,", 0, 0, ").concat(o,", ").concat(e,", ").concat(t,")")),r})),A=u((function(){if(Y.imageRatio){var e=o.rootWidth,t=o.rootHeight,n=H.value?t/Y.imageRatio:e;return Math.max(0,(Y.scale*n-e)/2)}return 0})),D=u((function(){if(Y.imageRatio){var e=o.rootWidth,t=o.rootHeight,n=H.value?t:e*Y.imageRatio;return Math.max(0,(Y.scale*n-t)/2)}return 0})),O=function(e,t){var n;if((e=d(e,+o.minZoom,+o.maxZoom+1))!==Y.scale){var i=e/Y.scale;if(Y.scale=e,t){var a=y(null==(n=I.value)?void 0:n.$el),r={x:.5*a.width,y:.5*a.height},l=Y.moveX-(t.x-a.left-r.x)*(i-1),c=Y.moveY-(t.y-a.top-r.y)*(i-1);Y.moveX=d(l,-A.value,A.value),Y.moveY=d(c,-D.value,D.value)}else Y.moveX=0,Y.moveY=j.value?R:0;S("scale",{scale:e,index:o.active})}},T=function(){O(1)},B=!1,M=function(e){var l=e.touches;if(2!==(t=l.length)||!o.disableZoom){var c=C.offsetX;C.start(e),n=Y.moveX,i=Y.moveY,P=Date.now(),B=!1,Y.moving=1===t&&(1!==Y.scale||j.value),Y.zooming=2===t&&!c.value,Y.zooming&&(a=Y.scale,r=U(l))}},N=function(){if(!(t>1)){var o,e=C.offsetX,n=C.offsetY,i=Date.now()-P;e.value<w&&n.value<w&&(i<250?Z?(clearTimeout(Z),Z=null,o=Y.scale>1?1:2,O(o,2===o||j.value?{x:C.startX.value,y:C.startY.value}:void 0)):Z=setTimeout((function(){S("close"),Z=null}),250):i>b&&S("longPress"))}},q=function(e){var t=!1;if((Y.moving||Y.zooming)&&(t=!0,Y.moving&&n===Y.moveX&&i===Y.moveY&&(t=!1),!e.touches.length)){Y.zooming&&(Y.moveX=d(Y.moveX,-A.value,A.value),Y.moveY=d(Y.moveY,-D.value,D.value),Y.zooming=!1),Y.moving=!1,n=0,i=0,a=1,Y.scale<1&&T();var r=+o.maxZoom;Y.scale>r&&O(r,x)}g(e,t),N(),C.reset()},k=function(){var e=o.rootWidth,t=o.rootHeight,n=t/e,i=Y.imageRatio;H.value=Y.imageRatio>n&&i<2.6,j.value=Y.imageRatio>n&&i>=2.6,j.value&&(R=(i*e-t)/2,Y.moveY=R,Y.initializing=!0,h((function(){Y.initializing=!1}))),T()},F=function(o){var e=o.target,t=e.naturalWidth,n=e.naturalHeight;Y.imageRatio=n/t,k()};return v((function(){return o.active}),T),v((function(){return o.show}),(function(o){o||T()})),v((function(){return[o.rootWidth,o.rootHeight]}),k),m("touchmove",(function(o){var e=o.touches;if(C.move(o),Y.moving){var t=C.deltaX,l=C.deltaY,c=t.value+n,s=l.value+i;if((c>A.value||c<-A.value)&&!B&&C.isHorizontal())return void(Y.moving=!1);B=!0,g(o,!0),Y.moveX=d(c,-A.value,A.value),Y.moveY=d(s,-D.value,D.value)}if(Y.zooming&&(g(o,!0),2===e.length)){var u=U(e),v=a*u/r;x=function(o){return{x:(o[0].clientX+o[1].clientX)/2,y:(o[0].clientY+o[1].clientY)/2}}(e),O(v,x)}}),{target:u((function(){var o;return null==(o=z.value)?void 0:o.$el}))}),function(){var e={loading:function(){return f(p,{type:"spinner"},null)}};return f($,{ref:z,class:L("swipe-item"),onTouchstartPassive:M,onTouchend:q,onTouchcancel:q},{default:function(){return[X.image?f("div",{class:L("image-wrap")},[X.image({src:o.src})]):f(E,{ref:I,src:o.src,fit:"contain",class:L("image",{vertical:H.value}),style:W.value,onLoad:F},e)]}})}}}),F=o(n("image-preview"),2),G=F[0],J=F[1],K=["show","teleport","transition","overlayStyle","closeOnPopstate"],Q={show:Boolean,loop:z,images:H(),minZoom:j(1/3),maxZoom:j(3),overlay:z,closeable:Boolean,showIndex:z,className:R,closeIcon:W("clear"),transition:String,beforeClose:Function,overlayClass:R,overlayStyle:Object,swipeDuration:j(300),startPosition:j(0),showIndicators:Boolean,closeOnPopstate:z,closeIconPosition:W("top-right"),teleport:[String,Object]},V=i({name:G,props:Q,emits:["scale","close","closed","change","longPress","update:show"],setup:function(o,e){var t=e.emit,n=e.slots,i=s(),a=l({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),r=function(){if(i.value){var o=y(i.value.$el);a.rootWidth=o.width,a.rootHeight=o.height,i.value.resize()}},c=function(o){return t("scale",o)},u=function(o){return t("update:show",o)},m=function(){O(o.beforeClose,{args:[a.active],done:function(){return u(!1)}})},g=function(o){o!==a.active&&(a.active=o,t("change",o))},d=function(){if(o.showIndex)return f("div",{class:J("index")},[n.index?n.index({index:a.active}):"".concat(a.active+1," / ").concat(o.images.length)])},h=function(){if(n.cover)return f("div",{class:J("cover")},[n.cover()])},p=function(){a.disableZoom=!0},w=function(){a.disableZoom=!1},b=function(){if(o.closeable)return f(D,{role:"button",name:o.closeIcon,class:[J("close-icon",o.closeIconPosition),A],onClick:m},null)},z=function(){return t("closed")},H=function(o,e){var t;return null==(t=i.value)?void 0:t.swipeTo(o,e)};return x({swipeTo:H}),Z(r),v([P,S],r),v((function(){return o.startPosition}),(function(o){return g(+o)})),v((function(){return o.show}),(function(e){var n=o.images,i=o.startPosition;e?(g(+i),X((function(){r(),H(+i,{immediate:!0})}))):t("close",{index:a.active,url:n[a.active]})})),function(){return f(I,Y({class:[J(),o.className],overlayClass:[J("overlay"),o.overlayClass],onClosed:z,"onUpdate:show":u},C(o,K)),{default:function(){return[b(),f(q,{ref:i,lazyRender:!0,loop:o.loop,class:J("swipe"),duration:o.swipeDuration,initialSwipe:o.startPosition,showIndicators:o.showIndicators,indicatorColor:"white",onChange:g,onDragEnd:w,onDragStart:p},{default:function(){return[o.images.map((function(e,i){return f(k,{src:e,show:o.show,active:a.active,maxZoom:o.maxZoom,minZoom:o.minZoom,rootWidth:a.rootWidth,rootHeight:a.rootHeight,disableZoom:a.disableZoom,onScale:c,onClose:m,onLongPress:function(){return t("longPress",{index:i})}},{image:n.image})}))]}}),d(),h()]}})}}}),_={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"};e("s",(function(o){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(T)return t||(e=M({setup:function(){var o=N(),e=o.state,t=o.toggle,n=function(){e.images=[]};return function(){return f(V,Y(e,{onClosed:n,"onUpdate:show":t}),null)}}}),t=e.instance),o=Array.isArray(o)?{images:o,startPosition:n}:o,t.open(B({},_,o)),t}))}}}))}();
